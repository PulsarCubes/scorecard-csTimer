var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,e){if(b){c=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var f=a[e];f in c||(c[f]={});c=c[f]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,c,e){var b=this.length||0;0>c&&(c=Math.max(0,b+c));if(null==e||e>b)e=b;e=Number(e);0>e&&(e=Math.max(0,b+e));for(c=Number(c||0);c<e;c++)this[c]=a;return this}},"es6","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";for(var f=b.length,g=a.length,d=Math.max(0,Math.min(c|0,b.length)),h=0;h<g&&d<f;)if(b[d++]!=a[h++])return!1;return h>=g}},"es6","es3");$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var e=a.length,f=0;f<e;f++){var g=a[f];if(b.call(c,g,f,a))return{i:f,v:g}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");var THREE=THREE||{};window.Int32Array||(window.Int32Array=Array,window.Float32Array=Array);THREE.Color=function(a){this.setHex(a)};
THREE.Color.prototype={copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;this.hex=a.hex},setHex:function(a){this.hex=~~a&16777215;this.updateRGB()},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;this.updateHex()},setHSV:function(a,b,c){var e,f;if(0==c)var g=e=f=0;else{var d=Math.floor(6*a);var h=6*a-d;a=c*(1-b);var k=c*(1-b*h);b=c*(1-b*(1-h));switch(d){case 1:g=k;e=c;f=a;break;case 2:g=a;e=c;f=b;break;case 3:g=a;e=k;f=c;break;case 4:g=b;e=a;f=c;break;case 5:g=c;e=a;f=k;break;case 6:case 0:g=c,
e=b,f=a}}this.setRGB(g,e,f)},updateHex:function(){this.hex=~~(255*this.r)<<16^~~(255*this.g)<<8^~~(255*this.b)},updateRGB:function(){this.r=(this.hex>>16&255)/255;this.g=(this.hex>>8&255)/255;this.b=(this.hex&255)/255},clone:function(){return new THREE.Color(this.hex)}};THREE.Vector2=function(a,b){this.set(a||0,b||0)};
THREE.Vector2.prototype={set:function(a,b){this.x=a;this.y=b;return this},copy:function(a){this.x=a.x;this.y=a.y;return this},clone:function(){return new THREE.Vector2(this.x,this.y)},add:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addSelf:function(a){this.x+=a.x;this.y+=a.y;return this},sub:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},subSelf:function(a){this.x-=a.x;this.y-=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divideScalar:function(a){a?
(this.x/=a,this.y/=a):this.set(0,0);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.normalize().multiplyScalar(a)},unit:function(){return this.normalize()}};THREE.Vector3=function(a,b,c){this.set(a||0,b||0,c||0)};
THREE.Vector3.prototype={set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)},add:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addSelf:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},sub:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},subSelf:function(a){this.x-=
a.x;this.y-=a.y;this.z-=a.z;return this},multiply:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},multiplySelf:function(a){this.x*=a.x;this.y*=a.y;this.z*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},divideSelf:function(a){return this.divide(this,a)},divideScalar:function(a){a?(this.x/=a,this.y/=a,this.z/=a):this.set(0,0,0);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*
a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.lengthSq())},lengthManhattan:function(){return this.x+this.y+this.z},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.normalize().multiplyScalar(a)},cross:function(a,b){this.x=a.y*b.z-a.z*b.y;this.y=a.z*b.x-a.x*b.z;this.z=a.x*b.y-a.y*b.x;return this},crossSelf:function(a){return this.set(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*
a.y-this.y*a.x)},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){return(new THREE.Vector3).sub(this,a).lengthSq()},setPositionFromMatrix:function(a){this.x=a.n14;this.y=a.n24;this.z=a.n34},setRotationFromMatrix:function(a){var b=Math.cos(this.y);this.y=Math.asin(a.n13);1E-5<Math.abs(b)?(this.x=Math.atan2(-a.n23/b,a.n33/b),this.z=Math.atan2(-a.n12/b,a.n11/b)):(this.x=0,this.z=Math.atan2(a.n21,a.n22))},isZero:function(){return 1E-4>this.lengthSq()}};
THREE.Vector4=function(a,b,c,e){this.set(a||0,b||0,c||0,e||1)};
THREE.Vector4.prototype={set:function(a,b,c,e){this.x=a;this.y=b;this.z=c;this.w=e;return this},copy:function(a){return this.set(a.x,a.y,a.z,a.w||1)},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)},add:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addSelf:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},sub:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},subSelf:function(a){this.x-=
a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},divideScalar:function(a){a?(this.x/=a,this.y/=a,this.z/=a,this.w/=a):this.set(0,0,0,1);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.dot(this)},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScalar(this.length())},
setLength:function(a){return this.normalize().multiplyScalar(a)},lerpSelf:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this}};THREE.Ray=function(a,b){this.origin=a||new THREE.Vector3;this.direction=b||new THREE.Vector3};
THREE.Ray.prototype={intersectScene:function(a){return this.intersectObjects(a.objects)},intersectObjects:function(a){var b,c=[];var e=0;for(b=a.length;e<b;e++)c=c.concat(this.intersectObject(a[e]));c.sort(function(a,b){return a.distance-b.distance});return c},intersectObject:function(a){function b(a,b,c){var e=c.position.clone().subSelf(a).dot(b);if(0>e)return!1;a=a.clone().addSelf(b.clone().multiplyScalar(e));return c.position.distanceTo(a)}function c(a,b,c,e){e=e.clone().subSelf(b);c=c.clone().subSelf(b);
var f=a.clone().subSelf(b);a=e.dot(e);b=e.dot(c);e=e.dot(f);var d=c.dot(c);c=c.dot(f);f=1/(a*d-b*b);d=(d*e-b*c)*f;a=(a*c-b*e)*f;return 0<d&&0<a&&1>d+a}if(a instanceof THREE.Particle){var e=b(this.origin,this.direction,a);return!e||e>a.scale.x?[]:[{distance:e,point:a.position,face:null,object:a}]}if(a instanceof THREE.Mesh){e=b(this.origin,this.direction,a);if(!e||e>a.geometry.boundingSphere.radius*Math.max(a.scale.x,Math.max(a.scale.y,a.scale.z)))return[];var f,g=a.geometry,d=g.vertices,h=[];e=0;
for(f=g.faces.length;e<f;e++){var k=g.faces[e];var n=this.origin.clone();var m=this.direction.clone();var q=a.matrixWorld;var l=q.multiplyVector3(d[k.a].position.clone());var r=q.multiplyVector3(d[k.b].position.clone());var p=q.multiplyVector3(d[k.c].position.clone());q=k instanceof THREE.Face4?q.multiplyVector3(d[k.d].position.clone()):null;var t=a.matrixRotationWorld.multiplyVector3(k.normal.clone());var v=m.dot(t);if(a.doubleSided||(a.flipSided?0<v:0>v))t=t.dot((new THREE.Vector3).sub(l,n))/v,
n=n.addSelf(m.multiplyScalar(t)),k instanceof THREE.Face3?c(n,l,r,p)&&(k={distance:this.origin.distanceTo(n),point:n,face:k,object:a},h.push(k)):k instanceof THREE.Face4&&(c(n,l,r,q)||c(n,r,p,q))&&(k={distance:this.origin.distanceTo(n),point:n,face:k,object:a},h.push(k))}return h}return[]}};
THREE.Rectangle=function(){function a(){g=e-b;d=f-c}var b,c,e,f,g,d,h=!0;this.getX=function(){return b};this.getY=function(){return c};this.getWidth=function(){return g};this.getHeight=function(){return d};this.getLeft=function(){return b};this.getTop=function(){return c};this.getRight=function(){return e};this.getBottom=function(){return f};this.set=function(d,g,m,q){h=!1;b=d;c=g;e=m;f=q;a()};this.addPoint=function(d,g){h?(h=!1,b=d,c=g,e=d,f=g):(b=b<d?b:d,c=c<g?c:g,e=e>d?e:d,f=f>g?f:g);a()};this.add3Points=
function(d,g,m,q,l,r){h?(h=!1,b=d<m?d<l?d:l:m<l?m:l,c=g<q?g<r?g:r:q<r?q:r,e=d>m?d>l?d:l:m>l?m:l,f=g>q?g>r?g:r:q>r?q:r):(b=d<m?d<l?d<b?d:b:l<b?l:b:m<l?m<b?m:b:l<b?l:b,c=g<q?g<r?g<c?g:c:r<c?r:c:q<r?q<c?q:c:r<c?r:c,e=d>m?d>l?d>e?d:e:l>e?l:e:m>l?m>e?m:e:l>e?l:e,f=g>q?g>r?g>f?g:f:r>f?r:f:q>r?q>f?q:f:r>f?r:f);a()};this.addRectangle=function(d){h?(h=!1,b=d.getLeft(),c=d.getTop(),e=d.getRight(),f=d.getBottom()):(b=b<d.getLeft()?b:d.getLeft(),c=c<d.getTop()?c:d.getTop(),e=e>d.getRight()?e:d.getRight(),f=f>
d.getBottom()?f:d.getBottom());a()};this.inflate=function(d){b-=d;c-=d;e+=d;f+=d;a()};this.minSelf=function(d){b=b>d.getLeft()?b:d.getLeft();c=c>d.getTop()?c:d.getTop();e=e<d.getRight()?e:d.getRight();f=f<d.getBottom()?f:d.getBottom();a()};this.instersects=function(a){return 0<=Math.min(e,a.getRight())-Math.max(b,a.getLeft())&&0<=Math.min(f,a.getBottom())-Math.max(c,a.getTop())};this.empty=function(){h=!0;f=e=c=b=0;a()};this.isEmpty=function(){return h}};THREE.Matrix3=function(){this.m=[]};
THREE.Matrix3.prototype={transpose:function(){var a=this.m;var b=a[1];a[1]=a[3];a[3]=b;b=a[2];a[2]=a[6];a[6]=b;b=a[5];a[5]=a[7];a[7]=b;return this},transposeIntoArray:function(a){var b=this.m;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this}};THREE.Matrix4=function(a,b,c,e,f,g,d,h,k,n,m,q,l,r,p,t){this.set(a||1,b||0,c||0,e||0,f||0,g||1,d||0,h||0,k||0,n||0,m||1,q||0,l||0,r||0,p||0,t||1);this.flat=Array(16);this.m33=new THREE.Matrix3};
THREE.Matrix4.prototype={set:function(a,b,c,e,f,g,d,h,k,n,m,q,l,r,p,t){this.n11=a;this.n12=b;this.n13=c;this.n14=e;this.n21=f;this.n22=g;this.n23=d;this.n24=h;this.n31=k;this.n32=n;this.n33=m;this.n34=q;this.n41=l;this.n42=r;this.n43=p;this.n44=t;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){this.set(a.n11,a.n12,a.n13,a.n14,a.n21,a.n22,a.n23,a.n24,a.n31,a.n32,a.n33,a.n34,a.n41,a.n42,a.n43,a.n44);return this},lookAt:function(a,b,c){var e=THREE.Matrix4.__v1,
f=THREE.Matrix4.__v2,g=THREE.Matrix4.__v3;g.sub(a,b).normalize();0===g.length()&&(g.z=1);e.cross(c,g).normalize();0===e.length()&&(g.x+=1E-4,e.cross(c,g).normalize());f.cross(g,e).normalize();this.n11=e.x;this.n12=f.x;this.n13=g.x;this.n21=e.y;this.n22=f.y;this.n23=g.y;this.n31=e.z;this.n32=f.z;this.n33=g.z;return this},multiplyVector3:function(a){var b=a.x,c=a.y,e=a.z,f=1/(this.n41*b+this.n42*c+this.n43*e+this.n44);a.x=(this.n11*b+this.n12*c+this.n13*e+this.n14)*f;a.y=(this.n21*b+this.n22*c+this.n23*
e+this.n24)*f;a.z=(this.n31*b+this.n32*c+this.n33*e+this.n34)*f;return a},multiplyVector4:function(a){var b=a.x,c=a.y,e=a.z,f=a.w;a.x=this.n11*b+this.n12*c+this.n13*e+this.n14*f;a.y=this.n21*b+this.n22*c+this.n23*e+this.n24*f;a.z=this.n31*b+this.n32*c+this.n33*e+this.n34*f;a.w=this.n41*b+this.n42*c+this.n43*e+this.n44*f;return a},rotateAxis:function(a){var b=a.x,c=a.y,e=a.z;a.x=b*this.n11+c*this.n12+e*this.n13;a.y=b*this.n21+c*this.n22+e*this.n23;a.z=b*this.n31+c*this.n32+e*this.n33;a.normalize();
return a},crossVector:function(a){var b=new THREE.Vector4;b.x=this.n11*a.x+this.n12*a.y+this.n13*a.z+this.n14*a.w;b.y=this.n21*a.x+this.n22*a.y+this.n23*a.z+this.n24*a.w;b.z=this.n31*a.x+this.n32*a.y+this.n33*a.z+this.n34*a.w;b.w=a.w?this.n41*a.x+this.n42*a.y+this.n43*a.z+this.n44*a.w:1;return b},multiply:function(a,b){var c=a.n11,e=a.n12,f=a.n13,g=a.n14,d=a.n21,h=a.n22,k=a.n23,n=a.n24,m=a.n31,q=a.n32,l=a.n33,r=a.n34,p=a.n41,t=a.n42,v=a.n43,y=a.n44,M=b.n11,K=b.n12,F=b.n13,N=b.n14,x=b.n21,E=b.n22,
u=b.n23,C=b.n24,D=b.n31,z=b.n32,H=b.n33,T=b.n34;this.n11=c*M+e*x+f*D;this.n12=c*K+e*E+f*z;this.n13=c*F+e*u+f*H;this.n14=c*N+e*C+f*T+g;this.n21=d*M+h*x+k*D;this.n22=d*K+h*E+k*z;this.n23=d*F+h*u+k*H;this.n24=d*N+h*C+k*T+n;this.n31=m*M+q*x+l*D;this.n32=m*K+q*E+l*z;this.n33=m*F+q*u+l*H;this.n34=m*N+q*C+l*T+r;this.n41=p*M+t*x+v*D;this.n42=p*K+t*E+v*z;this.n43=p*F+t*u+v*H;this.n44=p*N+t*C+v*T+y;return this},multiplyToArray:function(a,b,c){this.multiply(a,b);c[0]=this.n11;c[1]=this.n21;c[2]=this.n31;c[3]=
this.n41;c[4]=this.n12;c[5]=this.n22;c[6]=this.n32;c[7]=this.n42;c[8]=this.n13;c[9]=this.n23;c[10]=this.n33;c[11]=this.n43;c[12]=this.n14;c[13]=this.n24;c[14]=this.n34;c[15]=this.n44;return this},multiplySelf:function(a){this.multiply(this,a);return this},multiplyScalar:function(a){this.n11*=a;this.n12*=a;this.n13*=a;this.n14*=a;this.n21*=a;this.n22*=a;this.n23*=a;this.n24*=a;this.n31*=a;this.n32*=a;this.n33*=a;this.n34*=a;this.n41*=a;this.n42*=a;this.n43*=a;this.n44*=a;return this},determinant:function(){var a=
this.n11,b=this.n12,c=this.n13,e=this.n14,f=this.n21,g=this.n22,d=this.n23,h=this.n24,k=this.n31,n=this.n32,m=this.n33,q=this.n34,l=this.n41,r=this.n42,p=this.n43,t=this.n44;return e*d*n*l-c*h*n*l-e*g*m*l+b*h*m*l+c*g*q*l-b*d*q*l-e*d*k*r+c*h*k*r+e*f*m*r-a*h*m*r-c*f*q*r+a*d*q*r+e*g*k*p-b*h*k*p-e*f*n*p+a*h*n*p+b*f*q*p-a*g*q*p-c*g*k*t+b*d*k*t+c*f*n*t-a*d*n*t-b*f*m*t+a*g*m*t},transpose:function(){var a=this.n21;this.n21=this.n12;this.n12=a;a=this.n31;this.n31=this.n13;this.n13=a;a=this.n32;this.n32=this.n23;
this.n23=a;a=this.n41;this.n41=this.n14;this.n14=a;a=this.n42;this.n42=this.n24;this.n24=a;this.n43=a=this.n43;return this},clone:function(){var a=new THREE.Matrix4;a.n11=this.n11;a.n12=this.n12;a.n13=this.n13;a.n14=this.n14;a.n21=this.n21;a.n22=this.n22;a.n23=this.n23;a.n24=this.n24;a.n31=this.n31;a.n32=this.n32;a.n33=this.n33;a.n34=this.n34;a.n41=this.n41;a.n42=this.n42;a.n43=this.n43;a.n44=this.n44;return a},flatten:function(){this.flat[0]=this.n11;this.flat[1]=this.n21;this.flat[2]=this.n31;this.flat[3]=
this.n41;this.flat[4]=this.n12;this.flat[5]=this.n22;this.flat[6]=this.n32;this.flat[7]=this.n42;this.flat[8]=this.n13;this.flat[9]=this.n23;this.flat[10]=this.n33;this.flat[11]=this.n43;this.flat[12]=this.n14;this.flat[13]=this.n24;this.flat[14]=this.n34;this.flat[15]=this.n44;return this.flat},flattenToArray:function(a){a[0]=this.n11;a[1]=this.n21;a[2]=this.n31;a[3]=this.n41;a[4]=this.n12;a[5]=this.n22;a[6]=this.n32;a[7]=this.n42;a[8]=this.n13;a[9]=this.n23;a[10]=this.n33;a[11]=this.n43;a[12]=this.n14;
a[13]=this.n24;a[14]=this.n34;a[15]=this.n44;return a},flattenToArrayOffset:function(a,b){a[b]=this.n11;a[b+1]=this.n21;a[b+2]=this.n31;a[b+3]=this.n41;a[b+4]=this.n12;a[b+5]=this.n22;a[b+6]=this.n32;a[b+7]=this.n42;a[b+8]=this.n13;a[b+9]=this.n23;a[b+10]=this.n33;a[b+11]=this.n43;a[b+12]=this.n14;a[b+13]=this.n24;a[b+14]=this.n34;a[b+15]=this.n44;return a},setTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},setScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,
0,0,0,0,1);return this},setRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},setRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},setRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},setRotationAxis:function(a,b){var c=Math.cos(b),e=Math.sin(b),f=1-c,g=a.x,d=a.y,h=a.z,k=f*g,n=f*d;this.set(k*g+c,k*d-e*h,k*h+e*d,0,k*d+e*h,
n*d+c,n*h-e*g,0,k*h-e*d,n*h+e*g,f*h*h+c,0,0,0,0,1);return this},setPosition:function(a){this.n14=a.x;this.n24=a.y;this.n34=a.z;return this},getPosition:function(){this.position||(this.position=new THREE.Vector3);this.position.set(this.n14,this.n24,this.n34);return this.position},getColumnX:function(){this.columnX||(this.columnX=new THREE.Vector3);this.columnX.set(this.n11,this.n21,this.n31);return this.columnX},getColumnY:function(){this.columnY||(this.columnY=new THREE.Vector3);this.columnY.set(this.n12,
this.n22,this.n32);return this.columnY},getColumnZ:function(){this.columnZ||(this.columnZ=new THREE.Vector3);this.columnZ.set(this.n13,this.n23,this.n33);return this.columnZ},setRotationFromEuler:function(a){var b=a.x,c=a.y,e=a.z;a=Math.cos(b);b=Math.sin(b);var f=Math.cos(c);c=Math.sin(c);var g=Math.cos(e);e=Math.sin(e);var d=a*c,h=b*c;this.n11=f*g;this.n12=-f*e;this.n13=c;this.n21=h*g+a*e;this.n22=-h*e+a*g;this.n23=-b*f;this.n31=-d*g+b*e;this.n32=d*e+b*g;this.n33=a*f;return this},setRotationFromQuaternion:function(a){var b=
a.x,c=a.y,e=a.z,f=a.w,g=b+b,d=c+c,h=e+e;a=b*g;var k=b*d;b*=h;var n=c*d;c*=h;e*=h;g*=f;d*=f;f*=h;this.n11=1-(n+e);this.n12=k-f;this.n13=b+d;this.n21=k+f;this.n22=1-(a+e);this.n23=c-g;this.n31=b-d;this.n32=c+g;this.n33=1-(a+n);return this},scale:function(a){var b=a.x,c=a.y;a=a.z;this.n11*=b;this.n12*=c;this.n13*=a;this.n21*=b;this.n22*=c;this.n23*=a;this.n31*=b;this.n32*=c;this.n33*=a;this.n41*=b;this.n42*=c;this.n43*=a;return this},extractPosition:function(a){this.n14=a.n14;this.n24=a.n24;this.n34=
a.n34},extractRotation:function(a,b){var c=1/b.x,e=1/b.y,f=1/b.z;this.n11=a.n11*c;this.n21=a.n21*c;this.n31=a.n31*c;this.n12=a.n12*e;this.n22=a.n22*e;this.n32=a.n32*e;this.n13=a.n13*f;this.n23=a.n23*f;this.n33=a.n33*f}};
THREE.Matrix4.makeInvert=function(a,b){var c=a.n11,e=a.n12,f=a.n13,g=a.n14,d=a.n21,h=a.n22,k=a.n23,n=a.n24,m=a.n31,q=a.n32,l=a.n33,r=a.n34,p=a.n41,t=a.n42,v=a.n43,y=a.n44;void 0===b&&(b=new THREE.Matrix4);b.n11=k*r*t-n*l*t+n*q*v-h*r*v-k*q*y+h*l*y;b.n12=g*l*t-f*r*t-g*q*v+e*r*v+f*q*y-e*l*y;b.n13=f*n*t-g*k*t+g*h*v-e*n*v-f*h*y+e*k*y;b.n14=g*k*q-f*n*q-g*h*l+e*n*l+f*h*r-e*k*r;b.n21=n*l*p-k*r*p-n*m*v+d*r*v+k*m*y-d*l*y;b.n22=f*r*p-g*l*p+g*m*v-c*r*v-f*m*y+c*l*y;b.n23=g*k*p-f*n*p-g*d*v+c*n*v+f*d*y-c*k*y;b.n24=
f*n*m-g*k*m+g*d*l-c*n*l-f*d*r+c*k*r;b.n31=h*r*p-n*q*p+n*m*t-d*r*t-h*m*y+d*q*y;b.n32=g*q*p-e*r*p-g*m*t+c*r*t+e*m*y-c*q*y;b.n33=f*n*p-g*h*p+g*d*t-c*n*t-e*d*y+c*h*y;b.n34=g*h*m-e*n*m-g*d*q+c*n*q+e*d*r-c*h*r;b.n41=k*q*p-h*l*p-k*m*t+d*l*t+h*m*v-d*q*v;b.n42=e*l*p-f*q*p+f*m*t-c*l*t-e*m*v+c*q*v;b.n43=f*h*p-e*k*p-f*d*t+c*k*t+e*d*v-c*h*v;b.n44=e*k*m-f*h*m+f*d*q-c*k*q-e*d*l+c*h*l;b.multiplyScalar(1/a.determinant());return b};
THREE.Matrix4.makeInvert3x3=function(a){var b=a.m33,c=b.m,e=a.n33*a.n22-a.n32*a.n23,f=-a.n33*a.n21+a.n31*a.n23,g=a.n32*a.n21-a.n31*a.n22,d=-a.n33*a.n12+a.n32*a.n13,h=a.n33*a.n11-a.n31*a.n13,k=-a.n32*a.n11+a.n31*a.n12,n=a.n23*a.n12-a.n22*a.n13,m=-a.n23*a.n11+a.n21*a.n13,q=a.n22*a.n11-a.n21*a.n12;a=a.n11*e+a.n21*d+a.n31*n;0==a&&console.error("THREE.Matrix4.makeInvert3x3: Matrix not invertible.");a=1/a;c[0]=a*e;c[1]=a*f;c[2]=a*g;c[3]=a*d;c[4]=a*h;c[5]=a*k;c[6]=a*n;c[7]=a*m;c[8]=a*q;return b};
THREE.Matrix4.makeFrustum=function(a,b,c,e,f,g){var d=new THREE.Matrix4;d.n11=2*f/(b-a);d.n12=0;d.n13=(b+a)/(b-a);d.n14=0;d.n21=0;d.n22=2*f/(e-c);d.n23=(e+c)/(e-c);d.n24=0;d.n31=0;d.n32=0;d.n33=-(g+f)/(g-f);d.n34=-2*g*f/(g-f);d.n41=0;d.n42=0;d.n43=-1;d.n44=0;return d};THREE.Matrix4.makePerspective=function(a,b,c,e){a=c*Math.tan(a*Math.PI/360);var f=-a;return THREE.Matrix4.makeFrustum(f*b,a*b,f,a,c,e)};
THREE.Matrix4.makeOrtho=function(a,b,c,e,f,g){var d=new THREE.Matrix4;var h=b-a;var k=c-e;var n=g-f;d.n11=2/h;d.n12=0;d.n13=0;d.n14=-((b+a)/h);d.n21=0;d.n22=2/k;d.n23=0;d.n24=-((c+e)/k);d.n31=0;d.n32=0;d.n33=-2/n;d.n34=-((g+f)/n);d.n41=0;d.n42=0;d.n43=0;d.n44=1;return d};THREE.Matrix4.__v1=new THREE.Vector3;THREE.Matrix4.__v2=new THREE.Vector3;THREE.Matrix4.__v3=new THREE.Vector3;
THREE.Object3D=function(){this.parent=void 0;this.children=[];this.up=new THREE.Vector3(0,1,0);this.position=new THREE.Vector3;this.rotation=new THREE.Vector3;this.scale=new THREE.Vector3(1,1,1);this.dynamic=!1;this.rotationAutoUpdate=!0;this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;this.matrixRotationWorld=new THREE.Matrix4;this.matrixWorldNeedsUpdate=this.matrixAutoUpdate=!0;this.quaternion=new THREE.Quaternion;this.useQuaternion=!1;this.boundRadius=0;this.boundRadiusScale=1;
this.visible=!0;this._vector=new THREE.Vector3;this.name=""};
THREE.Object3D.prototype={translate:function(a,b){this.matrix.rotateAxis(b);this.position.addSelf(b.multiplyScalar(a))},translateX:function(a){this.translate(a,this._vector.set(1,0,0))},translateY:function(a){this.translate(a,this._vector.set(0,1,0))},translateZ:function(a){this.translate(a,this._vector.set(0,0,1))},lookAt:function(a){this.matrix.lookAt(a,this.position,this.up);this.rotationAutoUpdate&&this.rotation.setRotationFromMatrix(this.matrix)},addChild:function(a){if(-1===this.children.indexOf(a)){void 0!==
a.parent&&a.parent.removeChild(a);a.parent=this;this.children.push(a);for(var b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.addChildRecurse(a)}},removeChild:function(a){var b=this.children.indexOf(a);-1!==b&&(a.parent=void 0,this.children.splice(b,1))},getChildByName:function(a,b){var c;var e=0;for(c=this.children.length;e<c;e++){var f=this.children[e];if(f.name===a||b&&(f=f.getChildByName(a,b),void 0!==f))return f}},updateMatrix:function(){this.matrix.setPosition(this.position);
this.useQuaternion?this.matrix.setRotationFromQuaternion(this.quaternion):this.matrix.setRotationFromEuler(this.rotation);if(1!==this.scale.x||1!==this.scale.y||1!==this.scale.z)this.matrix.scale(this.scale),this.boundRadiusScale=Math.max(this.scale.x,Math.max(this.scale.y,this.scale.z));this.matrixWorldNeedsUpdate=!0},update:function(a,b,c){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||b)a?this.matrixWorld.multiply(a,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixRotationWorld.extractRotation(this.matrixWorld,
this.scale),this.matrixWorldNeedsUpdate=!1,b=!0;a=0;for(var e=this.children.length;a<e;a++)this.children[a].update(this.matrixWorld,b,c)}};THREE.Quaternion=function(a,b,c,e){this.set(a||0,b||0,c||0,void 0!==e?e:1)};
THREE.Quaternion.prototype={set:function(a,b,c,e){this.x=a;this.y=b;this.z=c;this.w=e;return this},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this},setFromEuler:function(a){var b=.5*Math.PI/360,c=a.x*b,e=a.y*b,f=a.z*b;a=Math.cos(e);e=Math.sin(e);b=Math.cos(-f);f=Math.sin(-f);var g=Math.cos(c);c=Math.sin(c);var d=a*b,h=e*f;this.w=d*g-h*c;this.x=d*c+h*g;this.y=e*b*g+a*f*c;this.z=a*f*g-e*b*c;return this},setFromAxisAngle:function(a,b){var c=b/2,e=Math.sin(c);this.x=a.x*e;this.y=
a.y*e;this.z=a.z*e;this.w=Math.cos(c);return this},calculateW:function(){this.w=-Math.sqrt(Math.abs(1-this.x*this.x-this.y*this.y-this.z*this.z));return this},inverse:function(){this.x*=-1;this.y*=-1;this.z*=-1;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0==a?this.w=this.z=this.y=this.x=0:(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a);return this},
multiplySelf:function(a){var b=this.x,c=this.y,e=this.z,f=this.w,g=a.x,d=a.y,h=a.z;a=a.w;this.x=b*a+f*g+c*h-e*d;this.y=c*a+f*d+e*g-b*h;this.z=e*a+f*h+b*d-c*g;this.w=f*a-b*g-c*d-e*h;return this},multiply:function(a,b){this.x=a.x*b.w+a.y*b.z-a.z*b.y+a.w*b.x;this.y=-a.x*b.z+a.y*b.w+a.z*b.x+a.w*b.y;this.z=a.x*b.y-a.y*b.x+a.z*b.w+a.w*b.z;this.w=-a.x*b.x-a.y*b.y-a.z*b.z+a.w*b.w;return this},multiplyVector3:function(a,b){b||(b=a);var c=a.x,e=a.y,f=a.z,g=this.x,d=this.y,h=this.z,k=this.w,n=k*c+d*f-h*e,m=
k*e+h*c-g*f,q=k*f+g*e-d*c;c=-g*c-d*e-h*f;b.x=n*k+c*-g+m*-h-q*-d;b.y=m*k+c*-d+q*-g-n*-h;b.z=q*k+c*-h+n*-d-m*-g;return b}};THREE.Quaternion.slerp=function(a,b,c,e){var f=a.w*b.w+a.x*b.x+a.y*b.y+a.z*b.z;if(1<=Math.abs(f))return c.w=a.w,c.x=a.x,c.y=a.y,c.z=a.z,c;var g=Math.acos(f),d=Math.sqrt(1-f*f);if(.001>Math.abs(d))return c.w=.5*(a.w+b.w),c.x=.5*(a.x+b.x),c.y=.5*(a.y+b.y),c.z=.5*(a.z+b.z),c;f=Math.sin((1-e)*g)/d;e=Math.sin(e*g)/d;c.w=a.w*f+b.w*e;c.x=a.x*f+b.x*e;c.y=a.y*f+b.y*e;c.z=a.z*f+b.z*e;return c};
THREE.Vertex=function(a){this.position=a||new THREE.Vector3};THREE.Face3=function(a,b,c,e,f,g){this.a=a;this.b=b;this.c=c;this.normal=e instanceof THREE.Vector3?e:new THREE.Vector3;this.vertexNormals=e instanceof Array?e:[];this.color=f instanceof THREE.Color?f:new THREE.Color;this.vertexColors=f instanceof Array?f:[];this.vertexTangents=[];this.materials=g instanceof Array?g:[g];this.centroid=new THREE.Vector3};
THREE.Face4=function(a,b,c,e,f,g,d){this.a=a;this.b=b;this.c=c;this.d=e;this.normal=f instanceof THREE.Vector3?f:new THREE.Vector3;this.vertexNormals=f instanceof Array?f:[];this.color=g instanceof THREE.Color?g:new THREE.Color;this.vertexColors=g instanceof Array?g:[];this.vertexTangents=[];this.materials=d instanceof Array?d:[d];this.centroid=new THREE.Vector3};THREE.UV=function(a,b){this.set(a||0,b||0)};
THREE.UV.prototype={set:function(a,b){this.u=a;this.v=b;return this},copy:function(a){this.set(a.u,a.v);return this}};THREE.Geometry=function(){this.id="Geometry"+THREE.GeometryIdCounter++;this.vertices=[];this.colors=[];this.faces=[];this.edges=[];this.faceUvs=[[]];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.hasTangents=!1};
THREE.Geometry.prototype={computeCentroids:function(){var a;var b=0;for(a=this.faces.length;b<a;b++){var c=this.faces[b];c.centroid.set(0,0,0);c instanceof THREE.Face3?(c.centroid.addSelf(this.vertices[c.a].position),c.centroid.addSelf(this.vertices[c.b].position),c.centroid.addSelf(this.vertices[c.c].position),c.centroid.divideScalar(3)):c instanceof THREE.Face4&&(c.centroid.addSelf(this.vertices[c.a].position),c.centroid.addSelf(this.vertices[c.b].position),c.centroid.addSelf(this.vertices[c.c].position),
c.centroid.addSelf(this.vertices[c.d].position),c.centroid.divideScalar(4))}},computeFaceNormals:function(a){var b,c,e=new THREE.Vector3,f=new THREE.Vector3;var g=0;for(c=this.faces.length;g<c;g++){var d=this.faces[g];if(a&&d.vertexNormals.length){e.set(0,0,0);var h=0;for(b=d.vertexNormals.length;h<b;h++)e.addSelf(d.vertexNormals[h]);e.divideScalar(3)}else{h=this.vertices[d.a];b=this.vertices[d.b];var k=this.vertices[d.c];e.sub(k.position,b.position);f.sub(h.position,b.position);e.crossSelf(f)}e.isZero()||
e.normalize();d.normal.copy(e)}},computeVertexNormals:function(){var a;if(void 0==this.__tmpVertices){var b=this.__tmpVertices=Array(this.vertices.length);var c=0;for(a=this.vertices.length;c<a;c++)b[c]=new THREE.Vector3;c=0;for(a=this.faces.length;c<a;c++){var e=this.faces[c];e instanceof THREE.Face3?e.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3]:e instanceof THREE.Face4&&(e.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3])}}else for(b=
this.__tmpVertices,c=0,a=this.vertices.length;c<a;c++)b[c].set(0,0,0);c=0;for(a=this.faces.length;c<a;c++)e=this.faces[c],e instanceof THREE.Face3?(b[e.a].addSelf(e.normal),b[e.b].addSelf(e.normal),b[e.c].addSelf(e.normal)):e instanceof THREE.Face4&&(b[e.a].addSelf(e.normal),b[e.b].addSelf(e.normal),b[e.c].addSelf(e.normal),b[e.d].addSelf(e.normal));c=0;for(a=this.vertices.length;c<a;c++)b[c].normalize();c=0;for(a=this.faces.length;c<a;c++)e=this.faces[c],e instanceof THREE.Face3?(e.vertexNormals[0].copy(b[e.a]),
e.vertexNormals[1].copy(b[e.b]),e.vertexNormals[2].copy(b[e.c])):e instanceof THREE.Face4&&(e.vertexNormals[0].copy(b[e.a]),e.vertexNormals[1].copy(b[e.b]),e.vertexNormals[2].copy(b[e.c]),e.vertexNormals[3].copy(b[e.d]))},computeTangents:function(){function a(a,b,c,P,z,u,H){e=a.vertices[b].position;f=a.vertices[c].position;g=a.vertices[P].position;d=T[z];h=T[u];k=T[H];n=f.x-e.x;m=g.x-e.x;q=f.y-e.y;l=g.y-e.y;r=f.z-e.z;p=g.z-e.z;t=h.u-d.u;v=k.u-d.u;y=h.v-d.v;M=k.v-d.v;K=1/(t*M-v*y);x.set((M*n-y*m)*
K,(M*q-y*l)*K,(M*r-y*p)*K);E.set((t*m-v*n)*K,(t*l-v*q)*K,(t*p-v*r)*K);F[b].addSelf(x);F[c].addSelf(x);F[P].addSelf(x);N[b].addSelf(E);N[c].addSelf(E);N[P].addSelf(E)}var b,c,e,f,g,d,h,k,n,m,q,l,r,p,t,v,y,M,K,F=[],N=[],x=new THREE.Vector3,E=new THREE.Vector3,u=new THREE.Vector3,C=new THREE.Vector3,D=new THREE.Vector3;var z=0;for(b=this.vertices.length;z<b;z++)F[z]=new THREE.Vector3,N[z]=new THREE.Vector3;z=0;for(b=this.faces.length;z<b;z++){var H=this.faces[z];var T=this.faceVertexUvs[0][z];H instanceof
THREE.Face3?a(this,H.a,H.b,H.c,0,1,2):H instanceof THREE.Face4&&(a(this,H.a,H.b,H.c,0,1,2),a(this,H.a,H.b,H.d,0,1,3))}var Q=["a","b","c","d"];z=0;for(b=this.faces.length;z<b;z++)for(H=this.faces[z],c=0;c<H.vertexNormals.length;c++){D.copy(H.vertexNormals[c]);var O=H[Q[c]];var P=F[O];u.copy(P);u.subSelf(D.multiplyScalar(D.dot(P))).normalize();C.cross(H.vertexNormals[c],P);O=C.dot(N[O]);O=0>O?-1:1;H.vertexTangents[c]=new THREE.Vector4(u.x,u.y,u.z,O)}this.hasTangents=!0},computeBoundingBox:function(){if(0<
this.vertices.length){this.boundingBox={x:[this.vertices[0].position.x,this.vertices[0].position.x],y:[this.vertices[0].position.y,this.vertices[0].position.y],z:[this.vertices[0].position.z,this.vertices[0].position.z]};for(var a=1,b=this.vertices.length;a<b;a++){var c=this.vertices[a];c.position.x<this.boundingBox.x[0]?this.boundingBox.x[0]=c.position.x:c.position.x>this.boundingBox.x[1]&&(this.boundingBox.x[1]=c.position.x);c.position.y<this.boundingBox.y[0]?this.boundingBox.y[0]=c.position.y:
c.position.y>this.boundingBox.y[1]&&(this.boundingBox.y[1]=c.position.y);c.position.z<this.boundingBox.z[0]?this.boundingBox.z[0]=c.position.z:c.position.z>this.boundingBox.z[1]&&(this.boundingBox.z[1]=c.position.z)}}},computeBoundingSphere:function(){for(var a=0,b=0,c=this.vertices.length;b<c;b++)a=Math.max(a,this.vertices[b].position.length());this.boundingSphere={radius:a}},computeEdgeFaces:function(){function a(a,b){return Math.min(a,b)+"_"+Math.max(a,b)}function b(a,b,c){void 0===a[b]?(a[b]=
{set:{},array:[]},a[b].set[c]=1,a[b].array.push(c)):void 0===a[b].set[c]&&(a[b].set[c]=1,a[b].array.push(c))}var c,e={};var f=0;for(c=this.faces.length;f<c;f++){var g=this.faces[f];if(g instanceof THREE.Face3){var d=a(g.a,g.b);b(e,d,f);d=a(g.b,g.c);b(e,d,f);d=a(g.a,g.c);b(e,d,f)}else g instanceof THREE.Face4&&(d=a(g.b,g.d),b(e,d,f),d=a(g.a,g.b),b(e,d,f),d=a(g.a,g.d),b(e,d,f),d=a(g.b,g.c),b(e,d,f),d=a(g.c,g.d),b(e,d,f))}f=0;for(c=this.edges.length;f<c;f++){g=this.edges[f];d=g.vertexIndices[0];var h=
g.vertexIndices[1];g.faceIndices=e[a(d,h)].array;for(d=0;d<g.faceIndices.length;d++)h=g.faceIndices[d],g.faces.push(this.faces[h])}}};THREE.GeometryIdCounter=0;THREE.Camera=function(a,b,c,e,f){THREE.Object3D.call(this);this.fov=a||50;this.aspect=b||1;this.near=c||.1;this.far=e||2E3;this.target=f||new THREE.Object3D;this.useTarget=!0;this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=null;this.updateProjectionMatrix()};THREE.Camera.prototype=new THREE.Object3D;
THREE.Camera.prototype.constructor=THREE.Camera;THREE.Camera.prototype.supr=THREE.Object3D.prototype;THREE.Camera.prototype.translate=function(a,b){this.matrix.rotateAxis(b);this.position.addSelf(b.multiplyScalar(a));this.target.position.addSelf(b.multiplyScalar(a))};THREE.Camera.prototype.updateProjectionMatrix=function(){this.projectionMatrix=THREE.Matrix4.makePerspective(this.fov,this.aspect,this.near,this.far)};
THREE.Camera.prototype.update=function(a,b,c){if(this.useTarget)this.matrix.lookAt(this.position,this.target.position,this.up),this.matrix.setPosition(this.position),a?this.matrixWorld.multiply(a,this.matrix):this.matrixWorld.copy(this.matrix),THREE.Matrix4.makeInvert(this.matrixWorld,this.matrixWorldInverse),b=!0;else if(this.matrixAutoUpdate&&this.updateMatrix(),b||this.matrixWorldNeedsUpdate)a?this.matrixWorld.multiply(a,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=
!1,b=!0,THREE.Matrix4.makeInvert(this.matrixWorld,this.matrixWorldInverse);for(a=0;a<this.children.length;a++)this.children[a].update(this.matrixWorld,b,c)};THREE.Light=function(a){THREE.Object3D.call(this);this.color=new THREE.Color(a)};THREE.Light.prototype=new THREE.Object3D;THREE.Light.prototype.constructor=THREE.Light;THREE.Light.prototype.supr=THREE.Object3D.prototype;
THREE.Material=function(a){this.id=THREE.MaterialCounter.value++;a=a||{};this.opacity=void 0!==a.opacity?a.opacity:1;this.transparent=void 0!==a.transparent?a.transparent:!1;this.blending=void 0!==a.blending?a.blending:THREE.NormalBlending;this.depthTest=void 0!==a.depthTest?a.depthTest:!0};THREE.NoShading=0;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NormalBlending=0;THREE.AdditiveBlending=1;THREE.SubtractiveBlending=2;
THREE.MultiplyBlending=3;THREE.AdditiveAlphaBlending=4;THREE.MaterialCounter={value:0};
THREE.MeshBasicMaterial=function(a){THREE.Material.call(this,a);a=a||{};this.color=void 0!==a.color?new THREE.Color(a.color):new THREE.Color(16777215);this.map=void 0!==a.map?a.map:null;this.lightMap=void 0!==a.lightMap?a.lightMap:null;this.envMap=void 0!==a.envMap?a.envMap:null;this.combine=void 0!==a.combine?a.combine:THREE.MultiplyOperation;this.reflectivity=void 0!==a.reflectivity?a.reflectivity:1;this.refractionRatio=void 0!==a.refractionRatio?a.refractionRatio:.98;this.shading=void 0!==a.shading?
a.shading:THREE.SmoothShading;this.wireframe=void 0!==a.wireframe?a.wireframe:!1;this.wireframeLinewidth=void 0!==a.wireframeLinewidth?a.wireframeLinewidth:1;this.wireframeLinecap=void 0!==a.wireframeLinecap?a.wireframeLinecap:"round";this.wireframeLinejoin=void 0!==a.wireframeLinejoin?a.wireframeLinejoin:"round";this.vertexColors=void 0!==a.vertexColors?a.vertexColors:!1;this.skinning=void 0!==a.skinning?a.skinning:!1;this.morphTargets=void 0!==a.morphTargets?a.morphTargets:!1};
THREE.MeshBasicMaterial.prototype=new THREE.Material;THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial;THREE.MeshFaceMaterial=function(){};THREE.Particle=function(a){THREE.Object3D.call(this);this.materials=a instanceof Array?a:[a]};THREE.Particle.prototype=new THREE.Object3D;THREE.Particle.prototype.constructor=THREE.Particle;THREE.Line=function(a,b,c){THREE.Object3D.call(this);this.geometry=a;this.materials=b instanceof Array?b:[b];this.type=void 0!=c?c:THREE.LineStrip};
THREE.LineStrip=0;THREE.LinePieces=1;THREE.Line.prototype=new THREE.Object3D;THREE.Line.prototype.constructor=THREE.Line;
THREE.Mesh=function(a,b){THREE.Object3D.call(this);this.geometry=a;this.materials=b&&b.length?b:[b];this.overdraw=this.doubleSided=this.flipSided=!1;if(this.geometry&&(this.geometry.boundingSphere||this.geometry.computeBoundingSphere(),this.boundRadius=a.boundingSphere.radius,this.geometry.morphTargets.length)){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var c=0;c<this.geometry.morphTargets.length;c++)this.morphTargetInfluences.push(0),
this.morphTargetDictionary[this.geometry.morphTargets[c].name]=c}};THREE.Mesh.prototype=new THREE.Object3D;THREE.Mesh.prototype.constructor=THREE.Mesh;THREE.Mesh.prototype.supr=THREE.Object3D.prototype;THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};
THREE.Bone=function(a){THREE.Object3D.call(this);this.skin=a;this.skinMatrix=new THREE.Matrix4;this.hasNoneBoneChildren=!1};THREE.Bone.prototype=new THREE.Object3D;THREE.Bone.prototype.constructor=THREE.Bone;THREE.Bone.prototype.supr=THREE.Object3D.prototype;
THREE.Bone.prototype.update=function(a,b,c){this.matrixAutoUpdate&&(b|=this.updateMatrix());if(b||this.matrixWorldNeedsUpdate)a?this.skinMatrix.multiply(a,this.matrix):this.skinMatrix.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,b=!0;var e,f=this.children.length;if(this.hasNoneBoneChildren)for(this.matrixWorld.multiply(this.skin.matrixWorld,this.skinMatrix),e=0;e<f;e++)a=this.children[e],a instanceof THREE.Bone?a.update(this.skinMatrix,b,c):a.update(this.matrixWorld,!0,c);else for(e=0;e<f;e++)this.children[e].update(this.skinMatrix,
b,c)};THREE.Bone.prototype.addChild=function(a){-1===this.children.indexOf(a)&&(void 0!==a.parent&&a.parent.removeChild(a),a.parent=this,this.children.push(a),a instanceof THREE.Bone||(this.hasNoneBoneChildren=!0))};
THREE.Sound=function(a,b,c,e){THREE.Object3D.call(this);this.isPlaying=this.isAddedToDOM=this.isLoaded=!1;this.duration=-1;this.radius=void 0!==b?Math.abs(b):100;this.volume=Math.min(1,Math.max(0,void 0!==c?c:1));this.domElement=document.createElement("audio");this.domElement.volume=0;this.domElement.pan=0;this.domElement.loop=void 0!==e?e:!0;this.sources=a instanceof Array?a:[a];var f;c=this.sources.length;for(a=0;a<c;a++)if(b=this.sources[a],b.toLowerCase(),-1!==b.indexOf(".mp3")?f="audio/mpeg":
-1!==b.indexOf(".ogg")?f="audio/ogg":-1!==b.indexOf(".wav")&&(f="audio/wav"),this.domElement.canPlayType(f)){f=document.createElement("source");f.src=this.sources[a];this.domElement.THREESound=this;this.domElement.appendChild(f);this.domElement.addEventListener("canplay",this.onLoad,!0);this.domElement.load();break}};THREE.Sound.prototype=new THREE.Object3D;THREE.Sound.prototype.constructor=THREE.Sound;THREE.Sound.prototype.supr=THREE.Object3D.prototype;
THREE.Sound.prototype.onLoad=function(){var a=this.THREESound;a.isLoaded||(this.removeEventListener("canplay",this.onLoad,!0),a.isLoaded=!0,a.duration=this.duration,a.isPlaying&&a.play())};THREE.Sound.prototype.addToDOM=function(a){this.isAddedToDOM=!0;a.appendChild(this.domElement)};THREE.Sound.prototype.play=function(a){this.isPlaying=!0;this.isLoaded&&(this.domElement.play(),a&&(this.domElement.currentTime=a%this.duration))};THREE.Sound.prototype.pause=function(){this.isPlaying=!1;this.domElement.pause()};
THREE.Sound.prototype.stop=function(){this.isPlaying=!1;this.domElement.pause();this.domElement.currentTime=0};THREE.Sound.prototype.calculateVolumeAndPan=function(a){a=a.length();this.domElement.volume=a<=this.radius?this.volume*(1-a/this.radius):0};
THREE.Sound.prototype.update=function(a,b,c){this.matrixAutoUpdate&&(this.matrix.setPosition(this.position),b=!0);if(b||this.matrixWorldNeedsUpdate)a?this.matrixWorld.multiply(a,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,b=!0;var e=this.children.length;for(a=0;a<e;a++)this.children[a].update(this.matrixWorld,b,c)};
THREE.Scene=function(){THREE.Object3D.call(this);this.matrixAutoUpdate=!1;this.collisions=this.fog=null;this.objects=[];this.lights=[];this.sounds=[];this.__objectsAdded=[];this.__objectsRemoved=[]};THREE.Scene.prototype=new THREE.Object3D;THREE.Scene.prototype.constructor=THREE.Scene;THREE.Scene.prototype.supr=THREE.Object3D.prototype;THREE.Scene.prototype.addChild=function(a){this.supr.addChild.call(this,a);this.addChildRecurse(a)};
THREE.Scene.prototype.addChildRecurse=function(a){a instanceof THREE.Light?-1===this.lights.indexOf(a)&&this.lights.push(a):a instanceof THREE.Sound?-1===this.sounds.indexOf(a)&&this.sounds.push(a):a instanceof THREE.Camera||a instanceof THREE.Bone||-1!==this.objects.indexOf(a)||(this.objects.push(a),this.__objectsAdded.push(a));for(var b=0;b<a.children.length;b++)this.addChildRecurse(a.children[b])};THREE.Scene.prototype.removeChild=function(a){this.supr.removeChild.call(this,a);this.removeChildRecurse(a)};
THREE.Scene.prototype.removeChildRecurse=function(a){if(a instanceof THREE.Light){var b=this.lights.indexOf(a);-1!==b&&this.lights.splice(b,1)}else a instanceof THREE.Sound?(b=this.sounds.indexOf(a),-1!==b&&this.sounds.splice(b,1)):a instanceof THREE.Camera||(b=this.objects.indexOf(a),-1!==b&&(this.objects.splice(b,1),this.__objectsRemoved.push(a)));for(b=0;b<a.children.length;b++)this.removeChildRecurse(a.children[b])};THREE.Scene.prototype.addObject=THREE.Scene.prototype.addChild;
THREE.Scene.prototype.removeObject=THREE.Scene.prototype.removeChild;THREE.Scene.prototype.addLight=THREE.Scene.prototype.addChild;THREE.Scene.prototype.removeLight=THREE.Scene.prototype.removeChild;
THREE.Projector=function(){function a(){var a=k[h]=k[h]||new THREE.RenderableVertex;h++;return a}function b(a,b){return b.z-a.z}function c(a,b){var c=0,d=1,e=a.z+a.w,f=b.z+b.w,g=-a.z+a.w,q=-b.z+b.w;if(0<=e&&0<=f&&0<=g&&0<=q)return!0;if(0>e&&0>f||0>g&&0>q)return!1;0>e?c=Math.max(c,e/(e-f)):0>f&&(d=Math.min(d,e/(e-f)));0>g?c=Math.max(c,g/(g-q)):0>q&&(d=Math.min(d,g/(g-q)));if(d<c)return!1;a.lerpSelf(b,c);b.lerpSelf(a,1-d);return!0}var e,f,g=[],d,h,k=[],n,m,q=[],l,r=[],p,t,v=[],y,M,K=[],F=new THREE.Vector4,
N=new THREE.Vector4,x=new THREE.Matrix4,E=new THREE.Matrix4,u=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4],C=new THREE.Vector4,D=new THREE.Vector4;this.projectVector=function(a,b){x.multiply(b.projectionMatrix,b.matrixWorldInverse);x.multiplyVector3(a);return a};this.unprojectVector=function(a,b){x.multiply(b.matrixWorld,THREE.Matrix4.makeInvert(b.projectionMatrix));x.multiplyVector3(a);return a};this.projectObjects=function(a,c,d){c=
[];var q;f=0;var h=a.objects;a=0;for(q=h.length;a<q;a++){var k=h[a];var p;if(!(p=!k.visible)&&(p=k instanceof THREE.Mesh)){a:{for(var n=k.matrixWorld,l=-k.geometry.boundingSphere.radius*Math.max(k.scale.x,Math.max(k.scale.y,k.scale.z)),m=0;6>m;m++)if(p=u[m].x*n.n14+u[m].y*n.n24+u[m].z*n.n34+u[m].w,p<=l){p=!1;break a}p=!0}p=!p}p||(p=g[f]=g[f]||new THREE.RenderableObject,f++,e=p,F.copy(k.position),x.multiplyVector3(F),e.object=k,e.z=F.z,c.push(e))}d&&c.sort(b);return c};this.projectScene=function(e,
f,g){var z=[],H=f.near,P=f.far,w,R;M=t=l=m=0;f.matrixAutoUpdate&&f.update(void 0,!0);e.update(void 0,!1,f);x.multiply(f.projectionMatrix,f.matrixWorldInverse);u[0].set(x.n41-x.n11,x.n42-x.n12,x.n43-x.n13,x.n44-x.n14);u[1].set(x.n41+x.n11,x.n42+x.n12,x.n43+x.n13,x.n44+x.n14);u[2].set(x.n41+x.n21,x.n42+x.n22,x.n43+x.n23,x.n44+x.n24);u[3].set(x.n41-x.n21,x.n42-x.n22,x.n43-x.n23,x.n44-x.n24);u[4].set(x.n41-x.n31,x.n42-x.n32,x.n43-x.n33,x.n44-x.n34);u[5].set(x.n41+x.n31,x.n42+x.n32,x.n43+x.n33,x.n44+x.n34);
for(w=0;6>w;w++){var B=u[w];B.divideScalar(Math.sqrt(B.x*B.x+B.y*B.y+B.z*B.z))}B=this.projectObjects(e,f,!0);e=0;for(w=B.length;e<w;e++){var G=B[e].object;if(G.visible){var J=G.matrixWorld;var Z=G.matrixRotationWorld;var F=G.materials;var aa=G.overdraw;h=0;if(G instanceof THREE.Mesh){var ba=G.geometry;var I=ba.vertices;var S=ba.faces;ba=ba.faceVertexUvs;var A=0;for(R=I.length;A<R;A++)d=a(),d.positionWorld.copy(I[A].position),J.multiplyVector3(d.positionWorld),d.positionScreen.copy(d.positionWorld),
x.multiplyVector4(d.positionScreen),d.positionScreen.x/=d.positionScreen.w,d.positionScreen.y/=d.positionScreen.w,d.visible=d.positionScreen.z>H&&d.positionScreen.z<P;I=0;for(A=S.length;I<A;I++){R=S[I];if(R instanceof THREE.Face3){var L=k[R.a];var U=k[R.b];var W=k[R.c];if(L.visible&&U.visible&&W.visible&&(G.doubleSided||G.flipSided!=0>(W.positionScreen.x-L.positionScreen.x)*(U.positionScreen.y-L.positionScreen.y)-(W.positionScreen.y-L.positionScreen.y)*(U.positionScreen.x-L.positionScreen.x))){var X=
q[m]=q[m]||new THREE.RenderableFace3;m++;n=X;n.v1.copy(L);n.v2.copy(U);n.v3.copy(W)}else continue}else if(R instanceof THREE.Face4)if(L=k[R.a],U=k[R.b],W=k[R.c],X=k[R.d],L.visible&&U.visible&&W.visible&&X.visible&&(G.doubleSided||G.flipSided!=(0>(X.positionScreen.x-L.positionScreen.x)*(U.positionScreen.y-L.positionScreen.y)-(X.positionScreen.y-L.positionScreen.y)*(U.positionScreen.x-L.positionScreen.x)||0>(U.positionScreen.x-W.positionScreen.x)*(X.positionScreen.y-W.positionScreen.y)-(U.positionScreen.y-
W.positionScreen.y)*(X.positionScreen.x-W.positionScreen.x)))){var fa=r[l]=r[l]||new THREE.RenderableFace4;l++;n=fa;n.v1.copy(L);n.v2.copy(U);n.v3.copy(W);n.v4.copy(X)}else continue;n.normalWorld.copy(R.normal);Z.multiplyVector3(n.normalWorld);n.centroidWorld.copy(R.centroid);J.multiplyVector3(n.centroidWorld);n.centroidScreen.copy(n.centroidWorld);x.multiplyVector3(n.centroidScreen);W=R.vertexNormals;L=0;for(U=W.length;L<U;L++)X=n.vertexNormalsWorld[L],X.copy(W[L]),Z.multiplyVector3(X);L=0;for(U=
ba.length;L<U;L++)if(fa=ba[L][I])for(W=0,X=fa.length;W<X;W++)n.uvs[L][W]=fa[W];n.meshMaterials=F;n.faceMaterials=R.materials;n.overdraw=aa;n.z=n.centroidScreen.z;z.push(n)}}else if(G instanceof THREE.Line)for(E.multiply(x,J),I=G.geometry.vertices,L=a(),L.positionScreen.copy(I[0].position),E.multiplyVector4(L.positionScreen),A=1,R=I.length;A<R;A++)L=a(),L.positionScreen.copy(I[A].position),E.multiplyVector4(L.positionScreen),U=k[h-2],C.copy(L.positionScreen),D.copy(U.positionScreen),c(C,D)&&(C.multiplyScalar(1/
C.w),D.multiplyScalar(1/D.w),J=v[t]=v[t]||new THREE.RenderableLine,t++,p=J,p.v1.positionScreen.copy(C),p.v2.positionScreen.copy(D),p.z=Math.max(C.z,D.z),p.materials=G.materials,z.push(p));else G instanceof THREE.Particle&&(N.set(G.matrixWorld.n14,G.matrixWorld.n24,G.matrixWorld.n34,1),x.multiplyVector4(N),N.z/=N.w,0<N.z&&1>N.z&&(J=K[M]=K[M]||new THREE.RenderableParticle,M++,y=J,y.x=N.x/N.w,y.y=N.y/N.w,y.z=N.z,y.rotation=G.rotation.z,y.scale.x=G.scale.x*Math.abs(y.x-(N.x+f.projectionMatrix.n11)/(N.w+
f.projectionMatrix.n14)),y.scale.y=G.scale.y*Math.abs(y.y-(N.y+f.projectionMatrix.n22)/(N.w+f.projectionMatrix.n24)),y.materials=G.materials,z.push(y)))}}g&&z.sort(b);return z}};
THREE.CanvasRenderer=function(a){function b(a){y!=a&&(p.globalAlpha=y=a)}function c(a){if(M!=a){switch(a){case THREE.NormalBlending:p.globalCompositeOperation="source-over";break;case THREE.AdditiveBlending:p.globalCompositeOperation="lighter";break;case THREE.SubtractiveBlending:p.globalCompositeOperation="darker"}M=a}}function e(a){K!=a.hex&&(K=a.hex,p.strokeStyle="#"+g(K.toString(16)))}function f(a){F!=a.hex&&(F=a.hex,p.fillStyle="#"+g(F.toString(16)))}function g(a){for(;6>a.length;)a="0"+a;return a}
var d=this,h=null,k=new THREE.Projector;a=a||{};var n=void 0!==a.canvas?a.canvas:document.createElement("canvas"),m,q,l,r,p=n.getContext("2d"),t=new THREE.Color(0),v=0,y=1,M=0,K=null,F=null,N=null,x=null,E=null,u,C,D,z,H=new THREE.RenderableVertex,T=new THREE.RenderableVertex,Q,O,P,w,R,B,G,J,Z,ha,aa,ba,I=new THREE.Color(0),S=new THREE.Color(0),A=new THREE.Color(0),L=new THREE.Color(0),U=new THREE.Color(0),W,X,fa,ia,Fa,Ga,Ha,Ia,Ja,Ka,ra=new THREE.Rectangle,ka=new THREE.Rectangle,ea=new THREE.Rectangle,
Ca=!1,ja=new THREE.Color,ca=new THREE.Color,sa=new THREE.Color,ta=new THREE.Color,Y=new THREE.Vector3;a=16;var xa=document.createElement("canvas");xa.width=xa.height=2;var ya=xa.getContext("2d");ya.fillStyle="rgba(0,0,0,1)";ya.fillRect(0,0,2,2);var La=ya.getImageData(0,0,2,2);var la=La.data;var za=document.createElement("canvas");za.width=za.height=a;var Da=za.getContext("2d");Da.translate(-a/2,-a/2);Da.scale(a,a);a--;this.domElement=n;this.sortElements=this.sortObjects=this.autoClear=!0;this.data=
{vertices:0,faces:0};this.setSize=function(a,b){m=a;q=b;l=m/2;r=q/2;n.width=m;n.height=q;ra.set(-l,-r,l,r);y=1;M=0;E=x=N=F=K=null};this.setClearColor=function(a,b){t=a;v=b};this.setClearColorHex=function(a,b){t.setHex(a);v=b};this.clear=function(){p.setTransform(1,0,0,-1,l,r);ka.isEmpty()||(ka.inflate(1),ka.minSelf(ra),0==t.hex&&0==v?p.clearRect(ka.getX(),ka.getY(),ka.getWidth(),ka.getHeight()):(c(THREE.NormalBlending),b(1),p.fillStyle="rgba("+Math.floor(255*t.r)+","+Math.floor(255*t.g)+","+Math.floor(255*
t.b)+","+v+")",p.fillRect(ka.getX(),ka.getY(),ka.getWidth(),ka.getHeight())),ka.empty())};this.render=function(a,g){function q(a){var b,c=a.lights;ca.setRGB(0,0,0);sa.setRGB(0,0,0);ta.setRGB(0,0,0);a=0;for(b=c.length;a<b;a++){var e=c[a];var d=e.color;e instanceof THREE.AmbientLight?(ca.r+=d.r,ca.g+=d.g,ca.b+=d.b):e instanceof THREE.DirectionalLight?(sa.r+=d.r,sa.g+=d.g,sa.b+=d.b):e instanceof THREE.PointLight&&(ta.r+=d.r,ta.g+=d.g,ta.b+=d.b)}}function n(a,b,c,d){var e,f=a.lights;a=0;for(e=f.length;a<
e;a++){var g=f[a];var q=g.color;if(g instanceof THREE.DirectionalLight){var k=c.dot(g.position);0>=k||(k*=g.intensity,d.r+=q.r*k,d.g+=q.g*k,d.b+=q.b*k)}else g instanceof THREE.PointLight&&(k=c.dot(Y.sub(g.position,b).normalize()),0>=k||(k*=0==g.distance?1:1-Math.min(b.distanceTo(g.position)/g.distance,1),0!=k&&(k*=g.intensity,d.r+=q.r*k,d.g+=q.g*k,d.b+=q.b*k)))}}function m(a,d,g,q){b(g.opacity);c(g.blending);if(g instanceof THREE.ParticleBasicMaterial){if(g.map){var k=g.map.image;var h=k.width>>1;
var n=k.height>>1;g=d.scale.x*l;var w=d.scale.y*r;q=g*h;var A=w*n;ea.set(a.x-q,a.y-A,a.x+q,a.y+A);ra.instersects(ea)&&(p.save(),p.translate(a.x,a.y),p.rotate(-d.rotation),p.scale(g,-w),p.translate(-h,-n),p.drawImage(k,0,0),p.restore())}}else g instanceof THREE.ParticleCanvasMaterial&&(q=d.scale.x*l,A=d.scale.y*r,ea.set(a.x-q,a.y-A,a.x+q,a.y+A),ra.instersects(ea)&&(e(g.color),f(g.color),p.save(),p.translate(a.x,a.y),p.rotate(-d.rotation),p.scale(q,A),g.program(p),p.restore()))}function t(a,d,g,f,q){b(f.opacity);
c(f.blending);p.beginPath();p.moveTo(a.positionScreen.x,a.positionScreen.y);p.lineTo(d.positionScreen.x,d.positionScreen.y);p.closePath();f instanceof THREE.LineBasicMaterial&&(a=f.linewidth,N!=a&&(p.lineWidth=N=a),a=f.linecap,x!=a&&(p.lineCap=x=a),a=f.linejoin,E!=a&&(p.lineJoin=E=a),e(f.color),p.stroke(),ea.inflate(2*f.linewidth))}function v(a,e,f,q,k,h,p,l,m){d.data.vertices+=3;d.data.faces++;b(l.opacity);c(l.blending);Q=a.positionScreen.x;O=a.positionScreen.y;P=e.positionScreen.x;w=e.positionScreen.y;
R=f.positionScreen.x;B=f.positionScreen.y;F(Q,O,P,w,R,B);l instanceof THREE.MeshBasicMaterial?l.map?l.map.mapping instanceof THREE.UVMapping&&(ia=p.uvs[0],na(Q,O,P,w,R,B,l.map.image,ia[q].u,ia[q].v,ia[k].u,ia[k].v,ia[h].u,ia[h].v)):l.envMap?l.envMap.mapping instanceof THREE.SphericalReflectionMapping&&(a=g.matrixWorldInverse,Y.copy(p.vertexNormalsWorld[0]),Fa=.5*(Y.x*a.n11+Y.y*a.n12+Y.z*a.n13)+.5,Ga=.5*-(Y.x*a.n21+Y.y*a.n22+Y.z*a.n23)+.5,Y.copy(p.vertexNormalsWorld[1]),Ha=.5*(Y.x*a.n11+Y.y*a.n12+
Y.z*a.n13)+.5,Ia=.5*-(Y.x*a.n21+Y.y*a.n22+Y.z*a.n23)+.5,Y.copy(p.vertexNormalsWorld[2]),Ja=.5*(Y.x*a.n11+Y.y*a.n12+Y.z*a.n13)+.5,Ka=.5*-(Y.x*a.n21+Y.y*a.n22+Y.z*a.n23)+.5,na(Q,O,P,w,R,B,l.envMap.image,Fa,Ga,Ha,Ia,Ja,Ka)):l.wireframe?K(l.color,l.wireframeLinewidth,l.wireframeLinecap,l.wireframeLinejoin):oa(l.color):l instanceof THREE.MeshLambertMaterial?(l.map&&!l.wireframe&&(l.map.mapping instanceof THREE.UVMapping&&(ia=p.uvs[0],na(Q,O,P,w,R,B,l.map.image,ia[q].u,ia[q].v,ia[k].u,ia[k].v,ia[h].u,ia[h].v)),
c(THREE.SubtractiveBlending)),Ca?l.wireframe||l.shading!=THREE.SmoothShading||3!=p.vertexNormalsWorld.length?(ja.r=ca.r,ja.g=ca.g,ja.b=ca.b,n(m,p.centroidWorld,p.normalWorld,ja),I.r=Math.max(0,Math.min(l.color.r*ja.r,1)),I.g=Math.max(0,Math.min(l.color.g*ja.g,1)),I.b=Math.max(0,Math.min(l.color.b*ja.b,1)),I.updateHex(),l.wireframe?K(I,l.wireframeLinewidth,l.wireframeLinecap,l.wireframeLinejoin):oa(I)):(S.r=A.r=L.r=ca.r,S.g=A.g=L.g=ca.g,S.b=A.b=L.b=ca.b,n(m,p.v1.positionWorld,p.vertexNormalsWorld[0],
S),n(m,p.v2.positionWorld,p.vertexNormalsWorld[1],A),n(m,p.v3.positionWorld,p.vertexNormalsWorld[2],L),U.r=.5*(A.r+L.r),U.g=.5*(A.g+L.g),U.b=.5*(A.b+L.b),fa=Aa(S,A,L,U),na(Q,O,P,w,R,B,fa,0,0,1,0,0,1)):l.wireframe?K(l.color,l.wireframeLinewidth,l.wireframeLinecap,l.wireframeLinejoin):oa(l.color)):l instanceof THREE.MeshDepthMaterial?(W=g.near,X=g.far,S.r=S.g=S.b=1-ua(a.positionScreen.z,W,X),A.r=A.g=A.b=1-ua(e.positionScreen.z,W,X),L.r=L.g=L.b=1-ua(f.positionScreen.z,W,X),U.r=.5*(A.r+L.r),U.g=.5*(A.g+
L.g),U.b=.5*(A.b+L.b),fa=Aa(S,A,L,U),na(Q,O,P,w,R,B,fa,0,0,1,0,0,1)):l instanceof THREE.MeshNormalMaterial&&(I.r=va(p.normalWorld.x),I.g=va(p.normalWorld.y),I.b=va(p.normalWorld.z),I.updateHex(),l.wireframe?K(I,l.wireframeLinewidth,l.wireframeLinecap,l.wireframeLinejoin):oa(I))}function y(a,e,f,q,k,h,p,l,m){d.data.vertices+=4;d.data.faces++;b(l.opacity);c(l.blending);l.map||l.envMap?(v(a,e,q,0,1,3,p,l,m),v(k,f,h,1,2,3,p,l,m)):(Q=a.positionScreen.x,O=a.positionScreen.y,P=e.positionScreen.x,w=e.positionScreen.y,
R=f.positionScreen.x,B=f.positionScreen.y,G=q.positionScreen.x,J=q.positionScreen.y,Z=k.positionScreen.x,ha=k.positionScreen.y,aa=h.positionScreen.x,ba=h.positionScreen.y,l instanceof THREE.MeshBasicMaterial?(M(Q,O,P,w,R,B,G,J),l.wireframe?K(l.color,l.wireframeLinewidth,l.wireframeLinecap,l.wireframeLinejoin):oa(l.color)):l instanceof THREE.MeshLambertMaterial?Ca?l.wireframe||l.shading!=THREE.SmoothShading||4!=p.vertexNormalsWorld.length?(ja.r=ca.r,ja.g=ca.g,ja.b=ca.b,n(m,p.centroidWorld,p.normalWorld,
ja),I.r=Math.max(0,Math.min(l.color.r*ja.r,1)),I.g=Math.max(0,Math.min(l.color.g*ja.g,1)),I.b=Math.max(0,Math.min(l.color.b*ja.b,1)),I.updateHex(),M(Q,O,P,w,R,B,G,J),l.wireframe?K(I,l.wireframeLinewidth,l.wireframeLinecap,l.wireframeLinejoin):oa(I)):(S.r=A.r=L.r=U.r=ca.r,S.g=A.g=L.g=U.g=ca.g,S.b=A.b=L.b=U.b=ca.b,n(m,p.v1.positionWorld,p.vertexNormalsWorld[0],S),n(m,p.v2.positionWorld,p.vertexNormalsWorld[1],A),n(m,p.v4.positionWorld,p.vertexNormalsWorld[3],L),n(m,p.v3.positionWorld,p.vertexNormalsWorld[2],
U),fa=Aa(S,A,L,U),F(Q,O,P,w,G,J),na(Q,O,P,w,G,J,fa,0,0,1,0,0,1),F(Z,ha,R,B,aa,ba),na(Z,ha,R,B,aa,ba,fa,1,0,1,1,0,1)):(M(Q,O,P,w,R,B,G,J),l.wireframe?K(l.color,l.wireframeLinewidth,l.wireframeLinecap,l.wireframeLinejoin):oa(l.color)):l instanceof THREE.MeshNormalMaterial?(I.r=va(p.normalWorld.x),I.g=va(p.normalWorld.y),I.b=va(p.normalWorld.z),I.updateHex(),M(Q,O,P,w,R,B,G,J),l.wireframe?K(I,l.wireframeLinewidth,l.wireframeLinecap,l.wireframeLinejoin):oa(I)):l instanceof THREE.MeshDepthMaterial&&(W=
g.near,X=g.far,S.r=S.g=S.b=1-ua(a.positionScreen.z,W,X),A.r=A.g=A.b=1-ua(e.positionScreen.z,W,X),L.r=L.g=L.b=1-ua(q.positionScreen.z,W,X),U.r=U.g=U.b=1-ua(f.positionScreen.z,W,X),fa=Aa(S,A,L,U),F(Q,O,P,w,G,J),na(Q,O,P,w,G,J,fa,0,0,1,0,0,1),F(Z,ha,R,B,aa,ba),na(Z,ha,R,B,aa,ba,fa,1,0,1,1,0,1)))}function F(a,b,c,d,e,f){p.beginPath();p.moveTo(a,b);p.lineTo(c,d);p.lineTo(e,f);p.lineTo(a,b);p.closePath()}function M(a,b,c,d,e,f,g,q){p.beginPath();p.moveTo(a,b);p.lineTo(c,d);p.lineTo(e,f);p.lineTo(g,q);p.lineTo(a,
b);p.closePath()}function K(a,b,c,d){N!=b&&(p.lineWidth=N=b);x!=c&&(p.lineCap=x=c);E!=d&&(p.lineJoin=E=d);e(a);p.stroke();ea.inflate(2*b)}function oa(a){f(a);p.fill()}function na(a,b,c,d,e,f,g,q,k,l,h,n,A){var w=g.width-1;var m=g.height-1;q*=w;k*=m;c-=a;d-=b;e-=a;f-=b;l=l*w-q;h=h*m-k;n=n*w-q;A=A*m-k;w=l*A-n*h;0!=w&&(m=1/w,w=(A*c-h*e)*m,h=(A*d-h*f)*m,c=(l*e-n*c)*m,d=(l*f-n*d)*m,a=a-w*q-c*k,b=b-h*q-d*k,p.save(),p.transform(w,h,c,d,a,b),p.clip(),p.drawImage(g,0,0),p.restore())}function Aa(a,b,c,d){var e=
~~(255*a.r),f=~~(255*a.g);a=~~(255*a.b);var g=~~(255*b.r),q=~~(255*b.g);b=~~(255*b.b);var k=~~(255*c.r),h=~~(255*c.g);c=~~(255*c.b);var l=~~(255*d.r),p=~~(255*d.g);d=~~(255*d.b);la[0]=0>e?0:255<e?255:e;la[1]=0>f?0:255<f?255:f;la[2]=0>a?0:255<a?255:a;la[4]=0>g?0:255<g?255:g;la[5]=0>q?0:255<q?255:q;la[6]=0>b?0:255<b?255:b;la[8]=0>k?0:255<k?255:k;la[9]=0>h?0:255<h?255:h;la[10]=0>c?0:255<c?255:c;la[12]=0>l?0:255<l?255:l;la[13]=0>p?0:255<p?255:p;la[14]=0>d?0:255<d?255:d;ya.putImageData(La,0,0);Da.drawImage(xa,
0,0);return za}function ua(a,b,c){a=(a-b)/(c-b);return a*a*(3-2*a)}function va(a){a=.5*(a+1);return 0>a?0:1<a?1:a}function pa(a,b){var c=b.x-a.x,d=b.y-a.y,e=1/Math.sqrt(c*c+d*d);c*=e;d*=e;b.x+=c;b.y+=d;a.x-=c;a.y-=d}var Ma,qa,Ba;this.autoClear?this.clear():p.setTransform(1,0,0,-1,l,r);d.data.vertices=0;d.data.faces=0;h=k.projectScene(a,g,this.sortElements);(Ca=0<a.lights.length)&&q(a);var Ea=0;for(Ma=h.length;Ea<Ma;Ea++){var V=h[Ea];ea.empty();if(V instanceof THREE.RenderableParticle){u=V;u.x*=l;
u.y*=r;var ma=0;for(qa=V.materials.length;ma<qa;){var da=V.materials[ma++];0!=da.opacity&&m(u,V,da,a)}}else if(V instanceof THREE.RenderableLine){if(u=V.v1,C=V.v2,u.positionScreen.x*=l,u.positionScreen.y*=r,C.positionScreen.x*=l,C.positionScreen.y*=r,ea.addPoint(u.positionScreen.x,u.positionScreen.y),ea.addPoint(C.positionScreen.x,C.positionScreen.y),ra.instersects(ea))for(ma=0,qa=V.materials.length;ma<qa;)da=V.materials[ma++],0!=da.opacity&&t(u,C,V,da,a)}else if(V instanceof THREE.RenderableFace3){if(u=
V.v1,C=V.v2,D=V.v3,u.positionScreen.x*=l,u.positionScreen.y*=r,C.positionScreen.x*=l,C.positionScreen.y*=r,D.positionScreen.x*=l,D.positionScreen.y*=r,V.overdraw&&(pa(u.positionScreen,C.positionScreen),pa(C.positionScreen,D.positionScreen),pa(D.positionScreen,u.positionScreen)),ea.add3Points(u.positionScreen.x,u.positionScreen.y,C.positionScreen.x,C.positionScreen.y,D.positionScreen.x,D.positionScreen.y),ra.instersects(ea))for(ma=0,qa=V.meshMaterials.length;ma<qa;)if(da=V.meshMaterials[ma++],da instanceof
THREE.MeshFaceMaterial){var wa=0;for(Ba=V.faceMaterials.length;wa<Ba;)(da=V.faceMaterials[wa++])&&0!=da.opacity&&v(u,C,D,0,1,2,V,da,a)}else 0!=da.opacity&&v(u,C,D,0,1,2,V,da,a)}else if(V instanceof THREE.RenderableFace4&&(u=V.v1,C=V.v2,D=V.v3,z=V.v4,u.positionScreen.x*=l,u.positionScreen.y*=r,C.positionScreen.x*=l,C.positionScreen.y*=r,D.positionScreen.x*=l,D.positionScreen.y*=r,z.positionScreen.x*=l,z.positionScreen.y*=r,H.positionScreen.copy(C.positionScreen),T.positionScreen.copy(z.positionScreen),
V.overdraw&&(pa(u.positionScreen,C.positionScreen),pa(C.positionScreen,z.positionScreen),pa(z.positionScreen,u.positionScreen),pa(D.positionScreen,H.positionScreen),pa(D.positionScreen,T.positionScreen)),ea.addPoint(u.positionScreen.x,u.positionScreen.y),ea.addPoint(C.positionScreen.x,C.positionScreen.y),ea.addPoint(D.positionScreen.x,D.positionScreen.y),ea.addPoint(z.positionScreen.x,z.positionScreen.y),ra.instersects(ea)))for(ma=0,qa=V.meshMaterials.length;ma<qa;)if(da=V.meshMaterials[ma++],da instanceof
THREE.MeshFaceMaterial)for(wa=0,Ba=V.faceMaterials.length;wa<Ba;)(da=V.faceMaterials[wa++])&&0!=da.opacity&&y(u,C,D,z,H,T,V,da,a);else 0!=da.opacity&&y(u,C,D,z,H,T,V,da,a);ka.addRectangle(ea)}p.setTransform(1,0,0,1,0,0)}};THREE.RenderableVertex=function(){this.positionWorld=new THREE.Vector3;this.positionScreen=new THREE.Vector4;this.visible=!0};THREE.RenderableVertex.prototype.copy=function(a){this.positionWorld.copy(a.positionWorld);this.positionScreen.copy(a.positionScreen)};
THREE.RenderableFace3=function(){this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.v3=new THREE.RenderableVertex;this.centroidWorld=new THREE.Vector3;this.centroidScreen=new THREE.Vector3;this.normalWorld=new THREE.Vector3;this.vertexNormalsWorld=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.faceMaterials=this.meshMaterials=null;this.overdraw=!1;this.uvs=[[]];this.z=null};
THREE.RenderableFace4=function(){this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.v3=new THREE.RenderableVertex;this.v4=new THREE.RenderableVertex;this.centroidWorld=new THREE.Vector3;this.centroidScreen=new THREE.Vector3;this.normalWorld=new THREE.Vector3;this.vertexNormalsWorld=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.faceMaterials=this.meshMaterials=null;this.overdraw=!1;this.uvs=[[]];this.z=null};
THREE.RenderableObject=function(){this.z=this.object=null};THREE.RenderableParticle=function(){this.rotation=this.z=this.y=this.x=null;this.scale=new THREE.Vector2;this.materials=null};THREE.RenderableLine=function(){this.z=null;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.materials=null};
THREE.Plane=function(a,b,c,e){THREE.Geometry.call(this);var f,g=a/2,d=b/2;c=c||1;e=e||1;var h=c+1,k=e+1;a/=c;var n=b/e;for(f=0;f<k;f++)for(b=0;b<h;b++)this.vertices.push(new THREE.Vertex(new THREE.Vector3(b*a-g,-(f*n-d),0)));for(f=0;f<e;f++)for(b=0;b<c;b++)this.faces.push(new THREE.Face4(b+h*f,b+h*(f+1),b+1+h*(f+1),b+1+h*f)),this.faceVertexUvs[0].push([new THREE.UV(b/c,f/e),new THREE.UV(b/c,(f+1)/e),new THREE.UV((b+1)/c,(f+1)/e),new THREE.UV((b+1)/c,f/e)]);this.computeCentroids();this.computeFaceNormals()};
THREE.Plane.prototype=new THREE.Geometry;THREE.Plane.prototype.constructor=THREE.Plane;var cancelRequestAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}();THREE.Ploy=function(a){THREE.Geometry.call(this);for(var b=0;b<a.length;b++)this.vertices.push(new THREE.Vertex(new THREE.Vector3(a[b][0],a[b][1],0)));4==a.length?this.faces.push(new THREE.Face4(0,1,2,3)):this.faces.push(new THREE.Face3(0,1,2));this.computeCentroids();this.computeFaceNormals()};THREE.Ploy.prototype=new THREE.Geometry;THREE.Ploy.prototype.constructor=THREE.Ploy;
window.twistyjs=function(){var a={},b={};a.registerTwisty=function(a,e){b[a]=e};a.TwistyScene=function(){function a(a){var b=a.target;a.type.startsWith("touch")&&(b=document.elementFromPoint(a.originalEvent.changedTouches[0].pageX,a.originalEvent.changedTouches[0].pageY));return~~$(b).attr("data")}function e(){E.addClass("board");$.delayExec("hintBoard",function(){E&&E.removeClass("board")},5E3)}function f(b){if(z=a(b)){E.addClass("active");e();b=t.getTouchMoves();for(var c=1;9>=c;c++){var d=10*z+
c,f=E.find('[data="'+c+'"]');d in b?f.html(b[d][0]):f.html("")}E.find("td").removeClass("touchfrom touchto");E.find('[data="'+z+'"]').addClass("touchfrom")}}function g(b){if(z)if(b=a(b)){E.addClass("active");e();var c=t.getTouchMoves(),d=10*z+b;E.find("td").removeClass("touchfrom touchto");E.find('[data="'+b+'"]').addClass(d in c?"touchto":"touchfrom");E.find('[data="'+z+'"]').addClass("touchfrom")}else E.removeClass("active")}function d(b){E.removeClass("active");if(z){var c=a(b);c&&(E.find("td").removeClass("touchfrom touchto").html(""),
b=t.getTouchMoves(),c=10*z+c,z=null,c in b&&p.addMoves([b[c][1]]))}}function h(){N.render(F,K)}function k(a,b){u+=a;u=Math.max(Math.min(u,6),-6);C+=b;C=Math.max(Math.min(C,6),-6);n(u,C,!0)}function n(a,b,c){u=a;C=b;var d=2*Math.sqrt(2)*Math.cos(b*Math.TAU/48);K.position=new THREE.Vector3(d*Math.sin(a*Math.TAU/48),2*Math.sqrt(2)*Math.sin(b*Math.TAU/48),d*Math.cos(a*Math.TAU/48));c&&h()}function m(a){for(var b=0;b<H.length;b++)H[b](a[0],0,a[1])}function q(a){for(var b=0;b<H.length;b++)H[b](a[0],2,a[1])}
function l(){y.push(M.shift());v.push(0);for(var a=y[y.length-1],b=0;b<H.length;b++)H[b](a[0],1,a[1])}function r(a){a=$.now();var b=(a-O)/(kernel.getProp("vrcSpeed",100)||.001)*(M.length+2)/2;O=a;a=Math.max(Math.min(b,1),1E-4);for(b=0;b<v.length;b++)v[b]+=a;if(1>v[0])for(b=0;b<y.length;b++)t.animateMoveCallback(t,y[b][0],v[b],a);else{T.push(y.shift());v.shift();if(0==y.length)for(;0!=T.length;)t.advanceMoveCallback(t,T[0][0]),q(T.shift());0==M.length&&0==y.length?null!==Q&&(cancelRequestAnimFrame(Q),
Q=null):0==y.length&&l()}h();null!==Q&&(Q=requestAnimFrame(r,x))}var p=this,t=null,v=null,y=null,M=[],K,F,N,x,E,u=0,C=6,D=$("<div/>");D.css("width","100%");D.css("height","100%");D.css("position","relative");D=D[0];this.getDomElement=function(){return D};this.getCanvas=function(){return x};this.getTwisty=function(){return t};this.initializeTwisty=function(a){M=[];y=[];v=[];null!==Q&&(cancelRequestAnimFrame(Q),Q=null);$(D).empty();F=new THREE.Scene;var c=b[a.type];t=c?c(p,a):null;F.addObject(t._3d);
N=new THREE.CanvasRenderer;x=N.domElement;D.appendChild(x);E=$('<table class="touchcube">').appendTo(D);c="";for(var e=0;3>e;e++){for(var q="",k=0;3>k;k++)q+='<td data="'+(3*e+k+1)+'"/>';c+="<tr>"+q+"</tr>"}E.append(c);a.allowDragging&&(E.on("mousedown",f),E.on("mousemove",g),E.on("mouseup",d),E.on("touchstart",f),E.on("touchmove",g),E.on("touchend",d));p.resize()};this.resize=function(){var a=Math.min($(D).width(),$(D).height());K=new THREE.Camera(30,1,0,1E3);var b=kernel.getProp("vrcOri","6,12");
b=b.split(",");n(~~b[0]-6,~~b[1]-6);K.target.position=new THREE.Vector3(0,-.075,0);N.setSize(a,a);E.css({width:a,height:a,"font-size":.15*a});h()};this.keydown=function(a){var b=a.keyCode,c=t.keydownCallback(t,a);switch(b){case 37:k(1,0);a.preventDefault&&a.preventDefault();break;case 38:k(0,1);a.preventDefault&&a.preventDefault();break;case 39:k(-1,0);a.preventDefault&&a.preventDefault();break;case 40:k(0,-1);a.preventDefault&&a.preventDefault();break;default:c&&h()}};var z=null;this.cam=function(a){k(a,
0)};var H=[];this.addMoveListener=function(a){H.push(a)};this.removeMoveListener=function(a){a=H.indexOf(a);delete H[a]};this.addMoves=function(a,b){for(var c=b||$.now(),d=[],e=0;e<a.length;e++)d.push([a[e],c]);$.map(d,m);if(0==~~kernel.getProp("vrcSpeed",100))return this.applyMoves(a,b);M=M.concat(d);0<M.length&&(null===Q?(l(),O=$.now(),Q=requestAnimFrame(r,x)):y[0]&&!t.isParallelMove(t,y[0][0],M[0][0])||l())};this.isMoveFinished=function(){return 0==M.length&&0==y.length&&0==T.length};this.isAnimationFinished=
function(){return 0==y.length};this.applyMoves=function(a,b){for(var c=b||$.now(),d=[],e=0;e<a.length;e++)d.push([a[e],c]);for(M=M.concat(d);0!=T.length;)t.advanceMoveCallback(t,T[0][0]),q(T.shift());for(;0<M.length;)this.isAnimationFinished()&&l(),t.advanceMoveCallback(t,y[0][0]),q(y.shift()),v.shift();h()};var T=[],Q=null,O=0};return a}();(function(){function a(a,b,c){var d=new THREE.Matrix4;d.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return d}function b(a,b){return a.n14*b.x+a.n24*b.y+a.n34*b.z}twistyjs.registerTwisty("cube",function(d,e){function f(b,c,d,e){for(var f=0;f<b.length;f++){var g=b[f],q=f+1&2?d:e,k=f&1?1:-1,h=f&2?1:-1,l=Math.sqrt(2)/2;g.matrix.copy((new THREE.Matrix4).multiply(a(new THREE.Vector3(1*h,0,0),new THREE.Vector3(0,l*h,-l*h),new THREE.Vector3(0,l,l)),(new THREE.Matrix4).setTranslation(k*(c-2*q),
c*(2*l+.05),0)));g.update()}}function g(a){a=a.options.dimension;for(var b=[],c=0;32>c;c++){var d=1+~~(Math.random()*a/2);b.push([d,d+~~(Math.random()*a/2),"ULFRBD".split("")[~~(6*Math.random())],[-2,-1,1,2][~~(4*Math.random())]])}return b}function k(a,b,c){return{73:[1,b,"R",1],75:[1,b,"R",-1],87:[1,1,"B",1],79:[1,1,"B",-1],83:[1,1,"D",1],76:[1,1,"D",-1],68:[1,a,"L",1],69:[1,a,"L",-1],74:[1,1,"U",1],70:[1,1,"U",-1],72:[1,1,"F",1],71:[1,1,"F",-1],186:[1,c,"U",1],65:[1,c,"U",-1],85:[1,b+1,"R",1],82:[1,
a+1,"L",-1],77:[1,b+1,"R",-1],86:[1,a+1,"L",1],84:[1,c,"L",-1],89:[1,c,"R",1],78:[1,c,"R",-1],66:[1,c,"L",1],190:[b+1,b+1,"R",1],88:[a+1,a+1,"L",-1],53:[a+1,a+1,"L",1],54:[b+1,b+1,"R",-1],80:[1,c,"F",1],81:[1,c,"F",-1],90:[1,2,"D",1],67:[1,2,"U",-1],188:[1,2,"U",1],191:[1,2,"D",-1]}}function h(a){a=a||this;var d=[],e=a.cubePieces;a=a.options.dimension;for(var f=[1,0,0,1,0,0],g=[1,-1,-1,-1,-1,-1],k=[1,-1,1,1,1,-1],h=0;h<c;h++)for(var l=e[h],p=0;p<l.length;p++){var m=l[p],r=[];r.push(Math.round(b(m[0],
q.U)));r.push(Math.round(b(m[0],q.R)));r.push(Math.round(b(m[0],q.F)));var t=r.indexOf(a)+r.indexOf(-a)+1;m=t+(0<r[t]?0:3);r.splice(t,1);t=f[m];d[m*a*a+(r[t]*g[m]+a-1)/2*a+(r[1-t]*k[m]+a-1)/2]=n[h]}return d.join("")}function p(a,b){return 1>=b[0]&&b[1]>=a.options.dimension}function t(a){var b=a[2],c=a[1],d=(a[3]+3)%4;return c>=J?"yxz".charAt("URFDLB".indexOf(a[2])%3)+" 2'".charAt(-1=="URF".indexOf(a[2])?2-d:d):1==a[0]?(2<c?c:"")+b+(2<=c?"w":"")+" 2'".charAt(d):a[0]+"-"+a[1]+a[2]+"w"+" 2'".charAt(d)}
var x=new THREE.Object3D,E=[],u={stickerBorder:!0,stickerWidth:1.8,doubleSided:!0,opacity:1,dimension:3,faceColors:[16777215,16711680,65280,16776960,16748544,255],scale:1};for(D in u)D in e&&(u[D]=e[D]);var C={};var D=new THREE.MeshBasicMaterial({color:0,wireframe:!0,wireframeLinewidth:1,opacity:u.opacity});for(var z=0;z<c;z++)C[z]=new THREE.MeshBasicMaterial({color:u.faceColors[z],opacity:u.opacity});for(z=0;z<c;z++){var H=[];E.push(H);for(var T=0;T<u.dimension;T++)for(var Q=0;Q<u.dimension;Q++){var O=
new THREE.Object3D,P=z;if(7<u.dimension){var w=Math.min(T,u.dimension-1-T),R=Math.min(Q,u.dimension-1-Q);P+=","+(w+R)+","+w*R}C[P]=C[P]||new THREE.MeshBasicMaterial({color:u.faceColors[z],opacity:u.opacity});P=[C[P]];u.stickerBorder&&P.push(D);P=new THREE.Mesh(new THREE.Plane(u.stickerWidth,u.stickerWidth),P);P.doubleSided=u.doubleSided;O.addChild(P);P=(new THREE.Matrix4).multiply(r[z],(new THREE.Matrix4).setTranslation(2*T-u.dimension+1,-(2*Q-u.dimension+1),u.dimension));O.matrix.copy(P);O.matrixAutoUpdate=
!1;O.update();H.push([P,O]);x.addChild(O)}}H=[];if(5<u.dimension)for(T=u.dimension/15,z=0;4>z;z++)O=new THREE.Object3D,P=new THREE.Mesh(new THREE.Ploy([[0,0],[T/2,T],[-T/2,T]]),[z+1&2?C[4]:C[1],D]),P.doubleSided=u.doubleSided,O.addChild(P),O.matrixAutoUpdate=!1,H.push(O),x.addChild(O);C=.5*u.scale/u.dimension;x.scale=new THREE.Vector3(C,C,C);var B=1,G=1,J=u.dimension,Z=k(B,G,J);f(H,J,B,G);var ha=0,aa=-1;return{type:e,options:u,_3d:x,cubePieces:E,handMarks:H,animateMoveCallback:function(a,d,e,f){e=
new THREE.Matrix4;e.setRotationAxis(l[d[2]],f*d[3]*Math.TAU/4);f=a.cubePieces;var g=d[0],k=d[1];0>k&&(k=a.options.dimension+1+k);g=a.options.dimension-2*g+2.5;a=a.options.dimension-2*k-.5;d=q[d[2]];for(k=0;k<c;k++)for(var h=f[k],p=0,m=h.length;p<m;p++){var n=h[p],A=b(n[1].matrix,d);A<g&&A>a&&(n[1].matrix.multiply(e,n[1].matrix),n[1].update())}},advanceMoveCallback:function(a,d){p(a,d)||d[2]==aa||ha++;aa=d[2];var e=m[d[2]],f=d[3];if(0>f){var g=new THREE.Matrix4;g=THREE.Matrix4.makeInvert(e,g)}else g=
e.clone();e=new THREE.Matrix4;for(var k=0;k<Math.abs(f);k++)e.multiplySelf(g);f=a.cubePieces;g=a.options.dimension-2*d[0]+2.5;k=a.options.dimension-2*d[1]-.5;for(var h=q[d[2]],l=0;l<c;l++)for(var n=f[l],r=0,t=n.length;r<t;r++){var w=n[r],I=b(w[1].matrix,h);I<g&&I>k&&(w[0].multiply(e,w[0]),w[1].matrix.copy(w[0]),w[1].update())}},toggleColorVisible:function(a,b){if(a.visible!=b)for(var d=a.cubePieces,e=0;e<c;e++)for(var f=d[e],g=b?u.faceColors[e]:8355711,q=0,k=f.length;q<k;q++)f[q][1].children[0].materials[0].color.setHex(g)},
keydownCallback:function(a,b){if(!b.altKey&&!b.ctrlKey){var e=b.keyCode,g=!1;if(51==e||52==e||55==e||56==e||32==e){51==e?B=Math.max(1,B-1):52==e?B=Math.min(B+1,J-1):55==e?G=Math.min(G+1,J-1):56==e?G=Math.max(1,G-1):32==e&&(B=G=1);Z=k(B,G,J);f(a.handMarks,J,B,G);if(7<a.options.dimension){g="0"==kernel.getProp("vrcAH","01")[0]?!1:!0;var q="0"==kernel.getProp("vrcAH","01")[1]?!1:!0,h=a.options.dimension,l=a.cubePieces,p={0:0,1:0};p[B-1]=0;p[B+0]=0;p[B+1]=0;p[G-1]=0;p[G+0]=0;for(var n=p[G+1]=0;n<c;n++)for(var m=
l[n],r=0,t=m.length;r<t;r++){var w=r%h,I=~~(r/h),v=m[r][1].children[0].materials;w=w in p||h-1-w in p||I in p||h-1-I in p;v[0].color.setHex(w||g?u.faceColors[n]:8355711);w||q?v[1]=a.borderMaterial:v.length=1}}g=!0}e in Z&&d.addMoves([Z[e]]);return g}},getRaycastMoves:function(a,c){if(0==c.length)return[];var d=a.options.dimension,e=[],f=[1,-1,-1,-1,-1,-1],g=[1,-1,1,1,1,-1],k=c[0].object.parent;e.push(Math.round(b(k.matrix,q.U)));e.push(Math.round(b(k.matrix,q.R)));e.push(Math.round(b(k.matrix,q.F)));
var h=e.indexOf(d)+e.indexOf(-d)+1;k=h+(0<e[h]?0:3);e.splice(h,1);h=[1,0,0,1,0,0][k];var l=(e[h]*f[k]+d-1)/2;e=(e[1-h]*g[k]+d-1)/2;for(var p=q[n[k]],m=[],r,w=0;3>w;w++)if(w!=k%3){var I=(new THREE.Vector3).cross(q[n[w]],c[0].point),v=I.dot(p);I.subSelf(p.clone().multiplyScalar(v));var u=d-1-l;r=d-1-e;u==l&&r==e?r=[1,J,n[w],-1]:(v=(h^=1)?l:e,u=h?u:r,r=v>u?-1:1,r*=h?f[k]:g[k],r=[1,Math.min(v,u)+1,n[0>r?w:w+3],r],v==u&&(r[0]=v+1));m.push([r,t(r),I])}return m},getTouchMoves:function(){return{61:["u2",
[1,2,"U",2]],62:["B",[1,1,"B",1]],63:["R",[1,G,"R",1]],64:["y2",[1,J,"U",2]],65:["y",[1,J,"U",1]],67:["F2",[1,1,"F",2]],68:["M",[G+1,G+1,"R",-1]],69:["F",[1,1,"F",1]],41:["L'",[1,B,"L",-1]],42:["B'",[1,1,"B",-1]],43:["u2'",[1,2,"U",-2]],45:["y'",[1,J,"U",-1]],46:["y2'",[1,J,"U",-2]],47:["F'",[1,1,"F",-1]],48:["M",[B+1,B+1,"L",1]],49:["F2'",[1,1,"F",-2]],31:["U2",[1,1,"U",2]],32:["U",[1,1,"U",1]],34:["u2",[1,2,"U",2]],35:["u",[1,2,"U",1]],36:["R'",[1,G,"R",-1]],37:["z'",[1,J,"F",-1]],38:["M2",[G+1,
G+1,"R",-2]],39:["R2'",[1,G,"R",-2]],12:["U'",[1,1,"U",-1]],13:["U2'",[1,1,"U",-2]],14:["L",[1,B,"L",1]],15:["u'",[1,2,"U",-1]],16:["u2'",[1,2,"U",-2]],17:["L2",[1,B,"L",2]],18:["M2",[B+1,B+1,"L",2]],19:["z",[1,J,"F",1]],91:["z'",[1,J,"F",-1]],92:["B2",[1,1,"B",2]],93:["R2",[1,G,"R",2]],94:["F2'",[1,1,"F",-2]],95:["r",[1,G+1,"R",1]],96:["F'",[1,1,"F",-1]],97:["D2'",[1,1,"D",-2]],98:["D'",[1,1,"D",-1]],73:["z",[1,J,"F",1]],72:["B2'",[1,1,"B",-2]],71:["L2'",[1,B,"L",-2]],76:["F2",[1,1,"F",2]],75:["l'",
[1,B+1,"L",-1]],74:["F",[1,1,"F",1]],79:["D2",[1,1,"D",2]],78:["D",[1,1,"D",1]],21:["U",[1,1,"U",1]],23:["U'",[1,1,"U",-1]],24:["B",[1,1,"B",1]],25:["x'",[1,J,"R",-1]],26:["B'",[1,1,"B",-1]],27:["B2",[1,1,"B",2]],28:["x2'",[1,J,"R",-2]],29:["B2'",[1,1,"B",-2]],51:["u",[1,2,"U",1]],52:["x",[1,J,"R",1]],53:["u'",[1,2,"U",-1]],54:["y",[1,J,"U",1]],56:["y'",[1,J,"U",-1]],57:["l",[1,B+1,"L",1]],58:["x'",[1,J,"R",-1]],59:["r'",[1,G+1,"R",-1]],81:["M2'",[B+1,B+1,"L",-2]],82:["x2",[1,J,"R",2]],83:["M2'",
[G+1,G+1,"R",2]],84:["M'",[B+1,B+1,"L",-1]],85:["x",[1,J,"R",1]],86:["M'",[G+1,G+1,"R",1]],87:["D'",[1,1,"D",-1]],89:["D",[1,1,"D",1]]}},isSolved:function(a){if(!d.isAnimationFinished())return 99;if(3==a.options.dimension){var e=cubeutil.getProgress(h(a),kernel.getProp("vrcMP","n"));return d.isMoveFinished()?e:Math.max(1,e)}if(!d.isMoveFinished())return 1;e=a.cubePieces;a=a.options.dimension;for(var f=0;f<c-1;f++){for(var g,k=e[f],l=0;l<c&&!(.5>Math.abs(b(k[0][0],g=q[n[l]])-a));l++);l=1;for(var p=
k.length;l<p;l++)if(.5<Math.abs(b(k[l][0],g)-a))return 1}return 0},isInspectionLegalMove:p,isParallelMove:function(a,b,c){return"URFDLB".indexOf(b[2])%3=="URFDLB".indexOf(c[2])%3},generateScramble:g,parseScramble:function(a,b){if(!a||/^\s*$/.exec(a))return g(this);var c=kernel.parseScramble(a,"URFDLB",b);a=[];for(var d=0;d<c.length;d++)if(0<c[d][1]){var e=c[d][1],f=-1==c[d][3]?1:c[d][3];a.push([Math.min(e,f),Math.max(e,f),"URFDLB".charAt(c[d][0]),[1,2,-1][c[d][2]-1]])}else a.push([1,100,"URFDLB".charAt(c[d][0]),
[1,2,-1][-c[d][2]-1]]);return a},getFacelet:h,moveCnt:function(a){a&&(ha=0,aa=-1);return ha},borderMaterial:D,move2str:t,moveInv:function(a){a=a.slice();a[3]=-a[3];return a}}});var c=6,e=new THREE.Vector3(1,0,0),f=new THREE.Vector3(0,1,0),g=new THREE.Vector3(0,0,1),d=new THREE.Vector3(-1,0,0),h=new THREE.Vector3(0,-1,0),k=new THREE.Vector3(0,0,-1),n="URFDLB".split(""),m={U:a(g,f,d),L:a(e,g,h),F:a(h,e,g),R:a(e,k,f),B:a(f,d,g),D:a(k,f,e)},q={U:f,L:d,F:g,R:e,B:k,D:h},l={U:h,L:e,F:k,R:d,B:g,D:f},r=[a(e,
k,f),a(k,f,e),a(e,f,g),a(e,g,h),a(g,f,d),a(d,f,k)]})();(function(){function a(a,b,c){var d=new THREE.Matrix4;d.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return d}function b(a,b){return a.n14*b.x+a.n24*b.y+a.n34*b.z}twistyjs.registerTwisty("sq1",function(a,c){function d(a){var c=Z[0];a=a.cubePieces;for(var d=0;d<t;d++)for(var e=a[d],f=0,g=e.length;f<g;f++){var q=b(e[f][1].matrix,c);if(.01>Math.abs(q))return!1}return!0}function f(a){a=a.options.dimension;for(var b=[],c=0;32>c;c++){var d=1+~~(Math.random()*a/2);b.push([d,d+~~(Math.random()*
a/2),"ULFRBD".split("")[~~(6*Math.random())],[-2,-1,1,2][~~(4*Math.random())]])}return b}function g(a,b){return-5==b[2]&&5==b[3]}var q=new THREE.Object3D,k=[],h={stickerBorder:!0,stickerWidth:1.8,doubleSided:!0,opacity:1,dimension:3,faceColors:[16776960,255,16711680,65280,16746496,16777215],scale:1};for(l in h)l in c&&(h[l]=c[l]);var l=[];for(var n=new THREE.MeshBasicMaterial({color:0,wireframe:!0,wireframeLinewidth:1,opacity:h.opacity}),m=0;m<t;m++)l.push(new THREE.MeshBasicMaterial({color:h.faceColors[m],
opacity:h.opacity}));for(m=0;m<t;m++){var r=[];k.push(r);for(var P=0;P<p[m].length;P++){var w=p[m][P],R=new THREE.Object3D,B=[l[m]];h.stickerBorder&&B.push(n);for(var G=[],J=0;J<w[0].length;J++)G[J]=[w[0][J][0]*e,w[0][J][1]*e];B=new THREE.Mesh(new THREE.Ploy(G),B);B.doubleSided=h.doubleSided;R.addChild(B);w=(new THREE.Matrix4).setRotationAxis(M[v[m]],Math.TAU/4*w[4]).multiplySelf(K[m]).multiplySelf((new THREE.Matrix4).setTranslation(w[1]*e,w[2]*e,w[3]*e));R.matrix.copy(w);R.matrixAutoUpdate=!1;R.update();
r.push([w,R]);q.addChild(R)}}l=.5*h.scale/h.dimension;q.scale=new THREE.Vector3(l,l,l);var Z=[new THREE.Vector3(Math.cos(Math.TAU/24),0,Math.sin(Math.TAU/24)),y[v[0]],y[v[5]],new THREE.Vector3(Math.sin(Math.TAU/24),0,-Math.cos(Math.TAU/24))],F={73:[0,6,0,5],75:[0,-6,0,5],83:[2,1,1,5],76:[2,-1,1,5],74:[1,1,1,5],70:[1,-1,1,5],186:[1,6,-5,5],65:[1,-6,-5,5],84:[0,6,-5,5],89:[0,6,-5,5],78:[0,-6,-5,5],66:[0,-6,-5,5],80:[3,-6,-5,5],81:[3,6,-5,5],72:[1,3,1,5],71:[1,-3,1,5],87:[2,3,1,5],79:[2,-3,1,5]},aa=
0,N=-1;return{type:c,options:h,_3d:q,cubePieces:k,animateMoveCallback:function(a,c,e,f){if(d(a)||0!=c[0]||0!=c[2]){e=new THREE.Matrix4;var g=Z[c[0]];e.setRotationAxis(g,Math.TAU/12*-f*c[1]);a=a.cubePieces;for(f=0;f<t;f++)for(var q=a[f],k=0,h=q.length;k<h;k++){var l=q[k],p=b(l[1].matrix,g);p>c[2]&&p<c[3]&&(l[1].matrix.multiply(e,l[1].matrix),l[1].update())}}},advanceMoveCallback:function(a,c){if(d(a)||0!=c[0]||0!=c[2]){g(a,c)||c[0]==N||aa++;N=c[0];var e=new THREE.Matrix4,f=Z[c[0]];e.setRotationAxis(f,
-(Math.TAU/12*c[1]));for(var q=a.cubePieces,k=0;k<t;k++)for(var h=q[k],l=0,p=h.length;l<p;l++){var m=h[l],n=b(m[1].matrix,f);n>c[2]&&n<c[3]&&(m[0].multiply(e,m[0]),m[1].matrix.copy(m[0]),m[1].update())}}},keydownCallback:function(b,c){if(!c.altKey&&!c.ctrlKey){var d=c.keyCode;d in F&&a.addMoves([F[d]])}},isSolved:function(c){if(!a.isMoveFinished())return 1;c=c.cubePieces;for(var d=0;d<t-1;d++)for(var e=c[d],f=new THREE.Vector3(e[0][0].n13,e[0][0].n23,e[0][0].n33),g=b(e[0][0],f),q=1,k=e.length;q<k;q++)if(.1<
Math.abs(b(e[q][0],f)-g))return 1;return 0},isInspectionLegalMove:g,isParallelMove:function(a,b,c){return b[0]==c[0]||2==b[0]*c[0]?!0:!1},generateScramble:f,parseScramble:function(a){if(!a||/^\s*$/.exec(a))return f(this);var b=[];a.replace(/(\/)|\((-?\d+), *(-?\d+)\)|(y'?2)/g,function(a,c,d,e,f){c?b.push([0,6,0,5]):f?b.push([1,"'"==f[2]?-6:6,-5,5]):(a=~~d,e=~~e,0!=a&&b.push([1,a,1,5]),0!=e&&b.push([2,e,1,5]))});return b},moveCnt:function(a){a&&(aa=0);return aa},move2str:function(a){var b=a[0],c=a[1];
a=a[3]-a[2];if(4==a)return 1==b?"("+c+",0)":"(0,"+c+")";if(5==a)return 6==c?"/":"/'";if(10==a)return"y"+(6==c?"":"'")+"2"},moveInv:function(a){a=a.slice();a[1]=-a[1];return a}}});var c=Math.sqrt(3)/2,e=1.5,f=1+c,g=(Math.sqrt(2)+Math.sqrt(6))/2,d=(3+Math.sqrt(3))/4,h=g-1.2,k=[[0,.9],[-.45,-c+.05*c],[.45,-c+.05*c]],n=[[.9,.9],[.45,-c+.05*c],[-c+.05*c,-c+.05*c],[-c+.05*c,.45]],m=[[-.45,.6-.05],[-.45,-.6+.05],[.45,-.6+.05],[.45,.6-.05]],q=[[-(.5+c)/2+.05,.6-.05],[-(.5+c)/2+.05,-.6+.05],[(.5+c)/2-.05,
-.6+.05],[(.5+c)/2-.05,.6-.05]],l=[[-f+.05,h-.05],[-f+.05,-h+.05],[f-.05,-h+.05],[f-.05,h-.05]],r=[[-(1.5+c)/2+.05,h-.05],[-(1.5+c)/2+.05,-h+.05],[(1.5+c)/2-.05,-h+.05],[(1.5+c)/2-.05,h-.05]];c=[[-(.5+c)/2+.05,h-.05],[-(.5+c)/2+.05,-h+.05],[(.5+c)/2-.05,-h+.05],[(.5+c)/2-.05,h-.05]];var p=[[[k,0,-1,g,0],[n,-1,-1,g,0],[k,0,-1,g,1],[n,-1,-1,g,1],[k,0,-1,g,2],[n,-1,-1,g,2],[k,0,-1,g,3],[n,-1,-1,g,3]],[[m,0,g-.6,f,0],[q,d,g-.6,f,0],[q,-d,g-.6,f,0],[m,0,g-.6,f,2],[q,d,g-.6,f,2],[q,-d,g-.6,f,2],[l,0,0,
f,0]],[[m,0,g-.6,f,0],[q,d,g-.6,f,0],[q,-d,g-.6,f,0],[m,0,g-.6,f,2],[q,d,g-.6,f,2],[q,-d,g-.6,f,2],[r,d-.5,0,f,0],[c,-d,0,f,0]],[[m,0,g-.6,f,0],[q,d,g-.6,f,0],[q,-d,g-.6,f,0],[m,0,g-.6,f,2],[q,d,g-.6,f,2],[q,-d,g-.6,f,2],[l,0,0,f,0]],[[m,0,g-.6,f,0],[q,d,g-.6,f,0],[q,-d,g-.6,f,0],[m,0,g-.6,f,2],[q,d,g-.6,f,2],[q,-d,g-.6,f,2],[r,d-.5,0,f,0],[c,-d,0,f,0]],[[k,0,-1,g,0],[n,-1,-1,g,0],[k,0,-1,g,1],[n,-1,-1,g,1],[k,0,-1,g,2],[n,-1,-1,g,2],[k,0,-1,g,3],[n,-1,-1,g,3]]],t=6;f=new THREE.Vector3(1,0,0);g=new THREE.Vector3(0,
1,0);d=new THREE.Vector3(0,0,1);k=new THREE.Vector3(-1,0,0);n=new THREE.Vector3(0,-1,0);m=new THREE.Vector3(0,0,-1);var v="ULFRBD".split("");a(d,g,k);a(f,d,n);a(n,f,d);a(f,m,g);a(g,k,d);a(m,g,f);var y={U:g,L:k,F:d,R:f,B:m,D:n},M={U:n,L:f,F:m,R:k,B:d,D:g},K=[a(f,m,g),a(d,g,k),a(f,g,d),a(m,g,f),a(k,g,m),a(f,d,n)]})();(function(){function a(a,b,c){var d=new THREE.Matrix4;d.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return d}function b(a,b){return a.n14*b.x+a.n24*b.y+a.n34*b.z}twistyjs.registerTwisty("skewb",function(a,e){function k(a){a=a.options.dimension;for(var b=[],c=0;32>c;c++){var d=1+~~(Math.random()*a/2);b.push([d,d+~~(Math.random()*a/2),"ULFRBD".split("")[~~(6*Math.random())],[-2,-1,1,2][~~(4*Math.random())]])}return b}function p(a,b){return 4<=b[0]&&6>=b[0]}var n=new THREE.Object3D,t=[],F=
{stickerBorder:!0,stickerWidth:1.8,doubleSided:!0,opacity:1,dimension:3,faceColors:[16777215,16746496,65280,16711680,255,16776960],scale:1};for(N in F)N in e&&(F[N]=e[N]);var N=[];for(var x=new THREE.MeshBasicMaterial({color:0,wireframe:!0,wireframeLinewidth:1,opacity:F.opacity}),E=0;E<g;E++)N.push(new THREE.MeshBasicMaterial({color:F.faceColors[E],opacity:F.opacity}));for(E=0;E<g;E++){var u=[];t.push(u);for(var C=0;C<f.length;C++){var D=f[C],z=new THREE.Object3D,H=[N[E]];F.stickerBorder&&H.push(x);
for(var T=[],Q=0;Q<D[0].length;Q++)T[Q]=[D[0][Q][0]*c,D[0][Q][1]*c];H=new THREE.Mesh(new THREE.Ploy(T),H);H.doubleSided=F.doubleSided;z.addChild(H);D=(new THREE.Matrix4).setRotationAxis(l[q[E]],Math.TAU/4*D[4]).multiplySelf(r[E]).multiplySelf((new THREE.Matrix4).setTranslation(D[1]*c,D[2]*c,D[3]*c));z.matrix.copy(D);z.matrixAutoUpdate=!1;z.update();u.push([D,z]);n.addChild(z)}}N=.5*F.scale/F.dimension;n.scale=new THREE.Vector3(N,N,N);var O=[new THREE.Vector3(0,Math.sqrt(1/3),-Math.sqrt(2/3)),new THREE.Vector3(Math.sqrt(2/
3),-Math.sqrt(1/3),0),new THREE.Vector3(-Math.sqrt(2/3),-Math.sqrt(1/3),0),new THREE.Vector3(0,-Math.sqrt(1/3),-Math.sqrt(2/3)),d,h,m,new THREE.Vector3(Math.sqrt(2/3),Math.sqrt(1/3),0),new THREE.Vector3(-Math.sqrt(2/3),Math.sqrt(1/3),0),new THREE.Vector3(0,Math.sqrt(1/3),Math.sqrt(2/3)),new THREE.Vector3(0,-Math.sqrt(1/3),Math.sqrt(2/3))],P={73:[7,4,0,5],75:[7,-4,0,5],87:[3,4,0,5],79:[3,-4,0,5],83:[10,4,0,5],76:[10,-4,0,5],68:[8,4,0,5],69:[8,-4,0,5],74:[0,4,0,5],70:[0,-4,0,5],72:[9,4,0,5],71:[9,-4,
0,5],186:[5,3,-5,5],65:[5,-3,-5,5],84:[4,3,-5,5],89:[4,3,-5,5],78:[4,-3,-5,5],66:[4,-3,-5,5],80:[6,-3,-5,5],81:[6,3,-5,5]},w=/([URLBxyzrlFD])('?)/g,R=0,B=-1;return{type:e,options:F,_3d:n,cubePieces:t,animateMoveCallback:function(a,c,d,e){d=new THREE.Matrix4;var f=O[c[0]];d.setRotationAxis(f,Math.TAU/12*-e*c[1]);a=a.cubePieces;for(e=0;e<g;e++)for(var q=a[e],k=0,h=q.length;k<h;k++){var l=q[k],p=b(l[1].matrix,f);p>c[2]&&p<c[3]&&(l[1].matrix.multiply(d,l[1].matrix),l[1].update())}},advanceMoveCallback:function(a,
c){p(a,c)||c[0]==B||R++;B=c[0];var d=new THREE.Matrix4,e=O[c[0]];d.setRotationAxis(e,-(Math.TAU/12*c[1]));for(var f=a.cubePieces,q=0;q<g;q++)for(var k=f[q],l=0,h=k.length;l<h;l++){var m=k[l],n=b(m[1].matrix,e);n>c[2]&&n<c[3]&&(m[0].multiply(d,m[0]),m[1].matrix.copy(m[0]),m[1].update())}},keydownCallback:function(b,c){if(!c.altKey&&!c.ctrlKey){var d=c.keyCode;d in P&&a.addMoves([P[d]])}},isSolved:function(c){if(!a.isMoveFinished())return 1;c=c.cubePieces;for(var d=0;d<g-1;d++)for(var e=c[d],f=new THREE.Vector3(e[0][0].n13,
e[0][0].n23,e[0][0].n33),q=b(e[0][0],f),k=1,l=e.length;k<l;k++)if(.1<Math.abs(b(e[k][0],f)-q))return 1;return 0},isInspectionLegalMove:p,isParallelMove:function(a,b,c){return b[0]==c[0]},generateScramble:k,parseScramble:function(a){if(!a||/^\s*$/.exec(a))return k(this);var b=[];a.replace(w,function(a,c,d){b.push(["URLBxyzrlFD".indexOf(c),d?-4:4,0,5])});return b},moveCnt:function(a){a&&(R=0,B=-1);return R},move2str:function(a){var b=a[1];return"URLBxyzrlFD".charAt(a[0])+(0<b?"":"'")},moveInv:function(a){a=
a.slice();a[1]=-a[1];return a}}});var c=1.4,e=[[-.4,-.4],[1.4,-.4],[-.4,1.4]],f=[[e,-1.5,-1.5,2,0],[e,-1.5,-1.5,2,1],[e,-1.5,-1.5,2,2],[e,-1.5,-1.5,2,3],[[[1.8,0],[0,1.8],[-1.8,0],[0,-1.8]],0,0,2,0]],g=6,d=new THREE.Vector3(Math.sqrt(2)/2,0,Math.sqrt(2)/2),h=new THREE.Vector3(0,1,0);e=new THREE.Vector3(-Math.sqrt(2)/2,0,Math.sqrt(2)/2);var k=new THREE.Vector3(-Math.sqrt(2)/2,0,-Math.sqrt(2)/2),n=new THREE.Vector3(0,-1,0),m=new THREE.Vector3(Math.sqrt(2)/2,0,-Math.sqrt(2)/2),q="ULFRBD".split("");a(e,
h,k);a(d,e,n);a(n,d,e);a(d,m,h);a(h,k,e);a(m,h,d);var l={U:n,L:d,F:m,R:k,B:e,D:h},r=[a(d,m,h),a(e,h,k),a(d,h,e),a(m,h,d),a(k,h,m),a(d,e,n)]})();(function(){function a(a,b,c){var d=new THREE.Matrix4;d.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return d}function b(a,b){return(a.n14*b.x+a.n24*b.y+a.n34*b.z)/c}twistyjs.registerTwisty("pyr",function(a,d){function f(a,b){return 3<=Math.abs(b[2])&&3<=Math.abs(b[3])}var g=new THREE.Object3D,k=[],h={stickerBorder:!0,stickerWidth:1.8,doubleSided:!0,opacity:1,dimension:3,faceColors:[],scale:1};for(m in h)m in d&&(h[m]=d[m]);var m=[];for(var n=new THREE.MeshBasicMaterial({color:0,wireframe:!0,
wireframeLinewidth:1,opacity:h.opacity}),z=0;z<l;z++)m.push(new THREE.MeshBasicMaterial({color:h.faceColors[z],opacity:h.opacity}));for(z=0;z<l;z++){var H=[];k.push(H);for(var F=0;F<q.length;F++){curf=q[F];var Q=new THREE.Object3D,O=[m[z]];h.stickerBorder&&O.push(n);for(var P=[],w=0;w<curf[0].length;w++)P[w]=[curf[0][w][0]*c,curf[0][w][1]*c];O=new THREE.Mesh(new THREE.Ploy(P),O);O.doubleSided=h.doubleSided;Q.addChild(O);O=(new THREE.Matrix4).setRotationAxis(r[z],e*curf[4]).multiplySelf(p[z]).multiplySelf((new THREE.Matrix4).setTranslation(curf[1]*
c,curf[2]*c,curf[3]*c));Q.matrix.copy(O);Q.matrixAutoUpdate=!1;Q.update();H.push([O,Q]);g.addChild(Q)}}m=.5*h.scale/h.dimension;g.scale=new THREE.Vector3(m,m,m);var R={73:[v,-1,-3,0],75:[v,1,-3,0],87:[M,-1,-3,0],79:[M,1,-3,0],83:[M,-1,-3,-1],76:[M,1,-3,-1],68:[y,-1,-3,0],69:[y,1,-3,0],74:[t,-1,-3,0],70:[t,1,-3,0],72:[t,-1,-3,-1],71:[t,1,-3,-1],186:[t,-1,-3,3],65:[t,1,-3,3],85:[v,-1,-3,-1],77:[v,1,-3,-1],82:[y,1,-3,-1],86:[y,-1,-3,-1],84:[y,1,-3,3],89:[v,-1,-3,3],78:[v,1,-3,3],66:[y,-1,-3,3],80:[M,
1,-3,3],81:[M,-1,-3,3]},B=/^(?:([URLBurlb]'?)|\[([urlb]'?)\])$/,G=0,J=-1;return{type:d,options:h,_3d:g,cubePieces:k,animateMoveCallback:function(a,c,d,f){d=new THREE.Matrix4;var g=r[c[0]];d.setRotationAxis(g,e/3*-f*c[1]);a=a.cubePieces;for(f=0;f<l;f++)for(var q=a[f],k=0,h=q.length;k<h;k++){var p=q[k],m=b(p[1].matrix,g);m>c[2]&&m<c[3]&&(p[1].matrix.multiply(d,p[1].matrix),p[1].update())}},advanceMoveCallback:function(a,c){f(a,c)||c[0]==J||G++;J=c[0];var d=new THREE.Matrix4,g=r[c[0]];d.setRotationAxis(g,
-(e/3*c[1]));for(var k=a.cubePieces,q=0;q<l;q++)for(var h=k[q],p=0,m=h.length;p<m;p++){var n=h[p],w=b(n[1].matrix,g);w>c[2]&&w<c[3]&&(n[0].multiply(d,n[0]),n[1].matrix.copy(n[0]),n[1].update())}},keydownCallback:function(b,c){if(!c.altKey&&!c.ctrlKey){var d=c.keyCode;d in R&&a.addMoves([R[d]])}},isSolved:function(c){if(!a.isMoveFinished())return 1;c=c.cubePieces;for(var d=0;d<l-1;d++)for(var e=c[d],f=new THREE.Vector3(e[0][0].n13,e[0][0].n23,e[0][0].n33),g=b(e[0][0],f),q=1,k=e.length;q<k;q++)if(.1<
Math.abs(b(e[q][0],f)-g))return 1;return 0},isInspectionLegalMove:f,isParallelMove:function(a,b,c){return b[0]==c[0]},generateScramble:function(a){return[]},parseScramble:function(a){if(!a||/^\s*$/.exec(a))return[];a=a.split(/ +/g);for(var b=[],c=0;c<a.length;c++){var d=B.exec(a[c]);if(d)if(d[2])b.push(["urlb".indexOf(d[2][0]),d[2][1]?1:-1,-3,3]);else{var e="URLBurlb".indexOf(d[1][0]);b.push([e%4,d[1][1]?1:-1,-3,4>e?0:-1])}}return b},moveCnt:function(a){a&&(G=0,J=-1);return G},move2str:function(a){var b=
a[0],c=1==a[1]?"'":"";a=a[3]-a[2];return 6==a?"["+"urlb".charAt(b)+c+"]":2==a?"urlb".charAt(b)+c:"URLB".charAt(b)+c},moveInv:function(a){a=a.slice();a[1]=-a[1];return a}}});var c=2.5,e=Math.TAU,f=new THREE.Vector3(0,-1,0),g=new THREE.Vector3(-Math.sqrt(6)/3,1/3,-Math.sqrt(2)/3),d=new THREE.Vector3(Math.sqrt(6)/3,1/3,-Math.sqrt(2)/3),h=new THREE.Vector3(0,1/3,Math.sqrt(8)/3),k=1/Math.sqrt(3),n=[[0,k-.07],[-(1-.07/k)/2,-(k-.07)/2],[(1-.07/k)/2,-(k-.07)/2]],m=Math.sqrt(6)/4,q=[[n,0,-k,m,0],[n,0,-k,m,
1/6],[n,0,-k,m,2/6],[n,0,-k,m,.5],[n,0,-k,m,4/6],[n,0,-k,m,5/6],[n,0,2*k,m,1/6],[n,0,2*k,m,.5],[n,0,2*k,m,5/6]],l=4,r=[f,g,d,h],p=[a(new THREE.Vector3(1,0,0),new THREE.Vector3(0,0,1),f),a(new THREE.Vector3(-.5,0,Math.sqrt(3)/2),new THREE.Vector3(-Math.sqrt(3)/6,-2*Math.sqrt(2)/3,-1/6),g),a(new THREE.Vector3(-.5,0,-Math.sqrt(3)/2),new THREE.Vector3(Math.sqrt(3)/6,-2*Math.sqrt(2)/3,-1/6),d),a(new THREE.Vector3(1,0,0),new THREE.Vector3(0,-Math.sqrt(8)/3,1/3),h)],t=0,v=1,y=2,M=3})();(function(){function a(a,b,c){var d=new THREE.Matrix4;d.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return d}function b(a,b){return(a.n14*b.x+a.n24*b.y+a.n34*b.z)/c}twistyjs.registerTwisty("mgm",function(a,d){function f(a,b){return 3<=Math.abs(b[2])&&3<=Math.abs(b[3])}var g=new THREE.Object3D,q=[],k={stickerBorder:!0,stickerWidth:1.8,doubleSided:!0,opacity:1,dimension:3,faceColors:[],scale:1};for(h in k)h in d&&(k[h]=d[h]);var h=[];for(var l=new THREE.MeshBasicMaterial({color:0,wireframe:!0,
wireframeLinewidth:1,opacity:k.opacity}),p=0;p<C;p++)h.push(new THREE.MeshBasicMaterial({color:k.faceColors[p],opacity:k.opacity}));for(p=0;p<C;p++){var m=[];q.push(m);for(var n=0;n<u.length;n++){curf=u[n];var r=new THREE.Object3D,w=[h[p]];k.stickerBorder&&w.push(l);for(var t=[],v=0;v<curf[0].length;v++)t[v]=[curf[0][v][0]*c,curf[0][v][1]*c];w=new THREE.Mesh(new THREE.Ploy(t),w);w.doubleSided=k.doubleSided;r.addChild(w);w=(new THREE.Matrix4).setRotationAxis(D[p],e*curf[4]).multiplySelf(z[p]).multiplySelf((new THREE.Matrix4).setTranslation(curf[1]*
c,curf[2]*c,curf[3]*c));r.matrix.copy(w);r.matrixAutoUpdate=!1;r.update();m.push([w,r]);g.addChild(r)}}h=.5*k.scale/k.dimension;g.scale=new THREE.Vector3(h,h,h);var y={73:[Q,1,1,3],75:[Q,-1,1,3],68:[O,1,1,3],69:[O,-1,1,3],74:[H,1,1,3],70:[H,-1,1,3],72:[T,1,1,3],71:[T,-1,1,3],186:[H,1,-3,3],65:[H,-1,-3,3],85:[O,-1,-3,1],82:[Q,1,-3,1],77:[O,1,-3,1],86:[Q,-1,-3,1],84:[O,-1,-3,3],89:[Q,1,-3,3],78:[Q,-1,-3,3],66:[O,1,-3,3],80:[T,1,-3,3],81:[T,-1,-3,3]},x=0,P=-1;return{type:d,options:k,_3d:g,cubePieces:q,
animateMoveCallback:function(a,c,d,f){d=new THREE.Matrix4;var g=D[c[0]];d.setRotationAxis(g,e/5*-f*c[1]);a=a.cubePieces;for(f=0;f<C;f++)for(var k=a[f],q=0,h=k.length;q<h;q++){var l=k[q],p=b(l[1].matrix,g);p>c[2]&&p<c[3]&&(l[1].matrix.multiply(d,l[1].matrix),l[1].update())}},advanceMoveCallback:function(a,c){f(a,c)||c[0]==P||x++;P=c[0];var d=new THREE.Matrix4,g=D[c[0]];d.setRotationAxis(g,-(e/5*c[1]));for(var k=a.cubePieces,q=0;q<C;q++)for(var h=k[q],l=0,p=h.length;l<p;l++){var m=h[l],n=b(m[1].matrix,
g);n>c[2]&&n<c[3]&&(m[0].multiply(d,m[0]),m[1].matrix.copy(m[0]),m[1].update())}},keydownCallback:function(b,c){if(!c.altKey&&!c.ctrlKey){var d=c.keyCode;d in y&&a.addMoves([y[d]])}},isSolved:function(c){if(!a.isMoveFinished())return 1;c=c.cubePieces;for(var d=0;d<C-1;d++)for(var e=c[d],f=new THREE.Vector3(e[0][0].n13,e[0][0].n23,e[0][0].n33),g=b(e[0][0],f),k=1,q=e.length;k<q;k++)if(.1<Math.abs(b(e[k][0],f)-g))return 1;return 0},isInspectionLegalMove:f,isParallelMove:function(a,b,c){return b[0]==
c[0]},generateScramble:function(a){return[]},parseScramble:function(a){if(!a||/^\s*$/.exec(a))return[];var b=[];a.replace(/(?:^|\s*)(?:([DLR])(\+\+?|--?)|(U|F|D?B?R|D?B?L|D|B)(\d?)('?)|\[([ufrl])('?)\])(?:$|\s*)/g,function(a,c,d,e,f,g,k,q){c?b.push(["D?L??R".indexOf(c),("+"==d[0]?-1:1)*d.length,-3,1]):e?b.push(["U F R BR BL L D B DBL DL DR DBR".split(" ").indexOf(e),(g?-1:1)*(~~f||1),1,3]):b.push(["ufr??l".indexOf(k),q?-1:1,-3,3])});return 0==b.length?[]:b},moveCnt:function(a){a&&(x=0,P=-1);return x},
move2str:function(a){var b=a[0],c=a[1];a=a[3]-a[2];if(6==a)return"["+"ufr??l??????".charAt(b)+(0<c?"":"'")+"]";if(4==a)return"D?L??R??????".charAt(b)+(0<c?"-":"+");if(2==a)return"U F R BR BL L D B DBL DL DR DBR".split(" ")[b]+(0<c?"":"'")},moveInv:function(a){a=a.slice();a[1]=-a[1];return a}}});var c=2.8,e=Math.TAU,f=function(a){return Math.sin(a*e)},g=function(a){return Math.cos(a*e)},d=1/Math.sqrt(5),h=new THREE.Vector3(0,1,0),k=new THREE.Vector3(0,d,2*d),n=new THREE.Vector3(2*d*f(.2),d,2*d*g(.2)),
m=new THREE.Vector3(2*d*f(.4),d,2*d*g(.4)),q=new THREE.Vector3(2*d*f(.6),d,2*d*g(.6)),l=new THREE.Vector3(2*d*f(.8),d,2*d*g(.8)),r=new THREE.Vector3(0,-1,0),p=new THREE.Vector3(0,-d,-2*d),t=new THREE.Vector3(-2*d*f(.2),-d,-2*d*g(.2)),v=new THREE.Vector3(-2*d*f(.4),-d,-2*d*g(.4)),y=new THREE.Vector3(-2*d*f(.6),-d,-2*d*g(.6)),M=new THREE.Vector3(-2*d*f(.8),-d,-2*d*g(.8)),K=Math.PI,F=.275/Math.tan(K/5),N=[[.45*Math.sin(0*K),.45*-Math.cos(0*K)],[.45*Math.sin(.4*K),.45*-Math.cos(.4*K)],[.45*Math.sin(.8*
K),.45*-Math.cos(.8*K)],[.45*Math.sin(1.2*K),.45*-Math.cos(1.2*K)]];K=[[.45*Math.sin(0*K),.45*-Math.cos(0*K)],[.45*Math.sin(1.2*K),.45*-Math.cos(1.2*K)],[.45*Math.sin(1.6*K),.45*-Math.cos(1.6*K)]];var x=[[.45*f(.1)-.05*f(.05),.55*g(.1)-.05-.2],[-.45*f(.1)+.05*f(.05),.55*g(.1)-.05-.2],[f(-.1)-.275/f(-.1)-.05*f(.05),.05-.2],[f(.1)-.275/f(.1)+.05*f(.05),.05-.2]];F=[[0,.05/g(.1)-.2],[F-.05/f(.1),.275-.2],[0,.55-.05/g(.1)-.2],[-F+.05/f(.1),.275-.2]];var E=2*(Math.cos(Math.PI/5)+Math.cos(Math.PI/5)*Math.cos(Math.PI/
5)-.05)/Math.sqrt(5),u=[[x,0,.2-g(.1),E,.1],[x,0,.2-g(.1),E,.3],[x,0,.2-g(.1),E,.5],[x,0,.2-g(.1),E,.7],[x,0,.2-g(.1),E,.9],[F,0,-.8,E,0],[F,0,-.8,E,.2],[F,0,-.8,E,.4],[F,0,-.8,E,.6],[F,0,-.8,E,.8],[N,0,0,E,0],[K,0,0,E,0]],C=12,D=[h,k,n,m,q,l,r,p,t,v,y,M],z=[a(new THREE.Vector3(-1,0,0),new THREE.Vector3(0,0,1),h),a(new THREE.Vector3(1,0,0),new THREE.Vector3(0,2*d,-d),k),a(new THREE.Vector3(g(.2),0,-f(.2)),new THREE.Vector3(-f(.2)*d,2*d,-d*g(.2)),n),a(new THREE.Vector3(g(.4),0,-f(.4)),new THREE.Vector3(-f(.4)*
d,2*d,-d*g(.4)),m),a(new THREE.Vector3(g(.6),0,-f(.6)),new THREE.Vector3(-f(.6)*d,2*d,-d*g(.6)),q),a(new THREE.Vector3(g(.8),0,-f(.8)),new THREE.Vector3(-f(.8)*d,2*d,-d*g(.8)),l),a(new THREE.Vector3(1,0,0),new THREE.Vector3(0,0,-1),r),a(new THREE.Vector3(-1,0,0),new THREE.Vector3(0,-2*d,d),p),a(new THREE.Vector3(-g(.2),0,f(.2)),new THREE.Vector3(f(.2)*d,-2*d,d*g(.2)),t),a(new THREE.Vector3(-g(.4),0,f(.4)),new THREE.Vector3(f(.4)*d,-2*d,d*g(.4)),v),a(new THREE.Vector3(-g(.6),0,f(.6)),new THREE.Vector3(f(.6)*
d,-2*d,d*g(.6)),y),a(new THREE.Vector3(-g(.8),0,f(.8)),new THREE.Vector3(f(.8)*d,-2*d,d*g(.8)),M)],H=0,T=1,Q=2,O=5})();(function(){function a(a,b,c){var d=new THREE.Matrix4;d.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return d}twistyjs.registerTwisty("clk",function(a,f){function g(a,b,c){var d=b[0];if(d==u)return c&&(L[22]^=1),[];a.internalState[22]&&(d^=1);if(d>=F)return c&&(L[18+d-F]^=1),[];var e=a.internalState[18+d];d=[];for(var f=0;4>f;f++)if(a.internalState[18+f]==e)for(var g=0;g<C[f].length;g++)d[C[f][g]]=1;if(e){e=[];for(f=0;f<d.length;f++)d[f]&&(e[D[f]]=1);d=e}if(c)for(f=0;18>f;f++)c=9>f^a.internalState[22]?
b[1]:-b[1],d[f]&&(a.internalState[f]+=c);return d}var k=new THREE.Object3D,m=[],n={stickerBorder:!0,stickerWidth:1.8,doubleSided:!0,opacity:1,dimension:3,faceColors:[],scale:1};for(w in n)w in f&&(n[w]=f[w]);var w=[];for(var z=new THREE.MeshBasicMaterial({color:0,wireframe:!0,wireframeLinewidth:1,opacity:n.opacity}),B=0;B<d+3;B++)w.push(new THREE.MeshBasicMaterial({color:n.faceColors[B],opacity:n.opacity}));var H=[];for(B=0;B<d;B++)for(var J=0;9>J;J++){var Z=J%3-1,ha=~~(J/3)-1,aa=[];m.push(aa);var ba=
[w[B]];n.stickerBorder&&ba.push(z);for(var I=0;12>I;I++){for(var S=[],A=0;A<h.length;A++)S[A]=[h[A][0]*b,h[A][1]*b];A=new THREE.Object3D;S=new THREE.Mesh(new THREE.Ploy(S),ba);S.doubleSided=n.doubleSided;A.addChild(S);S=t[B].clone().multiplySelf((new THREE.Matrix4).setTranslation(Z*b*(2+c),-ha*b*(2+c),.9*b)).multiplySelf((new THREE.Matrix4).setRotationAxis(r,Math.TAU/12*I));A.matrix.copy(S);A.matrixAutoUpdate=!1;A.update();H.push([S,A]);k.addChild(A)}ba=[w[2]];n.stickerBorder&&ba.push(z);for(I=0;4>
I;I++){S=[];for(A=0;A<q[I].length;A++)S[A]=[.2*q[I][A][0]*b,.2*q[I][A][1]*b];A=new THREE.Object3D;S=new THREE.Mesh(new THREE.Ploy(S),ba);S.doubleSided=n.doubleSided;A.addChild(S);S=t[B].clone().multiplySelf((new THREE.Matrix4).setTranslation(Z*b*(2+c),-ha*b*(2+c),1*b)).multiplySelf((new THREE.Matrix4).setRotationAxis(r,Math.TAU/3*I));A.matrix.copy(S);A.matrixAutoUpdate=!1;A.update();aa.push([S,A]);k.addChild(A)}}for(B=0;B<d;B++)for(J=0;4>J;J++)for(Z=J%2-.5,ha=~~(J/2)-.5,aa=[],m.push(aa),ba=[new THREE.MeshBasicMaterial({color:n.faceColors[B+
3],opacity:n.opacity})],n.stickerBorder&&ba.push(z),I=0;4>I;I++){S=[];for(A=0;A<l[I].length;A++)S[A]=[.2*l[I][A][0]*b,.2*l[I][A][1]*b];A=new THREE.Object3D;S=new THREE.Mesh(new THREE.Ploy(S),ba);S.doubleSided=n.doubleSided;A.addChild(S);S=t[B].clone().multiplySelf((new THREE.Matrix4).setTranslation(-Z*b*(2+c),-ha*b*(2+c),1*b)).multiplySelf((new THREE.Matrix4).setRotationAxis(r,Math.TAU/3*I+Math.TAU/2*B));A.matrix.copy(S);A.matrixAutoUpdate=!1;A.update();aa.push([S,A]);k.addChild(A)}m.push(H);var L=
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];w=.5*n.scale/n.dimension;k.scale=new THREE.Vector3(w,w,w);var U={89:[F,6],84:[N,6],72:[x,6],71:[E,6],85:[v,-2],73:[v,-1],79:[v,1],80:[v,2],74:[M,-2],75:[M,-1],76:[M,1],186:[M,2],82:[y,2],69:[y,1],87:[y,-1],81:[y,-2],70:[K,2],68:[K,1],83:[K,-1],65:[K,-2],66:[u,6],78:[u,-6]},W=0,X=-1;return{type:f,options:n,_3d:k,cubePieces:m,internalState:L,animateMoveCallback:function(a,b,c,d){c=new THREE.Matrix4;var f=new THREE.Matrix4,k=e/12*b[1],q=g(a,b,!1);b=b[0];
var h=a.cubePieces;if(b==u)for(c.setRotationAxis(p,-d*k),d=0;d<h.length;d++)for(k=0;k<h[d].length;k++){var l=h[d][k];l[1].matrix.multiply(c,l[1].matrix);l[1].update()}else if(b<F)for(c.setRotationAxis(r,-d*k),f.setRotationAxis(r,d*k),d=0;18>d;d++){if(q[d])for(k=0;k<h[d].length;k++)l=h[d][k],l[1].matrix.multiply(l[1].matrix,9>d^a.internalState[22]?c:f),l[1].update()}else for(c.setRotationAxis(r,-d*k),f.setRotationAxis(r,d*k),b^=a.internalState[22],d=0;2>d;d++)for(a=18+(b-F+4*d^d%2),k=0;k<h[a].length;k++)l=
h[a][k],l[1].matrix.multiply(l[1].matrix,1>d?c:f),l[1].update()},advanceMoveCallback:function(a,b){b[0]==u||b[0]==X||W++;X=b[0];var c=new THREE.Matrix4,d=new THREE.Matrix4,f=e/12*b[1],k=g(a,b,!0),q=b[0],h=a.cubePieces;if(q==u)for(c.setRotationAxis(p,-f),f=0;f<h.length;f++)for(var l=0;l<h[f].length;l++){var m=h[f][l];m[0].multiply(c,m[0]);m[1].matrix.copy(m[0]);m[1].update()}else if(q<F)for(c.setRotationAxis(r,-f),d.setRotationAxis(r,f),f=0;18>f;f++){if(k[f])for(l=0;l<h[f].length;l++)m=h[f][l],m[0].multiply(m[0],
9>f^a.internalState[22]?c:d),m[1].matrix.copy(m[0]),m[1].update()}else for(c.setRotationAxis(r,-f),d.setRotationAxis(r,f),q^=a.internalState[22],f=0;2>f;f++)for(k=18+(q-F+4*f^f%2),l=0;l<h[k].length;l++)m=h[k][l],m[0].multiply(m[0],1>f?c:d),m[1].matrix.copy(m[0]),m[1].update(),m[1].children[0].materials[0].color.setHex(n.faceColors[3+(a.internalState[18+q-F]^f)])},keydownCallback:function(b,c){if(!c.altKey&&!c.ctrlKey){var d=c.keyCode;d in U&&a.addMoves([U[d]])}},isSolved:function(b){if(!a.isMoveFinished())return 1;
for(var c=0;18>c;c++)if(0!=b.internalState[c]%12)return 1;return 0},isInspectionLegalMove:function(a,b){return b[0]==u},isParallelMove:function(a,b,c){return~~(b[0]/4)==~~(c[0]/4)},generateScramble:function(a){return[]},parseScramble:function(a){if(!a||/^\s*$/.exec(a))return[];var b=/^(([URDL]{1,2}|ALL)(\d+)?([+-])?|y2)$/,c=/^m(b?[UD][RL]|Y)(-?\d+)$/,d=[1,1,1,1],e=[1,1,1,1],f=a.split(/\s/),g=1;a=[[u,6]];for(var k=!1,q=0;q<f.length;q++){var h=f[q],l=c.exec(h);if(l)k=!0,a.push(["UR UL DR DL bUR bUL bDR bDL Y".split(" ").indexOf(l[1]),
~~l[2]]);else{l=b.exec(h);if(!l)return[];if(l[3]){if(h=~~l[3]*("-"==l[4]?-1:1),0!=h){l={U:[0,0,1,1],R:[0,1,0,1],D:[1,1,0,0],L:[1,0,1,0],UR:[0,1,1,1],UL:[1,0,1,1],DR:[1,1,0,1],DL:[1,1,1,0],ALL:[0,0,0,0]}[l[2]];for(var p=0,m=0;4>m;m++)d[m]!=l[m]&&(a.push([m+F,6]),d[m]=l[m]),d[m]||(p=m);a.push([p+v,h])}}else switch(l[1]){case "y2":a.push([u,6]);d=[1-d[1],1-d[0],1-d[3],1-d[2]];g=1-g;break;case "UR":case "UL":case "DR":case "DL":e["URULDRDL".indexOf(l[1])>>1]=0}}}if(k)return a.shift(),a;g&&(a.push([u,
6]),d=[1-d[1],1-d[0],1-d[3],1-d[2]]);for(m=0;4>m;m++)d[m]!=e[m]&&a.push([m+F,6]);return a},moveCnt:function(a){a&&(W=0,X=-1);return W},move2str:function(a){return"mUR mUL mDR mDL mbUR mbUL mbDR mbDL mY".split(" ")[a[0]]+a[1]},moveInv:function(a){a=a.slice();a[1]=-a[1];return a}}});var b=1.2,c=.1,e=Math.TAU,f=function(a){return Math.sin(a*e)},g=function(a){return Math.cos(a*e)};new THREE.Vector3(0,1,0);new THREE.Vector3(0,-1,0);var d=2,h=[[g(5/24),f(5/24)],[g(.25),f(.25)],[g(7/24),f(7/24)],[0,0]],
k=[[g(1/12),f(1/12)],[g(5/12),f(5/12)],[g(.75),f(.75)]],n=[[g(1/12),f(1/12)],[g(1/12+1/9),f(1/12+1/9)],[g(1/12+2/9),f(1/12+2/9)],[g(1/12+3/9),f(1/12+3/9)]],m=[[g(1/12),f(1/12)],[g(1/12+1.45/9),4],[g(1/12+1.55/9),4],[g(1/12+3/9),f(1/12+3/9)]],q=[k,n,n,m],l=[k,n,n,n];k=new THREE.Vector3(1,0,0);new THREE.Vector3(0,1,0);var r=new THREE.Vector3(0,0,1);n=new THREE.Vector3(-1,0,0);new THREE.Vector3(0,-1,0);new THREE.Vector3(0,0,-1);m=new THREE.Vector3(0,g(.125),f(.125));var p=new THREE.Vector3(0,-g(.375),
-f(.375));new THREE.Vector3(0,g(.375),f(.375));f=new THREE.Vector3(0,-g(.125),-f(.125));var t=[a(k,p,m),a(n,p,f)],v=0,y=1,M=2,K=3,F=4,N=5,x=6,E=7,u=8,C=[[1,2,4,5,9],[0,1,3,4,11],[4,5,7,8,15],[3,4,6,7,17]],D=[11,10,9,14,13,12,17,16,15,2,1,0,5,4,3,8,7,6]})();window.twistyjs.qcube=function(){var a={},b={};a.registerTwisty=function(a,e){b[a]=e};a.TwistyScene=function(){var a=this,e,f=$('<div style="width:100%; height:100%;"/>'),g=$("<canvas>").appendTo(f);this.fixSize=function(a,b){var c=Math.min($(f).width()/a,$(f).height()/b),d=Math.max(50,c);g.width(a*c);g.height(b*c);g.attr("width",a*d);g.attr("height",b*d);return d};this.getDomElement=function(){return f};this.getCanvas=function(){return g};this.getTwisty=function(){return e};this.keydown=function(a){e.keydown(a)&&
e&&e.render()};var d=[];this.addMoveListener=function(a){d.push(a)};this.removeMoveListener=function(a){a=d.indexOf(a);delete d[a]};this.addMoves=function(a,b){for(var c=b||$.now(),e=0;e<a.length;e++)for(var f=[a[e],c],g=0;g<d.length;g++)d[g](f[0],0,f[1]);return this.applyMoves(a,b)};this.applyMoves=function(a,b){for(var c=b||$.now(),f=0;f<a.length;f++){e.doMove(a[f]);for(var g=[a[f],c],k=0;k<d.length;k++)d[k](g[0],2,g[1])}e&&e.render()};this.resize=function(){e&&e.render()};this.initializeTwisty=
function(c){var d=b[c.type];if(!d)return null;e=new d(a,c)}};return a}();(function(){function a(a,b,c,e,f){var d=e*e,g,l,k;5<a&&(a-=6);for(k=0;k<c;k++){for(g=0;g<e;g++){if(0==a){var h=6*d-e*b-e+g;var n=2*d-e*b-1-g;var v=3*d-e*b-1-g;var y=5*d-e*b-e+g}else 1==a?(h=3*d+b+e*g,n=3*d+b-e*(g+1),v=d+b-e*(g+1),y=5*d+b+e*g):2==a?(h=3*d+b*e+g,n=4*d+e-1-b+e*g,v=b*e+e-1-g,y=2*d-1-b-e*g):3==a?(h=4*d+b*e+e-1-g,n=2*d+b*e+g,v=d+b*e+g,y=5*d+b*e+e-1-g):4==a?(h=6*d-1-b-e*g,n=e-1-b+e*g,v=2*d+e-1-b+e*g,y=4*d-1-b-e*g):5==a&&(h=4*d-e-b*e+g,n=2*d-e+b-e*g,v=d-1-b*e-g,y=4*d+b+e*g);var M=f[h];f[h]=
f[n];f[n]=f[v];f[v]=f[y];f[y]=M}if(0==b)for(g=0;g+g<e;g++)for(l=0;l+l<e-1;l++)h=a*d+g+l*e,v=a*d+(e-1-g)+(e-1-l)*e,3>a?(n=a*d+(e-1-l)+g*e,y=a*d+l+(e-1-g)*e):(y=a*d+(e-1-l)+g*e,n=a*d+l+(e-1-g)*e),M=f[h],f[h]=f[n],f[n]=f[v],f[v]=f[y],f[y]=M}}function b(a,b){for(var c=b.size,d=.1*Math.sqrt(c/3),g=a?0:d+1,m=b.twistyScene.fixSize(c+1+3*d+g,2*c+3*d-1+g),q=b.twistyScene.getCanvas()[0].getContext("2d"),l=b.posit,r=0;r<c;r++){var p=c-1-r,t=[[0,0,1,1],[r,r+1,r+1,r]];e(q,f[l[4*c*c+p]],t,[m,c+2*d+g,d+g]);a||(e(q,
f[l[1*c*c+p]],t,[m,d+0,2*d+1]),t=[[r,r,r+1,r+1],[0,1,1,0]],e(q,f[l[2*c*c+r]],t,[m,1+2*d,d]));for(p=0;p<c;p++)t=[[r,r,r+1,r+1],[p,p+1,p+1,p]],e(q,f[l[(3*c+p)*c+r]],t,[m,d+g,d+g]),2>p&&e(q,f[l[(5*c+p)*c+r]],t,[m,d+g,c+2*d+g])}5<c&&e(q,"#fff",[[-.1,-.1,.1,.1],[-.1,.1,.1,-.1]],[m,.5*c+1+2*d,.5*c+2*d+1])}function c(a,b,c){return{73:[1,b,"R",1],75:[1,b,"R",-1],87:[1,1,"B",1],79:[1,1,"B",-1],83:[1,1,"D",1],76:[1,1,"D",-1],68:[1,a,"L",1],69:[1,a,"L",-1],74:[1,1,"U",1],70:[1,1,"U",-1],72:[1,1,"F",1],71:[1,
1,"F",-1],186:[1,c,"U",1],65:[1,c,"U",-1],85:[1,b+1,"R",1],82:[1,a+1,"L",-1],77:[1,b+1,"R",-1],86:[1,a+1,"L",1],84:[1,c,"L",-1],89:[1,c,"R",1],78:[1,c,"R",-1],66:[1,c,"L",1],190:[2,2,"R",1],88:[2,2,"L",-1],53:[2,2,"L",1],54:[2,2,"R",-1],80:[1,c,"F",1],81:[1,c,"F",-1],90:[1,2,"D",1],67:[1,2,"U",-1],188:[1,2,"U",1],191:[1,2,"D",-1]}}twistyjs.qcube.registerTwisty("cube",function(g,d){this.size=d.dimension;this.style=d.style;this.oSr=this.oSl=1;this.iSi=this.size;this.cubeKeyMapping=c(this.oSl,this.oSr,
this.iSi);this.twistyScene=g;this.posit=[];this.counter=0;this.lastMove=-1;for(var h=this.size,k=0,n=0;6>n;n++)for(var m=0;m<h*h;m++)this.posit[k++]=n;this.cntMove=function(a){this.isInspectionLegalMove(this,a)||a[2]==this.lastMove||this.counter++;this.lastMove=a[2]};this.render=function(){if(this.twistyScene.getCanvas())if(f=kernel.getProp("colcube").match(/#[0-9a-fA-F]{3}/g),"q2"==this.style)b(!0,this);else if("ql"==this.style)b(!1,this);else{for(var a=this.size,c=.1*Math.sqrt(a/3),d=this.twistyScene.fixSize(a+
2+4*c,2*a+3*c),g=this.twistyScene.getCanvas()[0].getContext("2d"),k=this.posit,h=0;h<a;h++){var m=a-1-h,n=[[0,0,1,1],[h,h+1,h+1,h]];0!=h&&(e(g,f[k[(1*a+h)*a]],n,[d,c,a+2*c]),e(g,f[k[(4*a+h)*a]],n,[d,a+1+3*c,a+2*c]));h!=a-1&&(e(g,f[k[1*a*a+m]],n,[d,c+0,c+0]),e(g,f[k[4*a*a+m]],n,[d,c+a+1+2*c,c]));for(m=0;m<a;m++)n=[[h,h,h+1,h+1],[m,m+1,m+1,m]],e(g,f[k[(3*a+m)*a+h]],n,[d,1+2*c,c]),e(g,f[k[(5*a+m)*a+h]],n,[d,1+2*c,a+2*c])}h=[[0,0,1,1],[0,2+c,2+c,0]];e(g,f[k[1*a*a]],h,[d,c,c+a-1]);e(g,f[k[4*a*a]],h,[d,
a+1+3*c,c+a-1]);5<a&&(e(g,"#fff",[[-.1,-.1,.1,.1],[-.1,.1,.1,-.1]],[d,.5*a+1+2*c,.5*a+c]),e(g,"#fff",[[-.1,-.1,.1,.1],[-.1,.1,.1,-.1]],[d,.5*a+1+2*c,1.5*a+2*c]))}};this.parseScramble=function(a,b){if(!a||/^\s*$/.exec(a)){for(var c=[],d=0;32>d;d++){var e=1+~~(Math.random()*this.size/2);c.push([e,e+~~(Math.random()*this.size/2),"ULFRBD".split("")[~~(6*Math.random())],[-2,-1,1,2][~~(4*Math.random())]])}return c}c=kernel.parseScramble(a,"URFDLB",b);a=[];for(d=0;d<c.length;d++)0<c[d][1]?a.push([1,c[d][1],
"URFDLB".charAt(c[d][0]),[1,2,-1][c[d][2]-1]]):a.push([1,3,"URFDLB".charAt(c[d][0]),[1,2,-1][-c[d][2]-1]]);return a};this.isSolved=function(a){if(3==h){var b=[],c=h*h;for(a=0;6>a;a++)for(var d=0;d<h;d++)for(var e=0==a?h-1-d:d,f=0;f<h;f++)b[(a+3)%6*c+d*h+f]="DLBURF".charAt(this.posit[a*c+e*h+(1==a||2==a?h-1-f:f)]);return cubeutil.getProgress(b.join(""),kernel.getProp("vrcMP","n"))}for(f=b=0;6>f;f++)for(c=this.posit[b],a=0;a<h*h;a++)if(this.posit[b++]!=c)return 1;return 0};this.moveCnt=function(a){a&&
(this.counter=0,this.lastMove=-1);return this.counter};this.moveInv=function(a){a=a.slice();a[3]=-a[3];return a};this.isInspectionLegalMove=function(a,b){return 1==b[0]&&b[1]==h};this.move2str=function(a){var b=a[2],c=a[1],d=(a[3]+3)%4;return c==this.iSi?"yxz".charAt("URFDLB".indexOf(a[2])%3)+" 2'".charAt(-1=="URF".indexOf(a[2])?2-d:d):2==a[0]?"2-2"+a[2]+"w"+" 2'".charAt(d):(2<c?c:"")+b+(2<=c?"w":"")+" 2'".charAt(d)};this.doMove=function(b){for(var c="DLBURF".indexOf(b[2]),d=(b[3]+3)%4+1,e=b[0];e<
b[1];e++)a(c,e-1,d,this.size,this.posit);b[1]==h?a((c+3)%6,0,4-d,this.size,this.posit):a(c,b[1]-1,d,this.size,this.posit);this.cntMove(b)};this.keydown=function(a){if(!a.altKey&&!a.ctrlKey){a=a.keyCode;var b=!1;if(51==a||52==a||55==a||56==a||32==a)51==a?this.oSl=Math.max(1,this.oSl-1):52==a?this.oSl=Math.min(this.oSl+1,this.iSi-1):55==a?this.oSr=Math.min(this.oSr+1,this.iSi-1):56==a?this.oSr=Math.max(1,this.oSr-1):32==a&&(this.oSl=this.oSr=1),this.cubeKeyMapping=c(this.oSl,this.oSr,this.iSi),b=!0;
a in this.cubeKeyMapping&&this.twistyScene.addMoves([this.cubeKeyMapping[a]]);return b}};this.toggleColorVisible=$.noop});var e=$.ctxDrawPolygon,f=[]})();(function(){function a(a,b){var c=Math.tan(.3*Math.PI)/Math.tan(.4*Math.PI);return[a*Math.cos(b+.5*g),-a*Math.sin(b+.5*g)*c,a*(k+Math.cos(b)*d/2*(1+c)),a*Math.sin(b+.5*g),a*c*Math.cos(b+.5*g),a*(n+Math.sin(b)*d/2*(1+c))]}function b(a,b,d,k,h){for(var n=0;5>n;n++)c(h,f[a[b+n]],e([m,q],2*g/5*n+k),d),c(h,f[a[b+n+5]],e([l,r],2*g/5*n+k),d);c(h,f[a[b+10]],e([p,t],k),d)}twistyjs.qcube.registerTwisty("mgm",function(c,e){this.style=e.style;this.cubeKeyMapping={73:[2,1,1,3],75:[2,-1,1,3],68:[5,1,1,3],69:[5,
-1,1,3],74:[0,1,1,3],70:[0,-1,1,3],72:[1,1,1,3],71:[1,-1,1,3],186:[0,1,-3,3],65:[0,-1,-3,3],85:[5,-1,-3,1],82:[2,1,-3,1],77:[5,1,-3,1],86:[2,-1,-3,1],84:[5,-1,-3,3],89:[2,1,-3,3],78:[2,-1,-3,3],66:[5,1,-3,3],80:[1,1,-3,3],81:[1,-1,-3,3]};this.twistyScene=c;this.state=[];this.counter=0;this.lastMove=-1;for(var h=0,l=0;12>l;l++)for(var m=0;11>m;m++)this.state[h++]=l;this.cntMove=function(a){this.isInspectionLegalMove(this,a)||a[0]==this.lastMove||this.counter++;this.lastMove=a[0]};this.render=function(){if(this.twistyScene.getCanvas()){var c=
this.state,e=this.twistyScene.getCanvas()[0].getContext("2d");f=kernel.getProp("colmgm").match(/#[0-9a-fA-F]{3}/g);var h=this.twistyScene.fixSize(2*k,2*n);b(c,22,[h,k+0*d,n+0*d],.6*g,e);b(c,0,a(h,1.5*g),0*g,e);b(c,11,a(h,1.9*g),0*g,e);b(c,66,a(h,.3*g),0*g,e);b(c,77,a(h,.7*g),.4*-g,e);b(c,33,a(h,1.1*g),.8*-g,e)}};this.parseScramble=function(a,b){if(!a||/^\s*$/.exec(a))return[];var c=[];a.replace(/(?:^|\s*)(?:([DLR])(\+\+?|--?)|(U|F|D?B?R|D?B?L|D|B)(\d?)('?)|\[([ufrl])('?)\])(?:$|\s*)/g,function(a,
b,d,e,f,g,h,k){b?c.push(["D?L??R".indexOf(b),("+"==d[0]?-1:1)*d.length,-3,1]):e?c.push(["U F R BR BL L D B DBL DL DR DBR".split(" ").indexOf(e),(g?-1:1)*(~~f||1),1,3]):c.push(["ufr??l".indexOf(h),k?-1:1,-3,3])});return 0==c.length?[]:c};this.isSolved=function(a){for(var b=a=0;12>b;b++)for(var c=this.state[a],d=0;11>d;d++)if(this.state[a++]!=c)return 1;return 0};this.moveCnt=function(a){a&&(this.counter=0,this.lastMove=-1);return this.counter};this.moveInv=function(a){a=a.slice();a[1]=-a[1];return a};
this.isInspectionLegalMove=function(a,b){return 3<=Math.abs(b[2])&&3<=Math.abs(b[3])};this.move2str=function(a){var b=a[0],c=a[1];a=a[3]-a[2];if(6==a)return"["+"ufr??l??????".charAt(b)+(0<c?"":"'")+"]";if(4==a)return"D?L??R??????".charAt(b)+(0<c?"-":"+");if(2==a)return"U F R BR BL L D B DBL DL DR DBR".split(" ")[b]+(0<c?"":"'")};this.doMove=function(a){var b=[v,M,y,N,F,K,z,C,u,E,x,D];-3==a[2]&&1==a[3]?mathlib.minx.doMove(this.state,b[a[0]],a[1],2):-3==a[2]&&3==a[3]?mathlib.minx.doMove(this.state,
b[a[0]],a[1],1):mathlib.minx.doMove(this.state,b[a[0]],a[1],0);this.cntMove(a)};this.keydown=function(a){if(!a.altKey&&!a.ctrlKey)return a=a.keyCode,a in this.cubeKeyMapping&&this.twistyScene.addMoves([this.cubeKeyMapping[a]]),!1};this.toggleColorVisible=$.noop});var c=$.ctxDrawPolygon,e=$.ctxRotate,f=[],g=Math.PI,d=(Math.sqrt(5)+1)/2,h=.25/Math.tan(g/5),k=1.05*d,n=1.05*d,m=[0,h,0,-h],q=[-1,-.75,-.5,-.75],l=[Math.cos(.1*g)-h,h,0,.5*Math.sin(.4*g)],r=[-Math.sin(.1*g)+-.25,-.75,-.5,.5*-Math.cos(.4*
g)],p=[.5*Math.sin(0*g),.5*Math.sin(.4*g),.5*Math.sin(.8*g),.5*Math.sin(1.2*g),.5*Math.sin(1.6*g)],t=[.5*-Math.cos(0*g),.5*-Math.cos(.4*g),.5*-Math.cos(.8*g),.5*-Math.cos(1.2*g),.5*-Math.cos(1.6*g)],v=0,y=1,M=2,K=3,F=4,N=5,x=6,E=7,u=8,C=9,D=10,z=11})();

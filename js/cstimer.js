var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var Pa=0;return function(){return Pa<b.length?{done:!1,value:b[Pa++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var Pa="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return Pa?Pa.call(b):$jscomp.arrayIterator(b)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,Pa,z){b!=Array.prototype&&b!=Object.prototype&&(b[Pa]=z.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,Pa,z,w){if(Pa){z=$jscomp.global;b=b.split(".");for(w=0;w<b.length-1;w++){var c=b[w];c in z||(z[c]={});z=z[c]}b=b[b.length-1];w=z[b];Pa=Pa(w);Pa!=w&&null!=Pa&&$jscomp.defineProperty(z,b,{configurable:!0,writable:!0,value:Pa})}};$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(b,z,w){var c=this.length||0;0>z&&(z=Math.max(0,c+z));if(null==w||w>c)w=c;w=Number(w);0>w&&(w=Math.max(0,c+w));for(z=Number(z||0);z<w;z++)this[z]=b;return this}},"es6","es3");
$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(b){function Pa(){this.batch_=null}function z(a){return a instanceof c?a:new c(function(c,f){c(a)})}if(b&&!$jscomp.FORCE_POLYFILL_PROMISE)return b;Pa.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};Pa.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var w=$jscomp.global.setTimeout;Pa.prototype.asyncExecuteFunction=function(a){w(a,
0)};Pa.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var c=0;c<a.length;++c){var f=a[c];a[c]=null;try{f()}catch($a){this.asyncThrow_($a)}}}this.batch_=null};Pa.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var c=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{a(c.resolve,c.reject)}catch(f){c.reject(f)}};c.prototype.createResolveAndReject_=
function(){function a(a){return function(n){f||(f=!0,a.call(c,n))}}var c=this,f=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};c.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof c)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var e=null!=a;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};c.prototype.resolveToNonPromiseObj_=function(a){var c=
void 0;try{c=a.then}catch(f){this.reject_(f);return}"function"==typeof c?this.settleSameAsThenable_(c,a):this.fulfill_(a)};c.prototype.reject_=function(a){this.settle_(2,a)};c.prototype.fulfill_=function(a){this.settle_(1,a)};c.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};c.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
0;a<this.onSettledCallbacks_.length;++a)e.asyncExecute(this.onSettledCallbacks_[a]);this.onSettledCallbacks_=null}};var e=new Pa;c.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};c.prototype.settleSameAsThenable_=function(a,c){var f=this.createResolveAndReject_();try{a.call(c,f.resolve,f.reject)}catch($a){f.reject($a)}};c.prototype.then=function(a,e){function f(a,c){return"function"==typeof a?function(c){try{Na(a(c))}catch(Ta){n(Ta)}}:
c}var Na,n,y=new c(function(a,c){Na=a;n=c});this.callWhenSettled_(f(a,Na),f(e,n));return y};c.prototype["catch"]=function(a){return this.then(void 0,a)};c.prototype.callWhenSettled_=function(a,c){function f(){switch(Na.state_){case 1:a(Na.result_);break;case 2:c(Na.result_);break;default:throw Error("Unexpected state: "+Na.state_);}}var Na=this;null==this.onSettledCallbacks_?e.asyncExecute(f):this.onSettledCallbacks_.push(f)};c.resolve=z;c.reject=function(a){return new c(function(c,f){f(a)})};c.race=
function(a){return new c(function(c,f){for(var e=$jscomp.makeIterator(a),n=e.next();!n.done;n=e.next())z(n.value).callWhenSettled_(c,f)})};c.all=function(a){var e=$jscomp.makeIterator(a),f=e.next();return f.done?z([]):new c(function(a,c){function n(c){return function(n){Na[c]=n;x--;0==x&&a(Na)}}var Na=[],x=0;do Na.push(void 0),x++,z(f.value).callWhenSettled_(n(Na.length-1),c),f=e.next();while(!f.done)})};return c},"es6","es3");
$jscomp.checkStringArgs=function(b,Pa,z){if(null==b)throw new TypeError("The 'this' value for String.prototype."+z+" must not be null or undefined");if(Pa instanceof RegExp)throw new TypeError("First argument to String.prototype."+z+" must not be a regular expression");return b+""};
$jscomp.polyfill("String.prototype.startsWith",function(b){return b?b:function(b,z){var w=$jscomp.checkStringArgs(this,b,"startsWith");b+="";for(var c=w.length,e=b.length,a=Math.max(0,Math.min(z|0,w.length)),Na=0;Na<e&&a<c;)if(w[a++]!=b[Na++])return!1;return Na>=e}},"es6","es3");$jscomp.findInternal=function(b,Pa,z){b instanceof String&&(b=String(b));for(var w=b.length,c=0;c<w;c++){var e=b[c];if(Pa.call(z,e,c,b))return{i:c,v:e}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,z){return $jscomp.findInternal(this,b,z).v}},"es6","es3");$jscomp.polyfill("String.prototype.endsWith",function(b){return b?b:function(b,z){var w=$jscomp.checkStringArgs(this,b,"endsWith");b+="";void 0===z&&(z=w.length);for(var c=Math.max(0,Math.min(z|0,w.length)),e=b.length;0<e&&0<c;)if(w[--c]!=b[--e])return!1;return 0>=e}},"es6","es3");
$jscomp.polyfill("Object.is",function(b){return b?b:function(b,z){return b===z?0!==b||1/b===1/z:b!==b&&z!==z}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(b){return b?b:function(b,z){var w=this;w instanceof String&&(w=String(w));var c=w.length,e=z||0;for(0>e&&(e=Math.max(e+c,0));e<c;e++){var a=w[e];if(a===b||Object.is(a,b))return!0}return!1}},"es7","es3");
$jscomp.polyfill("String.prototype.includes",function(b){return b?b:function(b,z){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,z||0)}},"es6","es3");$jscomp.polyfill("Math.trunc",function(b){return b?b:function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var z=Math.floor(Math.abs(b));return 0>b?-z:z}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var b=0;return function(Pa){return $jscomp.SYMBOL_PREFIX+(Pa||"")+b++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.asyncIterator;b||(b=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.iteratorFromArray=function(b,Pa){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var z=0,w={next:function(){if(z<b.length){var c=z++;return{value:Pa(c,b[c]),done:!1}}w.next=function(){return{done:!0,value:void 0}};return w.next()}};w[Symbol.iterator]=function(){return w};return w};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");
$jscomp.polyfill("Math.log10",function(b){return b?b:function(b){return Math.log(b)/Math.LN10}},"es6","es3");$jscomp.polyfill("String.prototype.repeat",function(b){return b?b:function(b){var z=$jscomp.checkStringArgs(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var w="";b;)if(b&1&&(w+=z),b>>>=1)z+=z;return w}},"es6","es3");
$jscomp.stringPadding=function(b,Pa){var z=void 0!==b?String(b):" ";return 0<Pa&&z?z.repeat(Math.ceil(Pa/z.length)).substring(0,Pa):""};$jscomp.polyfill("String.prototype.padStart",function(b){return b?b:function(b,z){var w=$jscomp.checkStringArgs(this,null,"padStart");return $jscomp.stringPadding(z,b-w.length)+w}},"es8","es3");
$jscomp.polyfill("Promise.prototype.finally",function(b){return b?b:function(b){return this.then(function(z){return Promise.resolve(b()).then(function(){return z})},function(z){return Promise.resolve(b()).then(function(){throw z;})})}},"es9","es3");var isInNode="object"===typeof process&&"function"===typeof require&&"object"===typeof global,isInWorker="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||isInNode;
function execBoth(b,Pa,z){return!isInWorker&&b?b.apply(this,z||[]):isInWorker&&Pa?Pa.apply(this,z||[]):{}}function execWorker(b,Pa){return execBoth(void 0,b,Pa)}function execMain(b,Pa){return execBoth(b,void 0,Pa)}execWorker(function(){isInNode&&(global.self=global);self.$={isArray:Array.isArray||function(b){return"array"===jQuery.type(b)},noop:function(){}}});
execMain(function(){window.onerror=function(b,w,c,e,a){if((c||e)&&!/extension|adsbygoogle/i.exec(w)&&/\.js/i.exec(w)){void 0==a&&(a={});var Na="";try{Na=$.fingerprint()}catch(f){}$.post("bug.php",{version:CSTIMER_VERSION,fp:Na,msg:b,url:w,line:c,col:e,stack:a.stack});DEBUG&&console.log(CSTIMER_VERSION,Na,b,w,c,e,a)}};for(var b="CSTIMER_VERSION LANG_SET LANG_STR LANG_CUR OK_LANG CANCEL_LANG RESET_LANG ABOUT_LANG ZOOM_LANG BUTTON_TIME_LIST BUTTON_OPTIONS BUTTON_EXPORT BUTTON_DONATE PROPERTY_SR PROPERTY_USEINS PROPERTY_USEINS_STR PROPERTY_SHOWINS PROPERTY_VOICEINS PROPERTY_VOICEINS_STR PROPERTY_VOICEVOL PROPERTY_PHASES PROPERTY_TIMERSIZE PROPERTY_USEMILLI PROPERTY_SMALLADP PROPERTY_SCRSIZE PROPERTY_SCRMONO PROPERTY_SCRLIM PROPERTY_SCRALIGN PROPERTY_SCRALIGN_STR PROPERTY_SCRFAST PROPERTY_SCRKEYM PROPERTY_SCRCLK PROPERTY_SCRCLK_STR PROPERTY_WNDSCR PROPERTY_WNDSTAT PROPERTY_WNDTOOL PROPERTY_WND_STR EXPORT_DATAEXPORT EXPORT_TOFILE EXPORT_FROMFILE EXPORT_TOSERV EXPORT_FROMSERV EXPORT_FROMOTHER EXPORT_USERID EXPORT_INVID EXPORT_ERROR EXPORT_NODATA EXPORT_UPLOADED EXPORT_CODEPROMPT EXPORT_ONLYOPT EXPORT_ACCOUNT EXPORT_LOGINGGL EXPORT_LOGINWCA EXPORT_LOGOUTCFM EXPORT_LOGINAUTHED IMPORT_FINAL_CONFIRM BUTTON_SCRAMBLE BUTTON_TOOLS IMAGE_UNAVAILABLE TOOLS_SELECTFUNC TOOLS_CROSS TOOLS_EOLINE TOOLS_ROUX1 TOOLS_222FACE TOOLS_GIIKER TOOLS_IMAGE TOOLS_STATS TOOLS_HUGESTATS TOOLS_DISTRIBUTION TOOLS_TREND TOOLS_METRONOME TOOLS_BATTLE TOOLS_BATTLE_HEAD TOOLS_BATTLE_TITLE TOOLS_BATTLE_STATUS TOOLS_BATTLE_INFO TOOLS_BATTLE_JOINALERT TOOLS_BATTLE_LEAVEALERT TOOLS_CFMTIME TOOLS_SOLVERS TOOLS_RECONS TOOLS_RECONS_NODATA TOOLS_TRAINSTAT TOOLS_BLDHELPER TOOLS_SYNCSEED TOOLS_SYNCSEED_SEED TOOLS_SYNCSEED_INPUT TOOLS_SYNCSEED_30S TOOLS_SYNCSEED_HELP TOOLS_SYNCSEED_DISABLE TOOLS_SYNCSEED_INPUTA OLCOMP_UPDATELIST OLCOMP_VIEWRESULT OLCOMP_VIEWMYRESULT OLCOMP_START OLCOMP_SUBMIT OLCOMP_SUBMITAS OLCOMP_WCANOTICE OLCOMP_OLCOMP OLCOMP_ANONYM OLCOMP_ME OLCOMP_WCAACCOUNT OLCOMP_ABORT OLCOMP_WITHANONYM PROPERTY_IMGSIZE TIMER_INSPECT TIMER_SOLVE PROPERTY_USEMOUSE PROPERTY_TIMEU PROPERTY_TIMEU_STR PROPERTY_PRETIME PROPERTY_ENTERING PROPERTY_ENTERING_STR PROPERTY_INTUNIT PROPERTY_INTUNIT_STR PROPERTY_COLOR PROPERTY_COLORS PROPERTY_VIEW PROPERTY_VIEW_STR PROPERTY_UIDESIGN PROPERTY_UIDESIGN_STR COLOR_EXPORT COLOR_IMPORT COLOR_FAIL PROPERTY_FONTCOLOR_STR PROPERTY_COLOR_STR PROPERTY_FONT PROPERTY_FONT_STR PROPERTY_FORMAT PROPERTY_USEKSC PROPERTY_NTOOLS PROPERTY_AHIDE SCRAMBLE_LAST SCRAMBLE_NEXT SCRAMBLE_SCRAMBLE SCRAMBLE_SCRAMBLING SCRAMBLE_LENGTH SCRAMBLE_INPUT PROPERTY_VRCSPEED PROPERTY_VRCMP PROPERTY_VRCMPS PROPERTY_GIIKERVRC PROPERTY_GIISOK_DELAY PROPERTY_GIISOK_DELAYS PROPERTY_GIISOK_KEY PROPERTY_GIISOK_MOVE PROPERTY_GIISOK_MOVES PROPERTY_GIISBEEP PROPERTY_GIIRST PROPERTY_GIIRSTS CONFIRM_GIIRST PROPERTY_GIIAED scrdata SCRAMBLE_NOOBST SCRAMBLE_NOOBSS SCROPT_TITLE SCROPT_BTNALL SCROPT_BTNNONE SCROPT_EMPTYALT STATS_CFM_RESET STATS_CFM_DELSS STATS_CFM_DELMUL STATS_CFM_DELETE STATS_COMMENT STATS_REVIEW STATS_DATE STATS_SSSTAT STATS_CURROUND STATS_CURSESSION STATS_CURSPLIT STATS_EXPORTCSV STATS_SSMGR_TITLE STATS_SSMGR_NAME STATS_SSMGR_DETAIL STATS_SSMGR_OPS STATS_SSMGR_ORDER STATS_SSMGR_ODCFM STATS_SSMGR_SORTCFM STATS_ALERTMG STATS_PROMPTSPL STATS_ALERTSPL STATS_AVG STATS_SUM STATS_SOLVE STATS_TIME STATS_SESSION STATS_SESSION_NAME STATS_SESSION_NAMEC STATS_STRING STATS_PREC STATS_PREC_STR STATS_TYPELEN STATS_STATCLR STATS_ABSIDX STATS_XSESSION_DATE STATS_XSESSION_NAME STATS_XSESSION_SCR STATS_XSESSION_CALC STATS_RSFORSS PROPERTY_PRINTSCR PROPERTY_PRINTDATE PROPERTY_SUMMARY PROPERTY_IMRENAME PROPERTY_SCR2SS PROPERTY_SS2SCR PROPERTY_SS2PHASES PROPERTY_STATINV PROPERTY_STATSSUM PROPERTY_STATTHRES PROPERTY_STATAL PROPERTY_STATALU PROPERTY_DELMUL PROPERTY_TOOLSFUNC PROPERTY_TRIM PROPERTY_TRIMR PROPERTY_TRIM_MED PROPERTY_STKHEAD PROPERTY_TOOLPOS PROPERTY_TOOLPOS_STR PROPERTY_HIDEFULLSOL PROPERTY_IMPPREV PROPERTY_AUTOEXP PROPERTY_AUTOEXP_OPT PROPERTY_SCRASIZE MODULE_NAMES BGIMAGE_URL BGIMAGE_INVALID BGIMAGE_OPACITY BGIMAGE_IMAGE BGIMAGE_IMAGE_STR SHOW_AVG_LABEL SHOW_DIFF_LABEL SHOW_DIFF_LABEL_STR USE_LOGOHINT TOOLS_SCRGEN SCRGEN_NSCR SCRGEN_PRE SCRGEN_GEN TOOLS_RECONS_TITLE TOOLS_DLYSTAT TOOLS_DLYSTAT1 TOOLS_DLYSTAT_OPT1 TOOLS_DLYSTAT_OPT2 PROPERTY_GIIMODE PROPERTY_GIIMODES PROPERTY_VRCAH PROPERTY_VRCAHS VRCREPLAY_TITLE VRCREPLAY_ORI VRCREPLAY_SHARE GIIKER_CONNECT GIIKER_RESET PROPERTY_SHOWAD PROPERTY_GIIORI".split(" "),
Pa=0;Pa<b.length;Pa++)window[b[Pa]]=window[b[Pa]]||"|||||||||||||||";window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b,w){return window.setTimeout(b,1E3/60)}}();window.localStorage||(window.localStorage={});"properties"in localStorage||"https:"==location.protocol||"localhost"==location.hostname||(location.href="https:"+location.href.substring(location.protocol.length));
window.performance&&window.performance.now&&($.now=function(){return Math.floor(window.performance.now())});$.urlParam=function(b){b=(new RegExp("[?&]"+b+"=([^&#]*)")).exec(window.location.href);return null==b?null:b[1]||0};$.hashParam=function(b){b=(new RegExp("[#&]"+b+"=([^&#]*)")).exec(window.location.hash);return null==b?null:b[1]||0};$.clearUrl=function(b){var w=(new RegExp("[?&]("+b+"=[^&#]*&?)")).exec(window.location.href);b=b?location.href.replace(w[1],"").replace(/\?$/,""):location.pathname;
history&&history.replaceState?history.replaceState(void 0,void 0,b):location.href=b};$.clearHash=function(b){var w=(new RegExp("[#&]("+b+"=[^&#]*&?)")).exec(window.location.href);b=b?location.href.replace(w[1],"").replace(/#$/,""):location.pathname+location.search;history&&history.replaceState?history.replaceState(void 0,void 0,b):location.href=b};$.clipboardCopy=function(b,w){var c=$("<textarea>"+b+"</textarea>").appendTo(document.body);c.focus().select();var e=!1;try{e=document.execCommand("copy")}catch(a){}c.remove();
return e};$.fingerprint=function(){var b=window.screen&&[Math.max(screen.height,screen.width),Math.min(screen.height,screen.width),screen.colorDepth].join("x"),w=(new Date).getTimezoneOffset(),c=$.map(navigator.plugins,function(c){return[c.name,c.description,$.map(c,function(a){return[a.type,a.suffixes].join("~")}).sort().join(",")].join("::")}).sort().join(";");b=[navigator.userAgent,navigator.language,!!window.sessionStorage,!!window.localStorage,!!window.indexedDB,navigator.doNotTrack,b,w,c].join("###");
return $.sha256(b)};$.ctxDrawPolygon=function(b,w,c,e){if(b){e=e||[1,0,0,0,1,0];c=$.ctxTransform(c,e);b.beginPath();b.fillStyle=w;b.moveTo(c[0][0],c[1][0]);for(w=1;w<c[0].length;w++)b.lineTo(c[0][w],c[1][w]);b.closePath();b.fill();b.stroke()}};$.ctxRotate=function(b,w){return $.ctxTransform(b,[Math.cos(w),-Math.sin(w),0,Math.sin(w),Math.cos(w),0])};$.ctxTransform=function(b){for(var w,c=1;c<arguments.length;c++){var e=arguments[c];3==e.length&&(e=[e[0],0,e[1]*e[0],0,e[0],e[2]*e[0]]);w=[[],[]];for(c=
0;c<b[0].length;c++)w[0][c]=b[0][c]*e[0]+b[1][c]*e[1]+e[2],w[1][c]=b[0][c]*e[3]+b[1][c]*e[4]+e[5]}return w};$.delayExec=function(){var b={};return function(w,c,e){b[w]&&(clearTimeout(b[w][0]),delete b[w]);e=setTimeout(c,e);b[w]=[e,c]}}();$.waitUser=function(){var b=[];return{reg:function(w){b.push(w)},call:function(){for(var w=0;w<b.length;w++)b[w]();b=[]}}}();"serviceWorker"in navigator?$(function(){navigator.serviceWorker.register("sw.js")}):window.applicationCache&&$(function(){applicationCache.addEventListener("updateready",
function(b){applicationCache.status==applicationCache.UPDATEREADY&&(applicationCache.swapCache(),location.reload())},!1)});navigator.storage&&navigator.storage.persisted&&navigator.storage.persisted().then(function(b){if(b)return Promise.resolve(b);if(navigator.storage.persist)return navigator.storage.persist()}).then(function(b){$.persistent=b})});var DEBUGM=!1,DEBUGWK=!1,DEBUG=isInWorker?DEBUGWK:DEBUGM&&!!$.urlParam("debug");
Array.prototype.indexOf||(Array.prototype.indexOf=function(b){for(var Pa=0;Pa<this.length;Pa++)if(this[Pa]==b)return Pa;return-1});
Function.prototype.bind||(Function.prototype.bind=function(b){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var Pa=Array.prototype.slice.call(arguments,1),z=this,w=function(){},c=function(){return z.apply(this instanceof w?this:b,Pa.concat(Array.prototype.slice.call(arguments)))};this.prototype&&(w.prototype=this.prototype);c.prototype=new w;return c});execBoth(function(){var b=function(b,w){var c=(b&65535)+(w&65535);return(b>>16)+(w>>16)+(c>>16)<<16|c&65535},Pa=function(b,w){return b>>>w|b<<32-w};$.sha256=function(z){/[\x80-\xFF]/.test(z)&&(z=unescape(encodeURI(z)));for(var w=z,c=[],e=0;e<8*w.length;e+=8)c[e>>5]|=(w.charCodeAt(e/8)&255)<<24-e%32;var a=8*z.length;w=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,
4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];
z=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];e=[64];c[a>>5]|=128<<24-a%32;c[(a+64>>9<<4)+15]=a;for(a=0;a<c.length;a+=16){for(var Na=z[0],f=z[1],$a=z[2],n=z[3],y=z[4],Qa=z[5],x=z[6],Ua=z[7],Ta=0;64>Ta;Ta++){var Za=Ta;if(16>Ta)var Ra=c[a+Ta];else{Ra=e[Ta-2];Ra=Pa(Ra,17)^Pa(Ra,19)^Ra>>>10;Ra=b(Ra,e[Ta-7]);var Xa=e[Ta-15];Xa=Pa(Xa,7)^Pa(Xa,18)^Xa>>>3;Ra=b(b(Ra,Xa),e[Ta-16])}e[Za]=Ra;Za=y;Za=Pa(Za,6)^Pa(Za,11)^Pa(Za,25);Za=b(b(b(b(Ua,Za),y&Qa^~y&x),w[Ta]),
e[Ta]);Ua=Na;Ua=Pa(Ua,2)^Pa(Ua,13)^Pa(Ua,22);Ra=b(Ua,Na&f^Na&$a^f&$a);Ua=x;x=Qa;Qa=y;y=b(n,Za);n=$a;$a=f;f=Na;Na=b(Za,Ra)}z[0]=b(Na,z[0]);z[1]=b(f,z[1]);z[2]=b($a,z[2]);z[3]=b(n,z[3]);z[4]=b(y,z[4]);z[5]=b(Qa,z[5]);z[6]=b(x,z[6]);z[7]=b(Ua,z[7])}c="";for(w=0;w<4*z.length;w++)c+="0123456789abcdef".charAt(z[w>>2]>>8*(3-w%4)+4&15)+"0123456789abcdef".charAt(z[w>>2]>>8*(3-w%4)&15);return c}});
execBoth(function(){function b(a,b){for(var f=a.slice(),n=0;16>n;n++)a[n]=c[f[e[n]]]^b[n]}function Pa(a,c){for(var b=a.slice(),n=0;16>n;n++)a[e[n]]=w[b[n]^c[n]]}function z(b){if(0==a.length){for(var f=0;256>f;f++)c[w[f]]=f;for(f=0;128>f;f++)a[f]=f<<1,a[128+f]=f<<1^27}b=b.slice();f=1;for(var e=16;176>e;e+=4){var n=b.slice(e-4,e);0==e%16&&(n=[w[n[1]]^f,w[n[2]],w[n[3]],w[n[0]]],f=a[f]);for(var y=0;4>y;y++)b[e+y]=b[e+y-16]^n[y]}this.key=b}var w=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,
118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,
94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],c=[],e=[0,13,10,7,4,1,14,11,8,5,2,15,12,9,6,3],a=[];z.prototype.decrypt=function(c){for(var e=this.key.slice(160,176),Na=0;16>Na;Na++)c[Na]^=e[Na];
for(e=144;16<=e;e-=16){b(c,this.key.slice(e,e+16));Na=c;for(var n=0;16>n;n+=4){var y=Na[n+0],w=Na[n+1],x=Na[n+2],Ua=Na[n+3],Ta=y^w^x^Ua,z=a[Ta],Ra=a[a[z^y^x]]^Ta;Ta^=a[a[z^w^Ua]];Na[n+0]=Na[n+0]^Ra^a[y^w];Na[n+1]=Na[n+1]^Ta^a[w^x];Na[n+2]=Na[n+2]^Ra^a[x^Ua];Na[n+3]=Na[n+3]^Ta^a[Ua^y]}}b(c,this.key.slice(0,16));return c};z.prototype.encrypt=function(c){Pa(c,this.key.slice(0,16));for(var b=16;160>b;b+=16){for(var e=c,n=12;0<=n;n-=4){var Na=e[n+0],w=e[n+1],x=e[n+2],Ua=e[n+3],Ta=Na^w^x^Ua;e[n+0]=e[n+
0]^Ta^a[Na^w];e[n+1]=e[n+1]^Ta^a[w^x];e[n+2]=e[n+2]^Ta^a[x^Ua];e[n+3]=e[n+3]^Ta^a[Ua^Na]}Pa(c,this.key.slice(b,b+16))}b=this.key.slice(160,176);for(e=0;16>e;e++)c[e]^=b[e];return c};$.aes128=function(a){return new z(a)}});function MersenneTwisterObject(b,Pa){function z(a,c){var b=a&65535,n=c&65535;var e=b*n;var f=e>>>16;f=f+b*((c&4294901760)>>>16)&65535;f+=((a&4294901760)>>>16)*n;f&=65535;b=f<<16|e&65535;return 0>b?b+4294967296:b}function w(b){var c=0<arguments.length&&isFinite(b)?b&4294967295:5489,e;a=[c];Na=624;for(e=1;624>e;a[e]=c=z(c^c>>>30,1812433253)+e++);}function c(c,b){var e=c.length,n;w(1<arguments.length&&isFinite(b)?b:19650218);var f=a[0];var Na=1;var $a=0;for(n=Math.max(624,e);n;$a%=e,n--)a[Na]=f=(a[Na++]^
z(f^f>>>30,1664525))+c[$a]+$a++&4294967295,623<Na&&(a[0]=f=a[623],Na=1);for(n=623;n;n--)a[Na]=f=(a[Na]^z(f^f>>>30,1566083941))-Na++&4294967295,623<Na&&(a[0]=f=a[623],Na=1);a[0]=2147483648}function e(){for(var c,b;624<=Na||0>Na;){Na=Math.max(0,Na-624);for(b=0;227>b;c=a[b]&2147483648|a[b+1]&2147483647,a[b]=a[b+397]^c>>>1^f[c&1],b++);for(;623>b;c=a[b]&2147483648|a[b+1]&2147483647,a[b]=a[b+-227]^c>>>1^f[c&1],b++);c=a[623]&2147483648|a[0]&2147483647;a[623]=a[396]^c>>>1^f[c&1]}c=a[Na++];c^=c>>>11;c^=c<<
7&2636928640;c^=c<<15&4022730752;c^=c>>>18;return 0>c?c+4294967296:c}var a=[],Na=NaN,f=[0,2567483615];1<arguments.length?c(Pa,b):0<arguments.length?w(b):w();return function(){return(67108864*(e()>>>5)+(e()>>>6))/9007199254740992}}Math.random=new MersenneTwisterObject((new Date).getTime());var mathlib=function(){function b(a,r,h,Va,bb,c){var Ya=a[r];a[r]=a[bb]^c;a[bb]=a[Va]^c;a[Va]=a[h]^c;a[h]=Ya^c}function Pa(a){for(var r=arguments.length-1,h=a[arguments[r]];1<r;r--)a[arguments[r]]=a[arguments[r-1]];a[arguments[1]]=h;return Pa}function z(a,r,h,Va){h=h||1;for(var bb=r.length,c=[],Ya=0;Ya<bb;Ya++)c[Ya]=a[r[Ya]];for(Ya=0;Ya<bb;Ya++){var b=(Ya+h)%bb;a[r[b]]=c[Ya];Va&&(a[r[b]]+=Va[b]-Va[Ya]+Va[Va.length-1])}return z}function w(a,r){return a[r>>3]>>((r&7)<<2)&15}function c(a,r){var h,Va,
bb;for(h=Va=0;h<r;++h)for(Va*=r-h,bb=h+1;bb<r;++bb)a[bb]<a[h]&&++Va;return Va}function e(a,r){var h;var Va=0;for(h=r-2;0<=h;--h)Va^=a%(r-h),a=~~(a/(r-h));return Va&1}function a(a,r,h){r=r||8;for(var Va=0,bb=1985229328,c=0;c<r-1;++c){var b=a[c]<<2;Va=(r-c)*Va+(bb>>b&7);bb-=286331152<<b}return 0>h?Va>>1:Va}function Na(a,r,h,Va){h=(h||8)-1;var bb=1985229328,c=0;0>Va&&(r<<=1);for(var b=0;b<h;++b){var Ya=Sa[h-b],e=~~(r/Ya);c^=e;r%=Ya;e<<=2;a[b]=bb>>e&7;Ya=(1<<e)-1;bb=(bb&Ya)+(bb>>4&~Ya)}0>Va&&0!=(c&1)?
(a[h]=a[h-1],a[h-1]=bb&7):a[h]=bb&7;return a}function f(c,r,h){this.length=r;this.evenbase=h;this.get="p"==c?function(h){return a(h,this.length,this.evenbase)}:function(h){var a=this.evenbase,r=Math.abs(a);a=0>a?0:h[0]%r;for(var Va=this.length-1;0<Va;Va--)a=a*r+h[Va]%r;return a};this.set="p"==c?function(h,a){return Na(h,a,this.length,this.evenbase)}:function(h,a){for(var r=a,Va=this.length,c=this.evenbase,bb=Math.abs(c),b=bb*Va,Ya=1;Ya<Va;Ya++)h[Ya]=r%bb,b-=h[Ya],r=~~(r/bb);h[0]=(0>c?b:r)%bb;return h}}
function $a(a,r,h,Va){Va=Va||6;if($.isArray(h)){var c=new f(h[1],h[2],h[3]);h=h[0];for(var b=0;b<Va;b++){a[b]=[];for(var Ya=0;Ya<r;Ya++){var e=c.set([],Ya);h(e,b);a[b][Ya]=c.get(e)}}}else for(b=0;b<Va;b++)for(a[b]=[],Ya=0;Ya<r;Ya++)a[b][Ya]=h(Ya,b)}function n(){this.ca=[0,1,2,3,4,5,6,7];this.ea=[0,2,4,6,8,10,12,14,16,18,20,22]}function y(a,r){this.sgs=[];this.sgsi=[];this.Tk=[];this.gen=a;this.invMap={};var h=a[0].length;this.e=[];for(var Va=0;Va<h;Va++)this.e[Va]=Va;for(Va=0;Va<h;Va++)this.sgs.push([]),
this.sgsi.push([]),this.Tk.push([]),this.sgs[Va][Va]=this.e,this.sgsi[Va][Va]=this.e;for(Va=0;Va<a.length;Va++){var c=a[Va];r&&(c=this.permMult(this.permMult(this.permInv(r),c),r));this.knutha(h-1,c)}}function Qa(a,r,h,Va,c,b,e,n){var bb=$.isArray(c);b=b||6;e=e||3;n=n||256;Va=Va||256;for(var Ya=0,f=h+7>>>3;Ya<f;Ya++)a[Ya]=-1;a[r>>3]^=15<<((r&7)<<2);for(Ya=r=0;Ya<=Va;Ya++){f=0;var Na=Ya>=n,Oa=Ya+1^15,ab=Na?15:Ya,Sa=Na?Ya:15,x=0;a:for(;x<h;x++,r>>=4){if(0==(x&7)&&(r=a[x>>3],!Na&&-1==r)){x+=7;continue}if((r&
15)==ab)for(var Xa=0;Xa<b;Xa++)for(var y=x,Ua=0;Ua<e;Ua++)if(y=bb?c[Xa][y]:c(y,Xa),w(a,y)==Sa){++f;if(Na){a[x>>3]^=Oa<<((x&7)<<2);continue a}a[y>>3]^=Oa<<((y&7)<<2)}}if(0==f)break;DEBUG&&console.log("[prun]",f)}}function x(a,r,h){this.N_STATES=h.length;this.N_MOVES=a;this.N_POWER=r;this.state_params=h;this.inited=!1}function Ua(a){return a}function Ta(a,r,h,Va,c){this.solvedStates=a;this.doMove=r;this.movesList=[];for(var b in h)this.movesList.push([b,h[b]]);this.state2Idxs=[];this.moveTables=[];
this.prunTables=[];this.isPartial=c||!1;this.prunHashs=Va||[Ua]}function Za(a,r,h){this.solvedStates=a;this.doMove=r;this.movesList=[];for(var Va in h)this.movesList.push([Va,h[Va]]);this.prunTable={};this.toUpdateArr=null;this.prunTableSize=0;this.prunDepth=-1;this.cost=0;this.MAX_PRUN_SIZE=1E5}function Ra(a){return~~(Wa.random()*a)}for(var Xa=[],Sa=[1],Oa=0;32>Oa;++Oa){Xa[Oa]=[];for(var fb=0;32>fb;++fb)Xa[Oa][fb]=0}for(Oa=0;32>Oa;++Oa)for(Xa[Oa][0]=Xa[Oa][Oa]=1,Sa[Oa+1]=Sa[Oa]*(Oa+1),fb=1;fb<Oa;++fb)Xa[Oa][fb]=
Xa[Oa-1][fb-1]+Xa[Oa-1][fb];n.SOLVED=new n;n.EdgeMult=function(a,r,h){for(var Va=0;12>Va;Va++)h.ea[Va]=a.ea[r.ea[Va]>>1]^r.ea[Va]&1};n.CornMult=function(a,r,h){for(var Va=0;8>Va;Va++)h.ca[Va]=a.ca[r.ca[Va]&7]&7|((a.ca[r.ca[Va]&7]>>3)+(r.ca[Va]>>3))%3<<3};n.CubeMult=function(a,r,h){n.CornMult(a,r,h);n.EdgeMult(a,r,h)};n.prototype.init=function(a,r){this.ca=a.slice();this.ea=r.slice();return this};n.prototype.hashCode=function(){for(var a=0,r=0;20>r;r++)a=0|31*a+(12>r?this.ea[r]:this.ca[r-12]);return a};
n.prototype.isEqual=function(a){a=a||n.SOLVED;for(var r=0;8>r;r++)if(this.ca[r]!=a.ca[r])return!1;for(r=0;12>r;r++)if(this.ea[r]!=a.ea[r])return!1;return!0};var lb=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],gb=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]];n.prototype.toFaceCube=function(a,r){a=a||lb;r=r||gb;for(var h=[],Va=0;54>Va;Va++)h[Va]="URFDLB"[~~(Va/9)];for(var c=0;8>c;c++){Va=this.ca[c]&7;for(var b=this.ca[c]>>
3,Ya=0;3>Ya;Ya++)h[a[c][(Ya+b)%3]]="URFDLB"[~~(a[Va][Ya]/9)]}for(c=0;12>c;c++)for(Va=this.ea[c]>>1,b=this.ea[c]&1,Ya=0;2>Ya;Ya++)h[r[c][(Ya+b)%2]]="URFDLB"[~~(r[Va][Ya]/9)];return h.join("")};n.prototype.invFrom=function(a){for(var r=0;12>r;r++)this.ea[a.ea[r]>>1]=r<<1|a.ea[r]&1;for(r=0;8>r;r++)this.ca[a.ca[r]&7]=r|32>>(a.ca[r]>>3)&24;return this};n.prototype.fromFacelet=function(a,r,h){r=r||lb;h=h||gb;for(var c=0,b=[],e=a[4]+a[13]+a[22]+a[31]+a[40]+a[49],Ya=0;54>Ya;++Ya){b[Ya]=e.indexOf(a[Ya]);if(-1==
b[Ya])return-1;c+=1<<(b[Ya]<<2)}if(10066329!=c)return-1;var n;for(Ya=0;8>Ya;++Ya){for(n=0;3>n&&0!=b[r[Ya][n]]&&3!=b[r[Ya][n]];++n);a=b[r[Ya][(n+1)%3]];c=b[r[Ya][(n+2)%3]];for(e=0;8>e;++e)if(a==~~(r[e][1]/9)&&c==~~(r[e][2]/9)){this.ca[Ya]=e|n%3<<3;break}}for(Ya=0;12>Ya;++Ya)for(e=0;12>e;++e){if(b[h[Ya][0]]==~~(h[e][0]/9)&&b[h[Ya][1]]==~~(h[e][1]/9)){this.ea[Ya]=e<<1;break}if(b[h[Ya][0]]==~~(h[e][1]/9)&&b[h[Ya][1]]==~~(h[e][0]/9)){this.ea[Ya]=e<<1|1;break}}return this};n.prototype.verify=function(){for(var a=
0,r=0,h=0;12>h;h++)a|=256<<(this.ea[h]>>1),r^=this.ea[h]&1;h=[];for(var b=0;8>b;b++)a|=1<<(this.ca[b]&7),r+=this.ca[b]>>3<<1,h.push(this.ca[b]&7);return 1048575!=a||0!=r%6||e(c(this.ea,12),12)!=e(c(h,8),8)?-1:0};n.moveCube=function(){for(var a=[],r=0;18>r;r++)a[r]=new n;a[0].init([3,0,1,2,4,5,6,7],[6,0,2,4,8,10,12,14,16,18,20,22]);a[3].init([20,1,2,8,15,5,6,19],[16,2,4,6,22,10,12,14,8,18,20,0]);a[6].init([9,21,2,3,16,12,6,7],[0,19,4,6,8,17,12,14,3,11,20,22]);a[9].init([0,1,2,3,5,6,7,4],[0,2,4,6,10,
12,14,8,16,18,20,22]);a[12].init([0,10,22,3,4,17,13,7],[0,2,20,6,8,10,18,14,16,4,12,22]);a[15].init([0,1,11,23,4,5,18,14],[0,2,4,23,8,10,12,21,16,18,7,15]);for(r=0;18>r;r+=3)for(var h=0;2>h;h++)n.EdgeMult(a[r+h],a[r],a[r+h+1]),n.CornMult(a[r+h],a[r],a[r+h+1]);return a}();n.rotCube=function(){for(var a=(new n).init([3,0,1,2,7,4,5,6],[6,0,2,4,14,8,10,12,23,17,19,21]),r=(new n).init([5,4,7,6,1,0,3,2],[12,10,8,14,4,2,0,6,18,16,22,20]),h=(new n).init([8,20,13,17,19,15,22,10],[3,16,11,18,7,22,15,20,1,9,
13,5]),c=new n,b=new n,e=[],f=0;24>f;f++)e[f]=(new n).init(c.ca,c.ea),n.CornMult(c,a,b),n.EdgeMult(c,a,b),c.init(b.ca,b.ea),3==f%4&&(n.CornMult(c,r,b),n.EdgeMult(c,r,b),c.init(b.ca,b.ea)),7==f%8&&(n.CornMult(c,h,b),n.EdgeMult(c,h,b),c.init(b.ca,b.ea));a=[];r=[];h=[];var Na=[],Oa=[];for(f=0;24>f;f++)r[f]=e[f].hashCode(),h[f]=[],Na[f]=[],Oa[f]=[];for(f=0;18>f;f++)a[f]=n.moveCube[f].hashCode();for(f=0;24>f;f++)for(var x=0;24>x;x++){n.CornMult(e[f],e[x],c);n.EdgeMult(e[f],e[x],c);var kb=r.indexOf(c.hashCode());
h[f][x]=kb;Na[kb][x]=f}for(f=0;24>f;f++)for(x=0;18>x;x++)n.CornMult(e[Na[0][f]],n.moveCube[x],c),n.EdgeMult(e[Na[0][f]],n.moveCube[x],c),n.CornMult(c,e[f],b),n.EdgeMult(c,e[f],b),kb=a.indexOf(b.hashCode()),Oa[f][x]=kb;n.rotMult=h;n.rotMulI=Na;n.rotMulM=Oa;n.rot2str=";y';y2;y;z2;y' z2;y2 z2;y z2;y' x';y2 x';y x';x';y' x;y2 x;y x;x;y z;z;y' z;y2 z;y' z';y2 z';y z';z'".split(";");return e}();n.prototype.edgeCycles=function(){for(var a=[],r=[0,0,0],h=0,c=!1,b=0;12>b;++b)if(!a[b]){var e=-1,f=!1,n=b;do a[n]=
!0,++e,f^=this.ea[n]&1,n=this.ea[n]>>1;while(n!=b);h+=e>>1;e&1&&(c=!c,++h);f&&(0==e?++r[0]:e&1?r[2]^=1:++r[1])}r[1]+=r[2];h=r[0]<r[1]?h+(r[0]+r[1]>>1):h+(r[1]+[0,2,3,5,6,8,9][r[0]-r[1]>>1]);return h-c};var mb=/^\s*([URFDLB]w?|[EMSyxz]|2-2[URFDLB]w)(['2]?)(@\d+)?\s*$/,ib=new n;n.prototype.selfMoveStr=function(a,r){var h=mb.exec(a);if(h){var c=h[1],b="2'".indexOf(h[2]||"-")+2;r&&(b=4-b);h[3]&&(this.tstamp=~~h[3].slice(1));this.ori=this.ori||0;var e="URFDLB".indexOf(c);if(-1!=e)return h=n.rotMulM[this.ori][3*
e+b%4-1],n.EdgeMult(this,n.moveCube[h],ib),n.CornMult(this,n.moveCube[h],ib),this.init(ib.ca,ib.ea),h;e="UwRwFwDwLwBw".indexOf(c);if(-1!=e){e>>=1;h=n.rotMulM[this.ori][(e+3)%6*3+b%4-1];n.EdgeMult(this,n.moveCube[h],ib);n.CornMult(this,n.moveCube[h],ib);this.init(ib.ca,ib.ea);e=[3,15,17,1,11,23][e];for(c=0;c<b;c++)this.ori=n.rotMult[e][this.ori];return h}e="2-2Uw 2-2Rw 2-2Fw 2-2Dw 2-2Lw 2-2Bw".split(" ").indexOf(c);-1==e&&(e=[null,null,"S","E","M",null].indexOf(c));if(-1!=e){c=(e+3)%6*3+b%4-1;h=n.rotMulM[this.ori][3*
e+(4-b)%4-1];n.EdgeMult(this,n.moveCube[h],ib);n.CornMult(this,n.moveCube[h],ib);this.init(ib.ca,ib.ea);c=n.rotMulM[this.ori][c];n.EdgeMult(this,n.moveCube[c],ib);n.CornMult(this,n.moveCube[c],ib);this.init(ib.ca,ib.ea);e=[3,15,17,1,11,23][e];for(c=0;c<b;c++)this.ori=n.rotMult[e][this.ori];return h+18}e="yxz".indexOf(c);if(-1!=e)for(e=[3,15,17][e],c=0;c<b;c++)this.ori=n.rotMult[e][this.ori]}};n.prototype.selfConj=function(a){void 0===a&&(a=this.ori);0!=a&&(n.CornMult(n.rotCube[a],this,ib),n.EdgeMult(n.rotCube[a],
this,ib),n.CornMult(ib,n.rotCube[n.rotMulI[0][a]],this),n.EdgeMult(ib,n.rotCube[n.rotMulI[0][a]],this),this.ori=n.rotMulI[this.ori][a]||0)};Oa=function(){var a=[11,8,9,10,6,7,4,5,1,2,3,0],r=[[5,1,2,3,4],[10,6,2,0,5],[6,7,3,0,1],[7,8,4,0,2],[8,9,5,0,3],[9,10,1,0,4],[11,7,2,1,10],[11,8,3,2,6],[11,9,4,3,7],[11,10,5,4,8],[11,6,1,5,9],[6,10,9,8,7]];return{doMove:function(h,c,b,e){b=(b%5+5)%5;if(0!=b){for(var Va=11*c,f=[[],[],[],[],[]],bb=0;5>bb;bb++){var n=r[c][bb],Ya=r[n].indexOf(c);if(0==e||1==e)f[bb].push(Va+
bb),f[bb].push(Va+bb+5),f[bb].push(11*n+Ya%5+5),f[bb].push(11*n+Ya%5),f[bb].push(11*n+(Ya+1)%5);if(1==e||2==e){f[bb].push(11*n+10);for(var Na=1;5>Na;Na++)f[bb].push(11*n+(Ya+Na)%5+5);for(Na=2;5>Na;Na++)f[bb].push(11*n+(Ya+Na)%5);Na=4-bb;var Oa=a[c];n=r[Oa][Na];Ya=r[n].indexOf(Oa);f[bb].push(11*Oa+Na);f[bb].push(11*Oa+Na+5);f[bb].push(11*n+10);for(Na=0;5>Na;Na++)f[bb].push(11*n+(Ya+Na)%5+5),f[bb].push(11*n+(Ya+Na)%5)}}for(bb=0;bb<f[0].length;bb++)mathlib.acycle(h,[f[0][bb],f[1][bb],f[2][bb],f[3][bb],
f[4][bb]],b)}},oppFace:a,adjFaces:r}}();y.prototype.permMult=function(a,c){for(var h=[],r=0;r<a.length;r++)h[r]=c[a[r]];return h};y.prototype.permInv=function(a){for(var c=[],h=0;h<a.length;h++)c[a[h]]=h;return c};y.prototype.isMember=function(a,c){c=c||0;for(var h=a.length-1;h>=c;h--){var r=a[h];if(!this.sgs[h][r])return!1;r!==h&&(a=this.permMult(a,this.sgsi[h][r]))}return!0};y.prototype.minkwitz=function(){var a=[],c=8,h=0;this.words=[];this.isNew=[];for(var b=0;b<this.e.length;b++){this.words[b]=
[];this.words[b][b]=[];this.isNew[b]=[];for(var e=0;e<b;e++)this.sgs[b][e]&&!this.words[b][e]&&(this.words[b][e]=null,h++)}this.invMap={};for(b=0;b<this.gen.length;b++){var f=this.gen[b];for(e=b;e<this.gen.length;e++){for(var n=!0,Na=0;Na<this.e.length;Na++)if(f[this.gen[e][Na]]!=Na){n=!1;break}n&&(this.invMap[b]=e,this.invMap[e]=b)}void 0==this.invMap[b]&&(this.invMap[b]=~b,this.invMap[~b]=b)}var Oa=function(a,h){for(var b=-1,r=a.length-1;0<=r;r--){var e=a[r];if(!this.sgs[r][e])return-2;if(!this.words[r][e])return this.words[r][e]=
h,this.isNew[r][e]=3,this.sgs[r][e]=a,this.sgsi[r][e]=this.permInv(a),1;h.length<this.words[r][e].length&&(b=this.sgs[r][e],this.sgs[r][e]=a,this.sgsi[r][e]=this.permInv(a),a=b,b=this.words[r][e],this.words[r][e]=h,this.isNew[r][e]=3,h=b,b=0);if(h.length+this.words[r][e].length>c)return b;a=this.permMult(a,this.sgsi[r][e]);for(var f=this.words[r][e].length-1;0<=f;f--)h.push(this.invMap[this.words[r][e][f]])}},x=function(b,c,r){if(0>=c)return r.call(this,b,a);for(var e=0;e<this.gen.length&&0<h;e++){a.push(e);
var f=x.call(this,this.permMult(b,this.gen[e]),c-1,r);a.pop();0>f||(a.push(this.invMap[e]),x.call(this,this.permMult(b,this.permInv(this.gen[e])),c-1,r),a.pop())}},kb=function(){for(var a=0,b=0,r=0;r<this.e.length;r++)for(var e=0;e<r;e++)0<this.isNew[r][e]&&this.isNew[r][e]--,this.isNew[r][e]&&b++;console.log("newCnt",b);for(r=0;r<this.e.length;r++){b=!0;for(e=0;e<r;e++)if(this.sgs[r][e]&&!this.words[r][e]){b=!1;break}for(e=0;e<r;e++)if(this.words[r][e])for(var f=r;f<this.e.length;f++)if(!b||r==f)for(var n=
r==f?e:0;n<f;n++)if(this.words[f][n]){var bb=this.words[r][e].length+this.words[f][n].length;if(!(bb>c||0==this.isNew[r][e]&&0==this.isNew[f][n]&&r==f)){var Va=this.sgs[r][e][this.sgs[f][n][r]];this.words[r][Va]&&this.words[r][Va].length<1.5*bb&&r!=f||(bb=Oa.call(this,this.permMult(this.sgs[f][n],this.sgs[r][e]),this.words[f][n].concat(this.words[r][e])),-1<bb&&a++,0<bb&&h--)}}}return a};e=$.now();var Sa=0;for(b=1;100>b&&0<h;b++)x.call(this,this.e,b,function(a,r){var b=Oa.call(this,a,r.slice());Sa++;
0<b&&h--;if(0==Sa%1E3){var e=kb.call(this);c=Math.round(1.25*c);console.log(e,h,c)}return b});console.log("final",$.now()-e);kb.call(this);console.log("init minkwitz",$.now()-e);window.sgs1=this};y.prototype.getGen=function(a){for(var r=[],h=a.length-1;0<=h;h--){var b=a[h];if(!this.sgs[h][b])return null;b!==h&&(a=this.permMult(a,this.sgsi[h][b]),r.push(this.words[h][b]))}return r.reverse()};y.prototype.knutha=function(a,r){this.Tk[a].push(r);for(var h=0;h<this.sgs[a].length;h++)this.sgs[a][h]&&this.knuthb(a,
this.permMult(this.sgs[a][h],r))};y.prototype.knuthb=function(a,r){var h=r[a];if(this.sgs[a][h])h=this.permMult(r,this.sgsi[a][h]),this.isMember(h)||this.knutha(a-1,h);else for(this.sgs[a][h]=r,this.sgsi[a][h]=this.permInv(r),h=0;h<this.Tk[a].length;h++)this.knuthb(a,this.permMult(r,this.Tk[a][h]))};y.prototype.size=function(){for(var a=this.sgs.length,r=1,h=0;h<a;h++){for(var b=0,c=0;c<a;c++)this.sgs[h][c]&&b++;r*=b}return r};y.prototype.intersect=function(a,r){if(this.size()>a.size())return a.intersect(this,
r);r=r||1E5;for(var h=new y([this.sgs[0][0]]),b=this.sgs.length,c=h.cnt=0;c<b;c++)for(var e=0;e<c;e++)if(this.sgs[c][e]&&!h.sgs[c][e]&&(this.enumDFS(c-1,this.sgs[c][e],function(a){h.knutha(b-1,a);return!0},function(b,c){if(h.cnt>r||-1==h.cnt)return h.cnt=-1,!1;h.cnt++;if(!a.isMember(c,b))return!1;for(var e=0;e<h.sgs[b].length-1;e++)if(h.sgs[b][e]&&h.permMult(c,h.sgs[b][e])[b]<c[b])return!1;return!0}),-1==h.cnt))return h;return h};y.prototype.enumDFS=function(a,b,h,c){if(!c||c(a+1,b)){if(0==a)return h(b);
for(var r=0;r<=a;r++)if(this.sgs[a][r]){var e=this.enumDFS(a-1,this.permMult(this.sgs[a][r],b),h,c);if(e)return e}}};y.prototype["enum"]=function(a){this.enumDFS(this.sgs.length-1,this.sgs[0][0],a)};y.prototype.rndElem=function(){for(var a=this.e.slice(),b=this.e.length-1;0<=b;b--){for(var h=0,c=0,e=0;e<=b;e++)this.sgs[b][e]&&1>Ra(++h)&&(c=e);c!==b&&(a=this.permMult(a,this.sgsi[b][c]))}return a};fb=x.prototype;fb.search=function(a,b,h){h=(h||99)+1;if(!this.inited){this.move=[];this.prun=[];for(var c=
0;c<this.N_STATES;c++){var r=this.state_params[c],e=r[0],f=r[1],n=r[2],Na=r[3];r=r[4];this.move[c]=[];this.prun[c]=[];$a(this.move[c],n,f,this.N_MOVES);Qa(this.prun[c],e,n,Na,this.move[c],this.N_MOVES,this.N_POWER,r)}this.inited=!0}for(this.sol=[];b<h&&!this.idaSearch(a,b,-1);b++);return b==h?null:this.sol.reverse()};fb.toStr=function(a,b,h){for(var c=[],r=0;r<a.length;r++)c.push(b[a[r][0]]+h[a[r][1]]);return c.join(" ").replace(/ +/g," ")};fb.idaSearch=function(a,b,h){for(var c=this.N_STATES,r=0;r<
c;r++)if(w(this.prun[r],a[r])>b)return!1;if(0==b)return!0;for(var e=a[0]+b+h+1,f=0;f<this.N_MOVES;f++){var n=(f+e)%this.N_MOVES;if(n!=h)for(var Na=a.slice(),Ya=0;Ya<this.N_POWER;Ya++){for(r=0;r<c;r++)Na[r]=this.move[r][n][Na[r]];if(this.idaSearch(Na,b-1,n))return this.sol.push([n,Ya]),!0}}return!1};fb=Ta.prototype;fb.initPrun=function(){if(0==this.moveTables.length)for(var a=0;a<this.prunHashs.length;a++){for(var b={},h=[null],c=[],e=0;e<this.solvedStates.length;e++){var f=this.prunHashs[a](this.solvedStates[e]);
f in b||(b[f]=h.length<<8,h.push(f))}e=1;for(var n=0,Na=+new Date;e!=h.length;){f=h[e];var Oa=(b[f]&255)+1;Oa!=n&&(DEBUG&&console.log("[phSolver] initPrun",n,h.length-1,+new Date-Na),n=Oa,c.push(h.length-1));for(var x=[],kb=0;kb<this.movesList.length;kb++){var Sa=this.doMove(f,this.movesList[kb][0]);Sa&&(Sa in b||(b[Sa]=h.length<<8|Oa,h.push(Sa)),x[kb]=b[Sa]>>8)}h[e]=x;e++}this.moveTables[a]=h;this.prunTables[a]=c;this.state2Idxs[a]=b}};fb.search=function(a,b,h){this.initPrun();this.sol=[];this.subOpt=
!1;this.rawState=a;this.state=[];for(var c=0;c<this.prunHashs.length;c++){var r=this.prunHashs[c](a);this.state.push(this.state2Idxs[c][r]>>8)}this.visited={};this.maxl=b||0;return this.searchNext(h)};fb.searchNext=function(a,b){this.initPrun();a=a+1||99;this.prevSolStr=this.solArr?this.solArr.join(","):null;this.solArr=null;for(this.cost=b||-1;this.maxl<a;this.maxl++){if(0==this.cost)return null;if(this.idaSearch(this.state,this.maxl,null,0))break}return this.solArr};fb.idaSearch=function(a,b,h,
c){if(this.getPruning(a)>b)return!1;if(0==b){b=this.rawState;var r=[],e=[];for(h=0;h<this.sol.length;h++){var f=this.movesList[this.sol[h]][0];b=this.doMove(b,f);r.push(f);e.push(b);if(!this.subOpt&&b in this.visited&&this.visited[a]<c)return!1}if(-1==this.solvedStates.indexOf(b))return!1;for(h=0;h<e.length;h++)this.visited[e[h]]=h;this.subOpt=!0;if(r.join(",")==this.prevSolStr)return!1;this.solArr=r;return!0}if(0<=this.cost){if(0==this.cost)return!0;this.cost--}r=null==h?"":this.movesList[h][0];
e=null==h?-1:this.movesList[h][1];for(var n=this.sol[c]||0;n<this.movesList.length;n++)if(f=this.movesList[n],h=f[1]^e,f=f[0],!(0==h||0==(h&15)&&f<=r)){f=!1;var Va=!0,Na=[];for(h=0;h<a.length;h++){var Oa=this.moveTables[h][a[h]][n];if(Oa)Oa!=a[h]&&(Va=!1);else{f=!0;break}Na.push(Oa)}if(!(f||Va&&!this.isPartial)){this.sol[c]=n;if(this.idaSearch(Na,b-1,n,c+1))return!0;this.sol.pop()}}return!1};fb.getPruning=function(a){for(var b=0,h=0;h<a.length;h++)for(var c=this.prunTables[h];c[b]<a[h];)b++;return b};
fb=Za.prototype;fb.calcNumOfStates=function(){for(var a=this.solvedStates[0].length,b=[],h=0;h<this.movesList.length;h++){for(var c=[],e=0;e<a;e++)c.push(e+32);var f=this.doMove(String.fromCharCode.apply(null,c),this.movesList[h][0]);if(f&&!(f in this.prunTable)){for(e=0;e<a;e++)c[e]=f.charCodeAt(e)-32;b.push(c)}}h=[];c=this.solvedStates[0];var n=[];for(e=0;e<a;e++)n[e]=e;var Na=[];for(e=0;e<a;e++)if(!Na[e])for(f=e+1;f<a;f++)if(c[e]==c[f]&&e%9%2==f%9%2){var Oa=n.slice();Oa[e]=f;Oa[f]=e;Na[f]=1;h.push(Oa)}for(c=
0;100>c;c++){var x=[];for(e=0;e<a;e++)x[e]=e;for(e=0;e<a;e++){f=~~(Math.random()*(a-e))+e;var Sa=x[e];x[e]=x[f];x[f]=Sa}Sa=new y(h,x);x=new y(b,x);var Xa=Sa.intersect(x);if(-1!=Xa.cnt){console.log(c);break}}console.log(Xa.cnt,Sa.size(),x.size(),Xa.size(),x.size()/Xa.size())};fb.updatePrun=function(a){a=void 0===a?this.prunDepth+1:a;for(var b=this.prunDepth+1;b<=a;b++){if(this.prevSize>=this.MAX_PRUN_SIZE){DEBUG&&console.log("[gSolver] skipPrun",b,this.prunTableSize);break}var h=+new Date;if(1>b)for(var c=
this.prevSize=0;c<this.solvedStates.length;c++){var e=this.solvedStates[c];e in this.prunTable||(this.prunTable[e]=b,this.prunTableSize++)}else this.updatePrunBFS(b-1);if(0==this.cost)break;this.prunDepth=b;DEBUG&&console.log("[gSolver] updatePrun",b,this.prunTableSize-this.prevSize,+new Date-h);this.prevSize=this.prunTableSize}};fb.updatePrunBFS=function(a){if(null==this.toUpdateArr){this.toUpdateArr=[];for(var b in this.prunTable)this.prunTable[b]==a&&this.toUpdateArr.push(b)}for(;0!=this.toUpdateArr.length;){b=
this.toUpdateArr.pop();for(var h=0;h<this.movesList.length;h++){var c=this.doMove(b,this.movesList[h][0]);!c||c in this.prunTable||(this.prunTable[c]=a+1,this.prunTableSize++)}if(0<=this.cost){if(0==this.cost)return;this.cost--}}this.toUpdateArr=null};fb.search=function(a,b,h){this.sol=[];this.subOpt=!1;this.state=a;this.visited={};this.maxl=b||0;return this.searchNext(h)};fb.searchNext=function(a,b){a=a+1||99;this.prevSolStr=this.solArr?this.solArr.join(","):null;this.solArr=null;for(this.cost=b||
-1;this.maxl<a;this.maxl++){this.updatePrun(Math.ceil(this.maxl/2));if(0==this.cost)return null;if(this.idaSearch(this.state,this.maxl,null,0))break}return this.solArr};fb.getPruning=function(a){a=this.prunTable[a];return void 0===a?this.prunDepth+1:a};fb.idaSearch=function(a,b,h,c){if(this.getPruning(a)>b)return!1;if(0==b){if(-1==this.solvedStates.indexOf(a))return!1;a=this.getSolArr();this.subOpt=!0;if(a.join(",")==this.prevSolStr)return!1;this.solArr=a;return!0}if(!this.subOpt){if(a in this.visited&&
this.visited[a]<c)return!1;this.visited[a]=c}if(0<=this.cost){if(0==this.cost)return!0;this.cost--}var e=null==h?"":this.movesList[h][0];h=null==h?-1:this.movesList[h][1];for(var r=this.sol[c]||0;r<this.movesList.length;r++){var f=this.movesList[r],n=f[1]^h;f=f[0];if(!(0==n||0==(n&15)&&f<=e)&&(n=this.doMove(a,f))&&n!=a){this.sol[c]=r;if(this.idaSearch(n,b-1,r,c+1))return!0;this.sol.pop()}}return!1};fb.getSolArr=function(){for(var a=[],b=0;b<this.sol.length;b++)a.push(this.movesList[this.sol[b]][0]);
return a};var Wa=function(){function a(a,e){if(e&&(e!=c||h>a)){for(var r=[],f=0;f<e.length;f++)r[f]=e.charCodeAt(f);b=new MersenneTwisterObject(r[0],r);h=0;c=e}for(;h<a;)b(),h++}var b,h,c;a(0,""+(new Date).getTime());return{random:function(){h++;return b()},getSeed:function(){return[h,c]},setSeed:a}}(),eb=/^\s*(\d+)-(\d+)-(\d+) (\d+):(\d+):(\d+)\s*$/;Math.TAU=2*Math.PI;return{Cnk:Xa,fact:Sa,getPruning:w,setNPerm:function(a,b,h){var c,e;a[h-1]=0;for(c=h-2;0<=c;--c)for(a[c]=b%(h-c),b=~~(b/(h-c)),e=
c+1;e<h;++e)a[e]>=a[c]&&++a[e]},getNPerm:c,getNParity:e,get8Perm:a,set8Perm:Na,coord:f,createMove:$a,edgeMove:function(a,c){0==c?b(a,0,7,8,4,1):1==c?b(a,3,6,11,7,0):2==c?b(a,0,1,2,3,0):3==c?b(a,2,5,10,6,1):4==c?b(a,1,4,9,5,0):5==c&&b(a,11,10,9,8,0)},circle:Pa,circleOri:b,acycle:z,schreierSims:y,createPrun:Qa,CubieCube:n,minx:Oa,SOLVED_FACELET:"UUUUUUUUURRRRRRRRRFFFFFFFFFDDDDDDDDDLLLLLLLLLBBBBBBBBB",fillFacelet:function(a,b,h,c,e){for(var r=0;r<a.length;r++)for(var f=0;f<a[r].length;f++)b[a[r][(f+
c[r])%a[r].length]]=~~(a[h[r]][f]/e)},rn:Ra,rndEl:function(a){return a[~~(Wa.random()*a.length)]},rndProb:function(a){for(var b=0,c=0,e=0;e<a.length;e++)0!=a[e]&&(Wa.random()<a[e]/(b+a[e])&&(c=e),b+=a[e]);return c},rndHit:function(a){return Wa.random()<a},time2str:function(a,b){if(!a)return"N/A";var c=new Date(1E3*a);return(b||"%Y-%M-%D %h:%m:%s").replace("%Y",c.getFullYear()).replace("%M",("0"+(c.getMonth()+1)).slice(-2)).replace("%D",("0"+c.getDate()).slice(-2)).replace("%h",("0"+c.getHours()).slice(-2)).replace("%m",
("0"+c.getMinutes()).slice(-2)).replace("%s",("0"+c.getSeconds()).slice(-2))},str2time:function(a){a=eb.exec(a);if(!a)return null;var b=new Date(0);b.setFullYear(~~a[1]);b.setMonth(~~a[2]-1);b.setDate(~~a[3]);b.setHours(~~a[4]);b.setMinutes(~~a[5]);b.setSeconds(~~a[6]);return~~(b.getTime()/1E3)},obj2str:function(a){return"string"==typeof a?a:JSON.stringify(a)},str2obj:function(a){return"string"!=typeof a?a:JSON.parse(a)},valuedArray:function(a,b){for(var c=[],e=0;e<a;e++)c[e]=b;return c},idxArray:function(a,
b){for(var c=[],e=0;e<a.length;e++)c.push(a[e][b]);return c},Solver:x,rndPerm:function(a,b){for(var c=0,e=[],r=0;r<a;r++)e[r]=r;for(r=0;r<a-1;r++){var f=Ra(a-r);Pa(e,r,r+f);c^=0!=f}b&&c&&Pa(e,0,1);return e},gSolver:Za,phSolver:Ta,getSeed:Wa.getSeed,setSeed:Wa.setSeed}}();var sbtree=function(){function b(b,a,Na,f){this.k=b;this.v=a;this.left=Na||c;this.right=f||c;this.size=1;this.sum=b;this.sk2=Math.pow(b,2)}function Pa(b){this.root=c;this.cmp=b}function z(b,a,Na){return b==c||z(b.get(Na),a,Na)&&a(b)&&z(b.get(Na^1),a,Na)}function w(b,a){var c=b.get(a^1);b.set(a^1,c.get(a));c.set(a,b);c.size=b.size;b.size=b.get(0).size+b.get(1).size+1;c.sum=b.sum;b.sum=b.get(0).sum+b.get(1).sum+b.k;c.sk2=b.sk2;b.sk2=b.get(0).sk2+b.get(1).sk2+Math.pow(b.k,2);return c}var c=null;c=new b(0,
0);c.left=c;c.right=c;c.size=0;b.prototype.get=function(b){return b?this.right:this.left};b.prototype.set=function(b,a){b?this.right=a:this.left=a};Pa.prototype.find=function(b){for(var a=this.root;a!=c;){if(b==a.k)return a.v;a=a.get(0>this.cmp(a.k,b)^0)}};Pa.prototype.cumSum=function(b){if(b>=this.root.size||0==this.root.size)return this.root.sum;for(var a=this.root,c=0;0<b;){var e=a.get(0).size;if(b<e)a=a.get(0);else{c+=a.get(0).sum;if(b==e)break;c+=a.k;b-=e+1;a=a.get(1)}}return c};Pa.prototype.cumSk2=
function(b){if(b>=this.root.size||0==this.root.size)return this.root.sk2;for(var a=this.root,c=0;0<b;){var e=a.get(0).size;if(b<e)a=a.get(0);else{c+=a.get(0).sk2;if(b==e)break;c+=Math.pow(a.k,2);b-=e+1;a=a.get(1)}}return c};Pa.prototype.rank=function(b){for(var a=this.root;a!=c;){var e=a.get(0).size;if(b<e)a=a.get(0);else{if(b==e)return a.k;b-=e+1;a=a.get(1)}}return 0>b?-1E300:1E300};Pa.prototype.rankOf=function(b){for(var a=this.root,e=0;a!=c;)0>this.cmp(a.k,b)?(e+=a.get(0).size+1,a=a.get(1)):a=
a.get(0);return e};Pa.prototype.traverse=function(b,a){return z(this.root,b,a^0)};Pa.prototype.insertR=function(e,a,Na){if(e==c)return new b(a,Na);e.size+=1;e.sum+=a;e.sk2+=Math.pow(a,2);var f=0>this.cmp(e.k,a)^0;e.set(f,this.insertR(e.get(f),a,Na));e.get(f).get(f).size>e.get(f^1).size?e=w(e,f^1):e.get(f).get(f^1).size>e.get(f^1).size&&(f^=1,e.set(f^1,w(e.get(f^1),f^1)),e=w(e,f));return e};Pa.prototype.insert=function(b,a){this.root=this.insertR(this.root,b,a);return this};Pa.prototype.remove=function(b){this.root=
this.removeR(this.root,b);return this};Pa.prototype.removeR=function(b,a){if(b==c)return c;--b.size;b.sum-=a;b.sk2-=Math.pow(a,2);if(b.k==a){if(b.get(0)==c||b.get(1)==c)return b.get(b.get(0)==c^0);for(var e=b.get(0);e.get(1)!=c;)e=e.get(1);b.k=e.k;b.v=e.v;a=e.k}e=0>this.cmp(b.k,a)^0;b.set(e,this.removeR(b.get(e),a));return b};return{tree:function(b){return new Pa(b)}}}();var SQLFile=execMain(function(){function b(b,w,c){var e=0;if(c)for(var a=0;a<c;a++)e=e<<8|b[w[0]++];else{do e=e<<7|b[w[0]]&127;while(128<=b[w[0]++])}return e}function Pa(z,w,c){w=1==w?100:(w-1)*b(z,[16],2);var e=z[w],a=z[w+3]<<8|z[w+4],Na=[w+8],f=-1;e&8||(f=b(z,Na,4));for(var $a=0;$a<a;$a++){var n=[(100==w?0:w)+b(z,[Na[0]+2*$a],2)];if(2!=e&&10!=e)if(5==e)n=b(z,n,4),Pa(z,n,c);else if(13==e){var y=b(z,n),Qa=z,x=n[0],Ua=c,Ta=[x],Za=b(Qa,Ta),Ra=x+Za;x=Ta;Ta=[];for(Za=[];x[0]<Ra;)Ta.push(b(Qa,x));for(Ra=
0;Ra<Ta.length;Ra++){var Xa=Ta[Ra];0==Xa?Za[Ra]=null:1<=Xa&&4>=Xa?Za[Ra]=b(Qa,x,Xa):5==Xa?(Za[Ra]=void 0,b(Qa,x,6)):6==Xa?(Za[Ra]=void 0,b(Qa,x,8)):7==Xa?(Za[Ra]=void 0,b(Qa,x,8)):8==Xa?Za[Ra]=0:9==Xa?Za[Ra]=1:10!=Xa&&11!=Xa&&(0==Ta[Ra]%2?(Za[Ra]=Qa.slice(x[0],x[0]+(Xa-12)/2),x[0]+=(Xa-12)/2):(Za[Ra]=String.fromCharCode.apply(null,Qa.slice(x[0],x[0]+(Xa-13)/2)),x[0]+=(Xa-13)/2))}Ua(Za);n[0]+=y}}-1!=f&&Pa(z,f,c)}return{loadTableList:function(b){var w={};Pa(b,1,function(b){w[b[2]]=[b[3],b[4]]});return w},
loadPage:Pa}});var TimerDataConverter=execMain(function(){function b(b){try{return decodeURIComponent(escape(b))}catch(e){}return b}function Pa(c,e){c=b(c).split(/\r?\n/g);for(var a=[],Na=[],f=[],w=0,n=0;n<c.length;n++){for(var y=c[n].split(e),Qa=0;Qa<y.length;Qa++)f.push(y[Qa]),w+=(y[Qa].match(/"/g)||[]).length,0==w%2&&(f=f.join(","),'"'==f[0]&&(f=f.replace(/""/g,'"').slice(1,-1)),Na.push(f),f=[]);0==w%2&&(a.push(Na),Na=[],f=[],w=0)}return a}var z=/^(DNF)?\(?(\d*?):?(\d*?):?(\d*\.?\d*?)(\+)?\)?$/,w={csTimer:[/^{"session1"/i,
function(c){c=JSON.parse(b(c));var e={};try{e=mathlib.str2obj(mathlib.str2obj(c.properties).sessionData)}catch(Ua){}var a=[],Na;for(Na in c){var f=/^session(\d+)$/.exec(Na);if(f){var w={},n=[];try{n=mathlib.str2obj(c[Na])}catch(Ua){}if($.isArray(n)&&0!=n.length){for(var y=[],Qa=0;Qa<n.length;Qa++){var x=n[Qa];$.isArray(x)&&$.isArray(x[0])&&(x[0]=$.map(x[0],Number),y.push(x))}w.times=y;~~f[1]in e?(n=e[~~f[1]],w.name=n.name||f[1],w.opt=n.opt||{scrType:n.scr||"333",phases:n.phases||1},w.rank=n.rank):
(w.name=f[1],w.opt={},w.rank=a.length+1);a.push(w)}}}a.sort(function(a,b){return a.rank-b.rank});return a}],csTimerCSV:[/^No\.;Time;Comment;Scramble;Date;P\.1/i,function(b){b=Pa(b,";");for(var c=[],a=b[0].length-5,Na=1;Na<b.length;Na++){var f=b[Na],w=[],n=z.exec(f[1]);if(n){for(w[0]=n[1]?-1:n[5]?2E3:0;""==f[f.length-1];)f.pop();for(var y=5;y<f.length;y++)n=z.exec(f[y]),n=Math.round(36E5*~~n[2]+6E4*~~n[3]+1E3*parseFloat(n[4])),w[f.length-y]=(w[f.length-y+1]||0)+n;w=[w,f[3],f[2],mathlib.str2time(f[4])];
c.push(w)}else console.log("Invalid data detected")}return[{name:"import",opt:{phases:a},times:c}]}],ZYXTimer:[/^Session: /i,function(b){}],TwistyTimer:[/^Puzzle,Category,Time\(millis\),Date\(millis\),Scramble,Penalty,Comment/i,function(b){b=Pa(b,";");for(var c={333:"333",222:"222so",444:"444wca",555:"555wca",pyra:"pyrso",skewb:"skbso",mega:"mgmp",sq1:"sqrs",clock:"clkwca",666:"666wca",777:"777wca"},a={},Na=[],f=1;f<b.length;f++){var w=b[f];if(7==w.length){var n=w[0]+"-"+w[1],y=[{0:0,1:2E3,2:-1}[w[5]],
Math.round(w[2])];n in a||(a[n]=Na.length,Na.push({name:n,opt:{scrType:c[w[0]]||"333"},times:[]}));Na[a[n]].times.push([y,w[4],w[6],Math.round(w[3]/1E3)])}}return Na}],BlockKeeper:[/^{"puzzles":\[{"name":/i,function(c){c=JSON.parse(b(c)).puzzles;var e={"3x3x3":"333","2x2x2":"222so","4x4x4":"444wca","5x5x5":"555wca",Pyraminx:"pyrso",Skewb:"skbso",Megaminx:"mgmp","Square-1":"sqrs",Clock:"clkwca","6x6x6":"666wca","7x7x7":"777wca","3x3x3 BLD":"333ni","4x4x4 BLD":"444bld","5x5x5 BLD":"555bld"},a=[];$.each(c,
function(b,c){var f=c.name,n=c.scrambler,Na=c.splits;$.each(c.sessions,function(b,c){var x=c.name,y=[];$.each(c.records,function(a,b){var c=[{OK:0,"+2":2E3,DNF:-1}[b.result],Math.round(1E3*b.time)];Array.prototype.push.apply(c,$.map(b.split.reverse(),function(a){return Math.round(1E3*a)}));y.push([c,b.scramble,b.comment||"",Math.round(b.date/1E3)])});0!=y.length&&a.push({name:f+"-"+x,opt:{phases:Na,scrType:e[n]||"333"},times:y})})});return a}],PrismaTimer:[/^[^\t\n]*(\t[^\t\n]*){4}\n/i,function(b){}],
"DCTimer.raw":[/^\d+[\r\n]+[^\t\n]*(\t[^\t\n]*){11}[\r\n]+/i,function(c){c=b(c).split(/[\r\n]+/);for(var e={},a=0,Na=[],f=0;f<c.length;f++)if(/^\d+$/.exec(c[f]))a=~~c[f],e[a]=Na.length,Na.push({name:a,opt:{},times:[]});else{var w=c[f].split("\t");6>w.length||Na[e[a]].times.push([["1"==w[2]?"1"==w[1]?2E3:0:-1,~~w[0]],w[3],w[5],mathlib.str2time(w[4])])}return Na}],"DCTimer.sqlite":[/^SQLite format 3\0/i,function(c){for(var e=new Uint8Array(c.length),a=0;a<c.length;a++)e[a]=c.charCodeAt(a);c=SQLFile.loadTableList(e);
var Na={},f=[],w=function(a,b){a in Na||(Na[a]=f.length,f.push({name:b||a+1,opt:{},times:[]}))};SQLFile.loadPage(e,c.sessiontb[0],function(a){w(a[0],b(a[1]))});for(var n in c)if(a=/^result(\d+|tb)$/.exec(n)){var y=("tb"==a[1]?1:~~a[1])-1;SQLFile.loadPage(e,c[n][0],function(a){w(y);f[Na[y]].times.push([["1"==a[3]?"1"==a[2]?2E3:0:-1,~~a[1]],b(a[4]||""),b(a[6]||""),mathlib.str2time(a[5])])})}SQLFile.loadPage(e,c.resultstb[0],function(a){var c=a[1];w(c);f[Na[c]].times.push([["1"==a[4]?"1"==a[3]?2E3:0:
-1,~~a[2]],b(a[5]||""),b(a[7]||""),mathlib.str2time(a[6])])});return f}],"mateus.cubetimer":[/^"Category";"Time \(MM:SS\.SSS\)";"Scrambler";"Date";"Penalty \+2 \(yes or no\)";"DNF \(yes or no\)";"Section"\n/i,function(b){b=Pa(b,";");for(var c={"3x3x3":"333","2x2x2":"222so","4x4x4":"444wca","5x5x5":"555wca",Pyraminx:"pyrso",Skewb:"skbso",Megaminx:"mgmp","Square-1":"sqrs","Rubik's Clock":"clkwca","6x6x6":"666wca","7x7x7":"777wca","3x3x3 Blindfolded":"333ni","4x4x4 Blindfolded":"444bld","5x5x5 Blindfolded":"555bld",
"3x3x3 One-Handed":"333oh","3x3x3 Multi-Blindfolded":"r3ni","3x3x3 With Feet":"333ft","3x3x3 Fewest Moves":"333fm"},a={},Na=[],f=1;f<b.length;f++){var w=b[f];if(!(7>w.length)){var n=w[0]+"-"+w[6],y=z.exec(w[1]);if(y){y=Math.round(36E5*~~y[2]+6E4*~~y[3]+1E3*parseFloat(y[4]));var Qa=w[2],x=0;"yes"==w[5]?x=-1:"yes"==w[4]&&(x=2E3);n in a||(a[n]=Na.length,Na.push({name:n,opt:{scrType:c[w[0]]||"333"},times:[]}));Na[a[n]].times.push([[x,y],Qa,"",mathlib.str2time(w[3]+":00")])}else console.log("Invalid data detected")}}return Na}],
"CubeDesk.new":[/^{"sessions":\[/i,function(c){c=JSON.parse(b(c));var e={},a={};$.each(c.sessions,function(b,c){e[c.id]=c.name;a[c.id]=c.order});var Na={222:"222so",333:"333",444:"444wca",555:"555wca",pyram:"pyrso",skewb:"skbso",minx:"mgmp",sq1:"sqrs",clock:"clkwca",666:"666wca",777:"777wca","333mirror":"333","222oh":"222so","333oh":"333oh","333bl":"333ni"},f=[],w={};$.each(c.solves,function(b,c){var n=c.session_id+"-"+c.cube_type;n in w||(w[n]=f.length,f.push({name:(e[c.session_id]||c.session_id)+
"-"+c.cube_type,opt:{scrType:Na[c.cube_type]||"333"},rank:a[c.session_id],times:[]}));n=f[w[n]];var x=0;c.dnf?x=-1:c.plus_two&&(x=2E3);n.times.push([[x,1E3*c.raw_time],c.scramble,c.notes||"",Math.round(c.started_at/1E3)]);(x=Na[c.cube_type])&&(n.opt.scrType=x)});$.each(f,function(a,b){b.times.sort(function(a,b){return a[3]-b[3]})});f.sort(function(a,b){return a.rank-b.rank});return f}]};return function(b){var c=void 0,a;for(a in w)if(w[a][0].exec(b)){console.log("try read by "+a);try{c=w[a][1](b);
break}catch(Na){console.log(Na)}}return c}});var LZString=function(){function b(b,e){if(!z[b]){z[b]={};for(var a=0;a<b.length;a++)z[b][b.charAt(a)]=a}return z[b][e]}var Pa=String.fromCharCode,z={},w={compressToBase64:function(b){if(null==b)return"";b=w._compress(b,6,function(b){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)});switch(b.length%4){default:case 0:return b;case 1:return b+"===";case 2:return b+"==";case 3:return b+"="}},decompressFromBase64:function(c){return null==c?"":""==c?null:w._decompress(c.length,
32,function(e){return b("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c.charAt(e))})},compressToUTF16:function(b){return null==b?"":w._compress(b,15,function(b){return Pa(b+32)})+" "},decompressFromUTF16:function(b){return null==b?"":""==b?null:w._decompress(b.length,16384,function(c){return b.charCodeAt(c)-32})},compressToUint8Array:function(b){b=w.compress(b);for(var c=new Uint8Array(2*b.length),a=0,Na=b.length;a<Na;a++){var f=b.charCodeAt(a);c[2*a]=f>>>8;c[2*a+1]=f%256}return c},
decompressFromUint8Array:function(b){if(null===b||void 0===b)return w.decompress(b);for(var c=Array(b.length/2),a=0,Na=c.length;a<Na;a++)c[a]=256*b[2*a]+b[2*a+1];var f=[];c.forEach(function(a){f.push(Pa(a))});return w.decompress(f.join(""))},compressToEncodedURIComponent:function(b){return null==b?"":w._compress(b,6,function(b){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$".charAt(b)})},decompressFromEncodedURIComponent:function(c){if(null==c)return"";if(""==c)return null;
c=c.replace(/ /g,"+");return w._decompress(c.length,32,function(e){return b("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",c.charAt(e))})},compress:function(b){return w._compress(b,16,function(b){return Pa(b)})},_compress:function(b,e,a){if(null==b)return"";var c,f={},w={},n="",y=2,Qa=3,x=2,Ua=[],Ta=0,z=0,Ra;for(Ra=0;Ra<b.length;Ra+=1){var Xa=b.charAt(Ra);Object.prototype.hasOwnProperty.call(f,Xa)||(f[Xa]=Qa++,w[Xa]=!0);var Sa=n+Xa;if(Object.prototype.hasOwnProperty.call(f,Sa))n=
Sa;else{if(Object.prototype.hasOwnProperty.call(w,n)){if(256>n.charCodeAt(0)){for(c=0;c<x;c++)Ta<<=1,z==e-1?(z=0,Ua.push(a(Ta)),Ta=0):z++;var Oa=n.charCodeAt(0);for(c=0;8>c;c++)Ta=Ta<<1|Oa&1,z==e-1?(z=0,Ua.push(a(Ta)),Ta=0):z++,Oa>>=1}else{Oa=1;for(c=0;c<x;c++)Ta=Ta<<1|Oa,z==e-1?(z=0,Ua.push(a(Ta)),Ta=0):z++,Oa=0;Oa=n.charCodeAt(0);for(c=0;16>c;c++)Ta=Ta<<1|Oa&1,z==e-1?(z=0,Ua.push(a(Ta)),Ta=0):z++,Oa>>=1}y--;0==y&&(y=Math.pow(2,x),x++);delete w[n]}else for(Oa=f[n],c=0;c<x;c++)Ta=Ta<<1|Oa&1,z==e-
1?(z=0,Ua.push(a(Ta)),Ta=0):z++,Oa>>=1;y--;0==y&&(y=Math.pow(2,x),x++);f[Sa]=Qa++;n=String(Xa)}}if(""!==n){if(Object.prototype.hasOwnProperty.call(w,n)){if(256>n.charCodeAt(0)){for(c=0;c<x;c++)Ta<<=1,z==e-1?(z=0,Ua.push(a(Ta)),Ta=0):z++;Oa=n.charCodeAt(0);for(c=0;8>c;c++)Ta=Ta<<1|Oa&1,z==e-1?(z=0,Ua.push(a(Ta)),Ta=0):z++,Oa>>=1}else{Oa=1;for(c=0;c<x;c++)Ta=Ta<<1|Oa,z==e-1?(z=0,Ua.push(a(Ta)),Ta=0):z++,Oa=0;Oa=n.charCodeAt(0);for(c=0;16>c;c++)Ta=Ta<<1|Oa&1,z==e-1?(z=0,Ua.push(a(Ta)),Ta=0):z++,Oa>>=
1}y--;0==y&&(y=Math.pow(2,x),x++);delete w[n]}else for(Oa=f[n],c=0;c<x;c++)Ta=Ta<<1|Oa&1,z==e-1?(z=0,Ua.push(a(Ta)),Ta=0):z++,Oa>>=1;y--;0==y&&x++}Oa=2;for(c=0;c<x;c++)Ta=Ta<<1|Oa&1,z==e-1?(z=0,Ua.push(a(Ta)),Ta=0):z++,Oa>>=1;for(;;)if(Ta<<=1,z==e-1){Ua.push(a(Ta));break}else z++;return Ua.join("")},decompress:function(b){return null==b?"":""==b?null:w._decompress(b.length,32768,function(c){return b.charCodeAt(c)})},_decompress:function(b,e,a){var c=[],f=4,w=4,n=3,y=[],z,x,Ua=a(0),Ta=e,Za=1;for(z=
0;3>z;z+=1)c[z]=z;var Ra=0;var Xa=Math.pow(2,2);for(x=1;x!=Xa;){var Sa=Ua&Ta;Ta>>=1;0==Ta&&(Ta=e,Ua=a(Za++));Ra|=(0<Sa?1:0)*x;x<<=1}switch(Ra){case 0:Ra=0;Xa=Math.pow(2,8);for(x=1;x!=Xa;)Sa=Ua&Ta,Ta>>=1,0==Ta&&(Ta=e,Ua=a(Za++)),Ra|=(0<Sa?1:0)*x,x<<=1;var Oa=Pa(Ra);break;case 1:Ra=0;Xa=Math.pow(2,16);for(x=1;x!=Xa;)Sa=Ua&Ta,Ta>>=1,0==Ta&&(Ta=e,Ua=a(Za++)),Ra|=(0<Sa?1:0)*x,x<<=1;Oa=Pa(Ra);break;case 2:return""}z=c[3]=Oa;for(y.push(Oa);;){if(Za>b)return"";Ra=0;Xa=Math.pow(2,n);for(x=1;x!=Xa;)Sa=Ua&Ta,
Ta>>=1,0==Ta&&(Ta=e,Ua=a(Za++)),Ra|=(0<Sa?1:0)*x,x<<=1;switch(Oa=Ra){case 0:Ra=0;Xa=Math.pow(2,8);for(x=1;x!=Xa;)Sa=Ua&Ta,Ta>>=1,0==Ta&&(Ta=e,Ua=a(Za++)),Ra|=(0<Sa?1:0)*x,x<<=1;c[w++]=Pa(Ra);Oa=w-1;f--;break;case 1:Ra=0;Xa=Math.pow(2,16);for(x=1;x!=Xa;)Sa=Ua&Ta,Ta>>=1,0==Ta&&(Ta=e,Ua=a(Za++)),Ra|=(0<Sa?1:0)*x,x<<=1;c[w++]=Pa(Ra);Oa=w-1;f--;break;case 2:return y.join("")}0==f&&(f=Math.pow(2,n),n++);if(c[Oa])Oa=c[Oa];else if(Oa===w)Oa=z+z.charAt(0);else return null;y.push(Oa);c[w++]=z+Oa.charAt(0);
f--;z=Oa;0==f&&(f=Math.pow(2,n),n++)}}};return w}();var min2phase=function(){function b(){this.move=[];this.moveSol=[];this.nodeUD=[];this.valid1=0;this.allowShorter=!1;this.cc=new a;this.urfCubieCube=[];this.urfCoordCube=[];this.phase1Cubie=[];this.preMoveCubes=[];this.preMoves=[];this.maxPreMoves=this.preMoveLen=0;this.isRec=!1;for(var b=0;21>b;b++)this.nodeUD[b]=new Ua,this.phase1Cubie[b]=new a;for(b=0;6>b;b++)this.urfCubieCube[b]=new a,this.urfCoordCube[b]=new Ua;for(b=0;20>b;b++)this.preMoveCubes[b+1]=new a}function Pa(a,b,c){return c?b<<1|a&
1:b|a&248}function z(a,b){return b?a>>1:a&7}function w(a,b,c){a[b>>3]^=c<<(b<<2)}function c(a,b,c){return Math.min(a,b[c>>3]>>(c<<2)&15)}function e(a,b,c){a=Qb[a];c&&(a^=14540032>>((a&15)<<1)&3);return a&65520|hb[a&15][b]}function a(){this.ca=[0,1,2,3,4,5,6,7];this.ea=[0,2,4,6,8,10,12,14,16,18,20,22]}function Na(a,b,c,h){c--;for(var e=1985229328,r=0;r<c;++r){var f=fb[c-r],n=~~(b/f);b%=f;n<<=2;a[r]=Pa(a[r],e>>n&15,h);f=(1<<n)-1;e=(e&f)+(e>>4&~f)}a[c]=Pa(a[c],e&15,h)}function f(a,b,c){for(var h=0,e=
1985229328,r=0;r<b-1;++r){var f=z(a[r],c)<<2;h=(b-r)*h+(e>>f&15);e-=286331152<<f}return h}function $a(a,b,c,h){a[c-1]=Pa(a[c-1],0,h);for(var e=c-2;0<=e;--e){a[e]=Pa(a[e],b%(c-e),h);b=~~(b/(c-e));for(var r=e+1;r<c;++r)z(a[r],h)>=z(a[e],h)&&(a[r]=Pa(a[r],z(a[r],h)+1,h))}}function n(a,b,c){for(var h=0,e=0;e<b;++e){h*=b-e;for(var r=e+1;r<b;++r)z(a[r],c)<z(a[e],c)&&++h}return h}function y(a,b,c){for(var h=0,e=4,r=a.length-1;0<=r;r--)(z(a[r],c)&12)==b&&(h+=Oa[r][e--]);return h}function Qa(a,b,c,h){for(var e=
a.length-1,r=4,f=e;0<=e;e--)b>=Oa[e][r]?(b-=Oa[e][r--],a[e]=Pa(a[e],r|c,h)):((f&12)==c&&(f-=4),a[e]=Pa(a[e],f--,h))}function x(a,b){for(var c=0,h=b-2;0<=h;h--)c^=a%(b-h),a=~~(a/(b-h));return c&1}function Ua(){this.flipc=this.twistc=this.prun=this.slice=this.fsym=this.flip=this.tsym=this.twist=0}function Ta(){function b(b,c,h,r,e,f,n){for(var Oa=new a,x=new a,Sa=0,w=2<=e?1:2,Va=1!=e?a.EdgeConjugate:a.CornConjugate,kb=0;kb<b;kb++)if(void 0===h[kb]){f.call(Oa,kb);for(var Xa=0;16>Xa;Xa+=w){Va(Oa,Xa,x);
var Na=n.call(x);0==e&&(Ab[Sa<<3|Xa>>1]=Na);Na==kb&&(r[Sa]|=1<<Xa/w);h[Na]=(Sa<<4|Xa)/w}c[Sa++]=kb}return Sa}function c(a,b,c,r,f,n,Oa,x){for(var Sa=0;Sa<c;Sa++){a[Sa]=[];f.call(h,b[Sa]);for(var w=0;w<r;w++)Oa(h,ab[x?x[w]:w],e),a[Sa][w]=n.call(e)}}var h=new a,e=new a,r,f=(new a).initCoord(28783,0,259268407,0),n=(new a).initCoord(15138,0,119765538,7),Oa=(new a).initCoord(5167,0,83473207,0);for(r=0;8>r;r++)Oa.ca[r]|=24;for(r=0;16>r;r++)nb[r]=(new a).init(h.ca,h.ea),a.CornMultFull(h,n,e),a.EdgeMult(h,
n,e),h.init(e.ca,e.ea),3==r%4&&(a.CornMultFull(h,Oa,e),a.EdgeMult(h,Oa,e),h.init(e.ca,e.ea)),7==r%8&&(a.CornMultFull(h,f,e),a.EdgeMult(h,f,e),h.init(e.ca,e.ea));for(r=0;16>r;r++)hb[r]=[],ob[r]=[],db[r]=[],rb[r]=[],kb[r]=[];for(r=0;16>r;r++)for(f=0;16>f;f++)hb[r][f]=r^f^84660>>f&r<<1&2,ob[hb[r][f]][f]=r;h=new a;for(n=0;16>n;n++)for(f=0;18>f;f++){a.CornConjugate(ab[f],ob[0][n],h);Oa=0;a:for(;18>Oa;Oa++){for(r=0;8>r;r++)if(ab[Oa].ca[r]!=h.ca[r])continue a;db[n][f]=Oa;kb[n][mb[f]]=mb[Oa];break}0==n%2&&
(rb[f<<3|n>>1]=db[n][f])}b(2048,pb,cb,xb,0,a.prototype.setFlip,a.prototype.getFlip);b(2187,zb,vb,Db,1,a.prototype.setTwist,a.prototype.getTwist);b(40320,wb,yb,qb,2,a.prototype.setEPerm,a.prototype.getEPerm);f=new a;for(r=0;2768>r;r++)Na(f.ea,wb[r],8,!0),Nb[r]=y(f.ea,0,!0)+70*x(wb[r],8),h.invFrom(f),Qb[r]=yb[h.getEPerm()];h=new a;e=new a;c(Fb,pb,336,18,a.prototype.setFlip,a.prototype.getFlipSym,a.EdgeMult);c(Pb,zb,324,18,a.prototype.setTwist,a.prototype.getTwistSym,a.CornMult);c(Bb,wb,2768,10,a.prototype.setEPerm,
a.prototype.getEPermSym,a.EdgeMult,gb);c(Mb,wb,2768,10,a.prototype.setCPerm,a.prototype.getCPermSym,a.CornMult,gb);for(r=0;495>r;r++){Lb[r]=[];ub[r]=[];h.setUDSlice(r);for(f=0;18>f;f++)a.EdgeMult(h,ab[f],e),Lb[r][f]=e.getUDSlice();for(f=0;16>f;f+=2)a.EdgeConjugate(h,ob[0][f],e),ub[r][f>>1]=e.getUDSlice()}for(r=0;24>r;r++){tb[r]=[];Hb[r]=[];h.setMPerm(r);for(f=0;10>f;f++)a.EdgeMult(h,ab[gb[f]],e),tb[r][f]=e.getMPerm();for(f=0;16>f;f++)a.EdgeConjugate(h,ob[0][f],e),Hb[r][f]=e.getMPerm()}for(r=0;140>
r;r++){Rb[r]=[];Vb[r]=[];h.setCComb(r%70);for(f=0;10>f;f++)a.CornMult(h,ab[gb[f]],e),Rb[r][f]=e.getCComb()+70*(165>>f&1^~~(r/70));for(f=0;16>f;f++)a.CornConjugate(h,ob[0][f],e),Vb[r][f]=e.getCComb()+70*~~(r/70)}}function Za(a,b,c,h,r,e,f,n){var Oa=n&15,x=1==(n>>4&1)?14540032:0,kb=n>>8&15,Xa=n>>12&15,Va=n>>16&15,Na=(1<<Oa)-1,bb=null==h;c*=b;n=1==(n>>5&1)?10:18;var y=10==n?66:599186,Ua=(a[c>>3]>>(c<<2)&15)-1;if(-1==Ua){for(var Ra=0;Ra<(c>>3)+1;Ra++)a[Ra]=4294967295;w(a,0,15);Ua=0}else w(a,c,15^Ua+1);
for(Xa=0<Sa?Math.min(Math.max(Ua+1,Va),Xa):Xa;Ua<Xa;){var Ub=(Va=Ua>kb)?15:Ua,z=286331153*Ub,Ya=Va?Ua:15;Ua++;Ib++;var Ta=Ua^15,ab=0,db=0;for(Ra=0;Ra<c;Ra++,db>>=4){if(0==(Ra&7)){db=a[Ra>>3];var Wa=db^z;if(0==(Wa-286331153&~Wa&2290649224)){Ra+=7;continue}}if((db&15)==Ub){Wa=Ra%b;var Qa=~~(Ra/b),fb=0,gb=0;bb&&(fb=cb[Wa],gb=fb&7,fb>>=3);for(var lb=0;lb<n;lb++){var pb=e[Qa][lb];var $a=bb?Ab[Fb[fb][rb[lb<<3|gb]]^gb^pb&Na]:r[h[Wa][lb]][pb&Na];pb>>=Oa;var Za=pb*b+$a,hb=a[Za>>3]>>(Za<<2)&15;if(hb!=Ya)hb<
Ua-1&&(lb+=y>>lb&3);else{ab++;if(Va){w(a,Ra,Ta);break}w(a,Za,Ta);Za=1;for(hb=f[pb];0!=(hb>>=1);Za++)if(1==(hb&1)){var eb=pb*b;eb=bb?eb+Ab[cb[$a]^Za]:eb+r[$a][Za^x>>(Za<<1)&3];(a[eb>>3]>>(eb<<2)&15)==Ya&&(w(a,eb,Ta),ab++)}}}}}}w(a,c,Ua+1^15);return Ua+1}function Ra(a){Jb=Za(sb,2048,324,null,null,Pb,Db,103939);Ib>a||(Kb=Za(Gb,495,324,Lb,ub,Pb,Db,431619),Ib>a||(Wb=Za(Cb,495,336,Lb,ub,Fb,xb,431619),Ib>a||(Sb=Za(Tb,24,2768,tb,Hb,Mb,qb,584244),Ib>a||(Xb=Za(Ob,140,2768,Rb,Vb,Bb,qb,514084)))))}function Xa(){0>
Ib&&(Ta(),Ib=0);if(0==Ib)Ra(99);else if(54>Ib)Ra(Ib);else return!0;return!1}for(var Sa=2,Oa=[],fb=[1],lb="U ;U2;U';R ;R2;R';F ;F2;F';D ;D2;D';L ;L2;L';B ;B2;B'".split(";"),gb=[0,1,2,4,7,9,10,11,13,16,3,5,6,8,12,14,15,17],mb=[],ib=[],Wa=[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],[6,7,8,0,1,2,3,4,5,15,16,17,9,10,11,12,13,14],[3,4,5,6,7,8,0,1,2,12,13,14,15,16,17,9,10,11],[2,1,0,5,4,3,8,7,6,11,10,9,14,13,12,17,16,15],[8,7,6,2,1,0,5,4,3,17,16,15,11,10,9,14,13,12],[5,4,3,8,7,6,2,1,0,14,13,12,17,16,
15,11,10,9]],eb=0;18>eb;eb++)mb[gb[eb]]=eb;for(eb=0;10>eb;eb++)for(var Ya=~~(gb[eb]/3),r=ib[eb]=0;10>r;r++){var h=~~(gb[r]/3);ib[eb]|=(Ya==h||Ya%3==h%3&&Ya>=h?1:0)<<r}for(eb=ib[10]=0;13>eb;eb++)for(Oa[eb]=[],fb[eb+1]=fb[eb]*(eb+1),r=Oa[eb][0]=Oa[eb][eb]=1;13>r;r++)Oa[eb][r]=r<=eb?Oa[eb-1][r-1]+Oa[eb-1][r]:0;a.EdgeMult=function(a,b,c){for(var h=0;12>h;h++)c.ea[h]=a.ea[b.ea[h]>>1]^b.ea[h]&1};a.CornMult=function(a,b,c){for(var h=0;8>h;h++)c.ca[h]=a.ca[b.ca[h]&7]&7|((a.ca[b.ca[h]&7]>>3)+(b.ca[h]>>3))%
3<<3};a.CornMultFull=function(a,b,c){for(var h=0;8>h;h++){var r=a.ca[b.ca[h]&7]>>3,e=b.ca[h]>>3,f=r+(3>r?e:6-e);f=f%3+(3>r==3>e?0:3);c.ca[h]=a.ca[b.ca[h]&7]&7|f<<3}};a.CornConjugate=function(a,b,c){var h=nb[ob[0][b]];b=nb[b];for(var r=0;8>r;r++){var e=a.ca[b.ca[r]&7]>>3;c.ca[r]=h.ca[a.ca[b.ca[r]&7]&7]&7|(3>h.ca[a.ca[b.ca[r]&7]&7]>>3?e:(3-e)%3)<<3}};a.EdgeConjugate=function(a,b,c){var h=nb[ob[0][b]];b=nb[b];for(var r=0;12>r;r++)c.ea[r]=h.ea[a.ea[b.ea[r]>>1]>>1]^a.ea[b.ea[r]>>1]&1^b.ea[r]&1};a.prototype.init=
function(a,b){this.ca=a.slice();this.ea=b.slice();return this};a.prototype.initCoord=function(a,b,c,h){Na(this.ca,a,8,!1);this.setTwist(b);$a(this.ea,c,12,!0);this.setFlip(h);return this};a.prototype.isEqual=function(a){for(var b=0;8>b;b++)if(this.ca[b]!=a.ca[b])return!1;for(b=0;12>b;b++)if(this.ea[b]!=a.ea[b])return!1;return!0};a.prototype.setFlip=function(a){for(var b=0,c,h=10;0<=h;h--,a>>=1)b^=c=a&1,this.ea[h]=this.ea[h]&254|c;this.ea[11]=this.ea[11]&254|b};a.prototype.getFlip=function(){for(var a=
0,b=0;11>b;b++)a=a<<1|this.ea[b]&1;return a};a.prototype.getFlipSym=function(){return cb[this.getFlip()]};a.prototype.setTwist=function(a){for(var b=15,c,h=6;0<=h;h--,a=~~(a/3))b-=c=a%3,this.ca[h]=this.ca[h]&7|c<<3;this.ca[7]=this.ca[7]&7|b%3<<3};a.prototype.getTwist=function(){for(var a=0,b=0;7>b;b++)a+=(a<<1)+(this.ca[b]>>3);return a};a.prototype.getTwistSym=function(){return vb[this.getTwist()]};a.prototype.setCPerm=function(a){Na(this.ca,a,8,!1)};a.prototype.getCPerm=function(){return f(this.ca,
8,!1)};a.prototype.getCPermSym=function(){var a=yb[f(this.ca,8,!1)];return a^14540032>>((a&15)<<1)&3};a.prototype.setEPerm=function(a){Na(this.ea,a,8,!0)};a.prototype.getEPerm=function(){return f(this.ea,8,!0)};a.prototype.getEPermSym=function(){return yb[f(this.ea,8,!0)]};a.prototype.getUDSlice=function(){return 494-y(this.ea,8,!0)};a.prototype.setUDSlice=function(a){Qa(this.ea,494-a,8,!0)};a.prototype.getMPerm=function(){return n(this.ea,12,!0)%24};a.prototype.setMPerm=function(a){$a(this.ea,a,
12,!0)};a.prototype.getCComb=function(){return y(this.ca,0,!1)};a.prototype.setCComb=function(a){Qa(this.ca,a,0,!1)};a.prototype.URFConjugate=function(){var b=new a;a.CornMult(a.urf2,this,b);a.CornMult(b,a.urf1,this);a.EdgeMult(a.urf2,this,b);a.EdgeMult(b,a.urf1,this)};var Va=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],bb=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]];a.prototype.toFaceCube=function(a,b){a=a||
Va;b=b||bb;for(var c=[],h=0;54>h;h++)c[h]="URFDLB"[~~(h/9)];for(var r=0;8>r;r++){h=this.ca[r]&7;for(var e=this.ca[r]>>3,f=0;3>f;f++)c[a[r][(f+e)%3]]="URFDLB"[~~(a[h][f]/9)]}for(r=0;12>r;r++)for(h=this.ea[r]>>1,e=this.ea[r]&1,f=0;2>f;f++)c[b[r][(f+e)%2]]="URFDLB"[~~(b[h][f]/9)];return c.join("")};a.prototype.invFrom=function(a){for(var b=0;12>b;b++)this.ea[a.ea[b]>>1]=b<<1|a.ea[b]&1;for(b=0;8>b;b++)this.ca[a.ca[b]&7]=b|32>>(a.ca[b]>>3)&24;return this};a.prototype.fromFacelet=function(a,b,c){b=b||Va;
c=c||bb;for(var h=0,r=[],e=a[4]+a[13]+a[22]+a[31]+a[40]+a[49],f=0;54>f;++f){r[f]=e.indexOf(a[f]);if(-1==r[f])return-1;h+=1<<(r[f]<<2)}if(10066329!=h)return-1;var n;for(f=0;8>f;++f){for(n=0;3>n&&0!=r[b[f][n]]&&3!=r[b[f][n]];++n);a=r[b[f][(n+1)%3]];h=r[b[f][(n+2)%3]];for(e=0;8>e;++e)if(a==~~(b[e][1]/9)&&h==~~(b[e][2]/9)){this.ca[f]=e|n%3<<3;break}}for(f=0;12>f;++f)for(e=0;12>e;++e){if(r[c[f][0]]==~~(c[e][0]/9)&&r[c[f][1]]==~~(c[e][1]/9)){this.ea[f]=e<<1;break}if(r[c[f][0]]==~~(c[e][1]/9)&&r[c[f][1]]==
~~(c[e][0]/9)){this.ea[f]=e<<1|1;break}}};Ua.prototype.set=function(a){this.twist=a.twist;this.tsym=a.tsym;this.flip=a.flip;this.fsym=a.fsym;this.slice=a.slice;this.prun=a.prun;this.twistc=a.twistc;this.flipc=a.flipc};Ua.prototype.calcPruning=function(a){this.prun=Math.max(Math.max(c(Kb,Gb,495*this.twist+ub[this.slice][this.tsym]),c(Wb,Cb,495*this.flip+ub[this.slice][this.fsym])),Math.max(c(Jb,sb,this.twistc>>3<<11|Ab[this.flipc^this.twistc&7]),c(Jb,sb,this.twist<<11|Ab[this.flip<<3|this.fsym^this.tsym])))};
Ua.prototype.setWithPrun=function(b,h){this.twist=b.getTwistSym();this.flip=b.getFlipSym();this.tsym=this.twist&7;this.twist>>=3;this.prun=c(Jb,sb,this.twist<<11|Ab[this.flip^this.tsym]);if(this.prun>h)return!1;this.fsym=this.flip&7;this.flip>>=3;this.slice=b.getUDSlice();this.prun=Math.max(this.prun,Math.max(c(Kb,Gb,495*this.twist+ub[this.slice][this.tsym]),c(Wb,Cb,495*this.flip+ub[this.slice][this.fsym])));if(this.prun>h)return!1;var r=new a;a.CornConjugate(b,1,r);a.EdgeConjugate(b,1,r);this.twistc=
r.getTwistSym();this.flipc=r.getFlipSym();this.prun=Math.max(this.prun,c(Jb,sb,this.twistc>>3<<11|Ab[this.flipc^this.twistc&7]));return this.prun<=h};Ua.prototype.doMovePrun=function(a,b,h){this.slice=Lb[a.slice][b];this.flip=Fb[a.flip][rb[b<<3|a.fsym]];this.fsym=this.flip&7^a.fsym;this.flip>>=3;this.twist=Pb[a.twist][rb[b<<3|a.tsym]];this.tsym=this.twist&7^a.tsym;this.twist>>=3;return this.prun=Math.max(Math.max(c(Kb,Gb,495*this.twist+ub[this.slice][this.tsym]),c(Wb,Cb,495*this.flip+ub[this.slice][this.fsym])),
c(Jb,sb,this.twist<<11|Ab[this.flip<<3|this.fsym^this.tsym]))};Ua.prototype.doMovePrunConj=function(a,b){b=db[3][b];this.flipc=Fb[a.flipc>>3][rb[b<<3|a.flipc&7]]^a.flipc&7;this.twistc=Pb[a.twistc>>3][rb[b<<3|a.twistc&7]]^a.twistc&7;return c(Jb,sb,this.twistc>>3<<11|Ab[this.flipc^this.twistc&7])};b.prototype.solution=function(a,b,c,h,r,e,f){Xa();a=this.verify(a);if(0!=a)return"Error "+Math.abs(a);void 0===b&&(b=21);void 0===c&&(c=1E9);void 0===h&&(h=0);void 0===r&&(r=0);this.sol=b+1;this.probe=0;this.probeMax=
c;this.probeMin=Math.min(h,c);this.verbose=r;this.moveSol=null;this.isRec=!1;this.firstFilters=[0,0,0,0,0,0];this.lastFilters=[0,0,0,0,0,0];for(b=0;3>b;b++)void 0!==e&&(this.firstFilters[b]|=3591<<3*~~(Wa[(3-b)%3][3*e]/3),this.lastFilters[b+3]|=3591<<3*~~(Wa[(3-b)%3][3*e]/3)),void 0!==f&&(this.lastFilters[b]|=3591<<3*~~(Wa[(3-b)%3][3*f]/3),this.firstFilters[b+3]|=3591<<3*~~(Wa[(3-b)%3][3*f]/3));this.initSearch();return this.search()};b.prototype.initSearch=function(){this.conjMask=0;this.maxPreMoves=
7<this.conjMask?0:20;for(var b=0;6>b;b++)if(this.urfCubieCube[b].init(this.cc.ca,this.cc.ea),this.urfCoordCube[b].setWithPrun(this.urfCubieCube[b],20),this.cc.URFConjugate(),2==b%3){var c=(new a).invFrom(this.cc);this.cc.init(c.ca,c.ea)}};b.prototype.next=function(a,b,c){this.probe=0;this.probeMax=a;this.probeMin=Math.min(b,a);this.moveSol=null;this.isRec=!0;this.verbose=c;return this.search()};b.prototype.verify=function(a){if(-1==this.cc.fromFacelet(a))return-1;for(var b=a=0,c=0;12>c;c++)b|=1<<
(this.cc.ea[c]>>1),a^=this.cc.ea[c]&1;if(4095!=b)return-2;if(0!=a)return-3;for(c=a=b=0;8>c;c++)b|=1<<(this.cc.ca[c]&7),a+=this.cc.ca[c]>>3;return 255!=b?-4:0!=a%3?-5:0!=(x(n(this.cc.ea,12,!0),12)^x(this.cc.getCPerm(),8))?-6:0};b.prototype.phase1PreMoves=function(b,c,h){if(b==this.maxPreMoves-1&&0!=(this.lastFilter>>c&1))return 1;this.preMoveLen=this.maxPreMoves-b;if(this.isRec?this.depth1==this.length1-this.preMoveLen:0==this.preMoveLen||0==(225207>>c&1))if(this.depth1=this.length1-this.preMoveLen,
this.phase1Cubie[0].init(h.ca,h.ea),this.allowShorter=7==this.depth1&&0!=this.preMoveLen,this.nodeUD[this.depth1+1].setWithPrun(h,this.depth1)&&0==this.phase1(this.nodeUD[this.depth1+1],this.depth1,-1))return 0;if(0==b||this.preMoveLen+7>=this.length1)return 1;var r=0;if(1==b||this.preMoveLen+1+7>=this.length1)r|=225207;c=3*~~(c/3);for(var e=0;18>e;e++)if(e==c||e==c-9||e==c+9)e+=2;else if(!(this.isRec&&e!=this.preMoves[this.maxPreMoves-b]||0!=(r&1<<e))&&(a.CornMult(ab[e],h,this.preMoveCubes[b]),a.EdgeMult(ab[e],
h,this.preMoveCubes[b]),this.preMoves[this.maxPreMoves-b]=e,0==this.phase1PreMoves(b-1,e,this.preMoveCubes[b])))return 0;return 1};b.prototype.search=function(){for(this.length1=this.isRec?this.length1:0;this.length1<this.sol;this.length1++)for(this.urfIdx=this.isRec?this.urfIdx:0;6>this.urfIdx;this.urfIdx++)if(0==(this.conjMask&1<<this.urfIdx)&&(this.firstFilter=this.firstFilters[this.urfIdx],this.lastFilter=this.lastFilters[this.urfIdx],0==this.phase1PreMoves(this.maxPreMoves,-30,this.urfCubieCube[this.urfIdx],
0)))return null==this.moveSol?"Error 8":this.moveSol;return null==this.moveSol?"Error 7":this.moveSol};b.prototype.initPhase2Pre=function(){this.isRec=!1;if(this.probe>=(null==this.moveSol?this.probeMax:this.probeMin))return 0;++this.probe;for(var b=this.valid1;b<this.depth1;b++)a.CornMult(this.phase1Cubie[b],ab[this.move[b]],this.phase1Cubie[b+1]),a.EdgeMult(this.phase1Cubie[b],ab[this.move[b]],this.phase1Cubie[b+1]);this.valid1=this.depth1;b=this.initPhase2(this.phase1Cubie[this.depth1]);if(0==
b||0==this.preMoveLen||2==b)return b;b=3*~~(this.preMoves[this.preMoveLen-1]/3)+1;a.CornMult(ab[b],this.phase1Cubie[this.depth1],this.phase1Cubie[this.depth1+1]);a.EdgeMult(ab[b],this.phase1Cubie[this.depth1],this.phase1Cubie[this.depth1+1]);this.preMoves[this.preMoveLen-1]+=2-this.preMoves[this.preMoveLen-1]%3*2;b=this.initPhase2(this.phase1Cubie[this.depth1+1]);this.preMoves[this.preMoveLen-1]+=2-this.preMoves[this.preMoveLen-1]%3*2;return b};b.prototype.initPhase2=function(a){var b=a.getCPermSym(),
h=b&15;b>>=4;var r=a.getEPermSym(),e=r&15;r>>=4;a=a.getMPerm();var f=Math.max(c(Xb,Ob,140*r+Vb[Nb[b]&255][ob[e][h]]),c(Sb,Tb,24*b+Hb[a][h])),n=Math.min(13,this.sol-this.length1);if(f>=n)return f>n?2:1;var Oa;for(Oa=n-1;Oa>=f;Oa--){var x=this.phase2(r,e,b,h,a,Oa,this.depth1,10);if(0>x)break;Oa-=x;this.moveSol=[];for(x=0;x<this.depth1+Oa;x++)this.appendSolMove(this.move[x]);for(x=this.preMoveLen-1;0<=x;x--)this.appendSolMove(this.preMoves[x]);this.sol=this.moveSol.length;this.moveSol=this.solutionToString()}return Oa!=
n-1?this.probe>=this.probeMin?0:1:1};b.prototype.phase1=function(a,b,c){if(b==this.depth1-1&&0!=(this.firstFilter>>c&1))return 1;if(0==a.prun&&5>b){if(this.allowShorter||0==b){this.depth1-=b;var h=this.initPhase2Pre();this.depth1+=b;return h}return 1}for(var r=0;18>r;r+=3)if(r!=c&&r!=c-9)for(var e=0;3>e;e++)if(h=r+e,!this.isRec||h==this.move[this.depth1-b]){var f=this.nodeUD[b].doMovePrun(a,h,!0);if(f>b)break;else if(f==b)continue;f=this.nodeUD[b].doMovePrunConj(a,h);if(f>b)break;else if(f==b)continue;
this.move[this.depth1-b]=h;this.valid1=Math.min(this.valid1,this.depth1-b);h=this.phase1(this.nodeUD[b],b-1,r);if(0==h)return 0;if(2==h)break}return 1};b.prototype.appendSolMove=function(a){if(0==this.moveSol.length)this.moveSol.push(a);else{var b=~~(a/3),c=~~(this.moveSol[this.moveSol.length-1]/3);b==c?(a=(a%3+this.moveSol[this.moveSol.length-1]%3+1)%4,3==a?this.moveSol.pop():this.moveSol[this.moveSol.length-1]=3*b+a):1<this.moveSol.length&&b%3==c%3&&b==~~(this.moveSol[this.moveSol.length-2]/3)?
(a=(a%3+this.moveSol[this.moveSol.length-2]%3+1)%4,3==a?(this.moveSol[this.moveSol.length-2]=this.moveSol[this.moveSol.length-1],this.moveSol.pop()):this.moveSol[this.moveSol.length-2]=3*b+a):this.moveSol.push(a)}};b.prototype.phase2=function(a,b,h,r,f,n,Oa,x){if(0==this.depth1&&1==Oa&&0!=(this.firstFilter>>gb[x]&1))return-1;if(0==a&&0==h&&0==f&&(0<this.preMoveLen||0==(this.lastFilter>>gb[x]&1)))return n;x=ib[x];for(var Sa=0;10>Sa;Sa++)if(0!=(x>>Sa&1))Sa+=66>>Sa&3;else{var w=tb[f][Sa],Xa=Mb[h][kb[r][Sa]],
Va=hb[Xa&15][r];Xa>>=4;if(!(c(Sb,Tb,24*Xa+Hb[w][Va])>=n)){var Na=Bb[a][kb[b][Sa]],bb=hb[Na&15][b];Na>>=4;if(!(c(Xb,Ob,140*Na+Vb[Nb[Xa]&255][ob[bb][Va]])>=n)){var y=e(Na,bb,!1),Ua=e(Xa,Va,!0);if(!(c(Xb,Ob,140*(y>>4)+Vb[Nb[Ua>>4]&255][ob[y&15][Ua&15]])>=n)&&(w=this.phase2(Na,bb,Xa,Va,w,n-1,Oa+1,Sa),0<=w))return this.move[Oa]=gb[Sa],w}}}return-1};b.prototype.solutionToString=function(){var a="",b=0!=(this.verbose&2)?(this.urfIdx+3)%6:this.urfIdx;if(3>b)for(var c=0;c<this.moveSol.length;++c)a+=lb[Wa[b][this.moveSol[c]]]+
" ";else for(c=this.moveSol.length-1;0<=c;--c)a+=lb[Wa[b][this.moveSol[c]]]+" ";return a};var ab=[],nb=[],hb=[],ob=[],db=[],kb=[],rb=[],pb=[],cb=[],zb=[],vb=[],wb=[],yb=[],xb=[],Db=[],qb=[],Ab=[],Nb=[],Qb=[],Lb=[],Pb=[],Fb=[],ub=[],Gb=[],Cb=[],sb=[],Mb=[],Bb=[],tb=[],Hb=[],Rb=[],Vb=[],Tb=[],Ob=[],Jb=15,Kb=15,Wb=15,Sb=15,Xb=15;for(eb=0;18>eb;eb++)ab[eb]=new a;ab[0].initCoord(15120,0,119750400,0);ab[3].initCoord(21021,1494,323403417,0);ab[6].initCoord(8064,1236,29441808,550);ab[9].initCoord(9,0,5880,
0);ab[12].initCoord(1230,412,2949660,0);ab[15].initCoord(224,137,328552,137);for(eb=0;18>eb;eb+=3)for(Ya=0;2>Ya;Ya++)a.EdgeMult(ab[eb+Ya],ab[eb],ab[eb+Ya+1]),a.CornMult(ab[eb+Ya],ab[eb],ab[eb+Ya+1]);a.urf1=(new a).initCoord(2531,1373,67026819,1367);a.urf2=(new a).initCoord(2089,1906,322752913,2040);var Ib=-1;return{Search:b,solve:function(a){return(new b).solution(a)},randomCube:function(){var b=~~(2048*Math.random()),c=~~(2187*Math.random());do{var h=~~(Math.random()*fb[12]);var r=~~(Math.random()*
fb[8])}while(x(r,8)!=x(h,12));return(new a).initCoord(r,c,h,b).toFaceCube()},initFull:function(){Sa=0;Xa()}}}();"undefined"!==typeof module&&"undefined"!==typeof module.exports&&(module.exports=min2phase);var cubeutil=function(){function b(a){for(var b={},c=0;c<a.length;c++){var h=a[c];"-"!=h&&(b[h]=b[h]||[],b[h].push(c))}a=[];for(h in b)1<b[h].length&&a.push(b[h]);return a}function Pa(a,b){var c=Wa[a[1]],h=a[0];b=b||ib;for(var r=0;r<b.length;r++)for(var e=b[r],f=h[c[e[0]]],n=1;n<e.length;n++)if(h[c[e[n]]]!=f)return 1;return 0}function z(a){return Pa(a,Qa)?9:Pa(a,Ra)?4+Pa(a,x)+Pa(a,Ua)+Pa(a,Ta)+Pa(a,Za):Pa(a,Sa)?4:Pa(a,Xa)?3:Pa(a,Oa)?2:Pa(a)?1:0}function w(a){return Pa(a,Qa)?7:Pa(a,Ra)?2+Pa(a,x)+Pa(a,
Ua)+Pa(a,Ta)+Pa(a,Za):Pa(a,Xa)?2:Pa(a)?1:0}function c(a){return Pa(a,Qa)?4:Pa(a,Ra)?3:Pa(a,Xa)?2:Pa(a)?1:0}function e(a){return Pa(a,Ra)?2:Pa(a)?1:0}function a(a){return Pa(a,fb)?4:Pa(a,lb)?3:Pa(a,gb)?2:Pa(a)?1:0}function Na(a,b){return a in eb?Pa(b,eb[a][1]):Pa(b)}function f(a,b,c){for(var h=99,r=0;r<c;r++)h=Math.min(h,b([a,r]));return h}function $a(a){var b=[0,1,2,3,4,5];return $.map(a,function(a,c){function h(a,b){0==r.length||~~(r[r.length-1]/3)!=a?r.push(3*a+b):(b=(b+r[r.length-1]%3+1)%4,3==
b?r.pop():r[r.length-1]=3*a+b)}for(var r=[],e=0;e<a.length;e++){var f=b.indexOf("URFDLB".indexOf(a[e][0][0])),n=" 2'".indexOf(a[e][0][1])%3;if(e==a.length-1||100<a[e+1][1]-a[e][1])h(f,n);else{var Oa=b.indexOf("URFDLB".indexOf(a[e+1][0][0])),x=" 2'".indexOf(a[e+1][0][1])%3;if(f!=Oa&&f%3==Oa%3&&2==n+x){Oa=f%3;f=(n-1)*[1,1,-1,-1,-1,1][f]+1;h(Oa+6,f);for(n=0;n<f+1;n++){x=[];for(var Sa=0;6>Sa;Sa++)x[Sa]=b[Ya[Oa][Sa]];b=x}e++}else h(f,n)}}return[[$.map(r,function(a){return"URFDLBEMS".charAt(~~(a/3))+" 2'".charAt(a%
3)}).join(""),r.length]]})}function n(a,b,c){for(var h=[],r=0;24>r;r++)0==Pa([a,r],b)&&h.push(r);for(b=0;b<c.length;b++)for(r=0;r<h.length;r++)if(0==Pa([a,h[r]],c[b]))return b;return-1}function y(a){switch(a){case "cfop":return["pll","oll","f2l","cross"];case "fp":return["op","cf"];case "cf4op":return"pll oll f2l-4 f2l-3 f2l-2 f2l-1 cross".split(" ");case "roux":return["l6e","cmll","sb","fb"];case "cf4o2p2":return"pll cpll oll eoll f2l-4 f2l-3 f2l-2 f2l-1 cross".split(" ");case "n":return["solve"]}}
var Qa=b("----U--------R--R-----F--F--D-DDD-D-----L--L-----B--B-"),x=b("----U-------RR-RR-----FF-FF-DDDDD-D-----L--L-----B--B-"),Ua=b("----U--------R--R----FF-FF-DD-DDD-D-----LL-LL----B--B-"),Ta=b("----U--------RR-RR----F--F--D-DDD-DD----L--L----BB-BB-"),Za=b("----U--------R--R-----F--F--D-DDDDD----LL-LL-----BB-BB"),Ra=b("----U-------RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB"),Xa=b("UUUUUUUUU---RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB"),Sa=b("-U-UUU-U----RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB"),
Oa=b("UUUUUUUUUr-rRRRRRRf-fFFFFFFDDDDDDDDDl-lLLLLLLb-bBBBBBB"),fb=b("---------------------F--F--D--D--D-----LLLLLL-----B--B"),lb=b("------------RRRRRR---F-FF-FD-DD-DD-D---LLLLLL---B-BB-B"),gb=b("U-U---U-Ur-rRRRRRRf-fF-FF-FD-DD-DD-Dl-lLLLLLLb-bB-BB-B"),mb=b("---------------R-R------F-FD-D---D-D------L-L------B-B"),ib=b(mathlib.SOLVED_FACELET),Wa=function(){function a(a,b){for(var c=[],h=0;54>h;h++)c[b[h]]=a[h];return c}for(var b=[2,5,8,1,4,7,0,3,6,18,19,20,21,22,23,24,25,26,36,37,38,39,40,41,42,43,
44,33,30,27,34,31,28,35,32,29,45,46,47,48,49,50,51,52,53,9,10,11,12,13,14,15,16,17],c=[53,52,51,50,49,48,47,46,45,11,14,17,10,13,16,9,12,15,0,1,2,3,4,5,6,7,8,18,19,20,21,22,23,24,25,26,42,39,36,43,40,37,44,41,38,35,34,33,32,31,30,29,28,27],h=[11,14,17,10,13,16,9,12,15,29,32,35,28,31,34,27,30,33,20,23,26,19,22,25,18,21,24,38,41,44,37,40,43,36,39,42,2,5,8,1,4,7,0,3,6,51,48,45,52,49,46,53,50,47],r=[],e=[],f=0;54>f;f++)e[f]=f;for(f=0;24>f;f++)r[f]=e.slice(),e=a(e,f&1?c:h),5==f%6&&(e=a(e,h),e=a(e,h)),
11==f%12&&(e=a(e,b),e=a(e,b));return r}(),eb={cross:[6,Qa],f2l:[6,Ra],oll:[6,Xa],eoll:[6,Sa],cpll:[6,Oa],fb:[24,fb],sb:[24,lb],cmll:[24,gb]},Ya=[[0,2,4,3,5,1],[5,1,0,2,4,3],[4,0,2,1,3,5]],r=function(){var a=[];return function(c){if(0==a.length)for(var h=0;22>h;h++){var r=21==h?"UUUUUUUUUFFFRRRBBBLLL":scramble_333.getPLLImage(h)[0];a.push(b("012345678cdeRRRRRR9abFFFFFFDDDDDDDDDijkLLLLLLfghBBBBBB".replace(/[0-9a-z]/g,function(a){return r[parseInt(a,36)].toLowerCase()})))}return n(c,Xa,a)}}(),h=function(){var a=
[];return function(c){if(0==a.length)for(var h=0;58>h;h++){var r=scramble_333.getOLLImage(h)[0].replace(/G/g,"-");a.push(b("012345678cdeRRRRRR9abFFFFFFDDDDDDDDDijkLLLLLLfghBBBBBB".replace(/[0-9a-z]/g,function(a){return r[parseInt(a,36)].toLowerCase()})))}return n(c,Ra,a)}}(),Va=function(){var a=[];return function(c){if(0==a.length)for(var h=0;40>h;h++){var r=scramble_222.getEGLLImage(h)[0].replace(/G/g,"-");a.push(b("0-1---2-36-7---R-R4-5---F-FD-D---D-Da-b---L-L8-9---B-B".replace(/[0-9a-z]/g,function(a){return r[parseInt(a,
36)].toLowerCase()})))}return n(c,mb,a)}}();return{getProgress:function(b,h){switch(h){case "cfop":return f(b,c,6);case "fp":return f(b,e,6);case "cf4op":return f(b,w,6);case "roux":return f(b,a,24);case "cf4o2p2":return f(b,z,6);case "n":return f(b,Pa,1)}},getStepNames:y,getStepCount:function(a){return(a=y(a))?a.length:0},getStepProgress:function(a,b,c){c||(c=a in eb?eb[a][0]:1);return f(b,Na.bind(null,a),c)},getPrettyMoves:$a,getPrettyReconstruction:function(a,b){for(var c="",h=$a(a),r=y(b).reverse(),
e=0,f=0;f<h.length;f++)e+=h[f][1],c+=h[f][0].replace(/ /g,"")+(r[f]?" // "+r[f]+" "+h[f][1]+" move(s)":"")+"\n";return{prettySolve:c,totalMoves:e}},moveSeq2str:function(a){return $.map(a,function(a){return a[0].trim()+"@"+a[1]}).join(" ")},getScrambledState:function(a,b){var c=a[1];if(tools.isPuzzle("333",a)){c=kernel.parseScramble(c,"URFDLB");for(var h=new mathlib.CubieCube,r=new mathlib.CubieCube,e=h.ori=0;e<c.length;e++){var f=c[e][0],n=c[e][2],Oa=3*f+n-1;if(!(0>Oa||18<=Oa)){if(2==c[e][1]){Oa=
[3,15,17,1,11,23][f];for(var x=0;x<n;x++)h.ori=mathlib.CubieCube.rotMult[Oa][h.ori];Oa=mathlib.CubieCube.rotMulM[h.ori][(f+3)%6*3+n-1]}mathlib.CubieCube.EdgeMult(h,mathlib.CubieCube.moveCube[Oa],r);mathlib.CubieCube.CornMult(h,mathlib.CubieCube.moveCube[Oa],r);h.init(r.ca,r.ea)}}return b?h.toFaceCube():h}},identStep:function(a,b){switch(a){case "PLL":return r(b);case "OLL":return h(b);case "C2CLL":return Va(b)}},getIdentData:function(a){var b={PLL:[r,scramble_333.getPLLImage,0,21,0],OLL:[h,scramble_333.getOLLImage,
1,58,1],CLL:[Va,scramble_222.getEGLLImage,0,40,1]};return a?b[a]:b}}}();var puzzleFactory=execMain(function(){function b(a,b){this.twistyScene=a;this.twisty=b}function Pa(Na,f,$a,n){if(void 0==window.twistyjs)e=Pa.bind(null,Na,f,$a,n),!w&&document.createElement("canvas").getContext?(w=!0,$.getScript("js/twisty.js",function(){e&&e()})):n(void 0,!0);else{for(var y=/^q[2l]?$/.exec(Na.style)?"q":"v",Qa=null,x=0;x<a.length;x++)if(a[x][0]==$a){Qa=a[x];break}if(x=!Qa||Qa[1]!=y)Qa?Qa[1]=y:(Qa=[$a,y],a.push(Qa)),c="q"==y?new twistyjs.qcube.TwistyScene:new twistyjs.TwistyScene,
Qa[2]=new b(c,null),$a.empty().append(Qa[2].getDomElement()),Qa[2].addMoveListener(f);f=Na.puzzle;f.startsWith("cube")?(Na.type="cube",Na.faceColors=z(kernel.getProp("colcube"),[3,4,5,0,1,2]),Na.dimension=~~f.slice(4)||3,Na.stickerWidth=1.7):"skb"==f?(Na.type="skewb",Na.faceColors=z(kernel.getProp("colskb"),[0,5,4,2,1,3])):"mgm"==f?(Na.type="mgm",Na.faceColors=z(kernel.getProp("colmgm"),[0,2,1,5,4,3,11,9,8,7,6,10])):"pyr"==f?(Na.type="pyr",Na.faceColors=z(kernel.getProp("colpyr"),[3,1,2,0])):"sq1"==
f?(Na.type="sq1",Na.faceColors=z(kernel.getProp("colsq1"),[0,5,4,2,1,3])):"clk"==f&&(Na.type="clk",Na.faceColors=z(kernel.getProp("colclk"),[1,2,0,3,4]));Na.scale=.9;Qa[2].twistyScene.initializeTwisty(Na);Qa[2].twisty=Qa[2].twistyScene.getTwisty();Qa[2].resize();n(Qa[2],x)}}function z(a,b){var c=[];a=(a||"").match(/#[0-9a-fA-F]{3}/g)||[];for(var e=0;e<a.length;e++)c.push(~~kernel.ui.nearColor(a[b[e]],0,!0).replace("#","0x"));return c}var w=!1,c;b.prototype.keydown=function(a){return this.twistyScene.keydown(a)};
b.prototype.resize=function(){return this.twistyScene.resize()};b.prototype.addMoves=function(a){return this.twistyScene.addMoves(a)};b.prototype.applyMoves=function(a){return this.twistyScene.applyMoves(a)};b.prototype.addMoveListener=function(a){return this.twistyScene.addMoveListener(a)};b.prototype.getDomElement=function(){return this.twistyScene.getDomElement()};b.prototype.isRotation=function(a){return this.twisty.isInspectionLegalMove(this.twisty,a)};b.prototype.move2str=function(a){return this.twisty.move2str(a)};
b.prototype.moveInv=function(a){return this.twisty.moveInv(a)};b.prototype.toggleColorVisible=function(a){return this.twisty.toggleColorVisible(this.twisty,a)};b.prototype.isSolved=function(a){return this.twisty.isSolved(this.twisty,a)};b.prototype.moveCnt=function(a){return this.twisty.moveCnt(a)};b.prototype.parseScramble=function(a,b){return this.twisty.parseScramble(a,b)};var e=null,a=[];return{init:Pa}});var gripRecons=execBoth(function(){function b(){for(var b=[[2,0,"R ",100,3,null],[0,1,"R ",100,3,null],[2,1,"R2",150,4,null],[1,2,"R2",150,4,null],[1,0,"R'",100,5,null],[0,2,"R'",100,5,null],[2,2,"F ",150,6,null],[2,2,"F'",200,8,null],[0,0,"M ",300,21,11],[0,0,"M2",300,22,6],[0,0,"M'",200,23,15],[1,4,"x'",30,null,11],[2,3,"x ",30,null,15],[0,0,"y ",150,null,3],[0,0,"y'",150,null,1],[1,1,"y ",100,null,3],[1,1,"y'",100,null,1],[2,2,"y ",100,null,3],[2,2,"y'",100,null,1],[0,1,"G01",80,null,null],[1,
0,"G10",80,null,null],[0,2,"G02",80,null,null],[2,0,"G20",80,null,null],[1,2,"G12",120,null,null],[2,1,"G21",120,null,null]],e=0;3>e;e++){var a=[0,3,4][e];b.push([a,a,"D ",300,9,null]);b.push([a,a,"D2",250,10,null]);b.push([a,a,"D'",150,11,null]);b.push([a,a,"U ",100,0,null]);b.push([a,a,"U2",150,1,null]);b.push([a,a,"U'",200,2,null])}var w={U:"U",R:"L",D:"D",F:"F",E:"E",S:"S",y:"y"},f={" ":"'",2:"2","'":" "},z={0:0,1:3,2:4,3:1,4:2};a=[/^([URFDLBESyz])([ 2'])|G(\d)(\d)$/,function(a,b,c,e,n){return"G"==
a[0]?"G"+z[~~e]+z[~~n]:b in w?w[b]+f[c]:a}];var n=function(a){return null==a||7==~~(a/3)?a:3*[0,4,2,3,1,5,6,7,8][~~(a/3)]+(2-a%3)},y=function(a){return null==a?a:{3:1,1:3}[a]||a},Qa=b.length;for(e=0;e<Qa;e++){var x=b[e];b.push([z[x[0]],z[x[1]],x[2].replace(a[0],a[1]),x[3]+30,n(x[4]),y(x[5])])}return b}function Pa(b,e,a){var c=new w,f={};c.push([0,b]);f[b]=[0,b,null];for(b=0;;){var z=c.pop();if(!z)break;else if(z[1]==a)break;else if(z[0]>f[z[1]][0])continue;b++;for(var n=f[z[1]][0],y=e(z[1]),Qa=0;Qa<
y.length;Qa++){var x=y[Qa];if(!(x[1]in f)||n+x[0]<f[x[1]][0])f[x[1]]=[n+x[0],z[1],x[2]],c.push([n+x[0],x[1]])}}return f}function z(c,e,a){for(var w=b(),f=Pa(-1,function(b){var f=[];if(-1==b){for(b=0;24>b;b++)if(!(e>>b&1))for(var n=0;5>n;n++)f.push([0,b<<3|n,[0,0,mathlib.CubieCube.rot2str[b]]]);return f}n=b>>8;var y=b>>3&31,Na=b&7;n==c.length&&(a>>y&1||f.push([0,-2,[0,0,"Gend ori="+y+" hand="+Na]]));for(b=0;b<w.length;b++){var Ra=w[b];if(Ra[0]==Na){var Xa=Ra[1],Sa=y,Oa=n;if(null!=Ra[4]){if(mathlib.CubieCube.rotMulM[y][Ra[4]%
18]+(18<=Ra[4]?18:0)!=c[n])continue;Oa++}null!=Ra[5]&&(Sa=mathlib.CubieCube.rotMult[Ra[5]][Sa]);f.push([Ra[3],Oa<<8|Sa<<3|Xa,Ra])}}return f},-2),z=-2,n=[];-1!=z;){var y=f[z];if(!y)break;y.splice(2,0,z);n.push(y);z=y[1]}n.reverse();return n}var w=function(){function b(){this.arr=[]}b.prototype.pop=function(){var b=this.arr,a=b.pop();if(!b.length)return a;for(var c=b[0],f=0;;){var w=2*f+1;w+1<b.length&&b[w][0]>b[w+1][0]&&w++;if(w>=b.length||a[0]<=b[w][0])break;b[f]=b[w];f=w}b[f]=a;return c};b.prototype.push=
function(b){for(var a=this.arr,c=a.length,e;0<=(e=c-1>>1)&&b[0]<a[e][0];)a[c]=a[e],c=e;a[c]=b};return b}();return{getBestAlgorithmStr:function(b,e,a){var c=new mathlib.CubieCube;c.ori=0;b=b.split(/ +/);for(var f=[],w=0;w<b.length;w++){var n=c.selfMoveStr(b[w]);void 0!=n&&f.push(n)}return z(f,e,a)},getBestAlgorithm:z,getPrettyReconstruction:function(b,e){var a="",c=[],f=new mathlib.CubieCube;f.ori=0;var w=[];b=cubeutil.getPrettyMoves(b);for(var n=0;n<b.length;n++){for(var y=b[n][0],Qa=0;Qa<y.length;Qa+=
2){var x=f.selfMoveStr(y.slice(Qa,Qa+2));void 0!=x&&c.push(x)}w.push(c.length)}f=z(c);var Ua=y=0;Qa=cubeutil.getStepNames(e).reverse();for(n=0;n<f.length;n++)for(x=f[n][2];x>>8>=w[y];){Ua=f.slice(Ua,n+1);for(var Ta=[],Za=0;Za<Ua.length;Za++){var Ra=Ua[Za];"G"!=Ra[3][2][0]&&Ta.push(Ra[3][2])}Ua=Ta.join(" ").replace(/ +/g," ");a+=Ua+(Qa[y]?" // "+Qa[y]+" "+(w[y]-(w[y-1]||0))+" move(s)":"")+"\n";Ua=n+1;y++}return{prettySolve:a,totalMoves:c.length}},updateReconsOri:function(b){var c=b.split(" "),a=[];
b=[];for(var w=new mathlib.CubieCube,f=w.ori=0;f<c.length;f++){var $a=/^(.*)@(\d+)$/.exec(c[f]);if($a){var n=w.selfMoveStr($a[1]);void 0!=n&&(a.push(n),b.push(~~$a[2]))}}c=z(a);a=[];w=[];var y=0;for(f=$a=0;f<c.length;f++){var Qa=c[f];if("G"!=Qa[3][2][0]){var x=Qa[2]>>8;if(x==y)for(Qa=Qa[3][2].split(" "),n=0;n<Qa.length;n++)Qa[n]&&w.push(Qa[n]);else{var Ua=b[x-1];for(n=0;n<w.length;n++)y=$a+Math.floor((Ua-$a)*(n+1)/(w.length+1)),a.push(w[n].trim()+"@"+y);a.push(Qa[3][2].trim()+"@"+Ua);y=x;$a=Ua;w=
[]}}}return a.join(" ").replace(/[EMS]/g,function(a){return["2-2Dw","2-2Lw","2-2Fw"]["EMS".indexOf(a)]})}}});var JSON;JSON||(JSON={});
(function(){function b(a){return 10>a?"0"+a:a}function Pa(a){c.lastIndex=0;return c.test(a)?'"'+a.replace(c,function(a){var b=Na[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function z(b,c){var n,w,x=e,Na=c[b];Na&&"object"===typeof Na&&"function"===typeof Na.toJSON&&(Na=Na.toJSON(b));"function"===typeof f&&(Na=f.call(c,b,Na));switch(typeof Na){case "string":return Pa(Na);case "number":return isFinite(Na)?""+Na:"null";case "boolean":case "null":return""+
Na;case "object":if(!Na)return"null";e+=a;var Ta=[];if("[object Array]"===Object.prototype.toString.apply(Na)){var Za=Na.length;for(n=0;n<Za;n+=1)Ta[n]=z(n,Na)||"null";var Ra=0===Ta.length?"[]":e?"[\n"+e+Ta.join(",\n"+e)+"\n"+x+"]":"["+Ta.join(",")+"]";e=x;return Ra}if(f&&"object"===typeof f)for(Za=f.length,n=0;n<Za;n+=1)"string"===typeof f[n]&&(w=f[n],(Ra=z(w,Na))&&Ta.push(Pa(w)+(e?": ":":")+Ra));else for(w in Na)Object.prototype.hasOwnProperty.call(Na,w)&&(Ra=z(w,Na))&&Ta.push(Pa(w)+(e?": ":":")+
Ra);Ra=0===Ta.length?"{}":e?"{\n"+e+Ta.join(",\n"+e)+"\n"+x+"}":"{"+Ta.join(",")+"}";e=x;return Ra}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var w=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
c=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,a,Na={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},f;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,w){var n;a=e="";if("number"===typeof w)for(n=0;n<w;n+=1)a+=" ";else"string"===typeof w&&(a=w);if((f=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return z("",{"":b})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,e){var f,n,w=a[e];if(w&&"object"===typeof w)for(f in w)Object.prototype.hasOwnProperty.call(w,f)&&(n=c(w,f),void 0!==n?w[f]=n:delete w[f]);return b.call(a,e,w)}var e;a=""+a;w.lastIndex=0;w.test(a)&&(a=a.replace(w,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof b?c({"":e},""):e;throw new SyntaxError("JSON.parse");})})();var kernel=execMain(function(){function b(a,b){DEBUG&&console.log("[signal]",a,b);if(void 0!=f[a])for(var c in f[a])if(void 0===f[a][c][1]||f[a][c][1].exec(b[0]))f[a][c][0](a,b)}function Pa(a,b,c,e){void 0==f[b]&&(f[b]={});f[b][a]=[c,e]}function z(a,b){if(0>a)return"DNF";var c=n("useMilli");a=Math.floor(a/(c?1:10));var e=a%(c?1E3:100);a=Math.floor(a/(c?1E3:100));var f=n("timeFormat"),w=0,x=0;"h"==f?(f=a%60,w=Math.floor(a/60)%60,x=Math.floor(a/3600)):"m"==f?(f=a%60,w=Math.floor(a/60)):f=a;var Sa=(b=
b&&n("smallADP"))?["</span>"]:[];Sa.push(e);10>e&&Sa.push("0");100>e&&c&&Sa.push("0");Sa.push(f+"."+(b?'<span style="font-size:0.75em;">':""));10>f&&0<w+x&&Sa.push("0");0<w+x&&Sa.push(w+":");10>w&&0<x&&Sa.push("0");0<x&&Sa.push(x+":");return Sa.reverse().join("")}function w(){for(var a=n(tools.isCurTrainScramble()?"preScrT":"preScr","").split(" "),b=new mathlib.CubieCube,c=0;c<a.length;c++)b.selfMoveStr(a[c]);return b.ori||0}function c(a){if(0>=a)return a;var b=n("useMilli")?1:10;return Math.round(a/
b)*b}function e(){timer.refocus()}$.ajaxSetup({cache:!0});var a=$("<div />").css("visibility","hidden"),Na=$('<div id="wndctn" />'),f={},$a=function(){function a(){var a=$(this).data("module");c(a);e(a)}function c(a){if(!bb[a][0].hasClass("enable")){for(var b in bb)bb[b][0].removeClass("enable");bb[a][0].addClass("enable");rb=a}}function e(a){setTimeout(function(){Qa.scrollTop(a?Qa.scrollTop()+bb[a][1].position().top-3:pb)},0)}function f(){pb=Qa.scrollTop();var a="kernel",b;for(b in bb)50<bb[b][1].position().top||
(a=b);c(a)}function n(a){a=$(this);var b=a.prop("name");if(a.is(".opthelp"))" [?] "==a.html()?a.html("<br> [?] "+$('strong[data="opt_'+a.attr("data")+'"]').parent().html().split("</strong>. ")[1]):a.html(" [?] ");else if(a.is("select"))z(b,a.val());else switch(a.prop("type")){case "checkbox":z(b,a.prop("checked"));break;case "color":if(a.attr("data")){var c=4*~~a.attr("data")-4,h=y(b);z(b,[h.slice(0,c),x.nearColor(a.val()),h.slice(c+4)].join(""))}else z(b,a.val());break;case "text":case "button":for(c in Va)if(b in
Va[c]){c=Va[c][b];h=y(b);switch(a.val()){case "+":h=Math.min(h+1,c[3][2]);break;case "-":h=Math.max(h-1,c[3][1]);break;default:a.val().match(/^\d+$/)&&(h=+a.val().match(/^0*(.+)$/)[1],h=Math.max(Math.min(h,c[3][2]),c[3][1]))}c[0].val(h);z(b,h);break}}}function w(){bb={};db.empty();Za.empty();Qa.unbind("scroll").scroll(f);for(var b in MODULE_NAMES){0===rb&&(rb=b);var c=bb[b]=[$("<div>"),$("<tr>")];c[0].html('<span class="icon" style="font-size:1em;">'+cb[b]+"</span><span>"+MODULE_NAMES[b]+"</span>").addClass("tab").data("module",
b).click(a).appendTo(db);c[1].append($("<th>").html('<span class="icon">'+cb[b]+"</span> "+MODULE_NAMES[b].replace(/-?<br>-?/g,"")),$('<th class="sr">').html(PROPERTY_SR),$('<th class="sr">').html('<span class="icon"></span>'));Za.append(c[1]);for(var h in Va[b]){c=Va[b][h];var r=y(h),e=c[1],w=y("sr_"+h),Oa=$('<td class="sr">');c[4]&1&&Oa.append($('<input type="checkbox" name="sr_'+h+'"'+(w?" checked":"")+">").click(n));w=$("<td colspan=2>");if(0>e)if($.urlParam("debug"))e=~e;else continue;if(0==
e)c[0]=$('<input type="checkbox" name="'+h+'">').prop("checked",r).click(n),w.append($("<label>").append(c[0],c[2]));else if(1==e){c[0]=$('<select name="'+h+'">');var Sa=c[3][1],Xa=c[3][2];for(e=0;e<Sa.length;e++)c[0].append($("<option />").val(Sa[e]).html(Xa[e]));c[0].val(r);c[0].change(n);w.append(c[2],": ",c[0])}else if(2==e)c[0]=$('<input type="text" maxlength="4" name="'+h+'">').val(r).change(n),r=$('<input type="button" style="width: 1.5em;" value="+" name="'+h+'">').click(n),e=$('<input type="button" style="width: 1.5em;" value="-" name="'+
h+'">').click(n),w.append(c[2]+"("+c[3][1]+"~"+c[3][2]+")",$("<span>").css("white-space","nowrap").append(e,c[0],r));else if(3==e)c[0]=$('<input type="color" name="'+h+'">').val(r).change(n),w.append(c[2],": ",c[0]);else if(4==e){Sa=r.match(/#[0-9a-fA-F]{3}/g)||[];c[0]=$('<input type="text" name="'+h+'" style="display:none">').val(r);r=[];for(e=0;e<Sa.length;e++)r.push($('<input type="color" name="'+h+'" data="'+(e+1)+'" class="mulcolor">').val(x.nearColor(Sa[e],0,!0)).change(n));w.append(c[2],": ",
c[0],r)}else 5==e&&($.urlParam("debug")?(c[0]=$('<input type="text" name="'+h+'" readonly>').val(r),w.append(c[2]+" ("+h+"): ",c[0])):(c[0]=$('<input type="text" name="'+h+'" style="display:none">').val(r),w.append(c[2],c[0])));0<$('strong[data="opt_'+h+'"]').length&&w.append($('<span class="click opthelp" data="'+h+'"/>').html(" [?] ").click(n));Za.append($("<tr>").append(w,Oa))}}Za.append($('<tr style="height: 10em;">'));bb[rb][0].click()}function Na(){Ta&&(w(),Ta=!1);$(".opthelp").html(" [?] ");
e();x.showDialog([$a,$.noop,void 0,$.noop,[RESET_LANG,function(){for(var a in h){var c=h[a];void 0===c||y(a)===c||a.startsWith("session")||(delete r[a],b("property",[a,c,"reset"]))}w();return!1}],[BUTTON_EXPORT.replace(/-?<br>-?/g,""),exportFunc.exportProperties]],"option",BUTTON_OPTIONS.replace(/-?<br>-?/g,""),function(){kb.find('select[name="lang"]').focus().blur();e()})}function y(a,c){void 0!=c&&void 0==h[a]&&(h[a]=c,b("property",[a,y(a),"set"]));r[a]===h[a]&&delete r[a];return a in r?r[a]:h[a]}
function z(a,c,h){for(var e in Va)if(a in Va[e]&&void 0!==Va[e][a][0]&&Va[e][a][0].val()!=c){Va[e][a][0].val(c);break}y(a)!==c&&(r[a]=c,b("property",[a,y(a),h||"modify"]))}function Ra(){localStorage.properties=JSON.stringify(r)}function Ua(){var a=localStorage.properties;void 0!=a&&""!=a&&(r=JSON.parse(a))}var r={},h={},Va={},bb={},Ta=!0,Qa=$('<div class="noScrollBar">'),Za=$('<table class="opttable">'),$a=$('<table class="options" />'),db=$("<td />"),kb=$("<td />").addClass("tabValue");$a.append($("<tr />").append(db,
kb.append(Qa.append(Za))));var rb=0,pb=0,cb={kernel:"",ui:"",color:"",timer:"",scramble:"",stats:"",tools:"",vrc:""};$(function(){Ua();x.addButton("property",BUTTON_OPTIONS,Na,1);Pa("property","property",Ra)});return{get:y,set:z,reg:function(a,c,r,e,f,n){Ta=!0;void 0==Va[a]&&(Va[a]={});Va[a][c]=[void 0,r,e,f,n];h[c]=f[0];h["sr_"+c]=2==(n&2);b("property",[c,y(c),"set"])},getSProps:function(){var a={},b;for(b in r)0!=b.indexOf("sr_")&&y("sr_"+b,!1)&&(a[b]=y(b));return a},setSProps:function(a){for(var b in h)0!=
b.indexOf("sr_")&&y("sr_"+b,!1)&&(b in a?z(b,a[b],"session"):z(b,h[b],"session"))},load:Ua,reload:w}}(),n=$a.get,y=$a.set,Qa=$a.reg;$(function(){var a=LANG_CUR||"en-us";Qa("kernel","lang",1,"Language",[a,(LANG_SET+"|h").split("|").slice(1),(LANG_STR+"|help translation").split("|")]);y("lang",a);Qa("kernel","showad",0,PROPERTY_SHOWAD,[!0]);Pa("kernel","property",function(b,c){c[1]!=a&&"modify"==c[2]&&("h"==c[1]?confirm("Press OK to redirect to crowdin for translating cstimer")&&(window.location.href=
"https://crowdin.com/project/cstimer"):window.location.href="?lang="+c[1],y("lang",a))},/^lang$/);if($.urlParam("lang")){var b="lang="+$.urlParam("lang");document.cookie=b+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/";$.clearUrl("lang")}});var x=function(){function c(a,b,c,h){cb=cb||$("#leftbar");cb.children(".c"+h).click(c).find("span:first").html(b)}function f(){var a=$(this),c=a.data("module");db[c].button?(a.removeClass("enable"),kb&&db[c].auto||db[c].div.stop(!0,!0).fadeOut(200,function(a){return function(){b("button",
[a,!1])}}(c))):(a.addClass("enable"),b("button",[c,!0]),db[c].div.stop(!0,!0).fadeIn(200),kb&&db[c].auto&&db[c].div.hide());db[c].button=!db[c].button;y(c,db[c].button)}function w(){var a=$(this).attr("data");y(a,!n(a,!1))}function x(){if(document.fullscreenElement)document.exitFullscreen&&document.exitFullscreen();else{var a=$("body")[0];a.requestFullscreen&&a.requestFullscreen()}}function z(b,c,h,r){rb=!0;wb.removeClass().addClass("dialog").addClass("dialog"+c);yb.html(h);"option"==c?yb.prepend(Nb.unbind("click").click(x)):
"logo"==c&&yb.prepend(Qb.unbind("click").click(function(){location.reload(!0)}));xb.children().appendTo(a);b[0].appendTo(xb.empty());Db.empty();2>b.length?xb.css("bottom","0"):xb.css("bottom","2.5em");void 0!=b[1]&&Db.append(qb.unbind("click").click(function(){$.waitUser.call();b[1]&&b[1]();Ra()}));void 0!=b[2]&&Db.append(Ab.unbind("click").click(function(){$.waitUser.call();b[2]&&b[2]();Ra()}));pb.unbind("click");void 0!=b[3]&&pb.click(function(){$.waitUser.call();b[3]&&b[3]();Ra()});for(c=4;c<b.length;c++)Db.append($('<input type="button" class="buttonOK">').val(b[c][0]).unbind("click").click(function(a){return function(){$.waitUser.call();
a()&&Ra()}}(b[c][1])));wb.stop(!0,!0).fadeTo(100,.98,function(){b[0].focus();r&&r()});pb.stop(!0,!0).fadeTo(100,.25)}function Ra(){wb.stop(!0,!0).fadeOut(100,function(){rb||(xb.children().appendTo(a),wb.removeClass(),e())});pb.hide();rb=!1}function Ua(){if(!kb){kb=!0;Wa();for(var a in db)db[a].auto&&db[a].button&&db[a].div.stop(!0,!0).fadeOut(100);b("ashow",!1)}}function Ta(){if(kb){kb=!1;Wa();for(var a in db)db[a].auto&&db[a].button&&db[a].div.stop(!0,!0).fadeIn(100);b("ashow",!0)}}function Wa(a){var b=
!1,c;for(c in db)if(db[c].button){b=!0;break}b&&!kb||a||jQuery.fx.off?cb.stop(!0,!0).fadeTo(200,1):cb.stop(!0,!0).fadeTo(200,.01)}function Za(a){for(var b=0;7>b;b++)ub[b]=r(a.substr(4*b,4));y("col-font",r(ub[0],0,!0));y("col-back",r(ub[1],0,!0));y("col-board",r(ub[2],0,!0));y("col-button",r(ub[3],0,!0));y("col-link",r(ub[4],0,!0));y("col-logo",r(ub[5],0,!0));y("col-logoback",r(ub[6],0,!0));Ya()}function Ya(){for(var a="ns"==n("uidesign")||"mtns"==n("uidesign")?Pb[1]:Pb[0],b="#000"==r(ub[0])?-1:1,
c=0;c<Gb.length;c++)a=a.replace("?",r(ub[Gb[c]&15],(Gb[c]<<20>>24)*b));Lb[0].styleSheet?Lb[0].styleSheet.cssText=a:Lb[0].innerHTML=a}function r(a,b,c){var h,r;b=b||0;(r=/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/.exec(a))&&(h=[r[1]+r[1],r[2]+r[2],r[3]+r[3]]);(r=/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/.exec(a))&&(h=[r[1],r[2],r[3]]);for(a=0;3>a;a++)h[a]=parseInt(h[a],16),h[a]+=b,h[a]=Math.min(Math.max(h[a],0),255),h[a]=Math.round(h[a]/17).toString(16);return"#"+(c?h[0]+h[0]+h[1]+h[1]+
h[2]+h[2]:h[0]+h[1]+h[2])}function h(a){return(a=/^\s*((#[0-9a-fA-F]{3}){7})\s*$/.exec(a))?(Za(a[1]),!0):!1}function Va(){return ub.join("")}function bb(){"mt"==n("uidesign")||"mtns"==n("uidesign")?$("html").addClass("mtds"):$("html").removeClass("mtds")}function ab(){var a=$(window).width(),b=$(window).height(),c=n("view");(sb="m"==c?!0:"d"==c?!1:1.2>a/b)?$("html").addClass("m"):$("html").removeClass("m")}function nb(a,b){if("property"==a)switch(b[0]){case "color":if("u"!=b[1])if("i"==b[1]||"e"==
b[1]){var c=Va(),e=prompt(EXPORT_CODEPROMPT,c);e&&e!=c&&!h(e)&&alert(COLOR_FAIL);$a.set("color","u")}else Za(Fb["r"==b[1]?~~(Math.random()*Fb.length):b[1]-1]);break;case "font":"r"==b[1]?$("#container, #multiphase").css("font-family",["lcd","lcd2","lcd3","lcd4","lcd5"][~~(5*Math.random())]):$("#container, #multiphase").css("font-family",b[1]);break;case "col-font":case "col-back":case "col-board":case "col-button":case "col-link":case "col-logo":case "col-logoback":c=Cb.indexOf(b[0].substring(4,b[0].length));
e=b[1];e=r(e);ub[c]!=e&&(ub[c]=e,y("color","u"),Ya());break;case "zoom":$("html").removeClass("p70 p80 p90 p100 p110 p125 p150").addClass("p"+~~(100*b[1])),$(window).trigger("resize"),bb();case "view":ab();break;case "uidesign":bb();Ya();break;case "wndScr":hb("scramble","f"==b[1]);break;case "wndStat":hb("stats","f"==b[1]);break;case "wndTool":hb("tools","f"==b[1])}}function hb(a,b){db[a]?b?db[a].div.addClass("fixed"):db[a].div.removeClass("fixed"):$(hb.bind(void 0,a,b))}function ob(){h(window.location.hash)&&
($a.set("color","u"),$.clearHash())}var db={},kb=!1,rb=!1,pb,cb,zb=$("<div />"),vb={scramble:"scrHide",tools:"toolHide",stats:"statHide"},wb=$("<div />").addClass("dialog"),yb=$("<div />").addClass("title"),xb=$("<div />").addClass("value"),Db=$("<div />").addClass("button"),qb=$('<input type="button" class="buttonOK">').val(OK_LANG),Ab=$('<input type="button" class="buttonOK">').val(CANCEL_LANG);wb.append(yb,xb,Db);var Nb=$('<span style="position:absolute;left:0.5em" class="click">&nbsp;⇱&nbsp;</span>'),
Qb=$('<span style="float:left;" class="click">&nbsp;↻&nbsp;</span>'),Lb=$("<style>").appendTo("head"),Pb="html,body,textarea,#leftbar{color:?;background-color:?}#leftbar{border-color:?}#logo{color:?;border-color:?;background-color:?}.mybutton,.tab,.cntbar{border-color:?}html:not(.m) .mybutton:hover,.mybutton:active,.tab:active,.mywindow,.popup,.dialog{background-color:?}.mybutton.enable,.tab.enable,.cntbar,.selected,table.opttable tr th:first-child,div.helptable h2,div.helptable h3,.sflt div.sgrp{background-color:?}#gray{background-color:?}html:not(.m) .times:hover,html:not(.m) .click:hover,.times:active,.click:active,textarea{background-color:?}.click{color:?}.mywindow,.popup,.dialog,.table,.table td,.table th,textarea,.tabValue,.opttable td.sr,.sflt .bimg{border-color:?}html:not(.m) #avgstr .click:hover,#avgstr .click:active{background-color:?}select,input[type='button'],input[type='text']{color:?;background:?;border-color:?}input:disabled,table.opttable tr:nth-child(odd) td:first-child,div.helptable li:nth-child(odd){background:?}.mywindow::before,.popup,.dialog,#leftbar::before";
Pb=[Pb+"{box-shadow:0 0 .6em ?}",Pb+"{box-shadow:none}"];var Fb="#000#efc#fdd#fbb#00f#ff0#000 #000#ffe#ff9#ff0#00f#fa0#000 #fff#600#668#408#ccf#0ff#000 #fff#000#555#888#aaa#000#aaa #000#fff#ccc#ddd#555#fff#888 #fff#227#9c3#563#580#dad#000 #9aa#023#034#b80#28d#678#034 #678#ffe#eed#ffe#28d#678#eed".split(" "),ub="#000 #fff #fff #fbb #dbb #ff0 #000".split(" "),Gb=[0,1,545,5,549,6,546,2,3,0,546,4,546,545,0,3826,546,274,0],Cb="font back board button link logo logoback".split(" "),sb=!1;$(function(){pb=
$("#gray");Pa("ui","property",nb,/^(?:color|font|col-.+|zoom|view|uidesign|wnd(?:Scr|Stat|Tool))/);Qa("ui","zoom",1,ZOOM_LANG,["1","0.7 0.8 0.9 1 1.1 1.25 1.5".split(" "),"70% 80% 90% 100% 110% 125% 150%".split(" ")]);Qa("ui","font",1,PROPERTY_FONT,["lcd","r Arial lcd lcd2 lcd3 lcd4 lcd5 Roboto".split(" "),PROPERTY_FONT_STR.split("|").concat("Roboto")]);Qa("kernel","ahide",0,PROPERTY_AHIDE,[!0]);Qa("ui","uidesign",1,PROPERTY_UIDESIGN,["n",["n","mt","ns","mtns"],PROPERTY_UIDESIGN_STR.split("|")]);
Qa("ui","view",1,PROPERTY_VIEW,["a",["a","m","d"],PROPERTY_VIEW_STR.split("|")]);Qa("color","color",1,PROPERTY_COLOR,["1","uer12345678".split(""),PROPERTY_COLOR_STR.split("|")]);var a=PROPERTY_COLORS.split("|");Qa("color","col-font",3,a[0],["#000000"]);Qa("color","col-back",3,a[1],["#eeffcc"]);Qa("color","col-board",3,a[2],["#ffdddd"]);Qa("color","col-button",3,a[3],["#ffbbbb"]);Qa("color","col-link",3,a[4],["#0000ff"]);Qa("color","col-logo",3,a[5],["#ffff00"]);Qa("color","col-logoback",3,a[6],["#000000"]);
Qa("color","col-timer",4,"Timer",["#f00#0d0#dd0#080#f00"]);Qa("color","colcube",4,"Cube",["#ff0#fa0#00f#fff#f00#0d0"]);Qa("color","colpyr",4,"Pyraminx",["#0f0#f00#00f#ff0"]);Qa("color","colskb",4,"Skewb",["#fff#00f#f00#ff0#0f0#f80"]);Qa("color","colmgm",4,"Megaminx",["#fff#d00#060#81f#fc0#00b#ffb#8df#f83#7e0#f9f#999"]);Qa("color","colsq1",4,"SQ1",["#ff0#f80#0f0#fff#f00#00f"]);Qa("color","colclk",4,"Clock",["#f00#37b#5cf#ff0#850"]);Qa("color","col15p",4,"15 Puzzle",["#f99#9f9#99f#fff"]);Qa("color",
"colfto",4,"FTO",["#fff#808#f00#0d0#00f#bbb#ff0#fa0"]);Qa("ui","wndScr",1,PROPERTY_WNDSCR,["n",["n","f"],PROPERTY_WND_STR.split("|")]);Qa("ui","wndStat",1,PROPERTY_WNDSTAT,["n",["n","f"],PROPERTY_WND_STR.split("|")]);Qa("ui","wndTool",1,PROPERTY_WNDTOOL,["n",["n","f"],PROPERTY_WND_STR.split("|")]);$(".donate").appendTo(zb);c("donate",BUTTON_DONATE,function(){z([zb,0,void 0,0],"stats",BUTTON_DONATE.replace(/-?<br>-?/g,""))},5);cb.appendTo(Na).mouseenter(function(){Wa(!0)}).mouseleave(function(){Wa()});
setTimeout(Wa,3E3);wb.appendTo("body");$(window).resize(ab);$(window).bind("hashchange",ob);ob();"https:"!=location.protocol&&(document.title="[UNSAFE] "+document.title);if(navigator.wakeLock&&navigator.wakeLock.request){var b=function(){return navigator.wakeLock.request("screen").then(function(a){DEBUG&&console.log("[ui]","Screen Wake Lock is active");a.addEventListener("release",function(){DEBUG&&console.log("[ui]","Screen Wake Lock is released")})})};b();document.addEventListener("visibilitychange",
function(){"visible"===document.visibilityState&&b()})}});return{addWindow:function(a,c,h,r,e,Oa){h.appendTo(Na);h.addClass("mywindow");h.append($('<span class="chide" data="'+vb[a]+'"></span>').click(w));r=n(a,r);cb=cb||$("#leftbar");cb.children(".c"+Oa).addClass(r?"enable":"").data("module",a).click(f).find("span:first").html(c);db[a]={button:r,div:h,auto:e};r?h.show():h.hide();b("button",[a,r])},addButton:c,showDialog:z,hideDialog:Ra,isDialogShown:function(a){return wb.hasClass("dialog"+a)},exportColor:Va,
nearColor:r,setAutoShow:function(a){(a=a||!n("ahide"))?Ta():Ua();timer.showAvgDiv(a)},hide:Ua,show:Ta,isPop:function(){return rb},toggleLeftBar:Wa}}(),Ua=function(){function a(a,b,c,e,f){this.data=a;this.callback=b;this.select1=c;this.select2=e;this.reset(f)}function b(a,b,c){for(var e=0;e<a.length;e++)if($.isArray(a[e][1]))for(var f=0;f<a[e][1].length;f++){if(a[e][1][f][1]==b){c(e,f);return}}else if(a[e][1]==b){c(e,null);break}}var c=a.prototype;c.loadSelect2=function(a){e();a=a||0;var b=~~this.select1.prop("selectedIndex");
b=(this.data[b]||[])[1];this.select2.empty();if($.isArray(b)){this.select2.show();for(var c=0;c<b.length;c++)this.select2.append($("<option>").html(b[c][0]).val(b[c][1]));this.select2.prop("selectedIndex",a)}else this.select2.hide();this.onSelect2Change()};c.onSelect1Change=function(){this.loadSelect2()};c.onSelect2Change=function(){this.callback&&this.callback(this.getSelected())};c.getSelIdx=function(){var a=~~this.select1.prop("selectedIndex");if(!$.isArray((this.data[a]||[])[1]))return[a];var b=
~~this.select2.prop("selectedIndex");return[a,b]};c.getSelected=function(){var a=this.getSelIdx(),b=(this.data[a[0]]||[])[1];return 1==a.length?b:(b&&b[a[1]]||[])[1]};c.reset=function(a){a=a||this.getSelected();this.select1.empty();for(var b=0;b<this.data.length;b++)this.select1.append($("<option>").html(this.data[b][0]).val($.isArray(this.data[b][1])?b:this.data[b][1]));this.select1.unbind("change").change(this.onSelect1Change.bind(this));this.select2.unbind("change").change(this.onSelect2Change.bind(this));
a&&this.loadVal(a)};c.loadVal=function(a){var c=this.callback;this.callback=null;b(this.data,a,function(a,b){this.select1.prop("selectedIndex",a);this.loadSelect2(b)}.bind(this));this.callback=c};c.getValName=function(a){var c=null;b(this.data,a,function(a,b){c=this.data[a][0];null!=b&&(c+=">"+this.data[a][1][b][0])}.bind(this));return c};c.getValIdx=function(a){var c=null;b(this.data,a,function(a,b){c=100*a+(null==b?b:99)});return c};return a}();(function(){function a(a,Oa){if("bgImgO"==Oa[0])e.stop(!0,
!0).fadeTo(0,Oa[1]/100);else if("bgImgS"==Oa[0])if("n"==Oa[1])e.hide(),f="n";else if(e.show(),"u"==Oa[1])if("modify"==Oa[2]){var Sa=prompt(BGIMAGE_URL,b);w.exec(Sa)&&2048>Sa.length?(b=Sa,e.attr("src",b),y("bgImgSrc",b)):(alert(BGIMAGE_INVALID),y("bgImgS",f),$a.reload())}else b=n("bgImgSrc",b),e.attr("src",b);else"f"==Oa[1]?(storage.getKey("bgImgFile").then(function(a){a?e.attr("src",URL.createObjectURL(a)):"modify"!=Oa[2]&&(y("bgImgS","n"),$a.reload())}),"modify"==Oa[2]&&(x.unbind("change").change(function(){if(x[0].files.length){var a=
x[0].files[0];e.attr("src",URL.createObjectURL(a));storage.setKey("bgImgFile",a)}}),x.click())):(f=Oa[1],e.attr("src",c[Oa[1]]))}var b="",c=["https://i.imgur.com/X7Xi7D1.png","https://i.imgur.com/K4zbMsu.png","https://i.imgur.com/Fsh6MaM.png"],e,f=0,w=/^((http|https|ftp):\/\/)?(\w(:\w)?@)?([0-9a-z_-]+\.)*?([a-z0-9-]+\.[a-z]{2,6}(\.[a-z]{2})?(:[0-9]{2,6})?)((\/[^?#<>\/\\*":]*)+(\?[^#]*)?(#.*)?)?$/i,x=$('<input type="file" id="imgfile" accept="image/*"/>');$(function(){e=$("#bgImage");Pa("bgImage",
"property",a,/^bgImg[OS]$/);Qa("ui","bgImgO",2,BGIMAGE_OPACITY,[25,0,100]);Qa("ui","bgImgS",1,BGIMAGE_IMAGE,["n",["n","u",0,1,2,"f"],BGIMAGE_IMAGE_STR.split("|").slice(0,-1).concat(1,2,3,"upload")])})})();var Ta=/^([\d]+(?:-\d+)?)?([FRUBLDfrubldzxySME])(?:([w])|&sup([\d]);)?([2'])?$/,Za=function(){function a(){c&&clearTimeout(c)}function b(){a();timer.onkeydown({which:28})}var c=0;return{startLongTouch:function(){a();c=setTimeout(b,2E3)},clearLongTouch:a}}(),Ra=!0;$(function(){Qa("kernel","useMilli",
0,PROPERTY_USEMILLI,[!1],1);Qa("kernel","timeFormat",1,PROPERTY_FORMAT,["h",["h","m","s"],["hh:mm:ss.XX(X)","mm:ss.XX(X)","ss.XX(X)"]],1);a.appendTo("body");Na.appendTo("body");$(document).keydown(function(a){$.waitUser.call();Ra=!0;b("keydown",a);timer.onkeydown(a);return Ra});$(document).keyup(function(a){Ra=!0;b("keyup",a);timer.onkeyup(a);return Ra});$("#container").bind("touchstart",function(a){$.waitUser.call();$(a.target).is(".click")||(Za.startLongTouch(),e(),timer.onkeydown({which:32}),a.preventDefault&&
a.preventDefault())});$("#container").bind("touchend",function(a){Za.clearLongTouch();$(a.target).is(".click")||(e(),timer.onkeyup({which:32}),a.preventDefault&&a.preventDefault())});$("#container").bind("touch",function(a){$(a.target).is(".click")||a.preventDefault&&a.preventDefault()});$("#touch").remove();$("#container").mousedown(function(a){$.waitUser.call();!$(a.target).is(".click")&&1==a.which&&n("useMouse")&&(timer.onkeydown({which:32}),a.preventDefault&&a.preventDefault())});$("#container").mouseup(function(a){!$(a.target).is(".click")&&
1==a.which&&n("useMouse")&&(timer.onkeyup({which:32}),a.preventDefault&&a.preventDefault())});try{document.cookie="fp="+$.fingerprint()+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"}catch(Xa){}});$(function(){for(var a="properties cachedScr devData wcaData gglData locData".split(" "),b=0;b<a.length;b++)try{JSON.parse(localStorage[a[b]]||"{}")}catch(lb){delete localStorage[a[b]]}var c=[];for(b=1;b<=~~n("sessionN",15);b++)a.push("session"+b);for(b=0;b<localStorage.length;b++){var e=localStorage.key(b);
-1==a.indexOf(e)&&c.push(e)}for(b=0;b<c.length;b++)delete localStorage[c[b]]});return{pretty:z,getProp:n,setProp:y,regProp:Qa,getSProps:$a.getSProps,setSProps:$a.setSProps,regListener:Pa,addWindow:x.addWindow,addButton:x.addButton,pushSignal:b,showDialog:x.showDialog,hideDialog:x.hideDialog,isDialogShown:x.isDialogShown,exportColor:x.exportColor,clrKey:function(){Ra=!1},temp:a,reprop:$a.reload,loadProp:$a.load,parseScramble:function(a,b,c){a=a||"";c&&(a=n(tools.isCurTrainScramble()?"preScrT":"preScr")+
" "+a);c=[];a=a.split(" ");for(var e,f,w,x=0;x<a.length;x++)if(e=Ta.exec(a[x]),null!=e)if(w="FRUBLDfrubldzxySME".indexOf(e[2]),14<w)e="2'".indexOf(e[5]||"X")+2,w=[0,4,5][w%3],c.push([b.indexOf("FRUBLD".charAt(w)),2,e]),c.push([b.indexOf("FRUBLD".charAt(w)),1,4-e]);else{f=(e[1]||"").split("-");var Oa=~~f[1]||-1;f=12>w?~~f[0]||~~e[4]||("w"==e[3]||5<w)&&2||1:-1;e=(12>w?1:-1)*("2'".indexOf(e[5]||"X")+2);c.push([b.indexOf("FRUBLD".charAt(w%6)),f,e,Oa])}return c},getConjMoves:function(a,b,c){if(!a)return a;
void 0===c&&(c=w());b&&(c=mathlib.CubieCube.rotMulI[0][c||0]);return a.replace(/[URFDLB]/g,function(a){return"URFDLB".charAt(mathlib.CubieCube.rotMulM[c][3*"URFDLB".indexOf(a)]/3)})},getPreConj:w,blur:e,ui:x,TwoLvMenu:Ua,pround:function(a,b){return z(c(a),b)},round:c}});var exportFunc=execMain(function(){function b(){return storage.exportAll().then(function(a){a.properties=mathlib.str2obj(localStorage.properties);pb=JSON.stringify(a)})}function Pa(){var a=null;try{a=JSON.parse(this.result)}catch(wb){logohint.push("Invalid Data");return}z(a)}function z(a){var b=0,c=0,h=0;storage.exportAll().then(function(r){for(var e=1;e<=~~kernel.getProp("sessionN");e++){var f=mathlib.str2obj(r["session"+e]||[]),n=mathlib.str2obj(a["session"+e]||[]);f.length!=n.length&&(b++,c+=Math.max(n.length-
f.length,0),h+=Math.max(f.length-n.length,0))}return confirm(IMPORT_FINAL_CONFIRM.replace("%d",b).replace("%a",c).replace("%r",h))?Promise.resolve():Promise.reject()}).then(function(){if("properties"in a){var b=localStorage.devData||"{}",c=localStorage.wcaData||"{}",h=localStorage.gglData||"{}",r=localStorage.locData||"{}";localStorage.clear();localStorage.devData=b;localStorage.wcaData=c;localStorage.gglData=h;localStorage.locData=r;localStorage.properties=mathlib.obj2str(a.properties);kernel.loadProp()}storage.importAll(a).then(function(){location.reload()})},
$.noop)}function w(a){this.files.length&&a.readAsText(this.files[0],"UTF-8")}function c(a){return a&&/^[A-Za-z0-9]+$/.exec(a)}function e(a,b){try{return JSON.parse(localStorage[a])[b]||""}catch(yb){return""}}function a(a){if(a.target===h[0]||a.target===r[0])a=e("wcaData","cstimer_token");else{a=prompt(EXPORT_USERID,e("locData","id"));if(null==a)return;localStorage.locData=JSON.stringify({id:a,compid:e("locData","compid")});kernel.pushSignal("export",["account","locData"])}if(c(a))return a;alert(EXPORT_INVID)}
function Na(a){return new Promise(function(b,c){var h=LZString.compressToEncodedURIComponent(pb);$.post("https://cstimer.net/userdata.php",{id:a,data:h},function(a){0==a.retcode?b(a):c(a)},"json").error(c)})}function f(b){var c=a(b);if(c){var h=$(b.target),r=h.html();h.html("...");Na(c).then(function(){alert(EXPORT_UPLOADED)},function(){alert(EXPORT_ERROR)}).then(function(){h.html(r)})}}function $a(b){var c=a(b);if(c){var h=$(b.target),r=h.html();h.html("Check File List...");var e=function(){alert(EXPORT_ERROR)},
f=function(){h.html(r)};b=function(a){a=~~a.data;if(0==a)return alert("No Data Found"),f();var b=1;if(kernel.getProp("expp")&&(b=~~prompt("You have %d file(s), load (1 - lastest one, 2 - lastest but one, etc) ?".replace("%d",a),"1"),0>=b||b>a))return f();h.html("Import Data...");$.post("https://cstimer.net/userdata.php",{id:c,offset:b-1},n,"json").error(e).always(f)};var n=function(a){var b=a.retcode;if(0==b)try{z(JSON.parse(LZString.decompressFromEncodedURIComponent(a.data)))}catch(Lb){alert(EXPORT_ERROR)}else 404==
b?alert(EXPORT_NODATA):alert(EXPORT_ERROR);f()};kernel.getProp("expp")?$.post("https://cstimer.net/userdata.php",{id:c,cnt:1},b,"json").error(e).always(f):b({data:1})}}function n(){var a=e("gglData","access_token");a&&(ab.html("Check File List..."),$.ajax("https://www.googleapis.com/drive/v3/files?spaces=appDataFolder&orderBy=modifiedTime desc&q=name%3D%27cstimer.txt%27",{type:"GET",beforeSend:function(b){b.setRequestHeader("Authorization","Bearer "+a)}}).success(function(b,c,h){b=b.files;if(0==b.length)return alert("No Data Found"),
Ra();c=1;if(kernel.getProp("expp")&&(c=~~prompt("You have %d file(s), load (1 - lastest one, 2 - lastest but one, etc) ?".replace("%d",b.length),"1"),0>=c||c>b.length))return Ra();ab.html("Import Data...");$.ajax("https://www.googleapis.com/drive/v3/files/"+b[c-1].id+"?alt=media",{type:"GET",beforeSend:function(b){b.setRequestHeader("Authorization","Bearer "+a)}}).success(function(a){try{a=JSON.parse(LZString.decompressFromEncodedURIComponent(a))}catch(qb){return alert("No Valid Data Found"),Ra()}Ra();
z(a)}).error(function(){alert(EXPORT_ERROR+"\nPlease Re-login");Sa()});for(c=10;c<b.length;c++)$.ajax("https://www.googleapis.com/drive/v3/files/"+b[c].id,{type:"DELETE",beforeSend:function(b){b.setRequestHeader("Authorization","Bearer "+a)}})}).error(function(){alert(EXPORT_ERROR+"\nPlease Re-login");Sa()}))}function y(a){a=a||e("gglData","access_token");if(!a)return Promise.reject("Invalid Account");nb.html("Create File...");return new Promise(function(b,c){$.ajax("https://www.googleapis.com/upload/drive/v3/files?uploadType=resumable",
{type:"POST",contentType:"application/json",data:JSON.stringify({parents:["appDataFolder"],name:"cstimer.txt"}),beforeSend:function(b){b.setRequestHeader("Authorization","Bearer "+a)}}).success(function(a,h,r){a=r.getResponseHeader("location");nb.html("Uploading Data...");$.ajax(a,{type:"PUT",contentType:"text/plain",data:LZString.compressToEncodedURIComponent(pb)}).success(function(a,c,h){Ra();b()}).error(function(a,b,h){Sa();c(EXPORT_ERROR)})}).error(function(a,b,h){Sa();401==a.status?c("Timeout, Please Re-login"):
c(EXPORT_ERROR)})})}function Qa(){b().then(function(){if(window.Blob){var a=new Blob([pb],{type:"text/plain"});db.attr("href",URL.createObjectURL(a));db.attr("download","cstimer_"+mathlib.time2str(new Date/1E3,"%Y%M%D_%h%m%s")+".txt")}kernel.showDialog([ib,0,void 0,0,[EXPORT_ONLYOPT,Ua],[EXPORT_ACCOUNT,Ta]],"export",EXPORT_DATAEXPORT)})}function x(a){a=LZString.compressToEncodedURIComponent(JSON.stringify(a));var b=prompt(EXPORT_CODEPROMPT,a);if(b&&b!=a){try{b=JSON.parse(LZString.decompressFromEncodedURIComponent(b))}catch(yb){return}return b}}
function Ua(){var a=JSON.parse(localStorage.properties),b={},c;for(c in a)c.startsWith("session")||(b[c]=a[c]);b=x(b);if(!b)return!1;a=JSON.parse(localStorage.properties);for(c in a)c.startsWith("session")&&(b[c]=a[c]);localStorage.properties=mathlib.obj2str(b);location.reload();return!1}function Ta(){var a={wcaData:localStorage.wcaData,gglData:localStorage.gglData,locData:localStorage.locData},b=x(a);if(!b)return!1;for(var c in a)b[c]&&(localStorage[c]=b[c],kernel.pushSignal("export",["account",
c]));location.reload();return!1}function Za(){var a=JSON.parse(localStorage.wcaData||"{}");Ya.unbind("click");r.unbind("click").removeClass("click");h.unbind("click").removeClass("click");a.access_token?(a=a.wca_me,eb.html("WCAID: "+a.wca_id+"<br>Name: "+a.name),Ya.click(Xa.bind(void 0,!0)).addClass("click"),r.addClass("click").click($a),h.addClass("click").click(f)):(eb.html(EXPORT_LOGINWCA),Ya.click(function(){location.href=gb}).addClass("click"))}function Ra(){var a=JSON.parse(localStorage.gglData||
"{}");bb.unbind("click");ab.unbind("click").removeClass("click").html(EXPORT_FROMSERV+" (Google)");nb.unbind("click").removeClass("click").html(EXPORT_TOSERV+" (Google)");a.access_token?(a=a.ggl_me,Va.html("Name: "+a.displayName+"<br>Email: "+a.emailAddress),bb.click(Sa.bind(void 0,!0)).addClass("click"),ab.addClass("click").click(n),nb.addClass("click").click(function(){y().then(function(){alert("Export Success")}).reject(function(a){alert(a)})})):(Va.html(EXPORT_LOGINGGL),bb.click(function(){location.href=
mb}).addClass("click"))}function Xa(a){if(!a||confirm(EXPORT_LOGOUTCFM))delete localStorage.wcaData,kernel.pushSignal("export",["account","wcaData"])}function Sa(a){if(!a||confirm(EXPORT_LOGOUTCFM))delete localStorage.gglData,kernel.pushSignal("export",["account","gglData"])}function Oa(a,b){if("atexpa"==b[0])if("id"==b[1]){var h=e("locData","id");c(h)&&"modify"!=b[2]||(h=prompt(EXPORT_USERID,h),c(h)?(localStorage.locData=JSON.stringify({id:h,compid:e("locData","compid")}),kernel.pushSignal("export",
["account","locData"])):(null!=h&&alert(EXPORT_INVID),kernel.setProp("atexpa","n")))}else"wca"==b[1]?c(e("wcaData","cstimer_token"))||(alert("Please Login with WCA Account in Export Panel First"),kernel.setProp("atexpa","n")):"ggl"!=b[1]||e("gglData","access_token")||(alert("Please Login with Google Account in Export Panel First"),kernel.setProp("atexpa","n"));else"export"==a&&("wcaData"==b[1]?Za():"gglData"==b[1]&&Ra())}function fb(){var a=kernel.getProp("atexpa","n");"n"!=a&&(b().then(function(){if("id"==
a||"wca"==a){var b="id"==a?e("locData","id"):e("wcaData","cstimer_token");c(b)?Na(b).then(function(){logohint.push("Auto Export Success")},function(){logohint.push("Auto Export Failed")}):(logohint.push("Auto Export Abort"),kernel.setProp("atexpa","n"))}else if("f"==a){if(window.Blob){b=new Blob([pb],{type:"text/plain"});var h=$('<a class="click"/>');h.attr("href",URL.createObjectURL(b));h.attr("download","cstimer_"+mathlib.time2str(new Date/1E3,"%Y%M%D_%h%m%s")+".txt");h.appendTo("body");h[0].click();
h.remove()}}else"ggl"==a&&((b=e("gglData","access_token"))?y(b).then(function(){logohint.push("Auto Export Success")},function(){logohint.push("Auto Export Failed")}):(logohint.push("Auto Export Abort"),kernel.setProp("atexpa","n")))}),zb=cb=0)}function lb(){"n"!=kernel.getProp("atexpa","n")&&(zb+=1,zb>=kernel.getProp("atexpi",100)&&(cb&&clearTimeout(cb),cb=setTimeout(fb,1E3)))}var gb="https://www.worldcubeassociation.org/oauth/authorize?client_id=63a89d6694b1ea2d7b7cbbe174939a4d2adf8dd26e69acacd1280af7e7727554&response_type=code&scope=public&redirect_uri="+
encodeURI(location.href.split("?")[0]),mb="https://accounts.google.com/o/oauth2/v2/auth?client_id=738060786798-octf9tngnn8ibd6kau587k34au263485.apps.googleusercontent.com&response_type=token&scope=https://www.googleapis.com/auth/drive.appdata&redirect_uri="+encodeURI(location.href.split("?")[0]),ib=$("<div />"),Wa=$('<table class="expOauth expUpDown">'),eb=$("<td></td>"),Ya=$("<tr>").append('<td class="img"/>',eb),r=$('<a class="click"/>').html(EXPORT_FROMSERV+" (csTimer)").click($a),h=$('<a class="click"/>').html(EXPORT_TOSERV+
" (csTimer)").click(f),Va=$("<td></td>"),bb=$("<tr>").append('<td class="img"/>',Va),ab=$('<a class="click"/>'),nb=$('<a class="click"/>'),hb=$('<input type="file" id="file" accept="text/*"/>'),ob=$('<input type="file" id="file" accept="text/*"/>'),db=$('<a class="click"/>').html(EXPORT_TOFILE),kb=$('<a class="click"/>').html(EXPORT_FROMSERV+" (csTimer)").click($a),rb=$('<a class="click"/>').html(EXPORT_TOSERV+" (csTimer)").click(f),pb;Wa.append($("<tr>").append($("<td>").append($('<a class="click"/>').html(EXPORT_FROMFILE).click(function(){hb.click()})),
$("<td>").append(db)),$("<tr>").append($("<td>").append(kb),$("<td>").append(rb)),$("<tr>").append($("<td colspan=2>").append($('<a class="click"/>').html(EXPORT_FROMOTHER).click(function(){ob.click()}))));var cb,zb=0;$(function(){kernel.regListener("export","time",lb);kernel.regListener("export","property",Oa,/^atexpa$/);kernel.regListener("export","export",Oa,/^account$/);kernel.regProp("kernel","atexpa",1,PROPERTY_AUTOEXP,["n",["n","f","id","wca","ggl"],PROPERTY_AUTOEXP_OPT.split("|")]);kernel.regProp("kernel",
"atexpi",-2,"Auto Export Interval (Solves)",[100,[50,100,200,500],["50","100","200","500"]]);kernel.regProp("kernel","expp",0,PROPERTY_IMPPREV,[!1]);kernel.addButton("export",BUTTON_EXPORT,Qa,2);ib.append("<br>",$('<div class="expOauth">').append($('<table id="wcaLogin">').append(Ya),$('<table class="expUpDown">').append($("<tr>").append($("<td>").append(r),$("<td>").append(h)))),$('<div class="expOauth">').append($('<table id="gglLogin">').append(bb),$('<table class="expUpDown">').append($("<tr>").append($("<td>").append(ab),
$("<td>").append(nb)))),Wa);if(window.FileReader&&window.Blob){var a=new FileReader;a.onload=Pa;var b=new FileReader;b.onload=function(){0==stats.importSessions(TimerDataConverter(this.result))&&logohint.push("No session imported")};hb.change(w.bind(hb[0],a));ob.change(w.bind(ob[0],b))}$.urlParam("code")?(eb.html(EXPORT_LOGINAUTHED),$.post("oauthwca.php",{code:$.urlParam("code")},function(a){"access_token"in a?(localStorage.wcaData=JSON.stringify(a),kernel.pushSignal("export",["account","wcaData"])):
(alert(EXPORT_ERROR),Xa())},"json").error(function(){alert(EXPORT_ERROR);Xa()}).always(function(){Za();$.clearUrl("code")}),Qa()):Za();if($.hashParam("access_token")){var c=$.hashParam("access_token");Va.html(EXPORT_LOGINAUTHED);$.get("https://www.googleapis.com/drive/v3/about",{fields:"user",access_token:c},function(a){"user"in a?(localStorage.gglData=JSON.stringify({access_token:c,ggl_me:a.user}),kernel.pushSignal("export",["account","gglData"])):(alert(EXPORT_ERROR),Sa())},"json").error(function(a,
b,c){401==a.status?alert("Timeout, Please Re-login"):alert(EXPORT_ERROR);Sa()}).always(function(){Ra();$.clearHash()});Qa()}else Ra()});return{exportProperties:Ua,isValidId:c,getDataId:e,logoutFromWCA:Xa,wcaLoginUrl:gb}});var logohint=execMain(function(){function b(){c=void 0;Pa()}function Pa(){if(Na)a.removeClass("hint"),a.html("ABOUT"),c=void 0;else if(void 0==c)if(c=w.shift(),void 0==c)a.removeClass("hint"),a.html("csTimer");else{a.html('<div class="pad" style="width: '+e.width()+'px; ">csTimer</div><span style="font-family: sans-serif; margin: 0 1em 0 1em;">'+c+'</span><div class="pad" style="width: '+e.width()+'px; position: absolute;">csTimer</div>');a.removeClass("hint");var b=.1*(c.length+15)+"s";a.css({"-webkit-animation-duration":b,
"-moz-animation-duration":b,"animation-duration":b});setTimeout(function(){a.addClass("hint")})}}function z(){var a=["Webkit","Moz","O","ms","Khtml"],b=document.createElement("div");if(void 0!==b.style.animationName)return!0;for(var c=0;c<a.length;c++)if(void 0!==b.style[a[c]+"AnimationName"])return!0;return!1}var w=[],c,e,a,Na=!1,f=!1;$(function(){e=$("#logo");a=e.children().children();a.bind("oanimationend animationend webkitAnimationEnd",b);var c=$("#about"),n=c.children("h1").appendTo(kernel.temp).html();
e.mouseenter(function(){Na=!0;Pa()});e.mouseleave(function(){Na=!1;Pa()});e.click(function(){"https:"!=location.protocol&&confirm("Your access to csTimer is unsafe. Press OK for safe access.")&&(location.protocol="https:");c.show();kernel.showDialog([c,0,void 0,0],"logo",n)});c.hide();kernel.regProp("kernel","useLogo",0,USE_LOGOHINT,[!0],1);f=z()});return{push:function(a){f&&kernel.getProp("useLogo",!0)&&(w.push(a),Pa())}}});var timer=execMain(function(b,Pa,z,w,c,e){function a(a){a!=x&&(x=a,Wa.renderUtil(),kernel.pushSignal("timerStatus",x))}function Na(){var a=z("useIns");if(!0===a||"a"==a)return!0;if(!1===a||"n"==a)return!1;if("b"==a)return null==/^(333ni|444bld|555bld|r3ni)$/.exec(z("scrType"))}function f(b,c,h){if(c<x)for(b=x;b>c;b--)Ua[b]=h-Ta;a(Math.min(c,x)||1)}function $a(a){DEBUG&&console.log("[timer] update timer offset");if($("html").hasClass("m")&&!a){a=$("html").hasClass("toolt");var b=$("body").height(),
c=$("#scrambleDiv").is(":visible")?$("#scrambleDiv").outerHeight():0,h=$("#stats").offset().top||b;a?c+=$("#toolsDiv").is(":visible")?$("#toolsDiv").outerHeight():0:h=Math.min(h,$("#toolsDiv").offset().top||b);a=c+h-b;$("#timer,#rtimer").css({"padding-bottom":Math.max(-a,0),"padding-top":Math.max(a,0)})}else $("#timer,#rtimer").css({"padding-bottom":0,"padding-top":0})}function n(a){$.delayExec("timer_offset",$a.bind(null,a),50)}function y(a){var b=a.which;if(17==b)if(a=a.originalEvent,1==a.location||
1==a.keyLocation)b=256;else if(2==a.location||2==a.keyLocation)b=257;return b}var Qa,x=-1,Ua=[],Ta,Za,Ra=[],Xa=[],Sa=["#f00","#0d0","#dd0","#080","#f00"],Oa={play:$.noop},fb=Oa,lb=Oa,gb=Oa,mb=Oa;void 0!==window.Audio&&$.waitUser.reg(function(){fb=new Audio("data:audio/mp3;base64,//M4xAATSYYMAUxAAFnLyWJYln7RIAmBMD5PP7MLFh+v9gwMDBZyIn6JW5Ydg3AXBeH59S7vomiV+iILi7veiV///6In/wgoKGI7/+CbwQDH/gg7/5QEP5QMKs/q0cGlVL/ljQ06DnN/5yXn//M4xBEYsl6gAZmQASxhYji4zI0B9iVDm+gt1kQHSPZI/sgyZbMyXMRcn6bsgzk2M2J3LBLCgP5fSQQW7ikxUiqM2RpJiFP/f+Sw5hE80QQb//qbbzpPigBWhVKI71IfgLsD/GxF3etnsPVA//M4xA0YQhbUVc9IAYJsgBw94rEX5Zn32GB9ZJjM7WRsZByUJeG5tRzP///Pf5e/fnvj/6fnaROkqmWIVzyANulyUmy0y1+SM9qVIYeNThdSTt+Mr1dybYemoxoARO2BkwVpYBgP+hht2G3h//M4xAsXug7E9VgwA7hYwgWS6ksd1YZlz3SGJu9Tf9Nnh/QES1GjUas4DDPRsz6mUfOZ3RfFmnfdROWbCX//9enmoPCRJo0UuSOVVU+V6fM7/5rt///nr+Ei8PQumSH7twFhltkx/BAAAFsm//M4xAsYCnKY95k4ABXvCvTG+ZhpjLmGBPUOxY3uVbnhYC4i/qKgAl+s8ajiCcam+fG70NEYoMjT/vwWlhsMgsAjmx1l/gwsIok2JGjyp+n9yZUajYIgaaj///UfPJqlScmqAFAtFAtFottF//M4xAkXS38GX4EoArXUKwIPwD8ku8n7kImb5JCZqG+RnJ9PnezvO6//xA8+8g+tVcRFjauathAUMIAg8OCgodAezJxwoKOn/djpbbVGFFOQUZkIuqDVK7HdP6bt///jx1VoiZeQAK3+k2aJ//M4xAoX40MLHcg4AlCJVEGgLifPIFMGlO////2X6/6SbmA9JMKweDx2qhCSf/1Pfi1TVnqpD/55tUNLr/1qk5p6O2utkSc8w0003od7sk9roq6oceebQ46drqNR5yw+xpV1WIZlWJqoxBjD//M4xAkXIOsTGs4GXjzGCDgkBTJvzm+iZZL5OW2BQRQBdEfi9JG599JMa2qxISC8DMToZwZIgjTOMAiYj/MZDgIJ2fNmfZFBebWkAANCaSsG/c0cwBRxz//sPu///i3+hZvpd//JGObwoVXH//M4xAsXCPseWMMRI8KLBT5VTQZUaR+psYbbV0pcQAUJGtAxqeZjEEUMqUIQMQiIkmrChKdhgrzxluLhsqa6EwWtCAvBcUQPulnoHANyQxiijuwFEl1g/ilr/3+2/SqCVmRApRzgVEsmKcqa//M4xA0S+KLxv0lIAhehSRNXiyJCQgBBEhJYImmHiEERSGUIpCoBh7FgaUDLuoeCsFgayolLVHg0VO6w1LAXLfrLD8l9n2Tv//iIO5R88yRoxfLP60GESF0/nDMiacux54YAujYBIUHPuRFR//M4xCAcMsawAZhQAODgtEJMKyu88L8FgVhXC4IU1e74kCDGBMhIcWIyMSDf3GotCEFUPwGBgxceEQvKHf88kHCckfod///7Hj8w8uSD99yMyQyY3+Z/2c40nLu+VQKFvTbkoA8CijpNUkRQ//M4xA4UohrVn8YoAhQVpc+iJgUeAYryHnlIYPHDplFSoYxSxEVp6loHgsMDxxIWyzGo6lMY0vyiI4xUMpfvZ9v+WVkMpBIPIZyoJCTyKYKh1QEk3DdbkAgLmdaIAcZrvsZeRo1qN88WJe2b//M4xBoU0nq1t08oAkWHSapRERYpS1ZNEOpyCp0Z++Uhjcm/mvnRL9Dv6nRT3br/9a/daqivOpyT8pTzgdIm56oH3p//+tVpyS2yWSSWyWi261igBtlcTNuVMBDryxNmQvt1gMnh+q60Ycbs//M4xCUeAybGX5g4AkzzRWNhIP6tk+xpFjEOmsZHS80mXQ8xH5r/NJFqHl6Hdf4nJElTqabU3/uYY4PRuJghEUkNweCKPgJKVRTen+aNyZDdP////zFJsJA0nEDxuhAcDEgkEYjEkkgkjUJZ//M4xAwXgx7yX4IoAgCeXYgZ9oovHihUXv7Ob1OeQaRxi+hFflYXMXqt/92vlci/8+rttZXrai+ScQFMgn+Zv+1DvnPJDjTnnTd2UUIKCjyD55GfPCQixBcxX/z//BO33bDbW2PRBjsKUcCg//M4xA0UGqL2W8gQAtSYFFPQa5Z7v//KBhBHkIrkVz/oxFc4s7//5SlKvXuV35So77I900dv1///09f/SoslqKxA4cB8FoiEsBLGq7ksGoGKm+utulrklKqGKg0DDy3oNQvNH1uL2O9JZx/n//M4xBsUYQLiWsCMqo2CtyElAU930DGtGeUSEkYJXP///9Mk4BAkwIKORLN/LB2eh3K2nip0RZW3/DX/+HSxP/+s7spJrvAhfRAKXHSVTp/qR1yZwT//SsEOql7ChW9Q/OMbWcqTwk5mHqx3//M4xCgVUiJ0VEjKfJvMY0oqpWoY8RDupfzZhIqlN///0EmUDU9LHg0HOCodwVU8AnQaBUFfrKkt5CppLbfCQZI1EFRdF8qqmnnCQw/NfiYYhS57l/GgCLKyId/5H+VALvUe/75r5Xyx5n8e//M4xDENOQJoHjBKtLM67iEbxmn4ZnCdCLoqFQ9kxWiedXM7lVzLTKYul04P0UbpIFFAR5lxub6eFzRpwGWZebNGnFXF5s0//7s7O+bm5RpxRYJhmKEv//5UKiwtrUxBTUUzLjk5LjVVVVVV//M4xFsTMXHgAHsMHFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV");
lb=new Audio("data:audio/mp3;base64,//M4xAASgV4kFUwQACCAxs7JZPjOBIJicEBEdOxLJ6/6P3mlKTvt5zn5CBCEbI2c7oc57qf/XyEZTnQOBgYGLP/5c/1ygICQEP//EYPh+XBAMQ+Xf/wfbFqFNoEQoEFQEAoFAB+AVB4IMjon//M4xBUaKkrKX48oAFfHUmf89zpuUPoIoH/EBQgAD2Doh8EcCEYrHQOfg5IqAYuEADFAFIHufiYfOwfFyFFBYcHRAO/9XIRpJyy1dxT/+MFHac/xYuZar/fl+6pO7///UgWBacsstohOUoCw//M4xAsYGUbNn8wwAAMnmZ+cDu8djuSCYwYOmCwwdXtktWsTP35ZVoIgRJ5bXk6qf1VUR/f45seXnP2/2UZaUqN4JCMUOZ/QXBZBJxhp0akGam/eSOtFNysFTrfvaRb86SJV/8UPUrp+zSj1//M4xAkWefLEAMMG6O9KX1ERIatSpfyIuESQIBoKtVAipJxzbQQL48CaGZwhwiYAxOflcSz+973gNziP9c/v5/0/PsIzp/FcDcOP1BFm4cWZOejhzT30AwOIEAKnIInmpCW45KAB9YbUZ/KO//M4xA4XWgcGXnnS9wSLgdo+4uIZd65P8BmAVW7Y7RdHPK0MI1NPaSAaisaW6PReado2a3tr53Z8shskyFmpyIk2z3asoILchTb6As0mgosPDodNkqQyWtyzkN9VAOkEPxM62BmWyoOLzh2U//M4xA8Wo0bYVmBTPhU4VyIfetOVNubJtJwyjshE7b2ZpJtlITxc1n/J8XP///PMvDxcXPIwoA2s1hyf////4epZ4XqCenBIuF2M//9QvWE0dqBj/xLGEsUPE0jEFdMCsIqJSpRLJos62sp0//M4xBMZMz68BGoN5Wl11LRQpL29v/6e3///639n///10zdl8ltVyki9kGU76S73MSKDiwVgLnoYqS8dkGQxmRWYCIdkDyemBEJt8sECJ2ygAEKBwu6AY8ogACBZO52rx//7v/////6///////M4xA0WszrIAAhS/P6/8eVUMxJ6xGbUUV4y5GK2pLIUAIUTHlEKNVUUhYRFAMCkbC4YGRWQHAYoRJsg2ygsiFIlCSHN7VkjS8W1rJ2LYOTYG2bOm0LajK9swZdtrdttoNb7LQuMMOlQ3VRo//M4xBEZGU8SWMPS0tIV9Mkfd/1pqxzFRKswhSTgwWwQgQwhCwHACoEwdQyVi3qp5kt5l4gufzHb1ftPqNOHREJQLGOQMB6sJEcosEZvF0clGJo0hQoSQm2gQNrHxOBCKpL/dt/t4P83PyNq//M4xAsWcU8uWU9gA8fiEqmxOxkCxR4akYDKVhCQ5ihISWhdx7Aacl4qxKysejiaMq0RKVKjw1EIlXx7kNyh+YhTYQTIuJ6qH1XMejdTtLLsn1CrEeL7987UtHZP8DNiNI+8XNT2ZP9/uW15//M4xBAYwl6sAZhQAFu1p+7QEoFEBV6g1nEhETM/vMKP1RNwuAaAayAeGj0oc6q/i2hhO+PSRjjjX/FwXAsFAWAaAQzeahzov+TmOYx/5pqev7f9jx4WAgbOC3//B9weLoMQSAOtHnOtlwEc//M4xAwYUX64AY94ADqMNCC4LhWjHbCcscWKI+gkIRT5wve2X0GfevrOLVi2pfW/m3v4L2Die0CG/rPiJDe/fhRLzvp9YpesOBPrWKfGcRgVO0IKLecj34HDowGogX0kfwaqGKkalAB07DTR//M4xAkVUXa4988oA96hJKmadYbXjLDpmV8xPo1k6wuL0PCxnMJGMhSyrzFKVW7Sh0OgUtEsVmKxerFKpf0Q4iHg87wUFGhQV/pgoKCjcgoKahBS/0L/v/XqRrkvl1uuAHPRw8YD6obbAZWC//M4xBIUulrVv0YYAsy5WpzC/FjkoESgR4UTt+wwhRQCEFLAKVdjpuarL+uveMFSGZM6nmZMaEOIWDlW/5/+0r5//SO+5f3a+jXFKZxDY3GQ/s1JvAR00Bwm8O7JGQqoMUFo+y7mpgYG2r2Z//M4xB4bcyaYAY+AANJE6Zpfv7lAmES+t//rfSMzhikn//v2djA6YGqX//rdb6ponW8jSfJ8ibkXHX//3y4gabqQ8Zw1DEgm8QXFPFzCAAEwcY4A9QdIpc9///iBPL////////3//6M9cxlS//M4xA8XA0bMC8A4AsjHnuerv7VVCh9rmHodKIIiiUY7mD6VLmXU0bsJZcfcyYaPisRxwBgOwHnjQeMG4TgVGQhDhUTEwinA9B6g6NmFprmIhYajYcHygjk2V4VncGh/pRDV74GwDcP0CGGr//M4xBITSQr3GHgSwgw5n97yKxUMaHpRn1/7kgiEwoT78OtpAEDCCkDp+fpVl4UQo5o98MXf/aeWXBfInf////X4SBp//7b0qgCIGi9cuqFSVYVE2qotihQ5KWrE2fOIiAMVuhpaCTI7/0Dw//M4xCMUaO6dskgKwLA0WAQe/sCeCz8RJOxE10qrOhphGAQkGn1nexseGgoPBWMWAhKWWRDTIK5UA5ZtAroFgVAmNWRLlixNLy/xbJKikZ29gwqyerczBhX/o6Kibf/0+/1bYxSlaitzCKf3//M4xDAVGx5cFEiKzEdAiCD1rIHqlm6GpKZeWj6Gh46mGkVqGKVhIPHby1Zy8pfCQqpAWOqAYgcSGJhoGRGZHsMxdJkWFmegGRWgKiMBC6xUMgJn8e2aBkUDxrjxVMCirFixoKioo3FW/4sS//M4xDoR2CIEAkiEADQVFG4q38BBIRhkyEm1TEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV");
gb=new Audio("data:audio/mp3;base64,//M4xAATEZoICUEQACAAAAAAVjGPIABjGMYxjGQhG/qc7znAAAQQhCEIBgZzn//nfIT///OACCAgCAIA+D4f1AgCDu/4Pg//BAEAQBD+D4Pg4CDogB8PlAQV/lyZtCAp/v2yc4zIHc/+UWAK//M4xBIZMvKIAZqQAQy6fRSNAxgABQc3y4i7ilB2l4t/20mIGbn//xmCKEgXDEr/+2w43WSBgVCJ/+mtTILdRIHCXMRzx3kQZD/9uympqz5UM0lui5eOEQNP/+r//N5Z/e8LkFm0AKioK/UN//M4xAwX0eawAdhAAUrHCF0Xyt8mH+FmJNO7GaWW0L6MPJXkR+2bc26/iL/uuZmIOmYGTZtbRo0aTfrOMMts4YKnqUUfYjnHGhktCIExYjMNlU6UuxpZy0mb/nM+giFCFaQQgI7LAFMBlv/y//M4xAsX4mbGXsIKnHpCwXElk/qwtoiMigBBRYYAMG6v9geFWqiha0rlTWVobWLi5m11Vmyl9ZVVaWYqKvf+yGsipuxhoULRZkKJGs9SX4wt/f67oUPCYo0ih1Et/Of4NOUpySxlRsf7ZHkf//M4xAoXSl68flmEulpKJzj4HRAjce2at13fUYlVa81Ao7xm5DvuRGYrbf1B1ZtrXZqLSczrZVqtDG85ZwpvKJarJLMnQxnUvK2//CiRQaXEHfWHyDUPGvKdAnuygnfJqiqqAaP/y5zeISIf//M4xAsWMzKwVBhTraE4JQMQ82CUXHSsAKLmIWCKLSuDZK6KLh/93cGBwg5oV5fy3/////5f/cqr14yU5IbSzejWjcl3qChaEaQIIGKuYrKMJvAILCg9DdUmbiO/5EAFgTgHV3kXGB5LzZhY//M4xBEXU0K8CkCTPLCnbWj/8LVfenb+v/9lMdhLkuZ////+h1e0////ZWuiu25JXU4gIdVOhgZI5auESAnYXYPtGLUVNkw7AZqT2UR1DRMOtEiMdJ1sojbqlksl0lij/vaaaWCAoUoOsOYj//M4xBIZWW7yWNMHKgmVLqEkBMvdl3bkthguWpAMJL5dmCBEMMvMFyiijcL0EPwsO/78WKl4Qx4ODxz9SJW37VEMH3l3Vxg5RrFjA8GI/soju6ZTz88GLg1nCLfLsQODdZMRym1ANb0zCehG//M4xAsU4SrBjgvMHF48ZpdH8XJp18bP0yXW60P4TU4WFxtISSN2WosJZ57tW1Wz5kjP9f1uU8oycSAssqs7rDT4iJCUaBn01bMlSOf1AZ5D3f4l4hWAC+VSUH1YSABA8DgzLD94INFxHhUG//M4xBYUgzq09kBFXhnywvc/I/749Tqi5YJPyMGAtWO9FRGXONgyKILofPtDMho9WsaEq/9P/9eZGWRgyPkdzI/V9NCXBB+oZTwx/5ZkohiZfFYWGUnhLK43nk8bR3byGp2OQCms4M5k3dYz//M4xCMUYUqgKsFNDAaLS6pDeQeM4oGqVgmMfV/0df0+e75mZaYIerAmcBUFUJFXNty0TEQM06bMf/jVoBMla1FwGt16zGA8NQefkpVAN0tnbzz1C06KzuUensbO9SV2RyYMOpFsarqJI2lK//M4xDAVQXalH1kYAK/2GsnDmUuZ6l+FJuXQlnlBR08KxEVjwEKmGf/rKgLDpVyG/5QgguSRiMOCQQOSyqMhGmSI0qtdpYGVsYNfgCHScsHWrAQqDrQckoEi/yCXUjSk/79aKf+tajBVaCz7//M4xDojc86+X5loAn+t02X//f7r9bplxtM2HeRmHqp0/93U2b3TlQ8xzl8e6kEFIG6mMEDI31/TTdvYvpM7oJjHGDJURsphZqqLhgSBcUZnkhwkoPw/f//5IHv//x5CJQBtaN/99owR/who//M4xAsVOd7mX8FAAsYFIH97r8ivyxIagvaf/+l6J/+44QAExgoMmpeCDHv///WmHpMo1Q7I9pQ4RgqFjCyGND0Wg0tx4RPLWFfkXvhVMOs//yhIeIwEkmhE332M1sAGU0ua+qxgESxhRLOA//M4xBUTyKKa/ghGBJqX1Y3AokRAV3UCp3w6dBqJRj/wKWbIhICjGB0iGjxLKlfqCvJMO5ICkg6GvhUSkQkBSAFIgsEgyk7VBP1OmAhQMBDCArw0eOsDoSPFSowOkiEYBe0CkAqAkUCIkggI//M4xCQSKB4U0hiCALz3UDICqAtg0sVLFSXCj0ZEJAXrLLHu3niRH8e4iSlS06dh0NJMQU1FMy45OS41qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq");
mb=new Audio("data:audio/mp3;base64,//M4xAASgSo1hUMQAIAgkWD33c9AN9ELeOf9d85/5CanO6HOhCNO//+hGUIQ5lw/EDogh8uH9YYLg+/UCEoCCwfLh/5Q4JDgPwQD6gQcDhwT/WDjidYYH41Hok//1+vs9vT8Aq1dS2NBQo9g//M4xBUaQmL2X4dAALQ2Nv44Xi2W/qxHUQblV/6FjBgoCtYppT/xUXgeJR7XVZl//o6MtmtX//9V+PR4UurefhUiY9P/v+HYURyEZPn2FUyg0IfGvlAQE4nuPo+d//Of6skEArDfvp+iADgm//M4xAsWqQbBZ88wAI8Z4TAwlzUxOFRqMwLkt7PBjyPCAzN57EJBCEQ7AhBUQ9J+MoqjYeqLUyR06dGBVigkZSuiSkjqVA08t/50tzOeqOg0HZglErtv+wsDIx9qsCCVRS8ugA0eMpdgLnQG//M4xA8Y+N7OVg4eHLkxaawiYEAmMzp+pVi0QgyWuSbfaLu2JCPMS48djN2OjQPo8Gm+1MTkQMvbWocLgBnJur3ebwmcLuKCc5bAgWU5jkzRmh7dVJw5hgQGKdTD4rLwfD/TApD6T3GsZ+jo//M4xAoVsMbllgvSOoaajtekUtnRNv4yigtZDycK1KCSjIEDHoXy5yCw8KkJoEIdZuEOmhM5IuAjwKlxUSmGXpCh5P7V0accB0u6n2KTHs/+J5P4YiA5EjpdEQKAAbh9B4FwOix3NYbHKio4//M4xBIWU0bg9jgfcoo1b0Gx3zTUfScea3RH////////j/////6huEM0ydj1nWzrgtgR8MM7g1AmhYF2q9N5b1G5qxk0wODIi0UWAfZJ4g3yTn+q1Q5KzlECQfkaxWsgj0I/RRb/2/v//9Vn//M4xBcaw0rBl0FoAHpf////sy1rrb///X//9kzydJBKkiipmY6O8Yom4cw0Lw+HguQW4KkIodoUAHsGwDYC1iJEUSQl5CFMcBNJIqCiC8hVRGw6AP4LeBlCxD0BcBVDFxaPvr/f9//9/t/L//M4xAsX2j8eX404AtuxjqjEzRIDwC51mFMl6MqmiWPEEbHnxoe62msPLMPPJsxnnBRvKtc+e6/LDrecjN+Y6DpnoPkzmXvmkjvb8z+hpR/FQ0fVKkELosVELRvtIqHf8qqbyaTMDIgnGhw1//M4xAoXiV7Yy494AId4yhnCcPiNF1KghyHyKgIIj2VKqcJqpPDrepyth2GrAcR63Fmhap8aeZtrEPE1J7TUjYiapaTTJjUCZuxLP8534sKLvX6+C4hRnyd0DLYhIa//DdW4SwYlwqtK1Zk1//M4xAoWEa64AZloABtJuengjtCaHvhxARYZEw5I8VtBIRvIKJJF4vLXxLjIzQLyKNFvpHx3Eqo7UmkZGX47RhB7ukbKMdnZt/cwmKNFmSQRnale8WIoQL1XARX18OEI5r/AaBcP1ehjqz4B//M4xBAXUuasAY84AAD8RB4wufax6mmJf3WY046i/zjS3OU//PQ0uPKg3dB48anHo0z5NmGhojnMTOHWGhxU1f/5U51m2tOpr+v//PtY2etxwtYLAVa3Fv/kFQpAY3wDgA//5BYdMtqpa7qi//M4xBEVET7Bt9iAAKTOTxnaPGEt9Kbeq7T3to8ZWvAPiGSMzEig4TiSjIqpKYpmyNlq9dSq+kg99n99MvhEXLFp27/U0OmrQK7fT6LGtJPVSABDsRjmAGH14mKnQlMUeVmib52Ev1vKSCGb//M4xBsU6MK5v1gYAMWnvrRa/zK6+rut4USRcWHkoCREFWw8SVVdAQdBo8HRLeCsc4JPLfaeI5aSK/4dEqVAwHyIVGvtUgAIKPKv/z/gAHxAkOJGEARIEghZOYmCTCxgEhs/SVqNzJ2S2uDz//M4xCYei86plZpoAGGcep4x54vonz6NvVVur6+YKXNqmQSPaS0UEqnQ7amo+j//Q01ejW3/6v+7et+gTDpTX//9PU03WmbvtQLhoMASZsSR0iCmE8GACQf//7f//xwgr9UCSgS2iC2oEfkI//M4xAoUC0LuX8EoAkdUf8b5/89Cd0///qqi5G///yodv50YXKLlExcABN0KYgoJoVxgmKkDpSOAwmKCwFDrGPRuzt6/00Zyr///1+jWOR0U0WKqEAls1wn0iBHCH/MIKAQktE4BU5EiRASW//M4xBgTIbrOXgmKlv/7y8scFEknl8///NZQ6KwiKiQecrf//5qVYxpQ64iCRKFDQVT88VBU7/1Q7/9raCJGRCTaAkYG01QNZFtww1LYo1EwKhNwSArlhI8Ej0OiURAIed1FQEPksJu8qIiS//M4xCoSsGIcFDBGQIqWW7wCAvkbSQiKjDp5YSDgdyxYe4986HQ0HdodEpUiSkxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq")});
var ib,Wa=function(){function a(a){a&&void 0==Ya?(requestAnimFrame(b),Ya=1,ib=0):a||void 0==Ya||(Ya=void 0);Xa=hb?y:Va}function b(a){if(0!=x&&-1!=x&&-4!=x&&void 0!=Ya){a=$.now()-Ta;if(-3==x||-2==x&&Na())e(Xa,"n"!=z("timeU")?17E3<a?"DNF":15E3<a?"+2":15-~~(a/1E3):TIMER_INSPECT);else{var c=w(0<a?a:0,!0);e(Xa,{u:c,c:c.replace(/([.>])(\d)\d+(<|$)/,"$1$2$3"),s:c.split(".")[0],n:TIMER_SOLVE,i:TIMER_SOLVE}[z("timeU")])}-3==x||-2==x?(c=document.getElementById("lcd"),c.style.backgroundImage="url(css/stopwatch.png)",
c.style.height="1.35em",c.style.backgroundsize="contain",c.style.textIndent=6E3>a?"-.3em":"0px",Xa!==y&&(12E3<=a?e(y,'<div style="font-family: Arial;">Go!!!</div>'):8E3<=a&&e(y,'<div style="font-family: Arial;">8s!</div>'),15E3<=a&&(c=document.getElementById("lcd"),c.style.backgroundImage="url(css/display.png)",c.style.height="425px",c.style.backgroundsize="contain",c.style.textIndent="0px")),"n"!=z("voiceIns")&&(c=Oa,7900<=a&&7900>ib&&(c="1"==z("voiceIns")?fb:gb),11900<=a&&11900>ib&&(c="1"==z("voiceIns")?
lb:mb),c.volume=~~z("voiceVol")/100,c.play())):Xa!==y&&(e(y,""),c=document.getElementById("lcd"),c.style.backgroundImage="url(css/display.png)",c.style.height="1.2em",c.style.backgroundsize="contain",c.style.textIndent="0px");ib=a;requestAnimFrame(b)}}function h(a){/^[rgy]$/.exec(a)&&(a=Sa["rgy".indexOf(a)]);Va.css("color",a);y.css("color",a)}function r(a){e(hb?y:Va,(void 0!=a?w(a,!0):"--:--")+'<div class="insplabel">&#59062;</div><div class="difflabel"/>')}function e(a,b){var c=a===y?1:0;$a[c]!==
b&&($a[c]=b,a.html(b))}function f(a,b){Pa=b?Pa+a:a}function n(a,b){for(var c=[],h=b;h>a;h--)c.push(w(Ua[h]-~~Ua[h+1],!0));return a==b||1==b||0==c.length?"":'<div style="font-size: 0.65em">='+c.join("<br>+")+"</div>"}var Va,y=$("<div />"),Xa,Ya,bb=$('<div style="line-height:0.6em;" />'),Qa=$('<div style="position:relative;font-size:0.3em;">'),ab=$('<span class="click" style="position:relative;z-index:20;font-family:Arial;">'),Pa="",$a=["",""],hb=!1,ib=0,nb,ub=!1;$(function(){Va=$("#lcd");$("#multiphase").append(y,
bb,Qa.append(ab))});return{setRunning:a,color:h,val:r,setEnable:function(a){a?Va.show():Va.hide()},append:function(a){e(y,y.html()+a)},setStaticAppend:f,fixDisplay:function(b,r){var e=!1;0==x?Wa.color("r"):-1==x||-4==x?h(b&&r?Na()?"g":"r":""):-2==x?(h(b&&r?"g":""),e=Na()):(-3==x?h(b&&r?"y":"r"):h(b?"g":""),e=!0);c.setAutoShow(0==x||-1==x);a(e)},renderUtil:function(a){Na()&&-1!=[-1,-4].indexOf(x)&&z("showIns")?(Va.addClass("insp"),y.addClass("insp")):(Va.removeClass("insp"),y.removeClass("insp"));
a&&-1==x?ub=!0:-1!=x&&(ub=!1);a=-2<x&&!ub?n(Math.max(0,x),Math.max(Ua.length-1,x)):"";bb.html(a+Pa);if(-1==x||0==x){if(-1!="sb".indexOf(z("input")))Wa.val(Za);else if(Wa.val(ub?0:Ua[1]||0),!ub&&Ua[1]&&Ra&&Ra[1]&&"n"!=z("showDiff")){a=Ua[1]-Ra[1];var b=$(".difflabel").html("("+(0<a?"+":0==a?"":"-")+w(Math.abs(Ra[1]-Ua[1]))+")"),c=z("showDiff");0!=a&&"b"!=c&&b.css("color",0<a==("gr"==c)?Sa[3]:Sa[4])}if(nb&&nb[4]&&!ub){Qa.show();var h="string"==typeof nb[4][1]&&nb[4][1]||tools.getCurPuzzle()||"333";
a="333"==h?recons.getMoveCnt(nb[4][0]):nb[4][2];b=STATS_REVIEW;0<a&&(b=a+" turns<br>"+~~(1E5*a/nb[0][1])/100+" tps");ab.html(b).unbind("click").click(function(){replay.popupReplay(nb[1],nb[4][0],h)})}else Qa.hide()}else Qa.hide()},setRecons:function(a){nb=a},reset:function(b,c){hb=b;Va.empty();y.empty();hb?(Va.removeClass("activetimer"),y.addClass("activetimer")):(Va.addClass("activetimer"),y.removeClass("activetimer"));$a[0]="";$a[1]="";f("",!1);r(0,hb);a(!1);eb.updatePos(c?!hb:hb)}}}(),eb=function(){function a(a){a&&
(r.html(a[0]).unbind("click"),void 0!=a[2]?r.addClass("click").click(function(){a[4](a[2][0],a[2][1],a[2][2],a[2][3])}):r.removeClass("click"),e.html(a[1]).unbind("click"),void 0!=a[3]?e.addClass("click").click(function(){a[4](a[3][0],a[3][1],a[3][2],a[3][3])}):e.removeClass("click"),Ua=a[5]?a[5][0].slice():[0],Ra=a[6]?a[6][0].slice():null,Wa.setRecons(a[5]),Wa.renderUtil())}function c(b,c){w=c;a(w)}var h,r=$('<span class="click">'),e=$('<span class="click">'),f=!0,n=!1,w;$(function(){h=$("#avgstr").append(r,
"<br>",e);b("timer","avg",c)});return{showAvgDiv:function(a){a&&z("showAvg")?f||(h.show(),f=!0):f&&(h.hide(),f=!1)},updatePos:function(b){n!=!!b&&((n=!!b)?h.appendTo("#multiphase"):h.appendTo("#container"),a(w))}}}(),Ya=function(){function b(){void 0!=w&&(clearTimeout(w),w=void 0)}function c(){if(-1==x||-3==x)-1==x&&(Wa.reset(Sa),h()),a(-2),w=void 0,Wa.fixDisplay(!0,!0)}function h(){Sa&&(Oa.is(":hidden")&&(Oa.show().appendTo("#container"),Oa.empty().append(Va)),Oa.css("height",z("timerSize")*$("#logo").width()/
12+"px"),image.llImage.drawImage("GGGGGGGGGGGGGGGGGGGGG",[],Va[0]))}function r(a,b,c){var h=y;255<a?y=b?y&~(1<<a):y|1<<a:c.ctrlKey||(y=0);return 32==a||3==h&&255<a||3==y}var f=0,n=0,w=void 0,Oa=$("<div>"),Va=$('<canvas style="height:100%;">'),Sa=!1,y=0;return{onkeydown:function(Oa,Va){if(28!=Oa){var Sa=r(Oa,0,Va);if(!DEBUG||Sa){var y=$.now();if(!(200>y-f)){if(0<x){f=y;Ua[x]=f-Ta;if(27==Oa){y=[-1];for(var kb=1;x<Ua.length;)y[kb++]=Ua[x++];Ua=y;a(1)}a(x-1);0==x&&(n=f,32!=Oa&&a(-1),Wa.fixDisplay(!1,
Sa),e("time",Ua))}else Sa?x==(Na()?-3:-1)&&void 0==w?w=setTimeout(c,z("preTime")):-1==x&&Na()&&(a(-4),h()):27==Oa&&-1>=x&&(b(),a(-1),Wa.fixDisplay(!1,!1),h());Wa.fixDisplay(!0,Sa);Sa&&kernel.clrKey()}}}},onkeyup:function(c,h){a:{var e=r(c,1,h);var f=$.now();if(e)if(0==x)a(-1);else if(-1==x||-3==x){if(b(),500>f-n){Wa.fixDisplay(!1,e);e=void 0;break a}}else if(-2==x){var w=Na()?f-Ta:0;Ta=f;Ua=[17E3<w?-1:15E3<w?2E3:0];a(z("phases"));Sa&&"333"==tools.getCurPuzzle()&&(f=tools.getCurScramble(),image.llImage.draw(3,
f[1],Va[0]))}else-4==x&&(Ta=f,a(-3));Wa.fixDisplay(!1,e);e&&kernel.clrKey();e=void 0}return e},detectTrigger:r,reset:function(a){void 0!=w&&(clearTimeout(w),w=void 0);f=n=0;(Sa="l"==a)?h():Oa.hide()}}}(),r=function(){var b=$('<textarea id="inputTimer" rows="1" />'),c=0;$(function(){$("#lcd").after(b)});return{setEnable:function(a){a?b.show():b.hide();a?(hb=b,b[0].select(),b.unbind("click").click(function(){b[0].select()})):hb=void 0},parseInput:function(){var a=/^\s*(?:[\d]+\. )?\(?(DNF)?\(?(\d*?):?(\d*?):?(\d*\.?\d*?)(\+)?\)?(?:=([\d:.+]+?))?(?:\[([^\]]+)\])?\)?\s*(?:   ([^@].*?))?(?:   @(.*?))?\s*$/,
h=/^(\d*?):?(\d*?):?(\d*\.?\d*?)$/,r=b.val(),f=$.now();if(/^[\s\n]*$/.exec(r)&&f>c+500)kernel.pushSignal("ctrl",["scramble","next"]),c=f;else for(r=r.split(/\s*[,\n]\s*/),f=0;f<r.length;f++){var n=a.exec(r[f]);if(null!=n&&""!=n[4]){var w=~~Math.round(36E5*Math.floor(n[2])+6E4*Math.floor(n[3])+1E3*parseFloat(n[4]));if(!(0>=w)){if(""==n[2]&&""==n[3]&&/^\d+$/.exec(n[4])){var x=kernel.getProp("intUN")||20100;w=Math.floor(w/(x%1E4));var Oa=Math.floor(w/1E7);var Va=Math.floor(w/1E5)%100;var Sa=w%1E5;2E4<
x?w=6E4*(60*Oa+Va)+Sa:1E4<x&&(w=6E4*(100*Oa+Va)+Sa)}"DNF"==n[1]?x=-1:"+"==n[5]&&2E3<w?(x=2E3,w-=2E3):x=0;Oa=[];if(n[6]){Oa=n[6].split("+").reverse();Va=w;for(Sa=0;Sa<Oa.length;Sa++){var y=h.exec(Oa[Sa]);if(null==y){Va=1E8;break}Va-=Math.round(36E5*Math.floor(y[1])+6E4*Math.floor(y[2])+1E3*parseFloat(y[3]));Oa[Sa]=Math.max(0,Va)}Math.abs(Va)>10*Oa.length?Oa=[]:Oa.pop()}Va=n[7]||"";Sa=n[8];Ua=[Va,Sa,[x,w].concat(Oa)];(w=mathlib.str2time(n[9]))&&Ua.push(w);e("time",Ua);kernel.clrKey()}}}b.val("")},onkeydown:function(b,
c){if(28!=b){var h=Ya.detectTrigger(b,0,c),r=$.now();!Na()||200>r-0||(-3==x||27==b?(a(h?0:-1),Wa.fixDisplay(!1,!1)):h&&-1==x&&a(-4),Wa.fixDisplay(!0,h),h&&kernel.clrKey())}},onkeyup:function(b,c){a:{var h=Ya.detectTrigger(b,1,c);var r=$.now();if(Na()){if(h)if(0==x)a(-1);else if(-1==x||-3==x){if(500>r-0){Wa.fixDisplay(!1,h);h=void 0;break a}}else-4==x&&(Ta=r,a(-3));Wa.fixDisplay(!1,h);h&&kernel.clrKey()}h=void 0}return h},clear:function(){b.val("")}}}(),h=function(){function b(b){if(c){var f=$.now();
if(b.on){Za=b.time_milli;Wa.renderUtil();if(b.running){if(-3==x||-4==x)r=f-Ta-Za,Wa.reset();Ua=[0];a(1);Ta=f-Za;Wa.fixDisplay(!1,!0)}else-1!=x||!Na()||0!=Za||"R"!=b.signalHeader&&"L"!=b.signalHeader?-3!=x&&-4!=x&&(a(-1),Wa.fixDisplay(!1,!0)):(a(-3),Ta=f,Wa.fixDisplay(!1,!0));h.running&&!b.running&&0!=b.time_milli&&(r=Na()?17E3<r?-1:15E3<r?2E3:0:0,Ua=[r,~~Za],e("time",Ua));b.greenLight?Wa.color("g"):b.rightHand&&b.leftHand?Wa.color("r"):-4==x?Wa.color("g"):Wa.color("");Wa.setRunning(-3==x||b.running&&
67!=b.signalHeader)}else Za=void 0,a(-1),Wa.fixDisplay(!1,!0);h=b}}var c=!1,h={},r;return{setEnable:function(a){(c="s"==a||"m"==a)?(stackmatutil.setCallBack(b),stackmatutil.init(a,!1).then($.noop,function(){kernel.showDialog([$("<div>Press OK To Connect To Stackmat</div>"),function(){stackmatutil.init(a,!0).then($.noop,console.log)},0,0],"share","Stackmat Connect")})):stackmatutil.stop()},onkeyup:function(b){var c=$.now();32==b&&-4==x&&(a(-3),Wa.reset(),Ta=c,Wa.fixDisplay(!1,32==b));32==b&&kernel.clrKey()},
onkeydown:function(b){var c=$.now();32==b&&-1==x&&Na()&&h.on&&0==h.time_milli?(a(-4),Ta=c,Wa.fixDisplay(!0,!0)):27==b&&-1>=x&&(a(-1),Wa.fixDisplay(!0,!1));32==b&&kernel.clrKey()}}}(),Va=function(){function b(b){if(f)switch(DEBUG&&console.log("[gantimer] timer event received",GanTimerState[b.state],b),b.state){case GanTimerState.HANDS_ON:Wa.color("r");break;case GanTimerState.HANDS_OFF:Wa.fixDisplay(!1,!0);break;case GanTimerState.GET_SET:Wa.color("g");break;case GanTimerState.IDLE:n=0;0<Za||-1!=x?
(Za=0,a(-1),Wa.reset(),Wa.fixDisplay(!1,!0)):-1==x&&Na()&&(a(-3),Ta=$.now(),Wa.fixDisplay(!1,!0));Wa.renderUtil();break;case GanTimerState.RUNNING:-3==x&&(n=$.now()-Ta,n=Na()?17E3<n?-1:15E3<n?2E3:0:0);Ta=$.now();Wa.reset();Ua=[n];a(1);Wa.fixDisplay(!1,!0);break;case GanTimerState.STOPPED:Za=b.recordedTime.asTimestamp;Ua[1]=Za;a(-1);Wa.renderUtil();Wa.fixDisplay(!1,!0);e("time",Ua);break;case GanTimerState.DISCONNECT:Za=void 0,a(-1),Wa.renderUtil(),Wa.fixDisplay(!1,!0),c()}}function c(){$.delayExec("ganTimerReconnect",
function(){DEBUG&&console.log("[gantimer] attempting to reconnect timer device");h(!0)},2500)}function h(c){GanTimerDriver.connect(c).then(function(){DEBUG&&console.log("[gantimer] timer device successfully connected");GanTimerDriver.setStateUpdateCallback(b);Za=0;a(-1);Wa.reset();Wa.renderUtil();Wa.fixDisplay(!1,!0)})["catch"](function(a){DEBUG&&console.log("[gantimer] failed to connect to timer",a);c||alert(a)})}function r(){var a=$("<div>").addClass("click").append("If you have enabled WCA inspection in settings,<br>use GAN logo button right on the timer to start/cancel inspection."),
b=$("<div>").append("<br><br>").append("<b>Press OK to connect to GAN Smart Timer</b>").append("<br><br>").append(a).append(ib);GanTimerDriver.disconnect().then(function(){kernel.showDialog([b,function(){h()},0,0],"share","GAN Smart Timer")})}var f=!1,n=0;return{setEnable:function(a){(f="b"==a)?(Za=void 0,r()):GanTimerDriver.disconnect()},onkeyup:function(a){32!=a||GanTimerDriver.isConnected()||r()},onkeydown:$.noop}}(),bb=function(){function c(b,c,w){if(1!=c){w=w||$.now();if(-3==x||-2==x){if(Va.isRotation(b)&&
!/^(333ni|444bld|555bld)$/.exec(Za)){0==c&&Xa[0].push([Va.move2str(b),0]);return}y=Na()?w-Ta:0;Ta=w;Ra=0;Ua=[17E3<y?-1:15E3<y?2E3:0];a(3==ab&&"r3"!=Za?cubeutil.getStepCount(z("vrcMP","n")):1);var Oa=Xa[0];Xa=[];for(var Sa=0;Sa<x;Sa++)Xa[Sa]=[];Xa[x]=Oa;Ya=x;f(Ya,Va.isSolved(z("vrcMP","n")),w);r();Wa.fixDisplay(!1,!0)}if(1<=x){/^(333ni|444bld|555bld)$/.exec(Za)&&!Va.isRotation(b)&&Va.toggleColorVisible(0==Va.isSolved(z("vrcMP","n")));0==c&&Xa[x-1].push([Va.move2str(b),w-Ta]);if(2==c){var kb=Va.isSolved(z("vrcMP",
"n"));f(Ya,kb,w);r()}2==c&&0==kb&&(Ra+=Va.moveCnt(),/^r\d+$/.exec(Za)&&0!=bb.length?("r3"!=Za&&ab++,h(!0),n()):(Wa.setStaticAppend(""),a(-1),$("#lcd").css({visibility:"unset"}),Wa.fixDisplay(!1,!0),Xa.reverse(),e("time",["",0,Ua,0,[$.map(Xa,cubeutil.moveSeq2str).filter($.trim).join(" "),gb,Ra]])))}}}function h(a){if((!lb||z("input")!=Sa)&&Pa){lb=!0;Sa=z("input");var b=ab;b||(b=3);b={puzzle:"cube"+b,allowDragging:!0};-1!=["skb","mgm","pyr","sq1","clk"].indexOf(gb)&&(b={puzzle:gb});b.style=z("input");
puzzleFactory.init(b,c,fb,function(b,c){Va=b;c&&!Va&&(fb.css("height",""),fb.html("--:--"));if(!a||c)Wa.setStaticAppend(""),Wa.fixDisplay(!1,!0),Wa.renderUtil(),Oa(z("timerSize"))})}}function r(){/^r\d+$/.exec(Za)&&(Wa.setStaticAppend(bb.length+1+"/"+Qa.length),Wa.renderUtil())}function n(){h();var a=bb;/^r\d+$/.exec(Za)&&(a=bb.shift().match(/\d+\) (.*)$/)[1],r());a=Va.parseScramble(a,!0);lb=!1;Va.applyMoves(a);Va.moveCnt(!0);Xa=[[]]}function w(a,b){if("scramble"==a||"scrambleX"==a){Za=b[0];bb=b[1];
var c=tools.puzzleType(Za),r=eb.indexOf(c);"cubennn"==c&&(r=b[2]);-1==r||ab==r&&gb==c||(ab=r,gb=c,lb=!1,h());(c=b[0].match(/^r(\d)\d*$/))?(Qa=bb.split("\n"),ab!=~~c[1]&&(ab=~~c[1],lb=!1,h())):Qa=null}}function Oa(a){fb.css("height",a*$("#logo").width()/9+"px");Va&&Va.resize()}var Va,Sa="",y=0,Ra=0,Ya=1,bb,Qa,Za,ab,gb,eb=" sq1 222 333 444 555 666 777 888 999 101010 111111 skb mgm pyr clk".split(" "),lb=!1,fb=$("<div />"),Pa=!1;$(function(){b("timer","scramble",w);b("timer","scrambleX",w);fb.appendTo("#container")});
return{onkeydown:function(b){if(void 0!=Va){var c=$.now();if(-1==x)32==b&&(Qa&&(bb=Qa.slice()),n(),Na()?(Ta=c,a(-3)):(Wa.val(0),a(-2)),$("#lcd").css({visibility:"hidden"}),Wa.fixDisplay(!1,!0));else if(-3==x||-2==x||1<=x)if(27==b||28==b){var r=1<=x;Wa.setStaticAppend("");a(-1);h();$("#lcd").css({visibility:"unset"});Wa.fixDisplay(!1,!0);r&&(Xa.reverse(),e("time",["",0,[-1,c-Ta],0,[$.map(Xa,cubeutil.moveSeq2str).filter($.trim).join(" "),gb,Ra]]))}else c={keyCode:help.getMappedCode(b)},Va.keydown(c);
27!=b&&32!=b||kernel.clrKey()}},setEnable:function(a){(Pa=a)?fb.show():(fb.hide(),lb=!1)},setSize:Oa,reset:h}}(),ab=function(){function c(){Sa&&(clearTimeout(Sa),Sa=0);y&&(clearTimeout(y),y=0)}function h(b,h,w){var kb=w[1]||$.now(),Ya=Qa;Qa=b;if(Oa){Va&&Za.setState(b,h,!1);c();var ab=z("vrcMP","n");if(-1==x){if(!r(Qa,!0)){var gb=z("giiSD");"s"==gb?giikerutil.checkScramble()&&n(kb):"n"!=gb&&(Sa=setTimeout(function(){n(kb)},1E3*~~gb));gb=z("giiSM");"n"!=gb&&{x4:/^([URFDLB][ '])\1\1\1/,xi2:/^([URFDLB])( \1'\1 \1'|'\1 \1'\1 )/}[gb].exec(h.join(""))&&
(y=setTimeout(function(){n(kb)},1E3))}}else if(-3==x||-2==x){Ra=Na()?kb-Ta:0;Ta=kb;Ua=[17E3<Ra?-1:15E3<Ra?2E3:0];a(cubeutil.getStepCount(ab));Xa=[];for(gb=0;gb<x;gb++)Xa[gb]=[];bb=x;gb=cubeutil.getProgress(Ya,ab);f(bb,gb,kb);Wa.reset(Va);Wa.fixDisplay(!1,!0)}if(1<=x&&(Xa[x-1].push([h[0],w[0],w[1]]),b=cubeutil.getProgress(b,ab),f(bb,b,kb),r(Qa,!1)))if(Xa.reverse(),ab=cubeutil.getPrettyReconstruction(Xa,ab),giikerutil.setLastSolve(ab.prettySolve),Ua[1]=kb-Ta,a(-1),giikerutil.reSync(),Wa.fixDisplay(!1,
!0),0!=Ua[1]){ab=giikerutil.tsLinearFix(Xa.flat());b=0;DEBUG&&console.log("time fit, old=",Ua);for(gb=0;gb<Xa.length;gb++)b+=Xa[gb].length,Ua[Xa.length-gb]=0==b?0:ab[b-1][1];DEBUG&&console.log("time fit, new=",Ua);ab=kernel.getConjMoves(cubeutil.moveSeq2str(ab),!0);e("time",["",0,Ua,0,[ab,"333"]])}else"t"==z("giiMode")&&kernel.pushSignal("ctrl",["scramble","next"])}}function r(a,b){if(b)return a==mathlib.SOLVED_FACELET&&"n"==z("giiMode");if("t"==z("giiMode")){var c={coll:"cpll",cmll:"cmll",oll:"oll",
eols:"oll",wvls:"oll",zbls:"eoll"}[(tools.getCurScramble()||[])[0]];if(c)return 0==cubeutil.getStepProgress(c,a)}return a==mathlib.SOLVED_FACELET}function n(b){c();if(-1==x){if("n"==kernel.getProp("giiMode")){if(!giikerutil.checkScramble()){var h=scramble_333.genFacelet(Qa);e("scramble",["333",kernel.getConjMoves(h,!0),0])}giikerutil.markScrambled()}else giikerutil.markScrambled(!0);a(-2);Ta=b;Wa.reset(Va);Wa.fixDisplay(!0,!0);z("giiBS")&&metronome.playTick()}}function w(a){(Va=a)?Ya.show():Ya.hide();
a&&Za.resetVRC(!0,!0)}var Oa=!1,Va=!1,Sa=0,y=0,Ra=0,Ya=$("<div />"),bb=1,Qa=mathlib.SOLVED_FACELET,Za=function(){function a(a,e){if((!h||e)&&Va){var n={puzzle:"cube3",style:z("giiVRC")};puzzleFactory.init(n,$.noop,Ya,function(h,e){f=h;e&&!f&&(Ya.css("height",""),Ya.html("--:--"));if(!a||e)Wa.fixDisplay(!1,!0),b(z("timerSize"));r.fromFacelet(mathlib.SOLVED_FACELET);if(f){for(var n=f.parseScramble("U2 U2",!0),w=r.ori=0;w<n.length;w++)r.selfMoveStr(f.move2str(n[w]));f.applyMoves(n);n=z("giiOri");c("auto"==
n?-1:~~n)}});h=!0}}function b(a){Ya.css("height",a*$("#logo").width()/9+"px");f&&f.resize()}function c(a){n=a;if(-1!=n&&r.ori!=n){a=mathlib.CubieCube.rot2str[mathlib.CubieCube.rotMulI[n][r.ori]].split(/\s+/);for(var b=0;b<a.length;b++)r.selfMoveStr(a[b]);f.applyMoves(f.parseScramble(a.join(" ")))}}var h=!1,r=new mathlib.CubieCube,e=new mathlib.CubieCube,f,n=-1;return{resetVRC:a,setState:function(b,c,n){if(void 0!=f&&Va){e.fromFacelet(b);n=[];for(var w=!0,Oa=0;Oa<c.length;Oa++)if(n.push(c[Oa]),e.selfMoveStr(c[Oa],
!0),e.isEqual(r)){w=!1;break}w?(a(!1),r.fromFacelet(mathlib.SOLVED_FACELET),n=scramble_333.genFacelet(b)):n=n.reverse().join(" ");c=n.match(/^\s*$/)||!f?[]:f.parseScramble(kernel.getConjMoves(n,!0,r.ori));5>c.length?f.addMoves(c):f.applyMoves(c);h=!1;r.fromFacelet(b)}},setOri:c,setSize:b}}();$(function(){Ya.appendTo("#container");b("giikerVRC","property",function(a,b){Va&&(Za.resetVRC(!0,!0),Za.setState(Qa,["U2","U2"],!1))},/^(?:preScrT?|isTrainScr|giiOri)$/)});return{setEnable:function(a){(Oa="g"==
a)&&!GiikerCube.isConnected()?(giikerutil.setCallback(h),kernel.showDialog([$("<div>Press OK To Connect To Bluetooth Cube</div>").append(ib),function(){giikerutil.init()["catch"](function(a){DEBUG&&console.log("[giiker] init failed",a)})},0,0],"share","Bluetooth Connect")):Oa||giikerutil.stop();w(Oa&&"n"!=z("giiVRC"))},onkeydown:function(b){$.now();if(27==b||28==b){if(b=1<=x,c(),a(-1),giikerutil.reSync(),Wa.fixDisplay(!1,!0),b){Ua[0]=-1;Xa.reverse();b=giikerutil.tsLinearFix(Xa.flat());var h=0;DEBUG&&
console.log("time fit, old=",Ua);for(var f=0;f<Xa.length;f++)h+=Xa[f].length,Ua[Xa.length-f]=0==h?0:b[h-1][1];DEBUG&&console.log("time fit, new=",Ua);b=kernel.getConjMoves(cubeutil.moveSeq2str(b),!0);e("time",["",0,Ua,0,[b,"333"]])}}else 32==b&&z("giiSK")&&(r(Qa,!0)||-1==x&&n($.now()))},setVRC:w,setSize:Za.setSize}}(),nb="input phases preScrT? isTrainScr giiOri useMilli showDiff smallADP giiVRC col-timer".split(" ");$(function(){Qa=$("#container");ib=$(".instruction").appendTo(kernel.temp);b("timer",
"property",function(b,c){"timerSize"==c[0]&&(Qa.css("font-size",c[1]+"em"),bb.setSize(c[1]),ab.setSize(c[1]));"timerSize"!=c[0]&&"phases"!=c[0]||$("#multiphase").css("font-size",z("timerSize")/Math.max(z("phases"),4)+"em");"input"==c[0]&&(h.setEnable(c[1]),ab.setEnable(c[1]),Va.setEnable(c[1]));"showAvg"==c[0]&&eb.showAvgDiv(c[1]);"giiVRC"==c[0]&&"set"!=c[2]&&ab.setEnable(z("input"));0<=["toolPos","scrHide","toolHide","statHide"].indexOf(c[0])&&n(!1);0<=["useIns","scrType","showIns"].indexOf(c[0])&&
Wa.renderUtil();"col-timer"==c[0]&&(Sa=(c[1]||"#f00#0d0#dd0#080#f00").match(/#[0-9a-fA-F]{3}/g));if(-1!=$.inArray(c[0],nb)){var e=z("input");a(-1);bb.setEnable("v"==e||"q"==e);bb.reset();Wa.setEnable("i"!=e);Wa.reset(/^[ilvq]$/.exec(e)||"g"==e&&"n"!=z("giiVRC"),"i"==e);Ya.reset(e);r.setEnable("i"==e);Wa.renderUtil();Wa.fixDisplay(!1,!0)}},/^(?:input|phases|scrType|preScrT?|isTrainScr|giiOri|timerSize|showAvg|showDiff|useMilli|smallADP|giiVRC|toolPos|scrHide|toolHide|statHide|useIns|showIns|col-timer)$/);
b("timer","ashow",function(a,b){n(!b)});b("timer","button",n.bind(null,!1));b("timer","session",n.bind(null,!1));b("timer","scrfix",n.bind(null,!1));$(window).bind("resize",n.bind(null,!1));Pa("vrc","vrcSpeed",1,PROPERTY_VRCSPEED,[100,[0,50,100,200,500,1E3],"∞ 20 10 5 2 1".split(" ")],1);Pa("vrc","vrcOri",-2,"PROPERTY_VRCORI",["6,12",["6,12","10,11"],["UF","URF"]],1);Pa("vrc","vrcMP",1,PROPERTY_VRCMP,["n","n cfop fp cf4op cf4o2p2 roux".split(" "),PROPERTY_VRCMPS.split("|")],1);Pa("vrc","vrcAH",1,
PROPERTY_VRCAH,["01",["00","01","10","11"],PROPERTY_VRCAHS.split("|")],1);Pa("vrc","giiMode",1,PROPERTY_GIIMODE,["n",["n","t"],PROPERTY_GIIMODES.split("|")],1);Pa("vrc","giiVRC",1,PROPERTY_GIIKERVRC,["v",["n","v","q","ql","q2"],["None","Virtual","qCube","qLast","q2Look"]],1);Pa("vrc","giiOri",1,PROPERTY_GIIORI,["auto","auto 0 3 2 1 4 5 6 7 23 14 19 8 17 10 21 12 11 22 13 18 15 16 9 20".split(" "),"auto;(UF);(UR) y;(UB) y2;(UL) y';(DF) z2;(DL) z2 y;(DB) z2 y2;(DR) z2 y';(RF) z';(RD) z' y;(RB) z' y2;(RU) z' y';(LF) z;(LU) z y;(LB) z y2;(LD) z y';(BU) x';(BR) x' y;(BD) x' y2;(BL) x' y';(FD) x;(FR) x y;(FU) x y2;(FL) x y'".split(";")],
1);Pa("vrc","giiSD",1,PROPERTY_GIISOK_DELAY,["s","2345ns".split(""),PROPERTY_GIISOK_DELAYS.split("|")],1);Pa("vrc","giiSK",0,PROPERTY_GIISOK_KEY,[!0],1);Pa("vrc","giiSM",1,PROPERTY_GIISOK_MOVE,["n",["x4","xi2","n"],PROPERTY_GIISOK_MOVES.split("|")],1);Pa("vrc","giiBS",0,PROPERTY_GIISBEEP,[!0],1);Pa("vrc","giiRST",1,PROPERTY_GIIRST,["p",["a","p","n"],PROPERTY_GIIRSTS.split("|")]);Pa("vrc","giiAED",0,PROPERTY_GIIAED,[!1]);Pa("timer","useMouse",0,PROPERTY_USEMOUSE,[!1],1);Pa("timer","useIns",1,PROPERTY_USEINS,
["n",["a","b","n"],PROPERTY_USEINS_STR.split("|")],1);Pa("timer","showIns",0,PROPERTY_SHOWINS,[!0],1);Pa("timer","voiceIns",1,PROPERTY_VOICEINS,["1",["n","1","2"],PROPERTY_VOICEINS_STR.split("|")],1);Pa("timer","voiceVol",2,PROPERTY_VOICEVOL,[100,1,100],1);Pa("timer","input",1,PROPERTY_ENTERING,["t","tismvgqbl".split(""),PROPERTY_ENTERING_STR.split("|")],1);Pa("timer","intUN",1,PROPERTY_INTUNIT,[20100,[1,100,1E3,10001,10100,11E3,20001,20100,21E3],"X X.XX X.XXX X:XX X:XX.XX X:XX.XXX X:XX:XX X:XX:XX.XX X:XX:XX.XXX".split(" ")],
1);Pa("timer","timeU",1,PROPERTY_TIMEU,["c",["u","c","s","i","n"],PROPERTY_TIMEU_STR.split("|")],1);Pa("timer","preTime",1,PROPERTY_PRETIME,[300,[0,300,550,1E3],["0","0.3","0.55","1"]],1);Pa("timer","phases",2,PROPERTY_PHASES,[1,1,10],3);Pa("kernel","showAvg",0,SHOW_AVG_LABEL,[!0],1);Pa("kernel","showDiff",1,SHOW_DIFF_LABEL,["rg",["rg","gr","b","n"],SHOW_DIFF_LABEL_STR.split("|")],1);Pa("ui","timerSize",2,PROPERTY_TIMERSIZE,[20,1,100],1);Pa("ui","smallADP",0,PROPERTY_SMALLADP,[!0],1);Sa=kernel.getProp("col-timer",
"#f00#0d0#dd0#080#f00").match(/#[0-9a-fA-F]{3}/g)});var hb;return{onkeydown:function(a){if(!c.isPop()){var b=y(a),e=$(document.activeElement);if(e.is("input, textarea, select"))if("i"==z("input")&&"inputTimer"==e.prop("id"))13==b&&r.parseInput();else return;else e.blur();-1==x&&27==b&&Wa.renderUtil(!0);switch(z("input")){case "t":case "l":Ya.onkeydown(b,a);break;case "s":h.onkeydown(b,a);break;case "b":Va.onkeydown(b,a);break;case "i":r.onkeydown(b,a);break;case "v":case "q":bb.onkeydown(b,a);break;
case "g":ab.onkeydown(b,a)}}},onkeyup:function(a){if(!c.isPop()){var b=y(a),e=$(document.activeElement);if(e.is("input, textarea, select"))if("i"==z("input")&&"inputTimer"==e.prop("id"))13==b&&r.clear();else return;else e.blur();switch(z("input")){case "t":case "l":Ya.onkeyup(b,a);break;case "s":h.onkeyup(b,a);break;case "b":Va.onkeyup(b,a);break;case "i":r.onkeyup(b,a)}}},showAvgDiv:eb.showAvgDiv,refocus:function(){void 0!=hb?hb.focus():document.activeElement&&document.activeElement.blur&&document.activeElement.blur()},
getStatus:function(){return x},getCurTime:function(a){return 0<x?(a||$.now())-Ta:0},getStartTime:function(){return Ta||$.now()}}},[kernel.regListener,kernel.regProp,kernel.getProp,kernel.pretty,kernel.ui,kernel.pushSignal]);var scrMgr=function(b,Pa){function z(a,c,e){a=a||[[""]];c=c||[""];e=e||0;for(var f=0,n=-1,w=[],Na,z,Za=0;Za<e;Za++){do Na=b(a.length),z=b(a[Na].length),Na!=n&&(f=0,n=Na);while(0!=(f>>z&1));f|=1<<z;a[Na][z].constructor==Array?w.push(Pa(a[Na][z])+Pa(c)):w.push(a[Na][z]+Pa(c))}return w.join(" ")}function w(b,z,n){DEBUG&&console.log("[regscr]",b);if($.isArray(b))for(n=0;n<b.length;n++)c[b[n]]=z;else c[b]=z,void 0!=n&&(e[b]=n[0],a[b]=n[1],Na[b]=n[2]);return w}var c={blank:function(){return"N/A"}},e={},
a={},Na={};return{reg:w,scramblers:c,filters:e,probs:a,imgGens:Na,mega:z,formatScramble:function(a){return a.replace(/[$#]\{([^\}]+)\}/g,function(a,b){if("$"==a[0]){var e=[b];"["==b[0]&&(e=JSON.parse(b));return c[e[0]].apply(this,e)}return"#"==a[0]?z.apply(this,JSON.parse("["+b+"]")):""})},rndState:function(a,b){if(void 0!=b){var c=b.slice();void 0==a&&(a=c);if(0==b[0])return a.slice();for(var e=0;e<a.length;e++)a[e]||(c[e]=0);return mathlib.rndProb(c)}},fixCase:function(a,b){return void 0==a?mathlib.rndProb(b):
a}}}(mathlib.rn,mathlib.rndEl),scramble=execMain(function(b,Pa){function z(){kernel.blur();kernel.pushSignal("scrambling",hb);h.html(SCRAMBLE_SCRAMBLING+"...");cb=!hb||/^(remote|input$)/.exec(hb)?cb:hb;zb||(kb=hb,rb=ob,pb=db);zb=!1;rb&&vb.addClass("click").unbind("click").click(w);hb=gb.getSelected();db=~~r.val();kb!=hb&&kernel.setProp("scrType",hb);ob="";requestAnimFrame(Na);if(null!==document.getElementById("eventbox")){var a=document.getElementById("event");document.getElementById("eventbox").innerHTML=
a.options[a.selectedIndex].text;a=document.getElementById("event").options[document.getElementById("event").selectedIndex].text;"6x6x6"==a||"7x7x7"==a||"3x3 bld"==a||"3x3 fm"==a||"4x4 bld"==a||"5x5 bld"==a||"3x3 mbld"==a?(kernel.setProp("stat1t","1"),kernel.setProp("stat1l","3"),kernel.setProp("stat2t","1"),kernel.setProp("stat2l","15"),kernel.setProp("statal","mo3 mo15"),document.getElementById("time4").innerHTML="-",document.getElementById("sign14").innerHTML="-",document.getElementById("sign24").innerHTML=
"-",document.getElementById("time3").innerHTML="-",document.getElementById("sign13").innerHTML="-",document.getElementById("sign23").innerHTML="-"):(kernel.setProp("stat1t","0"),kernel.setProp("stat1l","5"),kernel.setProp("stat2t","0"),kernel.setProp("stat2l","50"),kernel.setProp("statal","ao5 ao50"),"-"==document.getElementById("time4").innerHTML&&(document.getElementById("time4").innerHTML="",document.getElementById("sign14").innerHTML="",document.getElementById("sign24").innerHTML="",document.getElementById("time3").innerHTML=
"",document.getElementById("sign13").innerHTML="",document.getElementById("sign23").innerHTML=""))}}function w(){zb=!0;h.html(a(kb,rb,pb,!0));vb.removeClass("click").unbind("click");void 0!=rb&&kernel.pushSignal("scrambleX",a(kb,rb,pb))}function c(){zb?(zb=!1,h.html(a(hb,ob,db,!0)),vb.addClass("click").unbind("click").click(w),kernel.pushSignal("scrambleX",a(hb,ob,db))):z()}function e(){if(ob){var a=kernel.getProp("scrClk","n");"c"==a?$.clipboardCopy(h.text())&&logohint.push("scramble copied"):"+"==
a&&c()}}function a(a,b,c,r,e){b=b||"";c=c||0;var f=/^\$T([a-zA-Z0-9]+)(-[0-9]+)?\$\s*(.*)$/.exec(b);f&&(a=f[1],b=f[3],c=~~f[2]);return r?(a=b.replace(/~/g,"").replace(/\\n/g,"\n").replace(/`([^`]*)`/g,"$1").length,a=kernel.getProp("scrASize")?Math.max(.25,Math.round(20*Math.pow(50/Math.max(a,10),.3))/20):1,h.css("font-size",a+"em"),DEBUG&&console.log("[scrFontSize]",a),b.replace(/~/g,"&nbsp;").replace(/\\n/g,"\n").replace(/`([^`]*)`/g,e||kernel.getProp("scrKeyM",!1)?"<u>$1</u>":"$1")):[a,b.replace(/~/g,
"").replace(/\\n/g,"\n").replace(/`([^`]*)`/g,"$1"),c]}function Na(){n();ob?(ob=ob.replace(/(\s*)$/,""),h.html(a(hb,ob,db,!0)),kernel.pushSignal("scramble",a(hb,ob,db))):h.html(SCRAMBLE_SCRAMBLING+"... ")}function f(a,b,c){yb&&!a[0].startsWith("nocache_")&&(csTimerWorker&&csTimerWorker.getScramble?xb=xb||csTimerWorker.getScramble(a,function(a,b){DEBUG&&console.log("[scrcache]",a+" cached by csTimerWorker");$a(a,b)}.bind(void 0,b)):c||(xb=xb||setTimeout(function(a,b){var c=Za[b[0]];$a(a,c.apply(c,
b))}.bind(void 0,b,a),500)))}function $a(a,b){var c=JSON.parse(localStorage.cachedScr||null)||{};$.isArray(c)&&(c={});c[a]=b;localStorage.cachedScr=JSON.stringify(c);xb=0}function n(){if(hb){ob="";var a=bb[hb]||hb;if("input"==a)ob=qb.next();else if(qb.clear(),a.startsWith("remote"))ob=Db.next(a);else if(Db.clear(),a in Za){var b=JSON.parse(localStorage.cachedScr||null)||{},c=JSON.stringify([a,db,ab[1]]);yb&&c in b&&!a.startsWith("nocache_")?(ob=b[c],delete b[c],localStorage.cachedScr=JSON.stringify(b)):
ob=Za[a](a,db,Qb(ab[1],Xa[a]));f([a,db,Qb(ab[1],Xa[a])],c)}else requestAnimFrame(Na)}}function y(){kernel.blur();var a=gb.getSelIdx();a=scrdata[a[0]][1][a[1]][2];r.val(Math.abs(a));r[0].disabled=0>=a;a=gb.getSelected();ab=JSON.parse(kernel.getProp("scrFlt",JSON.stringify([a,Ra[a]])));mb[0].disabled=r[0].disabled&&!(a in Ra);ab[0]!=a&&(ab=[a,Ra[a]&&mathlib.valuedArray(Ra[a].length,1)],kernel.setProp("scrFlt",JSON.stringify(ab),"session"))}function Qa(){y();z()}function x(){function a(){if(hb in Ra){for(var a=
mathlib.valuedArray(Ra[hb].length,1),c=!1,r=0;r<b.length;r++)b[r][0].checked?c=!0:a[r]=0;c?(ab=[hb,a],a=JSON.stringify(ab),kernel.getProp("scrFlt")!=a&&(h=!0,kernel.setProp("scrFlt",a))):alert(SCROPT_EMPTYALT);h&&z()}}Wa.empty();var b=[],c=[],h=!1;if(hb in Ra){var r=Ra[hb],e=Sa[hb],f=r;ab[0]==hb&&(f=ab[1]||r);Wa.append("<br>",eb,Ya,"<br><br>");for(var n={},w=0;w<r.length;w++){var Oa=r[w].indexOf("-");-1==Oa?n[r[w]]=[w]:(Oa=r[w].slice(0,Oa),n[Oa]=n[Oa]||[],n[Oa].push(w))}for(w=0;w<r.length;w++){Oa=
$('<input type="checkbox">').val(w);f[w]&&(Oa[0].checked=!0);b.push(Oa);Oa=$("<label>").append(Oa,r[w]);if(e){var x=$("<canvas>");x.width("5em");x.height("5em");Oa.append("<br>",x);e(w,x);Oa.addClass("bimg")}c.push(Oa)}var Va=function(a){var c=0;$.each(n[a],function(a,h){c+=b[h][0].checked?1:0});return c+"/"+n[a].length},y;for(y in n)1==n[y].length&&Wa.append(c[n[y][0]]);for(y in n)1!=n[y].length&&Wa.append($("<div>").attr("data",y).append($('<div class="sgrp">').append($("<span>").html(y+" "+Va(y)),
" | ",$('<span class="click">').html(SCROPT_BTNALL).click(function(){var a=$(this).parent().parent().attr("data");$.each(n[a],function(a,c){b[c][0].checked=!0});$(this).parent().children().first().html(a+" "+Va(a))})," | ",$('<span class="click">').html(SCROPT_BTNNONE).click(function(){var a=$(this).parent().parent().attr("data");$.each(n[a],function(a,c){b[c][0].checked=!1});$(this).parent().children().first().html(a+" "+Va(a))})," | ",$('<span class="click">[+]</span>').click(function(){$(this).parent().next().toggle()})),
$("<div>").append($.map(n[y],function(a){b[a].change(function(){var a=$(this).parent().parent().parent().attr("data");$(this).parent().parent().parent().find("span:first").html(a+" "+Va(a))});return c[a]}))));eb.unbind("click").click(function(){for(var a=0;a<b.length;a++)b[a][0].checked||(b[a][0].checked=!0),b[a].change()});Ya.unbind("click").click(function(){for(var a=0;a<b.length;a++)b[a][0].checked&&(b[a][0].checked=!1),b[a].change()})}kernel.showDialog([ib,a,null,a],"scropt",SCROPT_TITLE)}function Ua(b,
r){"time"==b?Ab?z():(h.empty(),kernel.pushSignal("scramble",["-","",0])):"property"==b?"scrSize"==r[0]?Va.css("font-size",r[1]/7+"em"):"scrMono"==r[0]?Oa.css("font-family",r[1]?"Monospace":"Arial"):"scrType"==r[0]?r[1]!=gb.getSelected()&&(gb.loadVal(r[1]),Qa()):"scrLim"==r[0]?r[1]?Va.addClass("limit"):Va.removeClass("limit"):"scrAlign"==r[0]?"c"==r[1]?Oa.css("text-align","center"):"l"==r[1]?Oa.css("text-align","left"):"r"==r[1]&&Oa.css("text-align","right"):"scrFast"==r[0]?(bb["444wca"]=r[1]?"444m":
"444wca","444wca"==hb&&z()):"scrKeyM"==r[0]?h.html(zb?a(kb,rb||"",pb||0,!0):a(hb,ob||"",db,!0)):"scrHide"==r[0]&&(r[1]?fb.hide():fb.show()):"button"==b&&"scramble"==r[0]?(Ab=r[1])&&""==h.html()&&z():"ctrl"==b&&"scramble"==r[0]?"last"==r[1]?w():"next"==r[1]&&c():"scrfix"==b&&r&&h.html(a(hb,r,db,!0,!0))}function Ta(a,b){for(var c=0;c<scrdata.length;c++)for(var h=0;h<scrdata[c][1].length;h++)if(scrdata[c][1][h][1]==a){b(c,h);return}}var Za=scrMgr.scramblers,Ra=scrMgr.filters,Xa=scrMgr.probs,Sa=scrMgr.imgGens,
Oa=$('<div id="scrambleDiv"/>'),fb=$("<div />").addClass("title"),lb=[$("<select />"),$('<select id = "event"/>')],gb=new kernel.TwoLvMenu(scrdata,Qa,lb[0],lb[1],"333"),mb=$('<input type="button" class="icon">').val(""),ib=$("<div>"),Wa=$('<div class="sflt">'),eb=$('<input type="button">').val(SCROPT_BTNALL),Ya=$('<input type="button">').val(SCROPT_BTNNONE),r=$('<input type="text" maxlength="3">'),h=$("<div>"),Va=$('<div id="scrambleTxt"/>'),bb={"333oh":"333","333ft":"333"},ab="",nb=$("<textarea />"),
hb,ob,db=0,kb,rb,pb=0,cb="333",zb=!1,vb=$("<span />").html(SCRAMBLE_LAST),wb=$("<span />").addClass("click").html(SCRAMBLE_NEXT).click(c),yb=!0,xb=0;$(function(){if(csTimerWorker&&csTimerWorker.getScramble){var a=['["444wca",40,null]'],b=JSON.parse(localStorage.cachedScr||null)||{};$.isArray(b)&&(b={});for(var c=0;c<a.length;c++)a[c]in b||setTimeout(f.bind(void 0,JSON.parse(a[c]),a[c],!0),2500+~~(5E3*Math.random()))}});var Db=function(){function a(){kernel.setProp("scrType",cb)}function b(a){if(!$.isArray(a))return!1;
c=a;return 0!=c.length}var c=[];return{next:function(h){for(var r=null;!r&&0!=c.length;)r=c.shift();if(r)return r;"remoteComp"==h?window.onlinecomp?onlinecomp.getScrambles().then(function(c){b(c)?requestAnimFrame(Na):a()},a):a():"remoteBattle"==h?window.battle?battle.getScrambles().then(function(c){b(c)?requestAnimFrame(Na):a()},a):a():"remoteURL"==h&&$.getJSON("https://cstimer.net/testRemoteScramble.php",function(c){b(c)?requestAnimFrame(Na):a()}).error(a);return""},clear:function(){c=[]}}}(),qb=
function(){function a(){var a=nb.val();if(a.match(/^\s*$/))a=!1;else{c=[];a=a.split("\n");for(var b=0;b<a.length;b++){var h=a[b];null==h.match(/^\s*$/)&&c.push(h.replace(/^\d+[\.\),]\s*/,""))}a=0!=c.length}a?Na():kernel.setProp("scrType",cb)}function b(){kernel.setProp("scrType",cb)}var c=[];return{next:function(){for(var h=null;!h&&0!=c.length;)h=c.shift();if(h)return h;nb.val("");kernel.showDialog([nb,a,b],"input",SCRAMBLE_INPUT);return""},clear:function(){c=[]}}}(),Ab=!1,Nb=function(){function a(){var a=
~~r.val();x="";for(var b=ob,c=f.val(),h=0;h<a;h++)n(),x+=c.replace("1",h+1)+ob+"\n";ob=b;e.text(x);e.select()}function b(a){if(x){a=new Blob([x],{type:"text/plain"});var b=$('<a class="click"/>').appendTo("body");b.attr("href",URL.createObjectURL(a));b.attr("download","Scrambles_"+mathlib.time2str(new Date/1E3,"%Y%M%D_%h%m%s")+".txt");b[0].click();b.remove()}}var c=$("<div />").css("text-align","center").css("font-size","0.7em"),h=$("<span />").addClass("click").html(SCRGEN_GEN),r=$('<input type="text" maxlength="3">').val(5),
e=$('<textarea rows="10" style="width: 100%" readonly />'),f=$('<select><option value="1. ">1. </option><option value="1) ">1) </option><option value="(1) ">(1) </option><option value=""></option></select>'),w=$('<span class="click">').html("Download");c.append(SCRGEN_NSCR,r,"&nbsp;",SCRGEN_PRE).append(f,"<br>",h," | ",w,"<br>",e);var x="";return function(r){r&&(r.empty().append(c.width(Oa.width()/2)),f.unbind("change").change(kernel.blur),h.unbind("click").click(a),w.unbind("click").click(b))}}(),
Qb=scrMgr.rndState;$(function(){kernel.regListener("scramble","time",Ua);kernel.regListener("scramble","property",Ua,/^scr(?:Size|Mono|Type|Lim|Align|Fast|KeyM|Hide)$/);kernel.regListener("scramble","button",Ua,/^scramble$/);kernel.regListener("scramble","ctrl",Ua,/^scramble$/);kernel.regListener("scramble","scrfix",Ua);kernel.regProp("scramble","scrSize",2,PROPERTY_SCRSIZE,[15,5,50],1);kernel.regProp("scramble","scrASize",0,PROPERTY_SCRASIZE,[!0],1);kernel.regProp("scramble","scrMono",0,PROPERTY_SCRMONO,
[!0],1);kernel.regProp("scramble","scrLim",0,PROPERTY_SCRLIM,[!1],1);kernel.regProp("scramble","scrAlign",1,PROPERTY_SCRALIGN,["c",["c","l","r"],PROPERTY_SCRALIGN_STR.split("|")],1);kernel.regProp("scramble","preScr",1,"pre-scramble",["",";y;y2;y';z2;z2 y;z2 y2;z2 y';z';z' y;z' y2;z' y';z;z y;z y2;z y';x';x' y;x' y2;x' y';x;x y;x y2;x y'".split(";"),"(UF);(UR) y;(UB) y2;(UL) y';(DF) z2;(DL) z2 y;(DB) z2 y2;(DR) z2 y';(RF) z';(RD) z' y;(RB) z' y2;(RU) z' y';(LF) z;(LU) z y;(LB) z y2;(LD) z y';(BU) x';(BR) x' y;(BD) x' y2;(BL) x' y';(FD) x;(FR) x y;(FU) x y2;(FL) x y'".split(";")],
1);kernel.regProp("scramble","preScrT",1,"training pre-scramble",["z2",";y;y2;y';z2;z2 y;z2 y2;z2 y';z';z' y;z' y2;z' y';z;z y;z y2;z y';x';x' y;x' y2;x' y';x;x y;x y2;x y'".split(";"),"(UF);(UR) y;(UB) y2;(UL) y';(DF) z2;(DL) z2 y;(DB) z2 y2;(DR) z2 y';(RF) z';(RD) z' y;(RB) z' y2;(RU) z' y';(LF) z;(LU) z y;(LB) z y2;(LD) z y';(BU) x';(BR) x' y;(BD) x' y2;(BL) x' y';(FD) x;(FR) x y;(FU) x y2;(FL) x y'".split(";")],1);kernel.regProp("scramble","scrFast",0,PROPERTY_SCRFAST,[!1]);kernel.regProp("scramble",
"scrKeyM",0,PROPERTY_SCRKEYM,[!1],1);kernel.regProp("scramble","scrClk",1,PROPERTY_SCRCLK,["n",["n","c","+"],PROPERTY_SCRCLK_STR.split("|")],1);kernel.regProp("scramble","scrType",-6,"Scramble Type",["333"],3);r.change(z);mb.click(x);ib.append($("<div>").append(SCRAMBLE_LENGTH+": ",r),Wa);fb.append($("<nobr>").append(lb[0]," ",lb[1]," ",mb)," <wbr>");fb.append($("<nobr>").append(vb,"/",wb,SCRAMBLE_SCRAMBLE));Oa.append(fb,Va.append(h).click(e));tools.regTool("scrgen",TOOLS_SCRGEN,Nb);Va.click(function(){fb.show();
kernel.blur();kernel.setProp("scrHide",!1)});kernel.regProp("ui","scrHide",-1,"Hide Scramble Selector",[!1]);kernel.addWindow("scramble",BUTTON_SCRAMBLE,Oa,!0,!0,3);y()});return{getTypeName:function(a){var b="";Ta(a,function(a,c){b=scrdata[a][0]+">"+scrdata[a][1][c][0]});return b},getTypeIdx:function(a){var b=1E300;Ta(a,function(a,c){b=100*a+c});return b},scrStd:a,setCacheEnable:function(a){yb=a}}},[mathlib.rn,mathlib.rndEl]);(function(b,Pa,z){function w(a,c){var e=f[a];switch(e.length){case 1:return b(e[0],[""],c);case 2:return b(e[0],e[1],c);case 3:return b(e[0],e[1],e[2])}}function c(b,c){var e=n[b],f=e[1],w=e[2],x=0,y=0,Sa=[],Oa=[["R","R'"],["R'","R"],["L","L'"],["L'","L"],["F'","F"],["F","F'"],["B","B'"],["B'","B"]],Na=["U","D"];e=e[0];for(var Qa=0;Qa<w.length;Qa++)Sa[Qa]=0;for(Qa=0;Qa<c;Qa++){for(var gb=!1;!gb;)for(var $a="",ib=0;ib<w.length;ib++){var Wa=Pa(4);Sa[ib]+=Wa;0!=Wa&&(gb=!0,$a+=" "+w[ib]+a[Wa-1])}gb=Pa(8);
ib=Pa(2);Wa=Pa(3);e+=$a+" "+Oa[gb][0]+" "+Na[ib]+a[Wa]+" "+Oa[gb][1];0==ib&&(x+=Wa+1);1==ib&&(y+=Wa+1)}for(Qa=0;Qa<w.length;Qa++)Wa=4-Sa[Qa]%4,4>Wa&&(e+=" "+w[Qa]+a[Wa-1]);x=4-x%4;y=4-y%4;4>x&&(e+=" U"+a[x-1]);4>y&&(e+=" D"+a[y-1]);return e+=" "+z(f)}function e(a,b){var c=$a[a].replace(/%l/g,b).replace(/%c/g,'["","2","\'"]');return scrMgr.formatScramble(c)}var a=["","2","'"],Na=["","2","'","2'"],f={111:[[["x"],["y"],["z"]],a],2223:[[["U"],["R"],["F"]],a],2226:[[[["U","D"]],[["R","L"]],[["F","B"]]],
a],"333o":[[["U","D"],["R","L"],["F","B"]],a],334:[[[["U","U'","U2"],["u","u'","u2"]],[["R2","L2","M2"]],[["F2","B2","S2"]]]],336:[[[["U","U'","U2"],["u","u'","u2"],["3u","3u2","3u'"]],[["R2","L2","M2"]],[["F2","B2","S2"]]]],888:[["U D u d 3u 3d 4u".split(" "),"R L r l 3r 3l 4r".split(" "),"F B f b 3f 3b 4f".split(" ")],a],999:[["U D u d 3u 3d 4u 4d".split(" "),"R L r l 3r 3l 4r 4l".split(" "),"F B f b 3f 3b 4f 4b".split(" ")],a],101010:[["U D u d 3u 3d 4u 4d 5u".split(" "),"R L r l 3r 3l 4r 4l 5r".split(" "),
"F B f b 3f 3b 4f 4b 5f".split(" ")],a],111111:[["U D u d 3u 3d 4u 4d 5u 5d".split(" "),"R L r l 3r 3l 4r 4l 5r 5l".split(" "),"F B f b 3f 3b 4f 4b 5f 5b".split(" ")],a],444:[[["U","D","u"],["R","L","r"],["F","B","f"]],a],"444m":[[["U","D","Uw"],["R","L","Rw"],["F","B","Fw"]],a],555:[[["U","D","u","d"],["R","L","r","l"],["F","B","f","b"]],a],"555wca":[[["U","D","Uw","Dw"],["R","L","Rw","Lw"],["F","B","Fw","Bw"]],a],"666p":[[["U","D","2U","2D","3U"],["R","L","2R","2L","3R"],["F","B","2F","2B","3F"]],
a],"666wca":[[["U","D","Uw","Dw","3Uw"],["R","L","Rw","Lw","3Rw"],["F","B","Fw","Bw","3Fw"]],a],"666s":[[["U","D","U&sup2;","D&sup2;","U&sup3;"],["R","L","R&sup2;","L&sup2;","R&sup3;"],["F","B","F&sup2;","B&sup2;","F&sup3;"]],a],"666si":[[["U","D","u","d","3u"],["R","L","r","l","3r"],["F","B","f","b","3f"]],a],"777p":[["U D 2U 2D 3U 3D".split(" "),"R L 2R 2L 3R 3L".split(" "),"F B 2F 2B 3F 3B".split(" ")],a],"777wca":[["U D Uw Dw 3Uw 3Dw".split(" "),"R L Rw Lw 3Rw 3Lw".split(" "),"F B Fw Bw 3Fw 3Bw".split(" ")],
a],"777s":[["U D U&sup2; D&sup2; U&sup3; D&sup3;".split(" "),"R L R&sup2; L&sup2; R&sup3; L&sup3;".split(" "),"F B F&sup2; B&sup2; F&sup3; B&sup3;".split(" ")],a],"777si":[["U D u d 3u 3d".split(" "),"R L r l 3r 3l".split(" "),"F B f b 3f 3b".split(" ")],a],cm3:[[[["U<","U>","U2"],["E<","E>","E2"],["D<","D>","D2"]],[["R^","Rv","R2"],["M^","Mv","M2"],["L^","Lv","L2"]]]],cm2:[[[["U<","U>","U2"],["D<","D>","D2"]],[["R^","Rv","R2"],["L^","Lv","L2"]]]],233:[[[["U","U'","U2"]],["R2","L2"],["F2","B2"]]],
fto:[[["U","D"],["F","B"],["L","BR"],["R","BL"]],["","'"]],gear:[[["U"],["R"],["F"]]," 2 3 4 5 6 ' 2' 3' 4' 5'".split(" ")],sfl:[[["R","L"],["U","D"]],a],ufo:[[["A"],["B"],["C"],[["U","U'","U2'","U2","U3"]]]],"2gen":[[["U"],["R"]],a],"2genl":[[["U"],["L"]],a],roux:[[["U"],["M"]],a],"3gen_F":[[["U"],["R"],["F"]],a],"3gen_L":[[["U"],["R","L"]],a],RrU:[[["U"],["R","r"]],a],RrUu:[[["U","u"],["R","r"]],a],minx2g:[[["U"],["R"]],Na],half:[[["U","D"],["R","L"],["F","B"]],["2"]],lsll:[[[["R U R'","R U2 R'",
"R U' R'"]],[["F' U F","F' U2 F","F' U' F"]],[["U","U2","U'"]]]],prco:[[["F","B"],["U","D"],["L","DBR"],["R","DBL"],["BL","DR"],["BR","DL"]],Na],skb:[[["R"],["L"],["B"],["U"]],["","'"]],ivy:[[["R"],["L"],["D"],["B"]],["","'"]],112:[[["R"],["R"]],a],eide:[[["OMG"],["WOW"],["WTF"],["WOO-HOO WOO-HOO MATYAS YES YES YAY YEEEEEEEEEEEES".split(" ")],["HAHA"],["XD"],[":D"],["LOL"]],["","","","!!!"]]},$a={sia113:'#{[["U","u"],["R","r"]],%c,%l} z2 #{[["U","u"],["R","r"]],%c,%l}',sia123:'#{[["U"],["R","r"]],%c,%l} z2 #{[["U"],["R","r"]],%c,%l}',
sia222:'#{[["U"],["R"],["F"]],%c,%l} z2 y #{[["U"],["R"],["F"]],%c,%l}',335:'#{[[["U","U\'","U2"],["D","D\'","D2"]],["R2","L2"],["F2","B2"]],0,%l} / ${333}',337:'#{[[["U","U\'","U2","u","u\'","u2","U u","U u\'","U u2","U\' u","U\' u\'","U\' u2","U2 u","U2 u\'","U2 u2"],["D","D\'","D2","d","d\'","d2","D d","D d\'","D d2","D\' d","D\' d\'","D\' d2","D2 d","D2 d\'","D2 d2"]],["R2","L2"],["F2","B2"]],0,%l} / ${333}',r234:"2) ${222so}\\n3) ${333}\\n4) ${[444,40]}",r2345:'${r234}\\n5) ${["555",60]}',r23456:'${r2345}\\n6) ${["666p",80]}',
r234567:'${r23456}\\n7) ${["777p",100]}',r234w:'2) ${222so}\\n3) ${333}\\n4) ${["444m",40]}',r2345w:'${r234w}\\n5) ${["555wca",60]}',r23456w:'${r2345w}\\n6) ${["666wca",80]}',r234567w:'${r23456w}\\n7) ${["777wca",100]}',rmngf:'${r2345w}\\n3oh) ${333}\\npyr) ${["pyrso",10]}\\n skb) ${skbso}\\nsq1) ${sqrs}\\nclk) ${clkwca}\\nmgm) ${["mgmp",70]}',"333ni":'${333}#{[[""]],["","Rw ","Rw2 ","Rw\' ","Fw ","Fw\' "],1}#{[[""]],["","Uw","Uw2","Uw\'"],1}',"444bld":'${444wca}#{[[""]],[""," x"," x2"," x\'"," z"," z\'"],1}#{[[""]],[""," y"," y2"," y\'"],1}',
"555bld":'${["555wca",%l]}#{[[""]],[""," 3Rw"," 3Rw2"," 3Rw\'"," 3Fw"," 3Fw\'"],1}#{[[""]],[""," 3Uw"," 3Uw2"," 3Uw\'"],1}'},n={"4edge":["r b2",["b2 r'","b2 U2 r U2 r U2 r U2 r"],["u"]],"5edge":["r R b B",["B' b' R' r'","B' b' R' U2 r U2 r U2 r U2 r"],["u","d"]],"6edge":["3r r 3b b",["3b' b' 3r' r'","3b' b' 3r' U2 r U2 r U2 r U2 r","3b' b' r' U2 3r U2 3r U2 3r U2 3r","3b' b' r2 U2 3r U2 3r U2 3r U2 3r U2 r"],["u","3u","d"]],"7edge":["3r r 3b b",["3b' b' 3r' r'","3b' b' 3r' U2 r U2 r U2 r U2 r","3b' b' r' U2 3r U2 3r U2 3r U2 3r",
"3b' b' r2 U2 3r U2 3r U2 3r U2 3r U2 r"],["u","3u","3d","d"]]},y;for(y in f)scrMgr.reg(y,w);for(y in $a)scrMgr.reg(y,e);for(y in n)scrMgr.reg(y,c);scrMgr.reg("cubennn",function(c,e){if(1>=e)return"N/A";for(var f=[[],[],[]],n=0;n<e-1;n++)0==n%2?(f[0].push((4>n?"":~~(n/2+1))+(2>n?"U":"u")),f[1].push((4>n?"":~~(n/2+1))+(2>n?"R":"r")),f[2].push((4>n?"":~~(n/2+1))+(2>n?"F":"f"))):(f[0].push((4>n?"":~~(n/2+1))+(2>n?"D":"d")),f[1].push((4>n?"":~~(n/2+1))+(2>n?"L":"l")),f[2].push((4>n?"":~~(n/2+1))+(2>n?
"B":"b")));return b(f,a,10*e)})})(scrMgr.mega,mathlib.rn,mathlib.rndEl);var scramble_333=function(b,Pa,z,w,c,e){function a(a){a.cp=[0,1,2,3,4,5,6,7];a.co=[0,0,0,0,0,0,0,0];a.ep=[0,1,2,3,4,5,6,7,8,9,10,11];a.eo=[0,0,0,0,0,0,0,0,0,0,0,0]}function Na(a,b,c){var h;for(h=0;8>h;++h){c.cp[h]=a.cp[b.cp[h]];var r=a.co[b.cp[h]];var e=b.co[h];var f=r;f+=3>r?e:6-e;f%=3;3<=r!==3<=e&&(f+=3);c.co[h]=f}}function f(){a(this)}function $a(b,c,h,r){a(this);z(this.cp,b);b=c;var e=0;for(c=6;0<=c;--c)e+=this.co[c]=b%3,b=~~(b/3);this.co[7]=(15-e)%3;Pa(this.ep,h,12);h=r;b=0;for(r=10;0<=r;--r)b^=
this.eo[r]=h&1,h>>=1;this.eo[11]=b}function n(a,b,c){var h;for(h=0;12>h;++h)c.ep[h]=a.ep[b.ep[h]],c.eo[h]=b.eo[h]^a.eo[b.ep[h]]}function y(){y=$.noop;var a,b;nb[0]=new $a(15120,0,119750400,0);nb[3]=new $a(21021,1494,323403417,0);nb[6]=new $a(8064,1236,29441808,550);nb[9]=new $a(9,0,5880,0);nb[12]=new $a(1230,412,2949660,0);nb[15]=new $a(224,137,328552,137);for(a=0;18>a;a+=3)for(b=0;2>b;++b)nb[a+b+1]=new f,n(nb[a+b],nb[a],nb[a+b+1]),Na(nb[a+b],nb[a],nb[a+b+1])}function Qa(){return Ra(0xffffffffffff,
0xffffffffffff,4294967295,4294967295)}function x(a){for(var b=0,c=0;c<a.length;c++)-1==a[c]&&b++;return b}function Ua(a,b,h){for(var r=0,e=0,f=0;f<a.length;f++)-1!=a[f]&&(r+=a[f]);r%=h;for(f=0;f<a.length-1;f++)-1==a[f]&&(1==b--?a[f]=((h<<4)-r)%h:(a[f]=c(h),r+=a[f])),e*=h,e+=a[f];return e}function Ta(a,h,r){for(var e=[0,1,2,3,4,5,6,7,8,9,10,11],f=0;f<a.length;f++)-1!=a[f]&&(e[a[f]]=-1);for(var n=f=0;f<e.length;f++)-1!=e[f]&&(e[n++]=e[f]);var Oa;for(f=0;f<a.length&&0<h;f++)if(-1==a[f]){n=c(h);for(a[f]=
e[n];11>n;n++)e[n]=e[n+1];2==h--&&(Oa=f)}w(b(a,a.length),a.length)==1-r&&(h=a[f-1],a[f-1]=a[Oa],a[Oa]=h);return b(a,a.length)}function Za(a,b){if("number"!==typeof a)return a;for(var c=[],h=0;h<b;h++){var r=a&15;c[h]=15==r?-1:r;a/=16}return c}function Ra(a,c,h,r,Oa,Va,Sa,z){y();Oa=Oa||cb;Va=Va||cb;a=Za(a,12);c=Za(c,12);h=Za(h,8);r=Za(r,8);var Ra="";do{var Ya=c.slice(),kb=a.slice(),Xa=r.slice(),bb=h.slice();Ya=Ua(Ya,x(Ya),2);Xa=Ua(Xa,x(Xa),3);var Qa=x(kb),Wa=x(bb);1==Qa&&(Ta(kb,Qa,-1),Qa=0);1==Wa&&
(Ta(bb,Wa,-1),Wa=0);0==Qa&&0==Wa?(kb=b(kb,12),bb=b(bb,8)):0!=Qa&&0==Wa?(bb=b(bb,8),kb=Ta(kb,Qa,w(bb,8))):(kb=0==Qa&&0!=Wa?b(kb,12):Ta(kb,Qa,-1),bb=Ta(bb,Wa,w(kb,12)));if(0!=bb+Xa+kb+Ya){Ra=new $a(bb,Xa,kb,Ya);kb=new f;bb=e(Va);Ya=e(Oa);for(Xa=0;Xa<bb.length;Xa++)Na(nb[bb[Xa]],Ra,kb),n(nb[bb[Xa]],Ra,kb),Qa=kb,kb=Ra,Ra=Qa;for(Xa=0;Xa<Ya.length;Xa++)Na(Ra,nb[Ya[Xa]],kb),n(Ra,nb[Ya[Xa]],kb),Qa=kb,kb=Ra,Ra=Qa;bb=Ra;kb=[];Ra=[85,82,70,68,76,66];for(Ya=0;54>Ya;++Ya)kb[Ya]=Ra[~~(Ya/9)];for(Wa=0;8>Wa;++Wa)for(Qa=
bb.cp[Wa],Ya=bb.co[Wa],Xa=0;3>Xa;++Xa)kb[hb[Wa][(Xa+Ya)%3]]=Ra[~~(hb[Qa][Xa]/9)];for(Wa=0;12>Wa;++Wa)for(Qa=bb.ep[Wa],Ya=bb.eo[Wa],Xa=0;2>Xa;++Xa)kb[ob[Wa][(Xa+Ya)%2]]=Ra[~~(ob[Qa][Xa]/9)];Ra=String.fromCharCode.apply(null,kb);Ra=(new min2phase.Search).solution(Ra,21,1E9,50,2,z,Sa)}}while(3>=Ra.length);return Ra.replace(/ +/g," ")}function Xa(){return Ra(0xffffffffffff,0xffffffffffff,1985229328,0)}function Sa(){return Ra(0xba9876543210,0,4294967295,4294967295)}function Oa(){return Ra(0xba987654ffff,
65535,1985282047,65535)}function fb(a,b,c){a=zb[scrMgr.fixCase(c,vb)][0];b=Math.pow(16,a&15);c=Math.pow(16,a>>8&15);return Ra(0xba9f7654ffff-7*b,64424574975-(15^a>>4&1)*b,1986002943-11*c,1048575-(15^a>>12&3)*c,kb)}function lb(a,b,c,h,r){var e=b[scrMgr.fixCase(h,c)][0];b=[[5,10],[7,19],[3,-1],[1,-1],null,null,null,null,[23,12]][e&15];c=e>>4&1;h=[[8,20,9],[6,-1,18],[0,-1,-1],[2,11,-1],[-1,15,26]][e>>8&15];e=e>>12&3;a=a.split("");for(var f=0;3>f;f++)2>f&&0<=b[f]&&(a[b[f]]="BR".charAt(c^f)),0<=h[f]&&
(a[h[f]]="URB".charAt((e+3+f)%3));image.face3Image(a.join(""),r)}function gb(){return Ra(0xffff7654ffff,0xffff0000ffff,4294967295,4294967295)}function mb(a,b,c){a=Gb[scrMgr.fixCase(c,Cb)];return Ra(0xba987654ffff,0,a[0]+1985216512,a[1],kb,kb)}function ib(a,b,h){a=Gb[scrMgr.fixCase(h,Cb)];b=c(4);h=[];for(var r=0;r<kb.length;r++)h.push(kb[r].concat(rb[b]));return Ra(0xba98f6f4ffff,4042326015,a[0]+1985216512,a[1],h,kb)+pb[b]}function Wa(a,b,c){a=Gb[b][2].replace(/e/g,a||"U");image.llImage.drawImage(a,
null,c)}function eb(){return Ra(0xba9876543f1f,0,1985282047,65535,kb)}function Ya(a,b,c){a=sb[scrMgr.fixCase(c,Mb)];return Ra(0xba9876540000+a[1],0,1984954368+a[0],0,kb,kb)}function r(){var a=c(4);return Ra(0xba98f6f4ffff,4042326015,1985229328,0,[rb[a]],kb)+pb[a]}function h(a,b,c){a=Gb[scrMgr.fixCase(c,Cb)];return Ra(0xba987654ffff,65535,a[0]+1985216512,a[1],kb,kb)}function Va(){return Ra(0xba987654ffff,65535,1985229328,0)}function bb(a,b){var c=Vb[a].slice(1);2==c.length&&(c=c.concat([[c[0][1],c[0][0]],
[c[1][1],c[1][0]]]));c=["DDDDDDDDD"+Vb[a][0],c];if(!b)return c.concat([Rb[a]]);image.llImage.drawImage(c[0],c[1],b)}function ab(a,b){for(var c="",h=Kb[a],r=0;21>r;r++)4==r?c+="D":(c+=h&1?"D":"G",h>>=1);if(!b)return[c,null,Jb[a]];image.llImage.drawImage(c,null,b)}$a.prototype=f.prototype;for(var nb=[],hb=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],ob=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]],db=new min2phase.Search,
kb=[[],[0],[1],[2]],rb=[[],[3,14],[4,13],[5,12]],pb=["","x'","x2","x"],cb=[[]],zb=[[8192,4,"Easy-01"],[4113,4,"Easy-02"],[8210,4,"Easy-03"],[4099,4,"Easy-04"],[8195,4,"RE-05"],[4114,4,"RE-06"],[8194,4,"RE-07"],[4115,4,"RE-08"],[8211,4,"REFC-09"],[4098,4,"REFC-10"],[8208,4,"REFC-11"],[4097,4,"REFC-12"],[8209,4,"REFC-13"],[4096,4,"REFC-14"],[8193,4,"SPGO-15"],[4112,4,"SPGO-16"],[0,4,"SPGO-17"],[17,4,"SPGO-18"],[3,4,"PMS-19"],[18,4,"PMS-20"],[2,4,"PMS-21"],[19,4,"PMS-22"],[1,4,"Weird-23"],[16,4,"Weird-24"],
[1024,4,"CPEU-25"],[1041,4,"CPEU-26"],[5120,4,"CPEU-27"],[9233,4,"CPEU-28"],[5137,4,"CPEU-29"],[9216,4,"CPEU-30"],[24,4,"EPCU-31"],[8,4,"EPCU-32"],[8200,4,"EPCU-33"],[4104,4,"EPCU-34"],[8216,4,"EPCU-35"],[4120,4,"EPCU-36"],[1048,1,"ECP-37"],[5128,1,"ECP-38"],[9224,1,"ECP-39"],[5144,1,"ECP-40"],[9240,1,"ECP-41"],[1032,1,"Solved-42"]],vb=mathlib.idxArray(zb,1),wb=mathlib.idxArray(zb,2),yb=[],xb=[],Db=[],qb=0;qb<zb.length;qb++)zb[qb][0]&240||(yb.push(zb[qb]),xb.push(vb[qb]),Db.push(wb[qb]));var Ab=[],
Nb=[];for(qb=0;27>qb;qb++)Ab[qb]=~~(qb/9)<<12|~~(qb/3)%3<<8|qb%3,Nb[qb]=1;var Qb=[],Lb=[],Pb=[];for(qb=0;216>qb;qb++){var Fb=qb%27,ub=~~(qb/27);Qb[qb]=[~~(Fb/9)%3<<12|~~(Fb/3)%3<<8|Fb%3,(ub>>2&1)<<12|(ub>>1&1)<<8|ub&1];Lb[qb]=1;Pb[qb]="WVLS;UB;UF;UF UB;UL;UB UL;UF UL;No Edge".split(";")[ub]+"-"+(Fb+1)}var Gb=[[12816,8481,"FeFeeeBeBLGRDGDRGLDGD",2,"H-1"],[8961,4626,"ReLeeeReLBGBDGDFGFDGD",2,"H-2"],[4611,4626,"ReBeeeLeBFGRDGDLGFDGD",4,"H-3"],[8211,4626,"LeReeeFeFRGLDGDBGBDGD",4,"H-4"],[12321,4128,"DeLeeeReDBGRFGBDGFLGD",
4,"L-1"],[4611,513,"DeReeeLeDFDBRDFDGLBGD",4,"L-2"],[8961,258,"DeBeeeLeDFGRFGRDGLBGD",4,"L-3"],[12816,4128,"DeLeeeFeDRGFLGBDGBRGD",4,"L-4"],[12546,4128,"DeLeeeLeDFGBRGBDGRFGD",4,"L-5"],[8211,513,"DeReeeReDBGLBGFDGFLGD",4,"L-6"],[12816,4386,"LeFeeeReFBGDRGLDGBDGD",4,"Pi-1"],[8961,8466,"FeLeeeFeRRGDBGBDGLDGD",4,"Pi-2"],[4611,4641,"ReLeeeReLBGDFGBDGFDGD",4,"Pi-3"],[12546,4386,"BeFeeeFeBRGDLGLDGRDGD",4,"Pi-4"],[8211,4641,"BeLeeeLeFFGDRGBDGRDGD",4,"Pi-5"],[12321,4386,"BeReeeLeBFGDLGFDGRDGD",4,"Pi-6"],
[12816,8736,"ReBeeeFeDRGFLGDLGDBGD",4,"S-1"],[8961,546,"BeReeeLeDFGRFGDBGDLGD",4,"S-2"],[12321,8736,"BeReeeFeDRGFLGDBGDLGD",4,"S-3"],[8211,8706,"ReBeeeLeDFGRFGDLGDBGD",4,"S-4"],[12546,8736,"FeBeeeLeDFGBRGDLGDRGD",4,"S-5"],[4611,8706,"LeReeeFeDRGLBGDBGDFGD",4,"S-6"],[4611,4098,"BeLeeeDeDBGRFGDFGRDGL",4,"T-1"],[12546,8448,"ReBeeeDeDLGBRGDLGFDGF",4,"T-2"],[8961,528,"BeFeeeDeDBGFLGDRGRDGL",4,"T-3"],[12816,8448,"FeFeeeDeDBGBRGDRGLDGL",4,"T-4"],[8211,4098,"BeBeeeDeDLGRFGDLGRDGF",4,"T-5"],[12321,8448,"FeBeeeDeDRGRFGDLGLDGB",
4,"T-6"],[8961,288,"LeLeeeDeDFGBRGBDGDFGR",4,"U-1"],[12816,4608,"LeReeeDeDBGBRGFDGDFGL",4,"U-2"],[12321,4608,"FeFeeeDeDBGBRGLDGDRGL",4,"U-3"],[8211,8193,"BeFeeeDeDFGBRGLDGDLGR",4,"U-4"],[4611,8193,"ReFeeeDeDBGRFGLDGDBGL",4,"U-5"],[12546,4608,"LeBeeeDeDBGRFGRDGDFGL",4,"U-6"],[12816,4353,"LeFeeeDeRRGFDGLDGBDGB",4,"aS-1"],[8961,4368,"ReFeeeDeLRGBDGLDGFDGB",4,"aS-2"],[12321,4353,"LeBeeeDeFFGLDGRDGBDGR",4,"aS-3"],[8211,4113,"LeFeeeDeBFGRDGLDGBDGR",4,"aS-4"],[4611,4113,"FeBeeeDeLFGBDGRDGLDGR",4,"aS-5"],
[12546,4353,"FeBeeeDeRBGFDGRDGLDGL",4,"aS-6"],[12321,0,"DeDeeeDeDBGRFGBRGFLGL",4,"O-Adj"],[8961,0,"DeDeeeDeDBGFLGRFGBRGL",1,"O-Diag"],[12816,0,"DeDeeeDeDBGBRGRFGFLGL",1,"O-AUF"]],Cb=mathlib.idxArray(Gb,3);Fb=mathlib.idxArray(Gb,4);var sb=[[205840,12816,"FBar-1"],[205840,12546,"FBar-2"],[205840,12321,"FBar-3"],[205840,8961,"FBar-4"],[205840,8496,"FBar-5"],[205840,8211,"FBar-6"],[205840,4896,"FBar-7"],[205840,4611,"FBar-8"],[205840,4146,"FBar-9"],[205840,786,"FBar-10"],[205840,561,"FBar-11"],[205840,
291,"FBar-12"],[205825,12801,"2Opp-1"],[205825,12576,"2Opp-2"],[205825,12306,"2Opp-3"],[205825,8976,"2Opp-4"],[205825,8451,"2Opp-5"],[205825,8241,"2Opp-6"],[205825,4866,"2Opp-7"],[205825,4656,"2Opp-8"],[205825,4131,"2Opp-9"],[205825,801,"2Opp-10"],[205825,531,"2Opp-11"],[205825,306,"2Opp-12"],[201760,12801,"ROpp-1"],[201760,12576,"ROpp-2"],[201760,12306,"ROpp-3"],[201760,8976,"ROpp-4"],[201760,8451,"ROpp-5"],[201760,8241,"ROpp-6"],[201760,4866,"ROpp-7"],[201760,4656,"ROpp-8"],[201760,4131,"ROpp-9"],
[201760,801,"ROpp-10"],[201760,531,"ROpp-11"],[201760,306,"ROpp-12"],[201730,12816,"RBar-1"],[201730,12546,"RBar-2"],[201730,12321,"RBar-3"],[201730,8961,"RBar-4"],[201730,8496,"RBar-5"],[201730,8211,"RBar-6"],[201730,4896,"RBar-7"],[201730,4611,"RBar-8"],[201730,4146,"RBar-9"],[201730,786,"RBar-10"],[201730,561,"RBar-11"],[201730,291,"RBar-12"],[197665,12816,"2Bar-1"],[197665,12546,"2Bar-2"],[197665,12321,"2Bar-3"],[197665,8961,"2Bar-4"],[197665,8496,"2Bar-5"],[197665,8211,"2Bar-6"],[197665,4896,
"2Bar-7"],[197665,4611,"2Bar-8"],[197665,4146,"2Bar-9"],[197665,786,"2Bar-10"],[197665,561,"2Bar-11"],[197665,291,"2Bar-12"],[197650,12801,"FOpp-1"],[197650,12576,"FOpp-2"],[197650,12306,"FOpp-3"],[197650,8976,"FOpp-4"],[197650,8451,"FOpp-5"],[197650,8241,"FOpp-6"],[197650,4866,"FOpp-7"],[197650,4656,"FOpp-8"],[197650,4131,"FOpp-9"],[197650,801,"FOpp-10"],[197650,531,"FOpp-11"],[197650,306,"FOpp-12"]],Mb=[],Bb=[];for(qb=0;qb<sb.length;qb++)Mb[qb]=1,Bb[qb]=sb[qb][2];var tb=[[4146,12816],[12546,12816],
[12321,12816],[8961,12816],[12816,12321],[12816,12546],[12816,8961],[12306,12801],[8496,12321],[4896,12546],[12321,12546],[12546,12321],[12801,12801],[12576,12801],[4656,12306],[12306,12306],[531,12801],[8976,12801],[4656,12801],[12576,12306],[12801,12306]],Hb=[1,4,4,2,4,4,2,4,4,4,4,4,4,4,1,1,4,4,4,4,4],Rb="H Ua Ub Z Aa Ab E F Ga Gb Gc Gd Ja Jb Na Nb Ra Rb T V Y".split(" "),Vb=[["BFBRLRFBFLRL",[1,7],[3,5]],["BRBRLRFFFLBL",[3,7],[7,5],[5,3]],["BLBRBRFFFLRL",[3,5],[5,7],[7,3]],["LFLBRBRBRFLF",[1,5],
[3,7]],["LBBRRLBFRFLF",[0,2],[2,6],[6,0]],["RBFLRRFFLBLB",[0,6],[6,8],[8,0]],["LBRFRBRFLBLF",[0,6],[2,8]],["BFRFRBRBFLLL",[1,7],[2,8]],["BRRFLBRBFLFL"],["BFRFBBRLFLRL"],["BFRFLBRRFLBL"],["BLRFFBRBFLRL"],["BBRFFBRRFLLL",[1,5],[2,8]],["LBBRLLBRRFFF",[2,8],[5,7]],["FBBRLLBFFLRR",[2,6],[3,5]],["BBFLLRFFBRRL",[0,8],[3,5]],["LLBRBLBFRFRF",[1,3],[2,8]],["RBFLFRFLLBRB",[2,8],[3,7]],["BBRFLBRFFLRL",[2,8],[3,5]],["BBFLFRFRBRLL",[0,8],[1,5]],["BBFLRRFLBRFL",[0,8],[1,3]]],Tb=[[0,0],[4369,4626],[4369,4386],[4369,
546],[4369,273],[17,8226],[17,4113],[17,8706],[17,273],[17,4368],[17,8736],[17,546],[17,4353],[257,8226],[257,273],[257,546],[257,4113],[4369,258],[4369,18],[4369,33],[4369,0],[0,4626],[0,4386],[0,18],[0,33],[0,258],[0,273],[0,546],[17,0],[17,528],[17,8448],[17,33],[17,4098],[257,33],[257,528],[17,4128],[17,258],[17,8208],[17,513],[257,4128],[257,258],[17,4608],[17,288],[17,18],[17,8193],[257,18],[257,288],[17,4641],[17,4386],[17,8466],[17,8721],[257,4641],[257,4386],[17,8481],[17,4626],[257,8481],
[257,4626],[257,0]],Ob=[1,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,2,2,2],Jb="PLL Point-1 Point-2 Point-3 Point-4 Square-5 Square-6 SLBS-7 SLBS-8 Fish-9 Fish-10 SLBS-11 SLBS-12 Knight-13 Knight-14 Knight-15 Knight-16 Point-17 Point-18 Point-19 CO-20 OCLL-21 OCLL-22 OCLL-23 OCLL-24 OCLL-25 OCLL-26 OCLL-27 CO-28 Awkward-29 Awkward-30 P-31 P-32 T-33 C-34 Fish-35 W-36 Fish-37 W-38 BLBS-39 BLBS-40 Awkward-41 Awkward-42 P-43 P-44 T-45 C-46 L-47 L-48 L-49 L-50 I-51 I-52 L-53 L-54 I-55 I-56 CO-57".split(" "),
Kb=[255,965120,907776,374304,447360,538123,396054,79402,410514,152458,627788,595470,281363,108088,181144,566809,166684,308097,300805,825861,299685,83290,672858,82170,66014,132222,133470,74874,4783,70542,144042,328598,22059,99228,172728,303569,803475,13195,72238,100924,574105,86698,38221,918166,14891,688796,276579,338706,677386,935442,967760,109336,342338,345874,87818,116504,698904,33469],Wb=[[],[9],[10],[11]],Sb=["","y","y2","y'"];ub="UR UF UL UB DR DF DL DB RF LF LB RB URF UFL ULB UBR DFR DLF DBL DRB".split(" ");
for(qb=0;20>qb;qb++){var Xb=ub[qb];ub[qb+20]=(2==Xb.length?"OriE-":"OriC-")+Xb;ub[qb]=(2==Xb.length?"PermE-":"PermC-")+Xb}qb=mathlib.valuedArray(40,0);scrMgr.reg("333",Qa)("333fm",function(){return"R' U' F "+Ra(0xffffffffffff,0xffffffffffff,4294967295,4294967295,void 0,void 0,2,1)+"R' U' F"})("edges",Xa)("corners",Sa)("333custom",function(a,b,c){var h=b=a=0,r=0,e=4352;c=c||mathlib.valuedArray(40,1);for(var f=0;12>f;f++)e+=(c[f]?69632:0)+(c[f+20]?16:0),a+=(c[f]?15:f)*Math.pow(16,f),b+=(c[f+20]?15:
0)*Math.pow(16,f);for(f=0;8>f;f++)e+=(c[f+12]?65792:0)+(c[f+32]?1:0),h+=(c[f+12]?15:f)*Math.pow(16,f),r+=(c[f+32]?15:0)*Math.pow(16,f);return 0==(e&1887470)?"U' U ":Ra(a,b,h,r)},[ub,qb])("ll",Oa)("lsll2",fb,[wb,vb,lb.bind(null,"GGGGDGGGGGGGGRRGRRGGGBBGBBG",zb,vb)])("f2l",gb)("zbll",mb,[Fb,Cb,Wa.bind(null,"D")])("zzll",eb)("zbls",fb,[wb,vb,lb.bind(null,"GGGGDGGGGGGGGRRGRRGGGBBGBBG",zb,vb)])("ttll",Ya,[Bb,Mb,function(a,b){for(var c=[],h=sb[a],r=3;0<=r;r--)c.push(["FR","LF","BL","RB","GG"][h[0]>>4*r&
15]),c.push("RFLB".charAt(h[1]>>4*r&15));c=c.join("");c=c.slice(7)+c.slice(0,7);c=["GDDDDDDDD"+c,null];if(!b)return c.concat([Bb[a]]);image.llImage.drawImage(c[0],c[1],b)}])("eols",function(a,b,c){a=yb[scrMgr.fixCase(c,xb)];b=Math.pow(16,a>>8&15);return Ra(0xba9f7654ffff-7*Math.pow(16,a&15),0,1986002943-11*b,1048575-(15^a>>12&3)*b,kb)},[Db,xb,lb.bind(null,"GDGDDDGDGGGGGRRGRRGGGBBDBBG",yb,xb)])("wvls",function(a,b,c){a=Ab[scrMgr.fixCase(c,Nb)];return Ra(0xba9f7654ff8f,0,1986002767,983072|a)},["Oriented Rectangle-1 Rectangle-2 Tank-1 Bowtie-1 Bowtie-3 Tank-2 Bowtie-2 Bowtie-4 Snake-1 Adjacent-1 Adjacent-2 Gun-Far Sune-1 Pi-Near Gun-Back Pi-Front H-Side Snake-2 Adjacent-3 Adjacent-4 Gun-Sides H-Front Pi-Back Gun-Near Pi-Far Sune-2".split(" "),
Nb,function(a,b){var c=Ab[scrMgr.fixCase(a,Nb)],h=["DGG","GDG","GGD"];h=h[c&3]+h[c>>8&3]+h[c>>12&3];image.llImage.drawImage("3D6DDDBB0RR21G87G54GU".replace(/[0-9]/g,function(a){return h[~~a]}),null,b)}])("vls",function(a,b,c){a=Qb[scrMgr.fixCase(c,Lb)];return Ra(0xba9f7654ff8f,64424509440+a[1],1986002767,983072+a[0],[[2]])},[Pb,Lb,function(a,b){var c=Qb[scrMgr.fixCase(a,Lb)],h=["DGG","GDG","GGD"];h=h[c[0]&3]+h[c[0]>>8&3]+h[c[0]>>12&3];var r=["DG","GD"];r=r[c[1]&3]+r[c[1]>>8&3]+r[c[1]>>12&3];image.llImage.drawImage("6a0eDR3cR4dUFF21b87f5".replace(/[0-9]/g,
function(a){return h[~~a]}).replace(/[a-z]/g,function(a){return r[a.charCodeAt(0)-97]}),null,b)}])("lse",r)("cmll",ib,[Fb,Cb,Wa.bind(null,"G")])("cll",h,[Fb,Cb,Wa.bind(null,"G")])("coll",mb,[Fb,Cb,Wa.bind(null,"D")])("ell",Va)("pll",function(a,b,c){a=tb[scrMgr.fixCase(c,Hb)];return Ra(a[0]+0xba9876540000,0,a[1]+1985216512,0,kb,kb)},[Rb,Hb,bb])("oll",function(a,b,c){a=Tb[scrMgr.fixCase(c,Ob)];return Ra(0xba987654ffff,a[0],1985282047,a[1],kb,kb)},[Jb,Ob,ab])("2gll",function(){return Ra(0xba987654ffff,
0,1985229328,65535,kb)})("sbrx",function(a,b,h){a=c(4);return Ra(0xfa9ff6ffffff,0xf00ff0ffffff,4133486591,4027580415,[rb[a]])+pb[a]})("mt3qb",function(){var a=mathlib.rn(4);return Ra(0xffff765fffff,0xffff000fffff,4133486591,4027580415,[Wb[a]])+Sb[a]})("mteole",function(){var a=mathlib.rn(4),b=mathlib.rn(4);return Ra(0xba98765fffff+4294967296*(17767&15<<4*a),1048575+4294967296*(15<<4*a),4133486591,4027580415,[Wb[b]])+Sb[b]})("mttdr",function(){return Ra(0xba98765fffff,0,4133486591,4027580415)})("mt6cp",
function(){return Ra(0xba98765fffff,0,4133486591,0)})("mtl5ep",function(){return Ra(0xba98765fffff,0,1985229328,0)})("mtcdrll",function(){return Ra(0xba98765fffff,0,1985282047,65535)})("easyc",function(a,b){var c=cross.getEasyCross(b);return Ra(c[0],c[1],4294967295,4294967295)})("easyxc",function(a,b){var c=cross.getEasyXCross(b);return Ra(c[0],c[1],c[2],c[3])})("eoline",function(){return Ra(0xffff7f5fffff,0,4294967295,4294967295)});return{getRandomScramble:Qa,getEdgeScramble:Xa,getCornerScramble:Sa,
getLLScramble:Oa,getLSLLScramble:fb,getZBLLScramble:mb,getZZLLScramble:eb,getTTLLScramble:Ya,getF2LScramble:gb,getLSEScramble:r,getCMLLScramble:ib,getCLLScramble:h,getELLScramble:Va,getAnyScramble:Ra,getPLLImage:bb,getOLLImage:ab,genFacelet:function(a){return db.solution(a,21,1E9,50,2)},solvFacelet:function(a){return db.solution(a,21,1E9,50,0)}}}(mathlib.getNPerm,mathlib.setNPerm,mathlib.set8Perm,mathlib.getNParity,mathlib.rn,mathlib.rndEl);var scramble_444=function(b,Pa,z){function w(a,b){var c;var h=Array(a);if(void 0!=b)for(c=0;c<a;c++)h[c]=Array(b);return h}function c(a,b,c){var h=nc[a];h&&!h.___clazz$?Eb=h.prototype:(!h&&(h=nc[a]=function(){}),Eb=h.prototype=0>b?{}:new nc[b],Eb.castableTypeMap$=c);for(var r=3;r<arguments.length;++r)arguments[r].prototype=Eb;h.___clazz$&&(Eb.___clazz$=h.___clazz$,h.___clazz$=null)}function e(a){for(var b={},c=0,h=a.length;c<h;++c)b[a[c]]=1;return b}function a(){}function Na(){}function f(a,b){var c=
Array(b);if(3==a)for(var h=0;h<b;++h){var r={};r.l=r.m=r.h=0;c[h]=r}else if(0<a)for(r=[null,0,!1][a],h=0;h<b;++h)c[h]=r;return c}function $a(a,b,c,h,r){h=f(r,h);n(a,b,c,h);return h}function n(a,b,c,h){y();var r=Ec,e=Fc;y();for(var f=0,n=r.length;f<n;++f)h[r[f]]=e[f];h.___clazz$=a;h.castableTypeMap$=b;h.queryId$=c;return h}function y(){y=a;Ec=[];Fc=[];var b=new Na,c=Ec,h=Fc,r=0,e,f;for(f in b)if(e=b[f])c[r]=f,h[r]=e,++r}function Qa(){Qa=a;wc=w(15582,36);oc=w(15582);ac=w(15582);gc=w(48,48);bc=w(48,
36);hc=w(48);Gc=w(48)}function x(a,b){var c;if(null!=b&&b.castableTypeMap$&&b.castableTypeMap$[21]){for(c=0;24>c;++c)if(a.ct[c]!=b.ct[c])return!1;return!0}return!1}function Ua(a){var b;var c=0;var h=8;for(b=23;0<=b;--b)1==a.ct[b]&&(c+=Pa[b][h--]);return c}function Ta(a){var b;if(null!=ic)return ic[Ua(a)];for(b=0;48>b;++b){var c=Ua(a);a:{var h;var r=0;for(h=oc.length-1;r<=h;){var e=r+(~~(h-r)>>1);var f=oc[e];if(f<c)r=e+1;else if(f>c)h=e-1;else{c=e;break a}}c=-r-1}c=0<=c?c:-1;if(-1!=c)return 64*c+b;
Ra(a,0);1==b%2&&Ra(a,1);7==b%8&&Ra(a,2);15==b%16&&Ra(a,3)}}function Za(a,b){var c=b%3;switch(~~(b/3)){case 0:jb(a.ct,0,1,2,3,c);break;case 1:jb(a.ct,16,17,18,19,c);break;case 2:jb(a.ct,8,9,10,11,c);break;case 3:jb(a.ct,4,5,6,7,c);break;case 4:jb(a.ct,20,21,22,23,c);break;case 5:jb(a.ct,12,13,14,15,c);break;case 6:jb(a.ct,0,1,2,3,c);jb(a.ct,8,20,12,16,c);jb(a.ct,9,21,13,17,c);break;case 7:jb(a.ct,16,17,18,19,c);jb(a.ct,1,15,5,9,c);jb(a.ct,2,12,6,10,c);break;case 8:jb(a.ct,8,9,10,11,c);jb(a.ct,2,19,
4,21,c);jb(a.ct,3,16,5,22,c);break;case 9:jb(a.ct,4,5,6,7,c);jb(a.ct,10,18,14,22,c);jb(a.ct,11,19,15,23,c);break;case 10:jb(a.ct,20,21,22,23,c);jb(a.ct,0,8,4,14,c);jb(a.ct,3,11,7,13,c);break;case 11:jb(a.ct,12,13,14,15,c),jb(a.ct,1,20,7,18,c),jb(a.ct,0,23,6,17,c)}}function Ra(a,b){switch(b){case 0:Za(a,19);Za(a,28);break;case 1:Za(a,21);Za(a,32);break;case 2:jb(a.ct,0,3,1,2,1);jb(a.ct,8,11,9,10,1);jb(a.ct,4,7,5,6,1);jb(a.ct,12,15,13,14,1);jb(a.ct,16,19,21,22,1);jb(a.ct,17,18,20,23,1);break;case 3:Za(a,
18),Za(a,29),Za(a,24),Za(a,35)}}function Xa(a,b){var c;for(c=0;c<b;++c)Ra(a,0),1==c%2&&Ra(a,1),7==c%8&&Ra(a,2),15==c%16&&Ra(a,3)}function Sa(a,b){var c;var h=8;for(c=23;0<=c;--c)a.ct[c]=0,b>=Pa[c][h]&&(b-=Pa[c][h--],a.ct[c]=1)}function Oa(a,b){var c;for(c=0;24>c;++c)a.ct[c]=b.ct[c]}function fb(){var a;this.ct=w(24);for(a=0;8>a;++a)this.ct[a]=1;for(a=8;24>a;++a)this.ct[a]=0}function lb(a,b){var c;this.ct=w(24);for(c=0;24>c;++c)this.ct[c]=~~(a.ct[c]/2)==b?1:0}function gb(a){var b;this.ct=w(24);for(b=
0;24>b;++b)this.ct[b]=a[b]}function mb(){mb=a;xc=w(70,28);yc=w(6435,28);fd=w(70,16);gd=w(6435,16);Yb=w(450450);hd=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0,1,0,0,0]}function ib(a){var b;var c=0;var h=8;for(b=14;0<=b;--b)a.ct[b]!=a.ct[15]&&(c+=Pa[b][h--]);return c}function Wa(a){var b;var c=0;var h=4;for(b=6;0<=b;--b)a.rl[b]!=a.rl[7]&&(c+=Pa[b][h--]);return 2*c+a.parity}function eb(a,b){a.parity^=hd[b];var c=b%3;switch(~~(b/3)){case 0:jb(a.ct,0,1,2,3,c);break;case 1:jb(a.rl,
0,1,2,3,c);break;case 2:jb(a.ct,8,9,10,11,c);break;case 3:jb(a.ct,4,5,6,7,c);break;case 4:jb(a.rl,4,5,6,7,c);break;case 5:jb(a.ct,12,13,14,15,c);break;case 6:jb(a.ct,0,1,2,3,c);jb(a.rl,0,5,4,1,c);jb(a.ct,8,9,12,13,c);break;case 7:jb(a.rl,0,1,2,3,c);jb(a.ct,1,15,5,9,c);jb(a.ct,2,12,6,10,c);break;case 8:jb(a.ct,8,9,10,11,c);jb(a.rl,0,3,6,5,c);jb(a.ct,3,2,5,4,c);break;case 9:jb(a.ct,4,5,6,7,c);jb(a.rl,3,2,7,6,c);jb(a.ct,11,10,15,14,c);break;case 10:jb(a.rl,4,5,6,7,c);jb(a.ct,0,8,4,14,c);jb(a.ct,3,11,
7,13,c);break;case 11:jb(a.ct,12,13,14,15,c),jb(a.rl,1,4,7,2,c),jb(a.ct,1,0,7,6,c)}}function Ya(a,b){switch(b){case 0:eb(a,19);eb(a,28);break;case 1:eb(a,21);eb(a,32);break;case 2:jb(a.ct,0,3,1,2,1),jb(a.ct,8,11,9,10,1),jb(a.ct,4,7,5,6,1),jb(a.ct,12,15,13,14,1),jb(a.rl,0,3,5,6,1),jb(a.rl,1,2,4,7,1)}}function r(a,b,c){var h;for(h=0;16>h;++h)a.ct[h]=~~(b.ct[h]/2);for(h=0;8>h;++h)a.rl[h]=b.ct[h+16];a.parity=c}function h(a,b){var c;var h=8;a.ct[15]=0;for(c=14;0<=c;--c)b>=Pa[c][h]?(b-=Pa[c][h--],a.ct[c]=
1):a.ct[c]=0}function Va(a,b){var c;a.parity=b&1;b>>>=1;var h=4;a.rl[7]=0;for(c=6;0<=c;--c)b>=Pa[c][h]?(b-=Pa[c][h--],a.rl[c]=1):a.rl[c]=0}function bb(){this.rl=w(8);this.ct=w(16)}function ab(){ab=a;pc=w(29400,20);id=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1];dc=w(29400);Hc=[0,9,14,23,27,28,41,42,46,55,60,69];Ic=w(70)}function nb(a){var b;var c=0;var h=4;for(b=6;0<=b;--b)a.ud[b]!=a.ud[7]&&(c+=Pa[b][h--]);c*=35;h=4;for(b=6;0<=b;--b)a.fb[b]!=a.fb[7]&&(c+=Pa[b][h--]);var r=a.fb[7]^a.ud[7];var e=0;h=4;
for(b=7;0<=b;--b)a.rl[b]!=r&&(e+=Pa[b][h--]);return a.parity+2*(12*c+Ic[e])}function hb(a,b,c){var h;var r=b.ct[0]>b.ct[8]^b.ct[8]>b.ct[16]^b.ct[0]>b.ct[16]?1:0;for(h=0;8>h;++h)a.ud[h]=b.ct[h]&1^1,a.fb[h]=b.ct[h+8]&1^1,a.rl[h]=b.ct[h+16]&1^1^r;a.parity=r^c}function ob(){this.ud=w(8);this.rl=w(8);this.fb=w(8)}function db(){db=a}function kb(){var a;this.ct=w(24);for(a=0;24>a;++a)this.ct[a]=~~(a/4)}function rb(a){kb.call(this);for(a=0;23>a;++a){var c=a+b(24-a);if(this.ct[c]!=this.ct[a]){var h=this.ct[a];
this.ct[a]=this.ct[c];this.ct[c]=h}}}function pb(){pb=a;$b=w(18);var b,c;$b[0]=new yb(15120,0);$b[3]=new yb(21021,1494);$b[6]=new yb(8064,1236);$b[9]=new yb(9,0);$b[12]=new yb(1230,412);$b[15]=new yb(224,137);for(b=0;18>b;b+=3)for(c=0;2>c;++c)$b[b+c+1]=new wb,vb($b[b+c],$b[b],$b[b+c+1])}function cb(a){a.cp=[0,1,2,3,4,5,6,7];a.co=[0,0,0,0,0,0,0,0]}function zb(a,b){var c;for(c=0;8>c;++c)a.cp[c]=b.cp[c],a.co[c]=b.co[c]}function vb(a,b,c){var h;for(h=0;8>h;++h){c.cp[h]=a.cp[b.cp[h]];var r=a.co[b.cp[h]];
var e=b.co[h];var f=r;f+=3>r?e:6-e;f%=3;3<=r^3<=e&&(f+=3);c.co[h]=f}}function wb(){cb(this)}function yb(a,b){cb(this);mathlib.set8Perm(this.cp,a);var c=b,h;var r=0;for(h=6;0<=h;--h)r+=this.co[h]=c%3,c=~~(c/3);this.co[7]=(15-r)%3}function xb(a){yb.call(this,b(40320),b(2187))}function Db(){Db=a;cc=w(1937880);zc=w(1538);Ac=w(1538);jc=w(11880);jd=[0,1,6,3,4,5,2,7];Jc=w(160,12);Kc=w(160,12);Lc=[1,1,1,3,12,60,360,2520,20160,181440,1814400,19958400,239500800];Mc=[0,2,4,6,1,3,7,5,8,9,10,11]}function qb(a,
b,c,h,r){var e=a.edgeo[r];a.edgeo[r]=a.edge[h];a.edge[h]=a.edgeo[c];a.edgeo[c]=a.edge[b];a.edge[b]=e}function Ab(a,b){var c;a.isStd||Cb(a);var h=0;var r=1985229328;var e=47768;for(c=0;c<b;++c){var f=a.edge[c]<<2;h*=12-c;32<=f?(h+=e>>f-32&15,e-=4368<<f-32):(h+=r>>f&15,e-=4369,r-=286331152<<f)}return h}function Nb(a){var b=Ab(a,4);b=jc[b];var c=b&7;b>>=3;Pb(a,c);a=Ab(a,10)%20160;return 20160*b+a}function Qb(a,b){a.isStd=!1;switch(b){case 0:z(a.edge,0,4,1,5);z(a.edgeo,0,4,1,5);break;case 1:sb(a.edge,
0,4,1,5);sb(a.edgeo,0,4,1,5);break;case 2:z(a.edge,0,5,1,4);z(a.edgeo,0,5,1,4);break;case 3:sb(a.edge,5,10,6,11);sb(a.edgeo,5,10,6,11);break;case 4:z(a.edge,0,11,3,8);z(a.edgeo,0,11,3,8);break;case 5:sb(a.edge,0,11,3,8);sb(a.edgeo,0,11,3,8);break;case 6:z(a.edge,0,8,3,11);z(a.edgeo,0,8,3,11);break;case 7:z(a.edge,2,7,3,6);z(a.edgeo,2,7,3,6);break;case 8:sb(a.edge,2,7,3,6);sb(a.edgeo,2,7,3,6);break;case 9:z(a.edge,2,6,3,7);z(a.edgeo,2,6,3,7);break;case 10:sb(a.edge,4,8,7,9);sb(a.edgeo,4,8,7,9);break;
case 11:z(a.edge,1,9,2,10);z(a.edgeo,1,9,2,10);break;case 12:sb(a.edge,1,9,2,10);sb(a.edgeo,1,9,2,10);break;case 13:z(a.edge,1,10,2,9);z(a.edgeo,1,10,2,9);break;case 14:sb(a.edge,0,4,1,5);sb(a.edgeo,0,4,1,5);z(a.edge,9,11);z(a.edgeo,8,10);break;case 15:sb(a.edge,5,10,6,11);sb(a.edgeo,5,10,6,11);z(a.edge,1,3);z(a.edgeo,0,2);break;case 16:sb(a.edge,0,11,3,8);sb(a.edgeo,0,11,3,8);z(a.edge,5,7);z(a.edgeo,4,6);break;case 17:sb(a.edge,2,7,3,6);sb(a.edgeo,2,7,3,6);z(a.edge,8,10);z(a.edgeo,9,11);break;case 18:sb(a.edge,
4,8,7,9);sb(a.edgeo,4,8,7,9);z(a.edge,0,2);z(a.edgeo,1,3);break;case 19:sb(a.edge,1,9,2,10),sb(a.edgeo,1,9,2,10),z(a.edge,4,6),z(a.edgeo,5,7)}}function Lb(a,b){a.isStd=!1;switch(b){case 0:Qb(a,14);Qb(a,17);break;case 1:qb(a,11,5,10,6);qb(a,5,10,6,11);qb(a,1,2,3,0);qb(a,4,9,7,8);qb(a,8,4,9,7);qb(a,0,1,2,3);break;case 2:Mb(a,4,5),Mb(a,5,4),Mb(a,11,8),Mb(a,8,11),Mb(a,7,6),Mb(a,6,7),Mb(a,9,10),Mb(a,10,9),Mb(a,1,1),Mb(a,0,0),Mb(a,3,3),Mb(a,2,2)}}function Pb(a,b){for(;2<=b;)b-=2,Lb(a,1),Lb(a,2);0!=b&&Lb(a,
0)}function Fb(a,b){var c,h;var r=1985229328;var e=47768;for(c=h=0;11>c;++c){var f=Lc[11-c];var n=~~(b/f);b%=f;h^=n;n<<=2;32<=n?(n-=32,a.edge[c]=e>>n&15,f=(1<<n)-1,e=(e&f)+(e>>4&~f)):(a.edge[c]=r>>n&15,f=(1<<n)-1,r=(r&f)+(r>>>4&~f)+(e<<28),e>>=4)}0==(h&1)?a.edge[11]=r:(a.edge[11]=a.edge[10],a.edge[10]=r);for(c=0;12>c;++c)a.edgeo[c]=c;a.isStd=!0}function ub(a,b){var c;for(c=0;12>c;++c)a.edge[c]=b.edge[c],a.edgeo[c]=b.edgeo[c];a.isStd=b.isStd}function Gb(a,b){var c;null==a.temp&&(a.temp=w(12));for(c=
0;12>c;++c)a.temp[c]=c,a.edge[c]=b.ep[Mc[c]+12]%12;var h=1;for(c=0;12>c;++c)for(;a.edge[c]!=c;){var r=a.edge[c];a.edge[c]=a.edge[r];a.edge[r]=r;var e=a.temp[c];a.temp[c]=a.temp[r];a.temp[r]=e;h^=1}for(c=0;12>c;++c)a.edge[c]=a.temp[b.ep[Mc[c]]%12];return h}function Cb(a){var b;null==a.temp&&(a.temp=w(12));for(b=0;12>b;++b)a.temp[a.edgeo[b]]=b;for(b=0;12>b;++b)a.edge[b]=a.temp[a.edge[b]],a.edgeo[b]=b;a.isStd=!0}function sb(a,b,c,h,r){var e=a[b];a[b]=a[h];a[h]=e;e=a[c];a[c]=a[r];a[r]=e}function Mb(a,
b,c){var h=a.edge[b];a.edge[b]=a.edgeo[c];a.edgeo[c]=h}function Bb(){this.edge=w(12);this.edgeo=w(12)}function tb(a,b){return a[b>>4]>>((b&15)<<1)&3}function Hb(a,b,c){var h=Kc[b];var r=Jc[b];var e=0;var f=1985229328;var n=47768;for(b=0;b<c;++b){var w=h[a[r[b]]]<<2;e*=12-b;32<=w?(e+=n>>w-32&15,n-=4368<<w-32):(e+=f>>w&15,n-=4369,f-=286331152<<w)}return e}function Rb(a){var b=new Bb;var c=0;var h=tb(cc,a);if(3==h)return 10;for(;0!=a;){0==h?h=2:--h;var r=~~(a/20160);r=zc[r];var e=a%20160;Fb(b,20160*
r+e);for(r=0;17>r;++r){e=Hb(b.edge,r<<3,4);e=jc[e];var f=e&7;e>>=3;f=Hb(b.edge,r<<3|f,10)%20160;e=20160*e+f;if(tb(cc,e)==h){++c;a=e;break}}}return c}function Vb(a,b,c){a[b>>4]^=(3^c)<<((b&15)<<1)}function Tb(){Tb=a}function Ob(){var a;this.ep=w(24);for(a=0;24>a;++a)this.ep[a]=a}function Jb(a){Ob.call(this);for(a=0;23>a;++a){var c=a+b(24-a);if(c!=a){var h=this.ep[a];this.ep[a]=this.ep[c];this.ep[c]=h}}}function Kb(){Kb=a;Nc=[35,1,34,2,4,6,22,5,19]}function Wb(a,b){var c=a.edge;var h=b.edge,r;for(r=
0;24>r;++r)c.ep[r]=h.ep[r];c=a.center;h=b.center;for(r=0;24>r;++r)c.ct[r]=h.ct[r];zb(a.corner,b.corner);a.value=b.value;a.add1=b.add1;a.length1=b.length1;a.length2=b.length2;a.length3=b.length3;a.sym=b.sym;for(c=0;60>c;++c)a.moveBuffer[c]=b.moveBuffer[c];a.moveLength=b.moveLength;a.edgeAvail=b.edgeAvail;a.centerAvail=b.centerAvail;a.cornerAvail=b.cornerAvail}function Sb(a){for(;a.centerAvail<a.moveLength;){var b=a.center,c=a.moveBuffer[a.centerAvail++];var h=c%3;switch(~~(c/3)){case 0:jb(b.ct,0,1,
2,3,h);break;case 1:jb(b.ct,16,17,18,19,h);break;case 2:jb(b.ct,8,9,10,11,h);break;case 3:jb(b.ct,4,5,6,7,h);break;case 4:jb(b.ct,20,21,22,23,h);break;case 5:jb(b.ct,12,13,14,15,h);break;case 6:jb(b.ct,0,1,2,3,h);jb(b.ct,8,20,12,16,h);jb(b.ct,9,21,13,17,h);break;case 7:jb(b.ct,16,17,18,19,h);jb(b.ct,1,15,5,9,h);jb(b.ct,2,12,6,10,h);break;case 8:jb(b.ct,8,9,10,11,h);jb(b.ct,2,19,4,21,h);jb(b.ct,3,16,5,22,h);break;case 9:jb(b.ct,4,5,6,7,h);jb(b.ct,10,18,14,22,h);jb(b.ct,11,19,15,23,h);break;case 10:jb(b.ct,
20,21,22,23,h);jb(b.ct,0,8,4,14,h);jb(b.ct,3,11,7,13,h);break;case 11:jb(b.ct,12,13,14,15,h),jb(b.ct,1,20,7,18,h),jb(b.ct,0,23,6,17,h)}}return a.center}function Xb(a){for(;a.cornerAvail<a.moveLength;){var b=a.corner,c=a.moveBuffer[a.cornerAvail++]%18;!b.temps&&(b.temps=new wb);vb(b,$b[c],b.temps);zb(b,b.temps)}return a.corner}function Ib(a){for(;a.edgeAvail<a.moveLength;){var b=a.edge,c=a.moveBuffer[a.edgeAvail++];var h=c%3;switch(~~(c/3)){case 0:jb(b.ep,0,1,2,3,h);jb(b.ep,12,13,14,15,h);break;case 1:jb(b.ep,
11,15,10,19,h);jb(b.ep,23,3,22,7,h);break;case 2:jb(b.ep,0,11,6,8,h);jb(b.ep,12,23,18,20,h);break;case 3:jb(b.ep,4,5,6,7,h);jb(b.ep,16,17,18,19,h);break;case 4:jb(b.ep,1,20,5,21,h);jb(b.ep,13,8,17,9,h);break;case 5:jb(b.ep,2,9,4,10,h);jb(b.ep,14,21,16,22,h);break;case 6:jb(b.ep,0,1,2,3,h);jb(b.ep,12,13,14,15,h);jb(b.ep,9,22,11,20,h);break;case 7:jb(b.ep,11,15,10,19,h);jb(b.ep,23,3,22,7,h);jb(b.ep,2,16,6,12,h);break;case 8:jb(b.ep,0,11,6,8,h);jb(b.ep,12,23,18,20,h);jb(b.ep,3,19,5,13,h);break;case 9:jb(b.ep,
4,5,6,7,h);jb(b.ep,16,17,18,19,h);jb(b.ep,8,23,10,21,h);break;case 10:jb(b.ep,1,20,5,21,h);jb(b.ep,13,8,17,9,h);jb(b.ep,14,0,18,4,h);break;case 11:jb(b.ep,2,9,4,10,h),jb(b.ep,14,21,16,22,h),jb(b.ep,7,15,1,17,h)}}return a.edge}function mc(a){var b,c,h;var r=Array(a.moveLength-(a.add1?2:0));for(b=c=0;b<a.length1;++b)r[c++]=a.moveBuffer[b];var e=a.sym;for(b=a.length1+(a.add1?2:0);b<a.moveLength;++b)if(27<=bc[e][a.moveBuffer[b]]){r[c++]=bc[e][a.moveBuffer[b]]-9;var f=Nc[bc[e][a.moveBuffer[b]]-27];e=gc[e][f]}else r[c++]=
bc[e][a.moveBuffer[b]];b=gc[hc[e]];a:{a=Sb(a);a=new gb(a.ct);for(h=0;48>h;++h){f=!0;for(e=0;24>e;++e)if(a.ct[e]!=~~(e/4)){f=!1;break}if(f){a=h;break a}Ra(a,0);1==h%2&&Ra(a,1);7==h%8&&Ra(a,2);15==h%16&&Ra(a,3)}a=-1}b=b[a];a=[];e=b;for(b=c-1;0<=b;--b)f=r[b],f=3*~~(f/3)+(2-f%3),27<=bc[e][f]?(a.push(bc[e][f]-9),f=Nc[bc[e][f]-27],e=gc[e][f]):a.push(bc[e][f]);e=-1;c=0;h=[0,0,0];for(b=0;b<a.length;++b){f=a[b];if(e!=~~(f/3)%3){for(r=0;3>r;r++)h[r]%4&&(a[c++]=Oc[9*r+3*e+h[r]-1]+" ",h[r]=0);e=~~(f/3)%3}h[~~(f/
9)]+=f%3+1}for(r=0;3>r;r++)h[r]%4&&(a[c++]=Oc[9*r+3*e+h[r]-1]+" ",h[r]=0);return a=a.slice(0,c).join("")}function Zb(a,b){a.moveBuffer[a.moveLength++]=b}function Ub(){this.moveBuffer=w(60);this.edge=new Ob;this.center=new kb;this.corner=new wb}function sc(a){Ub.call(this);Wb(this,a)}function Rc(a){this.moveBuffer=w(60);this.edge=new Jb(a);this.center=new rb(a);this.corner=new xb(a)}function Sc(){}function Tc(){Tc=a;var b,c;Oc="U  ;U2 ;U' ;R  ;R2 ;R' ;F  ;F2 ;F' ;D  ;D2 ;D' ;L  ;L2 ;L' ;B  ;B2 ;B' ;Uw ;Uw2;Uw';Rw ;Rw2;Rw';Fw ;Fw2;Fw';Dw ;Dw2;Dw';Lw ;Lw2;Lw';Bw ;Bw2;Bw'".split(";");
ec=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,19,21,22,23,25,28,30,31,32,34,36];qc=[0,1,2,4,6,7,8,9,10,11,13,15,16,17,19,22,25,28,31,34,36];kd=w(37);ld=w(37);kc=w(37,36);Bc=w(29,28);Cc=w(21,20);Pc=w(36);rc=w(28);lc=w(20);for(b=0;29>b;++b)kd[ec[b]]=b;for(b=0;21>b;++b)ld[qc[b]]=b;for(b=0;36>b;++b){for(c=0;36>c;++c)kc[b][c]=~~(b/3)==~~(c/3)||~~(b/3)%3==~~(c/3)%3&&b>c;kc[36][b]=!1}for(b=0;29>b;++b)for(c=0;28>c;++c)Bc[b][c]=kc[ec[b]][ec[c]];for(b=0;21>b;++b)for(c=0;20>c;++c)Cc[b][c]=kc[qc[b]][qc[c]];
for(b=0;36>b;++b)for(Pc[b]=36,c=b;36>c;++c)if(!kc[b][c]){Pc[b]=c-1;break}for(b=0;28>b;++b)for(rc[b]=28,c=b;28>c;++c)if(!Bc[b][c]){rc[b]=c-1;break}for(b=0;20>b;++b)for(lc[b]=20,c=b;20>c;++c)if(!Cc[b][c]){lc[b]=c-1;break}}function pd(a){a.solution="";var b=Ta(new lb(Sb(a.c),0));var c=Ta(new lb(Sb(a.c),1));var h=Ta(new lb(Sb(a.c),2));var f=ac[~~b>>6];var n=ac[~~c>>6];var w=ac[~~h>>6];a.p1SolsCnt=0;a.arr2idx=0;rd(a.p1sols.heap);for(a.length1=(f<n?f:n)<w?f<n?f:n:w;100>a.length1&&!(w<=a.length1&&tc(a,~~h>>>
6,h&63,a.length1,-1,0)||f<=a.length1&&tc(a,~~b>>>6,b&63,a.length1,-1,0)||n<=a.length1&&tc(a,~~c>>>6,c&63,a.length1,-1,0));++a.length1);w=td(a.p1sols,$a(ud,e([25,30,40]),24,0,0));w.sort(function(a,b){return a.value-b.value});n=9;do{h=w[0].value;a:for(;100>h;++h)for(c=0;c<w.length&&!(w[c].value>h);++c)if(!(h-w[c].length1>n)&&(Wb(a.c1,w[c]),r(a.ct2,Sb(a.c1),uc(Ib(a.c1).ep)),b=ib(a.ct2),f=Wa(a.ct2),a.length1=w[c].length1,a.length2=h-w[c].length1,Uc(a,b,f,a.length2,28,0)))break a;++n}while(100==h);a.arr2.sort(function(a,
b){return a.value-b.value});w=0;h=13;do{n=a.arr2[0].value;a:for(;100>n;++n)for(c=0;c<Math.min(a.arr2idx,100)&&!(a.arr2[c].value>n);++c)if(!(n-a.arr2[c].length1-a.arr2[c].length2>h)){b=Gb(a.e12,Ib(a.arr2[c]));hb(a.ct3,Sb(a.arr2[c]),b^uc(Xb(a.arr2[c]).cp));b=nb(a.ct3);f=Ab(a.e12,10);var Oa=Rb(Nb(a.e12));if(Oa<=n-a.arr2[c].length1-a.arr2[c].length2&&Vc(a,f,b,Oa,n-a.arr2[c].length1-a.arr2[c].length2,20,0)){w=c;break a}}++h}while(100==n);h=new sc(a.arr2[w]);a.length1=h.length1;a.length2=h.length2;n=n-
a.length1-a.length2;for(c=0;c<n;++c)Zb(h,qc[a.move3[c]]);a.solution=mc(h)}function qd(a,b){if(!md){var c,r,e;var f=new fb;for(c=0;24>c;++c)f.ct[c]=c;var n=new gb(f.ct);var y=new gb(f.ct);var Na=new gb(f.ct);for(c=0;48>c;++c){for(r=0;48>r;++r){for(e=0;48>e;++e)x(f,n)&&(gc[c][r]=e,0==e&&(hc[c]=r)),Ra(n,0),1==e%2&&Ra(n,1),7==e%8&&Ra(n,2),15==e%16&&Ra(n,3);Ra(f,0);1==r%2&&Ra(f,1);7==r%8&&Ra(f,2);15==r%16&&Ra(f,3)}Ra(f,0);1==c%2&&Ra(f,1);7==c%8&&Ra(f,2);15==c%16&&Ra(f,3)}for(c=0;48>c;++c)for(Oa(f,y),Xa(f,
hc[c]),r=0;36>r;++r)for(Oa(n,f),Za(n,r),Xa(n,c),e=0;36>e;++e)if(Oa(Na,y),Za(Na,e),x(Na,n)){bc[c][r]=e;break}Sa(f,0);for(c=0;48>c;++c)Gc[hc[c]]=Ua(f),Ra(f,0),1==c%2&&Ra(f,1),7==c%8&&Ra(f,2),15==c%16&&Ra(f,3);ic=w(735471);f=new fb;r=w(22984);for(y=0;22984>y;y++)r[y]=0;for(y=n=0;735471>y;++y)if(0==(r[~~y>>>5]&1<<(y&31))){Sa(f,y);for(c=0;48>c;++c)Na=Ua(f),r[~~Na>>>5]|=1<<(Na&31),null!=ic&&(ic[Na]=n<<6|hc[c]),Ra(f,0),1==c%2&&Ra(f,1),7==c%8&&Ra(f,2),15==c%16&&Ra(f,3);oc[n++]=y}f=new fb;n=new fb;for(y=0;15582>
y;++y)for(Sa(n,oc[y]),Na=0;36>Na;++Na)Oa(f,n),Za(f,Na),wc[y][Na]=Ta(f);ic=null;vc(ac);n=ac[0]=0;for(y=1;15582!=y;){var z=(r=4<n)?-1:n;f=r?n:-1;++n;for(Na=0;15582>Na;++Na)if(ac[Na]==z)for(e=0;27>e;++e)if(c=~~wc[Na][e]>>>6,ac[c]==f)if(++y,r){ac[Na]=n;break}else ac[c]=n}y=new bb;for(f=0;70>f;++f)for(n=0;28>n;++n)Va(y,f),eb(y,ec[n]),xc[f][n]=Wa(y);for(f=0;70>f;++f)for(Va(y,f),n=0;16>n;++n)fd[f][n]=Wa(y),Ya(y,0),1==n%2&&Ya(y,1),7==n%8&&Ya(y,2);for(f=0;6435>f;++f)for(h(y,f),n=0;16>n;++n)gd[f][n]=ib(y)&
65535,Ya(y,0),1==n%2&&Ya(y,1),7==n%8&&Ya(y,2);for(f=0;6435>f;++f)for(n=0;28>n;++n)h(y,f),eb(y,ec[n]),yc[f][n]=ib(y)&65535;vc(Yb);Na=Yb[0]=Yb[18]=Yb[28]=Yb[46]=Yb[54]=Yb[56]=0;for(c=6;450450!=c;){z=(e=6<Na)?-1:Na;var kb=e?Na:-1;++Na;for(f=0;450450>f;++f)if(Yb[f]==z)for(y=~~(f/70),r=f%70,n=0;23>n;++n){var Qa=yc[y][n];var ab=xc[r][n];Qa=70*Qa+ab;if(Yb[Qa]==kb)if(++c,e){Yb[f]=Na;break}else Yb[Qa]=Na}}for(f=0;12>f;++f)Ic[Hc[f]]=f;y=new ob;for(f=0;29400>f;++f)for(n=0;20>n;++n){r=y;e=f;r.parity=e&1;e>>>=
1;z=Hc[e%12];e=~~(e/12);Na=4;for(c=7;0<=c;--c)r.rl[c]=0,z>=Pa[c][Na]&&(z-=Pa[c][Na--],r.rl[c]=1);z=e%35;e=~~(e/35);Na=4;r.fb[7]=0;for(c=6;0<=c;--c)z>=Pa[c][Na]?(z-=Pa[c][Na--],r.fb[c]=1):r.fb[c]=0;Na=4;r.ud[7]=0;for(c=6;0<=c;--c)e>=Pa[c][Na]?(e-=Pa[c][Na--],r.ud[c]=1):r.ud[c]=0;Na=y;c=n;Na.parity^=id[c];switch(c){case 0:case 1:case 2:jb(Na.ud,0,1,2,3,c%3);break;case 3:jb(Na.rl,0,1,2,3,1);break;case 4:case 5:case 6:jb(Na.fb,0,1,2,3,(c-1)%3);break;case 7:case 8:case 9:jb(Na.ud,4,5,6,7,(c-1)%3);break;
case 10:jb(Na.rl,4,5,6,7,1);break;case 11:case 12:case 13:jb(Na.fb,4,5,6,7,(c+1)%3);break;case 14:jb(Na.ud,0,1,2,3,1);jb(Na.rl,0,5,4,1,1);jb(Na.fb,0,5,4,1,1);break;case 15:jb(Na.rl,0,1,2,3,1);jb(Na.fb,1,4,7,2,1);jb(Na.ud,1,6,5,2,1);break;case 16:jb(Na.fb,0,1,2,3,1);jb(Na.ud,3,2,5,4,1);jb(Na.rl,0,3,6,5,1);break;case 17:jb(Na.ud,4,5,6,7,1);jb(Na.rl,3,2,7,6,1);jb(Na.fb,3,2,7,6,1);break;case 18:jb(Na.rl,4,5,6,7,1);jb(Na.fb,0,3,6,5,1);jb(Na.ud,0,3,4,7,1);break;case 19:jb(Na.fb,4,5,6,7,1),jb(Na.ud,0,7,
6,1,1),jb(Na.rl,1,4,7,2,1)}pc[f][n]=nb(y)&65535}vc(dc);y=dc[0]=0;for(Na=1;29400!=Na;){for(f=0;29400>f;++f)if(dc[f]==y)for(n=0;17>n;++n)-1==dc[pc[f][n]]&&(dc[pc[f][n]]=y+1,++Na);++y}f=new Bb;for(y=0;20>y;++y)for(Na=0;8>Na;++Na){Fb(f,0);Qb(f,y);Pb(f,Na);for(n=0;12>n;++n)Jc[y<<3|Na][n]=f.edge[n];Cb(f);for(n=0;12>n;++n)Kc[y<<3|Na][n]=f.temp[n]}n=new Bb;r=w(1485);for(y=0;1485>y;y++)r[y]=0;for(y=f=0;11880>y;++y)if(0==(r[~~y>>>3]&1<<(y&7))){Fb(n,y*Lc[8]);for(c=0;8>c;++c)Na=Ab(n,4),Na==y&&(Ac[f]=(Ac[f]|1<<
c)&65535),r[~~Na>>3]|=1<<(Na&7),jc[Na]=f<<3|jd[c],Lb(n,0),1==c%2&&(Lb(n,1),Lb(n,2));zc[f++]=y}var rb;y=new Bb;Na=new Bb;r=new Bb;vc(cc);n=0;Dc=1;for(Vb(cc,0,0);31006080!=Dc;){e=9<n;z=n%3;f=(n+1)%3;c=e?3:z;z=e?z:3;if(9<=n)break;for(ab=0;31006080>ab;ab+=16){var lb=cc[~~ab>>4];if(e||-1!=lb)for(Qa=ab,kb=ab+16;Qa<kb;++Qa,lb>>=2)if((lb&3)==c){var cb=~~(Qa/20160);cb=zc[cb];var db=Qa%20160;Fb(y,20160*cb+db);for(cb=0;17>cb;++cb){db=Hb(y.edge,cb<<3,4);db=jc[db];var hb=db&7;db>>=3;var Ub=Hb(y.edge,cb<<3|hb,
10)%20160;Ub=20160*db+Ub;if(tb(cc,Ub)==z){Vb(cc,e?Qa:Ub,f);++Dc;if(e)break;Ub=Ac[db];if(1!=Ub)for(ub(Na,y),Qb(Na,cb),Pb(Na,hb),rb=1;0!=(Ub=~~Ub>>1&65535);++rb)1==(Ub&1)&&(ub(r,Na),Pb(r,rb),hb=20160*db+Ab(r,10)%20160,tb(cc,hb)==z&&(Vb(cc,hb,f),++Dc))}}}}++n}md=!0}a.c=new Rc(b);pd(a);return a.solution}function tc(a,b,c,h,e,f){var n,w,Oa;if(0==b){if(b=0==h){Wb(a.c1,a.c);for(b=0;b<a.length1;++b)Zb(a.c1,a.move1[b]);switch(Gc[c]){case 0:Zb(a.c1,24);Zb(a.c1,35);a.move1[a.length1]=24;a.move1[a.length1+1]=
35;a.add1=!0;c=19;break;case 12869:Zb(a.c1,18);Zb(a.c1,29);a.move1[a.length1]=18;a.move1[a.length1+1]=29;a.add1=!0;c=34;break;case 735470:a.add1=!1,c=0}r(a.ct2,Sb(a.c1),uc(Ib(a.c1).ep));b=ib(a.ct2);h=Wa(a.ct2);a.c1.value=Yb[70*b+h]+a.length1;a.c1.length1=a.length1;a.c1.add1=a.add1;a.c1.sym=c;++a.p1SolsCnt;if(500>a.p1sols.heap.size)var y=new sc(a.c1);else{c=a.p1sols;if(0==c.heap.size)y=null;else{b=c.heap.array[0];h=c.heap;e=c.heap.size-1;f=h.array[e];h.array.splice(e,1);--h.size;if(0<c.heap.size){fc(c.heap,
0,f);h=0;e=c.heap.size;for(Oa=c.heap.array[h];2*h+1<e;){f=(n=2*h+1,y=n+1,w=n,y<e&&0>c.heap.array[n].value-c.heap.array[y].value&&(w=y),w);if(0>c.heap.array[f].value-Oa.value)break;fc(c.heap,h,c.heap.array[f]);h=f}fc(c.heap,h,Oa)}y=b}y.value>a.c1.value&&Wb(y,a.c1)}n=a.p1sols;b:{w=n.heap.size;c=n.heap;b=c.size++;for(c.array[b]=y;0<w;){c=w;w=~~((w-1)/2);if(0>=y.value-n.heap.array[w].value){fc(n.heap,c,y);break b}fc(n.heap,c,n.heap.array[w])}fc(n.heap,w,y)}b=1E4==a.p1SolsCnt}return b}for(n=0;27>n;n+=
3)if(n!=e&&n!=e-9&&n!=e-18)for(Oa=0;3>Oa;++Oa){w=n+Oa;y=wc[b][bc[c][w]];var x=ac[~~y>>>6];if(x>=h){if(x>h)break}else if(x=gc[c][y&63],y>>>=6,a.move1[f]=w,tc(a,y,x,h-1,n,f+1))return!0}return!1}function Uc(a,b,c,h,r,e){var f;if(0==b&&0==Yb[c]){if(b=0==h){Wb(a.c2,a.c1);for(b=0;b<a.length2;++b)Zb(a.c2,a.move2[b]);b=Ib(a.c2);c=0;r=!1;for(h=0;12>h;++h)c|=1<<b.ep[h],r=r!=12<=b.ep[h];0!=(c&~~c>>12)||r?b=!1:(b=Gb(a.e12,Ib(a.c2)),hb(a.ct3,Sb(a.c2),b^uc(Xb(a.c2).cp)),b=nb(a.ct3),Ab(a.e12,10),c=Rb(Nb(a.e12)),
a.arr2[a.arr2idx]?Wb(a.arr2[a.arr2idx],a.c2):a.arr2[a.arr2idx]=new sc(a.c2),a.arr2[a.arr2idx].value=a.length1+a.length2+Math.max(c,dc[b]),a.arr2[a.arr2idx].length2=a.length2,++a.arr2idx,b=a.arr2idx==a.arr2.length)}return b}for(f=0;23>f;++f)if(Bc[r][f])f=rc[f];else{var n=yc[b][f];var w=xc[c][f];var Oa=Yb[70*n+w];if(Oa>=h)Oa>h&&(f=rc[f]);else if(a.move2[e]=ec[f],Uc(a,n,w,h-1,f,e+1))return!0}return!1}function Vc(a,b,c,h,r,e,f){var n;if(0==r)return 0==b&&0==c;Fb(a.tempe[f],b);for(n=0;17>n;++n)if(Cc[e][n])n=
lc[n];else{b=pc[c][n];var w=dc[b];if(w>=r)w>r&&14>n&&(n=lc[n]);else{w=Hb(a.tempe[f].edge,n<<3,10);var Oa=~~(w/20160);Oa=jc[Oa];var y=Oa&7;Oa>>=3;var x=Hb(a.tempe[f].edge,n<<3|y,10)%20160;y=h;Oa=tb(cc,20160*Oa+x);Oa=3==Oa?10:(1227133513<<Oa>>y&3)+y-1;if(Oa>=r)Oa>r&&14>n&&(n=lc[n]);else if(Vc(a,w,b,Oa,r-1,n,f+1))return a.move3[f]=n,!0}}return!1}function Wc(){var a;this.p1sols=new cd(new Sc);this.move1=w(15);this.move2=w(20);this.move3=w(20);this.c1=new Ub;this.c2=new Ub;this.ct2=new bb;this.ct3=new ob;
this.e12=new Bb;this.tempe=w(20);this.arr2=w(100);for(a=0;20>a;++a)this.tempe[a]=new Bb}function Xc(){Xc=a}function uc(a){var b,c,h;var r=h=0;for(c=a.length;r<c;++r)for(b=r;b<c;++b)a[r]>a[b]&&(h^=1);return h}function jb(a,b,c,h,r,e){switch(e){case 0:e=a[r];a[r]=a[h];a[h]=a[c];a[c]=a[b];a[b]=e;break;case 1:e=a[b];a[b]=a[h];a[h]=e;e=a[c];a[c]=a[r];a[r]=e;break;case 2:e=a[b],a[b]=a[c],a[c]=a[h],a[h]=a[r],a[r]=e}}function Yc(){}function Zc(a,b,c,h){var r=new Yc;r.typeName=a+b;ad(0!=c?-c:0)&&bd(0!=c?-c:
0,r);r.modifiers=4;r.superclass=Qc;r.componentType=h;return r}function $c(a,b,c,h){var r=new Yc;r.typeName=a+b;ad(c)&&bd(c,r);r.superclass=h;return r}function ad(a){return"number"==typeof a&&0<a}function bd(a,b){b.seedId=a;if(2==a)var c=String.prototype;else if(0<a)if(c=nc[b.seedId])c=c.prototype;else{c=nc[a]=function(){};c.___clazz$=b;return}else return;c.___clazz$=b}function rd(a){a.array=$a(nd,e([30,40]),0,0,0);a.size=0}function fc(a,b,c){var h=a.array[b];a.array[b]=c;return h}function sd(){this.array=
$a(nd,e([30,40]),0,0,0);this.array.length=500}function vc(a){var b=a.length,c;for(c=0;c<b;++c)a[c]=-1}function td(a,b){var c=a.heap,h=b;if(h.length<c.size){var r=f(0,c.size);n(h.___clazz$,h.castableTypeMap$,h.queryId$,r);h=r}for(r=0;r<c.size;++r)h[r]=c.array[r];h.length>c.size&&(h[c.size]=null);return h}function cd(a){this.heap=new sd;this.cmp=a}function dd(){dd=a;Tc();Xc();Qa();mb();ab();Db();db();pb();Tb();Kb();od=new Wc}function ed(){dd();return(scramble_333.getRandomScramble()+qd(od,Math)).replace(/\s+/g,
" ")}var Eb,nc={};c(1,-1,{});Eb.value=null;c(73,1,{},Na);Eb.queryId$=0;var Ec,Fc;c(153,1,e([21]),fb,lb,gb);var ac,wc,Gc,ic=null,oc,hc,bc,gc;c(154,1,{},bb);Eb.parity=0;var yc,Yb,gd,hd,xc,fd;c(155,1,{},ob);Eb.parity=0;var pc,id,dc,Hc,Ic;c(156,1,{},kb,rb);c(157,1,e([22]),wb,yb,xb);Eb.temps=null;var $b;c(158,1,e([23]),Bb);Eb.isStd=!0;Eb.temp=null;var Mc,Dc=0,cc,Lc,Jc,Kc,jc,zc,jd,Ac;c(159,1,{},Ob,Jb);c(160,1,e([24,34]),Ub,sc,Rc);Eb.compareTo$=function(a){return this.value-a.value};Eb.add1=!1;Eb.center=
null;Eb.centerAvail=0;Eb.corner=null;Eb.cornerAvail=0;Eb.edge=null;Eb.edgeAvail=0;Eb.length1=0;Eb.length2=0;Eb.length3=0;Eb.moveLength=0;Eb.sym=0;Eb.value=0;var Nc;c(161,1,{},Sc);Eb.compare=function(a,b){return b.value-a.value};var kc,Bc,Cc,ec,Oc,qc,Pc,rc,lc,kd,ld;c(163,1,e([26]),Wc);Eb.add1=!1;Eb.arr2idx=0;Eb.c=null;Eb.length1=0;Eb.length2=0;Eb.p1SolsCnt=0;Eb.solution="";var md=!1;Eb.val$outerIter=null;Eb.size=0;c(239,1,{},cd);Eb.cmp=null;Eb.heap=null;var Qc=$c("java.lang.","Object",1,null),nd=Zc("[Ljava.lang.",
"Object;",356,Qc),vd=$c("cs.threephase.","FullCube",160,Qc),ud=Zc("[Lcs.threephase.","FullCube;",381,vd),od;scrMgr.reg("444wca",ed);return{getRandomScramble:ed}}(mathlib.rn,mathlib.Cnk,mathlib.circle);(function(b,Pa,z,w){function c(a,b){b<<=2;if(24<b){b=48-b;var c=a.ul;a.ul=(a.ul>>b|a.ur<<24-b)&16777215;a.ur=(a.ur>>b|c<<24-b)&16777215}else 0<b?(c=a.ul,a.ul=(a.ul<<b|a.ur>>24-b)&16777215,a.ur=(a.ur<<b|c>>24-b)&16777215):0==b?(c=a.ur,a.ur=a.dl,a.dl=c,a.ml=1-a.ml):-24<=b?(b=-b,c=a.dl,a.dl=(a.dl<<b|a.dr>>24-b)&16777215,a.dr=(a.dr<<b|c>>24-b)&16777215):-24>b&&(b=48+b,c=a.dl,a.dl=(a.dl>>b|a.dr<<24-b)&16777215,a.dr=(a.dr>>b|c<<24-b)&16777215)}function e(a,b){var c;6>b?c=a.ul>>(5-b<<2):12>b?c=a.ur>>(11-
b<<2):18>b?c=a.dl>>(17-b<<2):c=a.dr>>(23-b<<2);return c&15}function a(a,b,c){6>b?(a.ul&=~(15<<(5-b<<2)),a.ul|=c<<(5-b<<2)):12>b?(a.ur&=~(15<<(11-b<<2)),a.ur|=c<<(11-b<<2)):18>b?(a.dl&=~(15<<(17-b<<2)),a.dl|=c<<(17-b<<2)):(a.dr&=~(15<<(23-b<<2)),a.dr|=c<<(23-b<<2))}function Na(){this.arr=[];this.prm=[]}function f(b){var c;void 0===b&&(b=w(3678));var h=new Na;var r=Wa[b];var e=324508639;var f=38177486;var n=c=8;for(b=0;24>b;b++)if(0==(r>>b&1)){var Oa=w(c)<<2;a(h,23-b,f>>Oa&15);Oa=(1<<Oa)-1;f=(f&Oa)+
(f>>4&~Oa);--c}else Oa=w(n)<<2,a(h,23-b,e>>Oa&15),a(h,22-b,e>>Oa&15),Oa=(1<<Oa)-1,e=(e&Oa)+(e>>4&~Oa),--n,++b;h.ml=w(2);return h}function $a(a,b,h,f,w,Oa){if(0==h&&4>f){if(b=0==f)a:{b=a.Search_d;f=a.Search_c;b.ul=f.ul;b.ur=f.ur;b.dl=f.dl;b.dr=f.dr;b.ml=f.ml;for(b=0;b<a.Search_length1;++b)c(a.Search_d,a.Search_move[b]);b=a.Search_d;f=a.Search_sq;for(w=0;8>w;++w)b.prm[w]=e(b,3*w+1)>>1;f.cornperm=Pa(b.prm);f.topEdgeFirst=e(b,0)==e(b,1);w=f.topEdgeFirst?2:0;for(Oa=0;4>Oa;w+=3,++Oa)b.prm[Oa]=e(b,w)>>1;
f.botEdgeFirst=e(b,12)==e(b,13);for(w=f.botEdgeFirst?14:12;8>Oa;w+=3,++Oa)b.prm[Oa]=e(b,w)>>1;f.edgeperm=Pa(b.prm);f.ml=b.ml;w=a.Search_sq.edgeperm;f=a.Search_sq.cornperm;Oa=a.Search_sq.ml;for(b=Math.max(bb[a.Search_sq.edgeperm<<1|Oa],bb[a.Search_sq.cornperm<<1|Oa]);b<a.Search_maxlen2;++b)if(n(a,w,f,a.Search_sq.topEdgeFirst,a.Search_sq.botEdgeFirst,Oa,b,a.Search_length1,0)){for(f=0;f<b;++f)c(a.Search_d,a.Search_move[a.Search_length1+f]);f=a;w="";h=Oa=0;for(b=b+a.Search_length1-1;0<=b;b--){var y=a.Search_move[b];
0<y?(y=12-y,Oa=6<y?y-12:y):0>y?(y=12+y,h=6<y?y-12:y):(y="/",b==a.Search_length1-1&&(y="`/`"),w=0==Oa&&0==h?w+y:w+(" ("+Oa+","+h+")"+y),Oa=h=0)}if(0!=Oa||0!=h)w+=" ("+Oa+","+h+") ";f.Search_sol_string=w;b=!0;break a}b=!1}return b}if(0!=Oa){var x=r[b];y=eb[x];if(y<f&&(a.Search_move[w]=0,$a(a,x,y,f-1,w+1,0)))return!0}x=b;if(0>=Oa)for(h=0;;){h+=Ya[x];x=h>>4;h&=15;if(12<=h)break;y=eb[x];if(y>f)break;else if(y<f&&(a.Search_move[w]=h,$a(a,x,y,f-1,w+1,1)))return!0}x=b;if(1>=Oa)for(h=0;;){h+=ib[x];x=h>>4;
h&=15;if(6<=h)break;y=eb[x];if(y>f)break;else if(y<f&&(a.Search_move[w]=-h,$a(a,x,y,f-1,w+1,2)))return!0}return!1}function n(a,b,c,h,r,e,f,w,Oa){var y,x;if(0==f&&!h&&r)return!0;if(0!=Oa&&h==r){var Na=nb[b];var Sa=nb[c];if(bb[Na<<1|1-e]<f&&bb[Sa<<1|1-e]<f&&(a.Search_move[w]=0,n(a,Na,Sa,h,r,1-e,f-1,w+1,0)))return!0}if(0>=Oa){Na=(x=!h)?ab[b]:b;Sa=x?c:ab[c];var z=x?1:2;var Ra=bb[Na<<1|e];for(y=bb[Sa<<1|e];12>z&&Ra<=f&&Ra<=f;){if(Ra<f&&y<f&&(a.Search_move[w]=z,n(a,Na,Sa,x,r,e,f-1,w+1,1)))return!0;(x=!x)?
(Na=ab[Na],Ra=bb[Na<<1|e],z+=1):(Sa=ab[Sa],y=bb[Sa<<1|e],z+=2)}}if(1>=Oa)for(Na=(r=!r)?Va[b]:b,Sa=r?c:Va[c],z=r?1:2,Ra=bb[Na<<1|e],y=bb[Sa<<1|e];z<(6<f?6:12)&&Ra<=f&&Ra<=f;){if(Ra<f&&y<f&&(a.Search_move[w]=-z,n(a,Na,Sa,h,r,e,f-1,w+1,2)))return!0;(r=!r)?(Na=Va[Na],Ra=bb[Na<<1|e],z+=1):(Sa=Va[Sa],y=bb[Sa<<1|e],z+=2)}return!1}function y(a,b){a.Search_c=b;var c=b.ur&1118481;c|=c>>3;c|=c>>6;c=c&15|c>>12&48;var h=b.ul&1118481;h|=h>>3;h|=h>>6;h=h&15|h>>12&48;var r=b.dr&1118481;r|=r>>3;r|=r>>6;r=r&15|r>>
12&48;var f=b.dl&1118481;f|=f>>3;f|=f>>6;f=f&15|f>>12&48;var n,w;var Oa=0;b.arr[0]=e(b,0);for(n=1;24>n;++n)e(b,n)!=b.arr[Oa]&&(b.arr[++Oa]=e(b,n));for(Oa=w=0;16>Oa;++Oa)for(n=Oa+1;16>n;++n)b.arr[Oa]>b.arr[n]&&(w^=1);f=Ra(w<<24|h<<18|c<<12|f<<6|r);for(a.Search_length1=eb[f];100>a.Search_length1&&(a.Search_maxlen2=Math.min(32-a.Search_length1,17),!$a(a,f,eb[f],a.Search_length1,0,-1));++a.Search_length1);return a.Search_sol_string}function Qa(){this.Search_move=[];this.Search_d=new Na;this.Search_sq=
new Sa}function x(){x=$.noop;h=[0,3,6,12,15,24,27,30,48,51,54,60,63];Wa=[];eb=[];Ya=[];ib=[];r=[];var a,b;for(b=a=0;28561>b;++b){var c=h[b%13];var e=h[~~(b/13)%13];var f=h[~~(~~(b/13)/13)%13];var n=h[~~(~~(~~(b/13)/13)/13)];e=n<<18|f<<12|e<<6|c;16==Oa(e)&&(Wa[a++]=e)}a=new Za;for(b=0;7356>b;++b){Ta(a,b);e=Ya;c=b;var w=a;n=f=0;do 0==(w.top&2048)?(f+=1,w.top<<=1):(f+=2,w.top=w.top<<2^12291),n=1-n;while(0!=(Oa(w.top&63)&1));0==(Oa(w.top)&2)&&(w.Shape_parity^=n);e[c]=f;Ya[b]|=Ua(a)<<4;Ta(a,b);e=ib;c=
b;w=a;n=f=0;do 0==(w.bottom&2048)?(f+=1,w.bottom<<=1):(f+=2,w.bottom=w.bottom<<2^12291),n=1-n;while(0!=(Oa(w.bottom&63)&1));0==(Oa(w.bottom)&2)&&(w.Shape_parity^=n);e[c]=f;ib[b]|=Ua(a)<<4;Ta(a,b);n=a.top&63;e=Oa(n);c=Oa(a.bottom&4032);a.Shape_parity^=1&(e&c)>>1;a.top=a.top&4032|a.bottom>>6&63;a.bottom=a.bottom&63|n<<6;r[b]=Ua(a)}for(b=0;7536>b;++b)eb[b]=-1;eb[Ra(14378715)]=0;eb[Ra(31157686)]=0;eb[Ra(23967451)]=0;eb[Ra(7191990)]=0;e=4;c=0;for(a=-1;e!=c;)for(c=e,++a,b=0;7536>b;++b)if(eb[b]==a){f=0;
n=b;do n=Ya[n],f+=n&15,n>>=4,-1==eb[n]&&(++e,eb[n]=a+1);while(12!=f);f=0;n=b;do n=ib[n],f+=n&15,n>>=4,-1==eb[n]&&(++e,eb[n]=a+1);while(12!=f);n=r[b];-1==eb[n]&&(++e,eb[n]=a+1)}}function Ua(a){return fb(Wa,a.top<<12|a.bottom)<<1|a.Shape_parity}function Ta(a,b){a.Shape_parity=b&1;a.top=Wa[b>>1];a.bottom=a.top&4095;a.top>>=12}function Za(){}function Ra(a){return fb(Wa,a&16777215)<<1|a>>24}function Xa(){Xa=$.noop;bb=[];nb=[];ab=[];Va=[];var a,c,h;var r=[];for(c=0;40320>c;++c)b(r,c),z(r,2,4)(r,3,5),nb[c]=
Pa(r),b(r,c),z(r,0,3,2,1),ab[c]=Pa(r),b(r,c),z(r,4,7,6,5),Va[c]=Pa(r);for(c=0;80640>c;++c)bb[c]=-1;var e=bb[0]=0;for(a=1;80640>a;){var f=(h=11<=e)?-1:e;r=h?e:-1;++e;c=0;a:for(;80640>c;++c)if(bb[c]==f){var n=c>>1;var w=c&1;var Oa=nb[n]<<1|1-w;if(bb[Oa]==r&&(++a,bb[h?c:Oa]=e,h))continue a;Oa=n;for(n=0;4>n;++n)if(Oa=ab[Oa],bb[Oa<<1|w]==r&&(++a,bb[h?c:Oa<<1|w]=e,h))continue a;for(n=0;4>n;++n)if(Oa=Va[Oa],bb[Oa<<1|w]==r&&(++a,bb[h?c:Oa<<1|w]=e,h))continue a}}}function Sa(){}function Oa(a){a-=a>>1&1431655765;
a=(a>>2&858993459)+(a&858993459);a=(a>>4)+a&252645135;a+=a>>8;return a+(a>>16)&63}function fb(a,b){var c;var h=0;for(c=a.length-1;h<=c;){var r=h+(c-h>>1);var e=a[r];if(e<b)h=r+1;else if(e>b)c=r-1;else return r}return-h-1}function lb(){lb=$.noop;for(var a=new Za,b=0;b<hb.length;b++){for(var c=[hb[b]],h=0;h<c.length;h++){var r=c[h];do r=Ya[r<<1]>>5,-1==c.indexOf(r)&&c.push(r);while(r!=c[h]);do r=ib[r<<1]>>5,-1==c.indexOf(r)&&c.push(r);while(r!=c[h]);Ta(a,r<<1);r=a.top;a.top=a.bottom;a.bottom=r;r=Ua(a)>>
1;-1==c.indexOf(r)&&c.push(r)}hb[b]=c}}function gb(a,b,c){x();Xa();return y(db,f())}var mb=Na.prototype=function(){}.prototype;mb.dl=10062778;mb.dr=14536702;mb.ml=0;mb.ul=70195;mb.ur=4544119;mb=Qa.prototype=function(){}.prototype;mb.Search_c=null;mb.Search_length1=0;mb.Search_maxlen2=0;mb.Search_sol_string=null;mb=Za.prototype=function(){}.prototype;mb.bottom=0;mb.Shape_parity=0;mb.top=0;var ib,Wa,eb,Ya,r,h;mb=Sa.prototype=function(){}.prototype;mb.botEdgeFirst=!1;mb.cornperm=0;mb.edgeperm=0;mb.ml=
0;mb.topEdgeFirst=!1;var Va,bb,ab,nb,hb=[0,1,3,18,19,1004,1005,1006,1007,1008,1009,1011,1015,1016,1018,1154,1155,1156,1157,1158,1159,1161,1166,1168,424,425,426,427,428,429,431,436,95,218,341,482,528,632,1050,342,343,345,346,348,353,223,487,533,535,1055,219,225,483,489,639,1051,1057,486,1054,1062,6,21,34,46,59,71,144,157,182,305,7,22,35,47,60,72,145,158,183,306,8,23,36,48,61,73,146,159,184,307],ob=[16,16,16,10,16,24,16,24,16,24,16,16,4,24,16,48,32,48,32,48,32,32,48,16,48,32,48,16,48,32,32,48,36,48,
72,72,48,48,72,48,36,72,48,48,72,32,48,16,32,48,16,32,48,48,16,48,48,36,72,36,72,96,96,72,96,72,72,72,72,24,48,64,64,48,64,48,48,48,48,16,24,32,32,24,32,24,24,24,24,8],db=new Qa;scrMgr.reg("sqrs",gb);scrMgr.reg("sqrcsp",function(a,b,c){x();Xa();lb();a=mathlib.rndEl(hb[scrMgr.fixCase(c,ob)]);return y(db,f(a))},["Star-x8 Star-x71 Star-x62 Star-x44 Star-x53 Square-Scallop Square-rPawn Square-Shield Square-Barrel Square-rFist Square-Mushroom Square-lPawn Square-Square Square-lFist Square-Kite Kite-Scallop Kite-rPawn Kite-Shield Kite-Barrel Kite-rFist Kite-Mushroom Kite-lPawn Kite-lFist Kite-Kite Barrel-Scallop Barrel-rPawn Barrel-Shield Barrel-Barrel Barrel-rFist Barrel-Mushroom Barrel-lPawn Barrel-lFist Scallop-Scallop Scallop-rPawn Scallop-Shield Scallop-rFist Scallop-Mushroom Scallop-lPawn Scallop-lFist Shield-rPawn Shield-Shield Shield-rFist Shield-Mushroom Shield-lPawn Shield-lFist Mushroom-rPawn Mushroom-rFist Mushroom-Mushroom Mushroom-lPawn Mushroom-lFist Pawn-rPawn-rPawn Pawn-rPawn-lPawn Pawn-rPawn-rFist Pawn-lPawn-rFist Pawn-lPawn-lPawn Pawn-rPawn-lFist Pawn-lPawn-lFist Fist-rFist-rFist Fist-lFist-rFist Fist-lFist-lFist Pair-x6 Pair-r42 Pair-x411 Pair-r51 Pair-l42 Pair-l51 Pair-x33 Pair-x312 Pair-x321 Pair-x222 L-x6 L-r42 L-x411 L-r51 L-l42 L-l51 L-x33 L-x312 L-x321 L-x222 Line-x6 Line-r42 Line-x411 Line-r51 Line-l42 Line-l51 Line-x33 Line-x312 Line-x321 Line-x222".split(" "),
ob]);return{initialize:$.noop,getRandomScramble:gb}})(mathlib.set8Perm,mathlib.get8Perm,mathlib.circle,mathlib.rn);(function(){function b(a,b){var c=Na.set([],b&31),e=$a.set([],b>>5),n=f.set([],a),Oa=[];mathlib.fillFacelet(z,Oa,[0,1,2,3],e,6);mathlib.fillFacelet(w,Oa,n,c,6);c=[4,2,3,1,5,0];for(e=0;6>e;e++)for(n=0;2>n;n++){var y=w[e][0^n],x=w[e][1^n],Qa=6*~~(y/6)+c[(c.indexOf(y%6)+5)%6],Ua=6*~~(x/6)+c[(c.indexOf(x%6)+1)%6];if(Oa[Qa]==Oa[y]&&Oa[Ua]==Oa[x])return!1}return!0}function Pa(a,b){for(var c=f.set([],a[0]),e=Na.set([],a[1]&31),n=$a.set([],a[1]>>5),w=f.set([],b[0]),y=Na.set([],b[1]&31),x=$a.set([],b[1]>>
5),z=[],Qa=[],Ua=[],Wa=0;6>Wa;Wa++)z[Wa]=c[w[Wa]],Qa[Wa]=e[w[Wa]]^y[Wa];for(Wa=0;4>Wa;Wa++)Ua[Wa]=n[Wa]+x[Wa];return[f.get(z),$a.get(Ua)<<5|Na.get(Qa)]}for(var z=[[3,16,11],[4,23,15],[5,9,22],[10,17,21]],w=[[1,7],[2,14],[0,18],[6,12],[8,20],[13,19]],c=new mathlib.Solver(4,2,[[0,[function(a,b){mathlib.acycle(a,e[b])},"p",6,-1],360],[0,function(b,c){var f=Na.set([],b&31),n=$a.set([],b>>5);n[c]++;mathlib.acycle(f,e[c],1,a[c]);return $a.get(n)<<5|Na.get(f)},2592]]),e=[[0,1,3],[1,2,5],[0,4,2],[3,5,4]],
a=[[0,1,0,2],[0,1,0,2],[0,0,1,2],[0,0,1,2]],Na=new mathlib.coord("o",6,-2),f=new mathlib.coord("p",6,-1),$a=new mathlib.coord("o",4,3),n=[[0,0],[183,869],[87,1729]],y=[[1,3,"L3Bar-1","LLDGFFRRG"],[59,3,"L3Bar-2","DLLGFFRRG"],[25,3,"L3Bar-3","FFGDRRLLG"],[35,3,"L3Bar-4","GRRGLLFFD"],[12,3,"LL-1","LLGFFGGGG"],[10,3,"LL-2","GLLGGGGRR"],[2,1,"LL-3","RLRLFLFRF"],[4,1,"LL-4","FLFRFRLRL"],[3,3,"L4NB-1","FGGGGDGFGGGF"],[57,3,"L4NB-2","GGRGRGDGGGGR"],[53,3,"L4NB-3","GGDGRGGGRGGR"],[45,3,"L4NB-4","DGGFGGGFGGGF"],
[33,3,"L4NB-5","GGDGGGGRGGGR"],[27,3,"L4NB-6","DGGGFGGGGGGF"],[49,3,"L3NB-1","RRGGGDGFF"],[43,3,"L3NB-2","GFFRRGDGG"],[41,3,"L3NB-3","GGGDLLFFG"],[51,3,"L3NB-4","GGGGRRLLD"],[8,3,"Flip-1","RLFLFFRRL"],[16,3,"Flip-2","LFFRRRLLFGGD"],[56,1,"Flip-3","RLFLFRFRLGGD"],[21,3,"L4Blk-1","GGDGGGLLL"],[13,3,"L4Blk-2","DGGLLLGGG"],[29,3,"L4Bar-1","GGGDGGGRR"],[37,3,"L4Bar-2","GGGFFGGGD"],[61,3,"L4Bar-3","GGGDGGLLG"],[5,3,"L4Bar-4","GGGGLLGGD"],[17,3,"L4Bar-5","GGGLLDGGG"],[11,3,"L4Bar-6","GGGGGGDLL"],[9,3,"L4Bar-7",
"RRGDGGGGG"],[19,3,"L4Bar-8","GFFGGGGGD"],[20,3,"DFlip-1","GGGRRGGGGGGD"],[18,3,"DFlip-2","GGGGGGGFFGGD"],[60,1,"DFlip-3","FFGRRGLLGGGD"],[58,1,"DFlip-4","GRRGLLGFFGGD"]],Qa=[],x=[],Ua=0;Ua<y.length;Ua++)Qa.push(y[Ua][1]),x.push(y[Ua][2]);scrMgr.reg(["pyro","pyrso","pyrnb","pyr4c"],function(a){var e="pyro"==a?0:8,f="pyrl4e"==a?2:7;do{if("pyro"==a||"pyrso"==a||"pyr4c"==a){var n=mathlib.rn(360);var w=mathlib.rn(2592)}else if("pyrl4e"==a)n=mathlib.get8Perm(mathlib.set8Perm([],mathlib.rn(12),4,-1).concat([4,
5]),6,-1),w=864*mathlib.rn(3)+mathlib.rn(8);else if("pyrnb"==a){do n=mathlib.rn(360),w=mathlib.rn(2592);while(!b(n,w))}var Oa=c.search([n,w],0).length;var y=c.toStr(c.search([n,w],e).reverse(),"ULRB",["'",""])+" ";for(var x=0;4>x;x++){var Na=mathlib.rn("pyr4c"==a?2:3);2>Na&&(y+="lrbu".charAt(x)+[" ","' "][Na],Oa++)}}while(Oa<f);return y})("pyrl4e",function(a,b,e){b=y[scrMgr.fixCase(e,Qa)][0];a=mathlib.get8Perm(mathlib.set8Perm([],b&1,4,-1).concat([4,5]),6,-1);b=864*(b>>1&3)+(b>>3);a=Pa(mathlib.rndEl(n),
Pa([a,b],mathlib.rndEl(n)));a=c.toStr(c.search(a,8).reverse(),"ULRB",["'",""])+" ";for(b=0;4>b;b++)e=mathlib.rn(3),2>e&&(a+="lrbu".charAt(b)+[" ","' "][e]);return a},[x,Qa,function(a,b){var c=y[a];if(!b)return["GGG"+c[3],null,c[2]];image.pyrllImage("GGG"+c[3],b)}])})();(function(){function b(a,b){var e=f.set([],a%12),y=Na.set([],~~(a/12)),x=$a.set([],b%81);b=n.set([],~~(b/81));for(var Sa=[],Oa=0;6>Oa;Oa++)Sa[5*Oa]=y[Oa];mathlib.fillFacelet(w,Sa,[0,1,2,3],x,5);mathlib.fillFacelet(c,Sa,e,b,5);for(Oa=0;30>Oa;Oa+=5)for(e=1;5>e;e++)if(Sa[Oa]==Sa[Oa+e])return!1;return!0}function Pa(b,c){var n=f.set([],b%12),w=Na.set([],~~(b/12));mathlib.acycle(w,e[c]);mathlib.acycle(n,a[c]);return 12*Na.get(w)+f.get(n)}function z(b,c){var e=$a.set([],b%81),f=n.set([],~~(b/81));e[c]++;
mathlib.acycle(f,a[c],1,[0,2,1,3]);return 81*n.get(f)+$a.get(e)}var w=[[4,16,7],[1,11,22],[26,14,8],[29,19,23]],c=[[3,6,12],[2,21,17],[27,9,18],[28,24,13]],e=[[0,3,1],[0,2,4],[1,5,2],[3,4,5]],a=[[0,1,2],[0,3,1],[0,2,3],[1,3,2]],Na=new mathlib.coord("p",6,-1),f=new mathlib.coord("p",4,-1),$a=new mathlib.coord("o",4,3),n=new mathlib.coord("o",4,-3),y=new mathlib.Solver(4,2,[[0,Pa,4320],[0,z,2187]]),Qa=new mathlib.Solver(4,2,[[0,function(a,b){return~~(Pa(12*a,b)/12)},360],[0,function(a,b){return z(a,
b)%81},81]]),x=[0,1,2,0,2,1,1,2,0,2,1,0];scrMgr.reg(["skbo","skbso","skbnb"],function(a){var c="skbso"==a?6:2,e="skbo"==a?0:8;do{var f=mathlib.rn(4320);var n=mathlib.rn(2187)}while(0==f&&0==n||x[f%12]!=(n+~~(n/3)+~~(n/9)+~~(n/27))%3||null!=y.search([f,n],0,c)||"skbnb"==a&&!b(f,n));a=y.search([f,n],e).reverse();f=[];n=["L","R","B","U"];for(c=0;c<a.length;c++){e=a[c][0];var w=1-a[c][1];2==e&&mathlib.acycle(n,[0,3,1],w+1);f.push(n[e]+(1==w?"'":""))}return f.join(" ")})(["ivyo","ivyso"],function(a){var b=
"ivyso"==a?6:0;do{a=mathlib.rn(360);var c=mathlib.rn(81)}while(0==a&&0==c||null!=Qa.search([a,c],0,1));return Qa.toStr(Qa.search([a,c],b).reverse(),"RLDB","' ")})})();var scramble_222=function(b){function Pa(a,b){mathlib.acycle(a,f[b])}function z(a,b){mathlib.acycle(a,f[b],1,$a[b])}function w(a,b){for(var c=mathlib.set8Perm([],a,7),h=n.set([],b),e=[],f=0;24>f;f++)e[f]=f>>2;mathlib.fillFacelet(y,e,c,h,4);for(f=0;24>f;f+=4)if((1<<e[f]|1<<e[f+3])&(1<<e[f+1]|1<<e[f+2]))return!1;return!0}function c(a,c,r){var h=0,e=4;c=[0,1,2,3];var f=[0,0,0,0,0,0,0];if("222tcp"==a)h=Za[scrMgr.fixCase(r,fb)],f=[0,0,0,0,1,0,0],c=c.concat(Ua[0]);else if("222tcn"==a)h=Ra[scrMgr.fixCase(r,
gb)],f=[0,0,0,0,2,0,0],c=c.concat(Ua[0]);else if("222eg0"==a)h=Ta[scrMgr.fixCase(r,Sa)],c=c.concat(Ua[0]);else if("222eg1"==a)h=Ta[scrMgr.fixCase(r,Sa)],c=c.concat(Ua[2+b(4)]);else if("222eg2"==a)h=Ta[scrMgr.fixCase(r,Sa)],c=c.concat(Ua[1]);else if("222lsall"==a){c=c.concat(Ua[0]);e=mathlib.rndPerm(4);e.push(e[3]);e[3]=4;h=[0,Xa[scrMgr.fixCase(r,ib)][0]];for(r=0;5>r;r++)h[0]|=e[r]<<4*r;e=5}for(r=b(4);0<r--;)Pa(c,0);a=c.slice();for(r=0;r<e;r++)c[r]=a[h[0]>>4*r&15],f[r]=h[1]>>4*r&15;for(h=b(4);0<h--;)z(f,
0),Pa(c,0);c=mathlib.get8Perm(c,7);f=n.get(f);return Na.toStr(Na.search([c,f],9).reverse(),"URF","'2 ")}function e(a,b,c,h,e){b=b[h];for(var r=[],f=0;4>f;f++)if(a)for(w=b[0]>>(f<<2)&15,Oa=0;3>Oa;Oa++)x=Qa.indexOf(y[f][Oa]),r[x]="DGU".charAt(0==(Oa+3-w)%3?3==f?2:0:1);else for(var n=b[0]>>(f<<2)&15,w=b[1]>>(f<<2)&15,Oa=0;3>Oa;Oa++){var x=Qa.indexOf(y[f][Oa]);r[x]="DLFURB".charAt(y[n][(Oa+3-w)%3]>>2)}r=r.join("");if(!e)return[r,null,c[h]];image.llImage.drawImage(r,null,e)}function a(c,e,r){var h="222o"==
c?0:9;do{var f=2;if("222o"==c||"222so"==c){var Oa=b(5040);var y=b(729);f=3}else if("222eg"==c){y=x[r&7];Oa=[0,2,3,4,5,1][r>>3];Oa=mathlib.set8Perm([0,0,0,0].concat(Ua[Oa]),b(24),4);Oa=mathlib.get8Perm(Oa,7);var Sa=b(4);for(y=n.set([],y);0<Sa--;)z(y,0);y=n.get(y)}else{if(/^222eg[012]$/.exec(c))return a("222eg",e,[0,8,40][~~c[5]]+r);if("222nb"==c){do Oa=b(5040),y=b(729);while(!w(Oa,y))}}}while(0==Oa&&0==y||null!=Na.search([Oa,y],0,f));return Na.toStr(Na.search([Oa,y],h).reverse(),"URF","'2 ")}var Na=
new mathlib.Solver(3,3,[[0,[Pa,"p",7],5040],[0,[z,"o",7,-3],729]]),f=[[0,2,3,1],[0,1,5,4],[0,4,6,2]],$a=[null,[0,1,0,1,3],[1,0,1,0,3]],n=new mathlib.coord("o",7,-3),y=[[3,4,9],[1,20,5],[2,8,17],[0,16,21],[13,11,6],[15,7,22],[12,19,10]],Qa=[0,1,2,3,8,9,4,5,20,21,16,17],x=[0,17,5,14,8,1,2,4],Ua=[[4,5,6],[4,6,5],[6,5,4],[5,4,6],[5,6,4],[6,4,5]],Ta=[[12816,4641,2,"H-1"],[12576,4641,2,"H-2"],[8976,4641,4,"H-3"],[12306,4641,4,"H-4"],[786,528,4,"L-1"],[8976,528,4,"L-2"],[531,528,4,"L-3"],[12816,528,4,"L-4"],
[8211,528,4,"L-5"],[12306,528,4,"L-6"],[12816,4626,4,"Pi-1"],[531,4626,4,"Pi-2"],[8976,4626,4,"Pi-3"],[8211,4626,4,"Pi-4"],[12306,4626,4,"Pi-5"],[786,4626,4,"Pi-6"],[12816,8736,4,"S-1"],[531,8736,4,"S-2"],[786,8736,4,"S-3"],[12306,8736,4,"S-4"],[8211,8736,4,"S-5"],[8976,8736,4,"S-6"],[8976,4128,4,"T-1"],[8211,4128,4,"T-2"],[531,4128,4,"T-3"],[12816,4128,4,"T-4"],[12306,4128,4,"T-5"],[786,4128,4,"T-6"],[531,8208,4,"U-1"],[12816,8208,4,"U-2"],[786,8208,4,"U-3"],[12306,8208,4,"U-4"],[8976,8208,4,"U-5"],
[8211,8208,4,"U-6"],[12816,4113,4,"aS-1"],[531,4113,4,"aS-2"],[786,4113,4,"aS-3"],[12306,4113,4,"aS-4"],[8976,4113,4,"aS-5"],[8211,4113,4,"aS-6"]],Za=[[291,545,4,"Hammer-1"],[12321,545,4,"Hammer-2"],[306,545,4,"Hammer-3"],[561,545,4,"Hammer-4"],[801,545,4,"Hammer-5"],[8961,545,4,"Hammer-6"],[291,4130,4,"Spaceship-1"],[8961,4130,4,"Spaceship-2"],[4896,4130,4,"Spaceship-3"],[12321,4130,4,"Spaceship-4"],[12306,4130,4,"Spaceship-5"],[561,4130,4,"Spaceship-6"],[8241,2,4,"Stollery-1"],[12576,2,4,"Stollery-2"],
[12801,2,4,"Stollery-3"],[8451,2,4,"Stollery-4"],[561,2,4,"Stollery-5"],[8496,2,4,"Stollery-6"],[291,8738,1,"Pinwheel-1"],[4146,8738,1,"Pinwheel-2"],[12801,8738,4,"Pinwheel-3"],[8241,272,2,"2Face-1"],[12546,272,4,"2Face-2"],[531,272,2,"2Face-3"],[12321,272,4,"2Face-4"],[4866,290,4,"Turtle-1"],[4146,290,4,"Turtle-2"],[12801,290,4,"Turtle-3"],[4656,290,4,"Turtle-4"],[8976,290,4,"Turtle-5"],[801,290,4,"Turtle-6"],[12816,4370,4,"Pinwheel Poser-1"],[12576,4370,4,"Pinwheel Poser-2"],[12801,4370,4,"Pinwheel Poser-3"],
[8451,4370,4,"Pinwheel Poser-4"],[8976,4370,4,"Pinwheel Poser-5"],[8496,4370,4,"Pinwheel Poser-6"],[8241,17,4,"Gun-1"],[4146,17,4,"Gun-2"],[306,17,4,"Gun-3"],[12321,17,4,"Gun-4"],[8976,17,4,"Gun-5"],[8496,17,4,"Gun-6"]],Ra=[[4866,4609,4,"Hammer-1"],[12321,4609,4,"Hammer-2"],[8976,4609,4,"Hammer-3"],[12801,4609,4,"Hammer-4"],[4611,4609,4,"Hammer-5"],[12576,4609,4,"Hammer-6"],[291,4114,4,"Spaceship-1"],[4146,4114,4,"Spaceship-2"],[786,4114,4,"Spaceship-3"],[12801,4114,4,"Spaceship-4"],[4131,4114,4,
"Spaceship-5"],[8496,4114,4,"Spaceship-6"],[291,1,4,"Stollery-1"],[12576,1,4,"Stollery-2"],[306,1,4,"Stollery-3"],[8451,1,4,"Stollery-4"],[12546,1,4,"Stollery-5"],[4611,1,4,"Stollery-6"],[291,4369,1,"Pinwheel-1"],[4146,4369,1,"Pinwheel-2"],[4896,4369,4,"Pinwheel-3"],[8241,8194,2,"2Face-1"],[306,8194,4,"2Face-2"],[4146,8194,2,"2Face-3"],[12321,8194,4,"2Face-4"],[8241,4354,4,"Turtle-1"],[12576,4354,4,"Turtle-2"],[4131,4354,4,"Turtle-3"],[12321,4354,4,"Turtle-4"],[306,4354,4,"Turtle-5"],[4611,4354,4,
"Turtle-6"],[4866,8482,4,"Pinwheel Poser-1"],[531,8482,4,"Pinwheel Poser-2"],[8211,8482,4,"Pinwheel Poser-3"],[786,8482,4,"Pinwheel Poser-4"],[8976,8482,4,"Pinwheel Poser-5"],[801,8482,4,"Pinwheel Poser-6"],[291,34,4,"Gun-1"],[4146,34,4,"Gun-2"],[306,34,4,"Gun-3"],[8976,34,4,"Gun-4"],[786,34,4,"Gun-5"],[8496,34,4,"Gun-6"]],Xa=[[0,"LS1-PBL"],[546,"LS1-Sune"],[273,"LS1-aSune"],[258,"LS1-Ua"],[33,"LS1-Ub"],[288,"LS1-La"],[528,"LS1-Lb"],[513,"LS1-Ta"],[18,"LS1-Tb"],[66081,"LS2-Hammer"],[66066,"LS2-Spaceship"],
[66048,"LS2-StolleryA"],[65538,"LS2-StolleryB"],[65568,"LS2-StolleryC"],[65808,"LS2-2Face"],[65826,"LS2-Turtle"],[65553,"LS2-GunA"],[65793,"LS2-GunB"],[131346,"LS3-Hammer"],[131601,"LS3-Spaceship"],[131328,"LS3-StolleryA"],[131073,"LS3-StolleryB"],[131088,"LS3-StolleryC"],[131616,"LS3-2Face"],[131361,"LS3-Turtle"],[131106,"LS3-GunA"],[131586,"LS3-GunB"],[8226,"LS4-SuneA"],[8736,"LS4-SuneB"],[8706,"LS4-SuneC"],[8721,"LS4-PiA"],[8481,"LS4-PiB"],[8208,"LS4-U"],[8193,"LS4-L"],[8448,"LS4-T"],[8466,"LS4-H"],
[73746,"LS5-HammerA"],[73986,"LS5-HammerB"],[74016,"LS5-SpaceshipA"],[74241,"LS5-SpaceshipB"],[73728,"LS5-Stollery"],[74274,"LS5-Pinwheel"],[73761,"LS5-TurtleA"],[74256,"LS5-TurtleB"],[74001,"LS5-Pinwheel Poser"],[139536,"LS6-Hammer"],[139521,"LS6-Spaceship"],[139266,"LS6-2Face"],[139281,"LS6-Turtle"],[139554,"LS6-Pinwheel PoserA"],[139809,"LS6-Pinwheel PoserB"],[139794,"LS6-Pinwheel PoserC"],[139776,"LS6-GunA"],[139296,"LS6-GunB"],[4113,"LS7-aSuneA"],[4368,"LS7-aSuneB"],[4353,"LS7-aSuneC"],[4626,
"LS7-PiA"],[4386,"LS7-PiB"],[4608,"LS7-U"],[4098,"LS7-L"],[4128,"LS7-T"],[4641,"LS7-H"],[70176,"LS8-Hammer"],[69666,"LS8-Spaceship"],[69633,"LS8-2Face"],[70146,"LS8-Turtle"],[69921,"LS8-Pinwheel PoserA"],[69906,"LS8-Pinwheel PoserB"],[70161,"LS8-Pinwheel PoserC"],[69648,"LS8-GunA"],[69888,"LS8-GunB"],[135681,"LS9-HammerA"],[135201,"LS9-HammerB"],[135186,"LS9-SpaceshipA"],[135456,"LS9-SpaceshipB"],[135168,"LS9-Stollery"],[135441,"LS9-Pinwheel"],[135426,"LS9-TurtleA"],[135696,"LS9-TurtleB"],[135714,
"LS9-Pinwheel Poser"]],Sa=mathlib.idxArray(Ta,2),Oa=mathlib.idxArray(Ta,3),fb=mathlib.idxArray(Za,2),lb=mathlib.idxArray(Za,3),gb=mathlib.idxArray(Ra,2),mb=mathlib.idxArray(Ra,3),ib=mathlib.valuedArray(Xa.length,1),Wa=mathlib.idxArray(Xa,1);scrMgr.reg(["222o","222so","222nb"],a)("222eg0",c,[Oa,Sa,e.bind(null,!1,Ta,Oa)])("222eg1",c,[Oa,Sa,e.bind(null,!1,Ta,Oa)])("222eg2",c,[Oa,Sa,e.bind(null,!1,Ta,Oa)])("222tcp",c,[lb,fb,e.bind(null,!1,Za,lb)])("222tcn",c,[mb,gb,e.bind(null,!1,Ra,mb)])("222lsall",
c,[Wa,ib,e.bind(null,!0,Xa,Wa)])("222eg",a,["EG0-O EG0-H EG0-L EG0-Pi EG0-S EG0-T EG0-U EG0-aS EG1B-O EG1B-H EG1B-L EG1B-Pi EG1B-S EG1B-T EG1B-U EG1B-aS EG1L-O EG1L-H EG1L-L EG1L-Pi EG1L-S EG1L-T EG1L-U EG1L-aS EG1F-O EG1F-H EG1F-L EG1F-Pi EG1F-S EG1F-T EG1F-U EG1F-aS EG1R-O EG1R-H EG1R-L EG1R-Pi EG1R-S EG1R-T EG1R-U EG1R-aS EG2-O EG2-H EG2-L EG2-Pi EG2-S EG2-T EG2-U EG2-aS".split(" "),[1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4]]);return{getEGLLImage:e.bind(null,
Ta,Oa)}}(mathlib.rn);(function(){function b(a,b){mathlib.acycle(a,[0,b+1])}function Pa(a,b){var c=mathlib.set8Perm([],~~(a/3),4);mathlib.acycle(c,f[b]);return 3*mathlib.get8Perm(c,4)+(a%3+(0==b?1:0))%3}function z(b,c,f){return 72*e[f][~~(c/72)]+a[(f+b)%3][c%72]}function w(b,c,f,z){if(0==c)return 0==b[0]&&0==b[1]&&0==b[2]&&0==b[3];if(Math.max(mathlib.getPruning(Na[0],72*b[0]+b[1]),mathlib.getPruning(Na[1],72*b[0]+b[2]),mathlib.getPruning(Na[2],72*b[0]+b[3]))>c)return!1;for(var n=0;3>n;n++)if(n!=f)for(var y=b.slice(),Qa=
0;11>Qa;Qa++){y[0]=e[n][y[0]];for(var Za=1;4>Za;Za++)y[Za]=a[(n+Za-1)%3][y[Za]];if(w(y,c-1,n,z))return z.push("URF".charAt(n)+"' 2' 3' 4' 5' 6 5 4 3 2 ".split(" ")[Qa]),!0}}function c(){c=$.noop;mathlib.createMove(a,72,Pa,3);mathlib.createMove(e,24,[b,"p",4],3);for(var f=0;3>f;f++)mathlib.createPrun(Na[f],0,1728,5,z.bind(null,f),3,12,0)}var e=[],a=[],Na=[[],[],[]],f=[[0,3,2,1],[0,1],[0,3]];scrMgr.reg(["gearo","gearso"],function(a){c();do{var b=[mathlib.rn(24)];for(var e=0;3>e;e++){do b[e+1]=mathlib.rn(72);
while(15==mathlib.getPruning(Na[e],72*b[0]+b[e+1]))}}while(0==b);a="gearso"==a?4:0;for(e=[];!w(b,a,-1,e);)a++;return e.reverse().join(" ")})})();(function(){var b=new mathlib.Solver(4,1,[[0,function(b,w){var c=mathlib.set8Perm([],b>>4,4);mathlib.acycle(c,Pa[w]);return(mathlib.get8Perm(c,4)<<4)+(b&15^1<<w)},384]]),Pa=[[0,1],[2,3],[0,3],[1,2]];scrMgr.reg("133",function(){var z=1+mathlib.rn(191);z=2*z+((mathlib.getNParity(z>>3,4)^z>>1^z>>2^z)&1);return b.toStr(b.search([z],0),"RLFB",[""])})})();(function(b,Pa){function z(){z=$.noop;for(var a=[],w,f=0;40320>f;f++)c[f]=[];for(f=0;40320>f;f++)mathlib.set8Perm(a,f),b(a,0,1,2,3),w=c[0][f]=Pa(a),b(a,4,5,6,7),w=c[1][w]=Pa(a),b(a,2,5)(a,3,6),w=c[2][w]=Pa(a),b(a,0,5)(a,3,4),c[3][w]=Pa(a);mathlib.createPrun(e,0,40320,12,c,4,3)}function w(a,Na,f,z,n){if(0==f)return 0==a+Na;if(mathlib.getPruning(e,a)>f)return!1;var y,Qa;for(Qa=0;4>Qa;Qa++)if(Qa!=z){var x=a;var Ua=Na;for(y=0;y<(2>Qa?3:1);y++){x=c[Qa][x];var Ta=Qa;2>Ta||(Ua=mathlib.set8Perm([],Ua,3),
2==Ta?b(Ua,0,1):3==Ta&&b(Ua,0,2),Ua=Pa(Ua,3));if(w(x,Ua,f-1,Qa,n))return n.push(["U","D","R2","F2"][Qa]+(2>Qa?" 2'".charAt(y):"")),!0}}}var c=[],e=[];scrMgr.reg("223",function(){z();do{var a=mathlib.rn(40320);var b=mathlib.rn(6)}while(0==b+a);for(var c=[],e=0;99>e&&!w(a,b,e,-1,c);e++);return c.reverse().join(" ")})})(mathlib.circle,mathlib.get8Perm);var clock=function(b,Pa){function z(a,b,c,e,w){for(var f=a[0].length;e<f;e++)a[c][e]=(a[c][e]+a[b][e]*w)%12}var w=[[0,1,1,0,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,1,1,0,0,0,0,0],[0,0,0,1,1,0,1,1,0,0,0,0,0,0],[1,1,0,1,1,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,1,1,0,1,1,0,1,1,0,0,0,0,0],[0,0,0,1,1,1,1,1,1,0,0,0,0,0],[1,1,0,1,1,0,1,1,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,0,0,0,0,0],[11,0,0,0,0,0,0,0,0,1,0,1,1,0],[0,0,0,0,0,0,11,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,11,0,1,1,0,1],[0,0,11,0,0,0,0,0,0,1,1,
1,0,0],[11,0,11,0,0,0,0,0,0,1,1,1,1,0],[11,0,0,0,0,0,11,0,0,1,0,1,1,1],[0,0,0,0,0,0,11,0,11,0,1,1,1,1],[0,0,11,0,0,0,0,0,11,1,1,1,0,1],[11,0,11,0,0,0,11,0,11,1,1,1,1,1]],c=[-1,1,-1,-1,-1,5,-1,7,-1,-1,-1,11],e=[7695,42588,47187,85158,86697,156568,181700,209201,231778],a="UR DR DL UL U R D L ALL".split(" ");scrMgr.reg("clko",function(Na){var f=[];for(Na=0;14>Na;Na++)f[Na]=b(12);Na=[];Na.length=18;if(14==f.length&&18==Na.length)for(var $a=15,n=0;n<Pa[18][14];n++){var y=n;var Qa=14;for(var x=0,Ua=17;0<=
Ua;Ua--)y>=Pa[Ua][Qa]&&(y-=Pa[Ua][Qa--],x|=1<<Ua);Qa=x;y=!1;for(x=0;x<e.length;x++)if((Qa&e[x])==e[x]){y=!0;break}if(!y){y=[];for(x=Ua=0;18>x;x++)1==(Qa>>x&1)&&(y[Ua++]=x);Qa=[];for(Ua=0;14>Ua;Ua++){Qa[Ua]=[];for(x=0;14>x;x++)Qa[Ua][x]=w[y[x]][Ua];Qa[Ua][14]=f[Ua]}b:{x=Qa;Ua=x[0].length;for(var Ta=0;Ta<Ua-1;Ta++){if(-1==c[x[Ta][Ta]]){for(var Za=-1,Ra=Ta+1;14>Ra;Ra++)if(-1!=c[x[Ra][Ta]]){Za=Ra;break}if(-1==Za)c:for(Ra=Ta;13>Ra;Ra++)for(var Xa=Ra+1;14>Xa;Xa++)if(-1!=c[(x[Ra][Ta]+x[Xa][Ta])%12]){z(x,
Xa,Ra,Ta,1);Za=Ra;break c}if(-1==Za){for(Ra=Ta+1;14>Ra;Ra++)if(0!=x[Ra][Ta]){x=-1;break b}x=Ta+1;break b}Ra=x;Xa=Ra[Ta];Ra[Ta]=Ra[Za];Ra[Za]=Xa}Za=c[x[Ta][Ta]];for(Ra=Ta;Ra<Ua;Ra++)x[Ta][Ra]=x[Ta][Ra]*Za%12;for(Ra=Ta+1;14>Ra;Ra++)z(x,Ta,Ra,Ta,12-x[Ra][Ta])}x=0}if(0==x){x=!0;for(Ua=14;14>Ua;Ua++)if(0!=Qa[Ua][14]){x=!1;break}if(x){x=Qa;for(Ua=x[0].length-2;0<Ua;Ua--)for(Ta=Ua-1;0<=Ta;Ta--)0!=x[Ta][Ua]&&z(x,Ua,Ta,Ua,12-x[Ta][Ua]);for(Ua=x=0;14>Ua;Ua++)0!=Qa[Ua][14]&&x++;if(x<$a){for(Ua=0;18>Ua;Ua++)Na[Ua]=
0;for(Ua=0;14>Ua;Ua++)Na[y[Ua]]=Qa[Ua][14];$a=x}}}}}f="";for($a=0;9>$a;$a++)n=Na[$a],0!=n&&(y=6>=n,6<n&&(n=12-n),f+=a[$a]+n+(y?"+":"-")+" ");f+="y2 ";for($a=0;9>$a;$a++)n=Na[$a+9],0!=n&&(y=6>=n,6<n&&(n=12-n),f+=a[$a]+n+(y?"+":"-")+" ");Na=!0;for($a=0;4>$a;$a++)1==b(2)&&(f+=(Na?"":" ")+a[$a],Na=!1);return f});return{moveArr:w}}(mathlib.rn,mathlib.Cnk);(function(){var b=[[0,1,2,3],[0,2,5,4]],Pa=[[0,0,0,0,2],[0,1,0,1,2]],z=new mathlib.Solver(2,3,[[0,function(w,c){var e=w>>3,a=w,Na=w<<1|mathlib.getNParity(e,6)^a>>1&1;e=mathlib.set8Perm([],e,6);mathlib.acycle(e,b[c]);0==c&&(a+=2);1==c&&(Na+=1);return mathlib.getNPerm(e,6)<<3|a&6|Na>>1&1},5760],[0,[function(w,c){mathlib.acycle(w,b[c],1,Pa[c])},"o",6,-2],32]]);scrMgr.reg("lsemu",function(){do{var b=mathlib.rn(5760);var c=mathlib.rn(32)}while(0==c+b);return z.toStr(z.search([b,c],0),"UM"," 2'").replace(/ +/g,
" ")})})();(function(){function b(a,b,f){f=b=0;do"mlsll"==a?(b=mathlib.rn(11520),f=mathlib.rn(87480)):"mgmpll"==a?(b=32*Pa.get(mathlib.rndPerm(5,!0).concat([5])),f=243*w.get(mathlib.rndPerm(5,!0).concat([5]))):"mgmll"==a&&(b=z.set([],mathlib.rn(32)),b[0]+=b[5],b[5]=0,f=c.set([],mathlib.rn(243)),f[0]+=f[5],f[5]=0,b=32*Pa.get(mathlib.rndPerm(5,!0).concat([5]))+z.get(b),f=243*w.get(mathlib.rndPerm(5,!0).concat([5]))+c.get(f));while(0==b&&0==f);a=e.search([b,f],0);b=[];for(f=0;f<a.length;f++){var Na=a[f];b.push(["U",
"R U","F' U"][Na[0]]+["","2","2'","'"][Na[1]]+[""," R'"," F"][Na[0]])}return b.join(" ").replace(/ +/g," ")}var Pa=new mathlib.coord("p",6,-1),z=new mathlib.coord("o",6,-2),w=new mathlib.coord("p",6,-1),c=new mathlib.coord("o",6,-3),e=new mathlib.Solver(3,4,[[0,function(a,b){var c=Pa.set([],a>>5),e=z.set([],a&31);0==b?(mathlib.acycle(e,[0,1,2,3,4],1),mathlib.acycle(c,[0,1,2,3,4],1)):1==b?(mathlib.acycle(e,[0,1,2,3,5],1),mathlib.acycle(c,[0,1,2,3,5],1)):2==b&&(mathlib.acycle(e,[1,2,3,4,5],1,[0,0,0,
0,1,2]),mathlib.acycle(c,[1,2,3,4,5]));return Pa.get(c)<<5|z.get(e)},11520],[0,function(a,b){var e=w.set([],~~(a/243)),Na=c.set([],a%243);0==b?(mathlib.acycle(Na,[0,1,2,3,4],1),mathlib.acycle(e,[0,1,2,3,4],1)):1==b?(mathlib.acycle(Na,[0,5,1,2,3],1,[2,0,0,0,0,3]),mathlib.acycle(e,[0,5,1,2,3])):2==b&&(mathlib.acycle(Na,[0,2,3,4,5],1,[1,0,0,0,1,3]),mathlib.acycle(e,[0,2,3,4,5]));return 243*w.get(e)+c.get(Na)},87480]]);scrMgr.reg("mlsll",b)("mgmpll",b)("mgmll",b)})();var kilominx=function(){function b(){this.perm=[];this.twst=[];for(var a=0;20>a;a++)this.perm[a]=a,this.twst[a]=0}function Pa(){for(var a=[],c=[],e=0;48>e;e++)a[e]=new b;for(var f=0;48>f;f+=4){a[f].faceletMove(f>>2,1,0);c[f]=a[f].hashCode();for(var n=0;3>n;n++)b.KiloMult(a[f+n],a[f],a[f+n+1]),c[f+n+1]=a[f+n+1].hashCode()}b.moveCube=a;f=[];n=[];var w=[],Oa=[],y=[],x=new b;for(e=0;60>e;e++)f[e]=(new b).init(x.perm,x.twst),y[e]=f[e].hashCode(),n[e]=[],w[e]=[],x.faceletMove(0,1,1),4==e%5&&x.faceletMove(4==
e%10?1:2,1,1),29==e%30&&(x.faceletMove(1,2,1),x.faceletMove(2,1,1),x.faceletMove(0,3,1));for(e=0;60>e;e++)for(var Na=0;60>Na;Na++){b.KiloMult(f[e],f[Na],x);var Sa=y.indexOf(x.hashCode());n[e][Na]=Sa;w[Sa][Na]=e}for(e=0;60>e;e++)for(Oa[e]=[],Na=0;12>Na;Na++)b.KiloMult3(f[w[0][e]],a[4*Na],f[e],x),Sa=c.indexOf(x.hashCode()),Oa[e][Na]=Sa>>2;b.symCube=f;b.symMult=n;b.symMulI=w;b.symMulM=Oa}function z(a){this.map=new b;this.imap=new b;this.map.perm=a.slice();for(var c=0;20>c;c++)-1==a.indexOf(c)&&this.map.perm.push(c);
this.imap.invFrom(this.map);this.tmp=new b}function w(a,b,c){a=a[c][~~(b/81/24)];return 1944*a[0]+81*Ua[~~(b/81)%24][a[1]]+Za[Ta[a[1]][b%81]][a[2]]}function c(a,b,c){a=a[c][~~(b/27/6)];return 162*a[0]+27*Ua[~~(b/27)%6][a[1]]+Za[Ta[a[1]][b%27*3]/3][a[2]]}function e(){function c(a,b){for(var c=0;4>c;c++)a[c]=b%3,b=~~(b/3)}function h(a){for(var b=0,c=3;0<=c;c--)b=3*b+a[c];return b}e=$.noop;var n=performance.now();Pa();for(var w=[],Oa=[],y=[],x=0;24>x;x++){Ua[x]=[];mathlib.setNPerm(w,x,4);for(var Sa=
0;24>Sa;Sa++){mathlib.setNPerm(Oa,Sa,4);for(var z=0;4>z;z++)y[z]=w[Oa[z]];Ua[x][Sa]=mathlib.getNPerm(y,4)}}for(Sa=0;24>Sa;Sa++)for(Ta[Sa]=[],mathlib.setNPerm(Oa,Sa,4),x=0;81>x;x++){c(w,x);for(z=0;4>z;z++)y[z]=w[Oa[z]];Ta[Sa][x]=h(y)}for(Sa=0;81>Sa;Sa++)for(Za[Sa]=[],c(Oa,Sa),x=0;81>x;x++){c(w,x);for(z=0;4>z;z++)y[z]=(w[z]+Oa[z])%3;Za[Sa][x]=h(y)}w=new b;Oa=new b;for(y=0;12>y;y++)for(Ra[y]=1<<y,x=0;x<y;x++)b.KiloMult(b.moveCube[4*y],b.moveCube[4*x],w),b.KiloMult(b.moveCube[4*x],b.moveCube[4*y],Oa),
w.isEqual(Oa)&&(Ra[y]|=1<<x);a();Na();f();DEBUG&&console.log("[kilo] init finished, tt=",performance.now()-n)}function a(){Wa=new z([5,6,7,8,9]);var a=new b,h=new b;mathlib.createMove(Oa,1140,function(c,e){Wa.set(a,c,3);b.KiloMult(a,b.moveCube[4*e],h);return Wa.get(h,3)},12);mathlib.createPrun(gb,0,184680,8,c.bind(null,Oa),12,4,5)}function Na(){eb=new z([13,15,16,0,1,2,3,4,10,11,12,14,17,18,19]);var a=new b,h=new b;mathlib.createMove(fb,455,function(c,e){eb.set(a,c,3);b.KiloMult(a,b.moveCube[4*e],
h);return eb.get(h,3)},6);mathlib.createPrun(mb,0,73710,8,c.bind(null,fb),6,4,4)}function f(){Ya=new z([0,1,2,3,4,10,11,14,17,18]);var a=new b,c=new b;mathlib.createMove(lb,210,function(h,e){Ya.set(a,h);b.KiloMult(a,b.moveCube[4*e],c);return Ya.get(c)},3);mathlib.createPrun(ib,0,408240,14,w.bind(null,lb),3,4,6)}function $a(a,b,c,e,f,n,w,Oa){if(0==n)return b(a);if(c(a)>n)return!1;for(var h=0;h<f;h++)if(!(Ra[w]>>h&1))for(var r=a,y=0;4>y;y++){r=e(r,h);if(null==r)break;if($a(r,b,c,e,f,n-1,h,Oa))return Oa.push([h,
y]),!0}return!1}function n(a,b,c,e,f,n){for(var h=[],r=0;r<=n&&!$a(a,b,c,e,f,r,-1,h);r++);h.reverse();return h}function y(a){for(var b=[],c=0;c<a.length;c++)b.push("U R F L BL BR DR DL DBL B DBR D".split(" ")[a[c][0]]+["","2","2'","'"][a[c][1]]);return b.join(" ")}function Qa(a){e();var h=new b,r=new b;h.init(a.perm,a.twst);var f=c.bind(null,Oa),x=Wa.get(h,3);b.KiloMult3(b.symCube[b.symMulI[0][2]],h,b.symCube[2],r);var Na=Wa.get(r,3);Na=[162*x[0]+27*x[1]+x[2],162*Na[0]+27*Na[1]+Na[2]];x=+new Date;
a=n(Na,function(a){return 0==a[0]&&0==a[1]},function(a){return Math.max(mathlib.getPruning(gb,a[0]),mathlib.getPruning(gb,a[1]))},function(a,b){var c=[f(a[0],b),f(a[1],Xa[b])];return c[0]==a[0]&&c[1]==a[1]?null:c},12,9);for(Na=0;Na<a.length;Na++){var z=a[Na];b.KiloMult(h,b.moveCube[4*z[0]+z[1]],r);h.init(r.perm,r.twst)}DEBUG&&console.log("[kilo] Phase1 in ",+new Date-x);var Ra=c.bind(null,fb);x=eb.get(h,3);b.KiloMult3(b.symCube[b.symMulI[0][1]],h,b.symCube[1],r);Na=eb.get(r,3);Na=[162*x[0]+27*x[1]+
x[2],162*Na[0]+27*Na[1]+Na[2]];x=+new Date;var Qa=n(Na,function(a){return 0==a[0]&&0==a[1]},function(a){return Math.max(mathlib.getPruning(mb,a[0]),mathlib.getPruning(mb,a[1]))},function(a,b){var c=[Ra(a[0],b),Ra(a[1],Sa[b])];return c[0]==a[0]&&c[1]==a[1]?null:c},6,14);for(Na=0;Na<Qa.length;Na++)z=Qa[Na],b.KiloMult(h,b.moveCube[4*z[0]+z[1]],r),h.init(r.perm,r.twst);DEBUG&&console.log("[kilo] Phase2 in ",+new Date-x);var Ua=w.bind(null,lb);x=Ya.get(h);b.KiloMult3(b.symCube[b.symMulI[0][6]],h,b.symCube[6],
r);Na=Ya.get(r);b.KiloMult3(b.symCube[b.symMulI[0][29]],h,b.symCube[29],r);h=Ya.get(r);Na=[1944*x[0]+81*x[1]+x[2],1944*Na[0]+81*Na[1]+Na[2],1944*h[0]+81*h[1]+h[2]];x=+new Date;h=n(Na,function(a){return 0==a[0]&&0==a[1]&&0==a[2]},function(a){return Math.max(mathlib.getPruning(ib,a[0]),mathlib.getPruning(ib,a[1]),mathlib.getPruning(ib,a[2]))},function(a,b){return[Ua(a[0],b),Ua(a[1],(b+1)%3),Ua(a[2],(b+2)%3)]},3,14);DEBUG&&console.log("[kilo] Phase3 in ",+new Date-x);DEBUG&&console.log("[kilo] total length: ",
a.length+Qa.length+h.length);return y(Array.prototype.concat(a,Qa,h))}b.SOLVED=new b;var x=[[2,8,14],[3,13,19],[4,18,24],[0,23,29],[1,28,9],[58,45,41],[57,50,46],[56,30,51],[55,35,31],[59,40,36],[10,7,33],[15,12,38],[20,17,43],[25,22,48],[5,27,53],[49,21,42],[54,26,47],[34,6,52],[39,11,32],[44,16,37]];b.prototype.toFaceCube=function(a){a=a||x;for(var b=[],c=0;20>c;c++)for(var e=this.perm[c],r=this.twst[c],f=0;3>f;f++)b[a[c][(f+r)%3]]=~~(a[e][f]/5);return b};b.prototype.fromFacelet=function(a,b){b=
b||x;for(var c=0,h=[],e=0;60>e;++e)h[e]=a[e],c+=Math.pow(16,h[e]);if(93824992236885!=c)return-1;for(e=0;20>e;e++)for(c=0;20>c;c++){for(var r=-1,f=0;3>f;f++)if(~~(b[c][0]/5)==h[b[e][f]]&&~~(b[c][1]/5)==h[b[e][(f+1)%3]]&&~~(b[c][2]/5)==h[b[e][(f+2)%3]]){r=f;break}-1!=r&&(this.perm[e]=c,this.twst[e]=r)}return this};b.prototype.hashCode=function(){for(var a=0,b=0;20>b;b++)a=0|31*a+3*this.perm[b]+this.twst[b];return a};b.KiloMult=function(a,b,c){for(var h=0;20>h;h++)c.perm[h]=a.perm[b.perm[h]],c.twst[h]=
(a.twst[b.perm[h]]+b.twst[h])%3};b.KiloMult3=function(a,b,c,e){for(var h=0;20>h;h++)e.perm[h]=a.perm[b.perm[c.perm[h]]],e.twst[h]=(a.twst[b.perm[c.perm[h]]]+b.twst[c.perm[h]]+c.twst[h])%3};b.prototype.invFrom=function(a){for(var b=0;20>b;b++)this.perm[a.perm[b]]=b,this.twst[a.perm[b]]=(3-a.twst[b])%3;return this};b.prototype.init=function(a,b){this.perm=a.slice();this.twst=b.slice();return this};b.prototype.isEqual=function(a){for(var b=0;20>b;b++)if(this.perm[b]!=a.perm[b]||this.twst[b]!=a.twst[b])return!1;
return!0};b.prototype.setComb=function(a,b){b=b||4;for(var c=19,h=19;0<=h;h--)a>=mathlib.Cnk[h][b]?(a-=mathlib.Cnk[h][b--],this.perm[h]=b):this.perm[h]=c--,this.twst[h]=0};b.prototype.getComb=function(a){for(var b=a=a||4,c=0,e=0,f=[],r=19;0<=r;r--)this.perm[r]<b&&(c+=mathlib.Cnk[r][a--],e=3*e+this.twst[r],f[a]=this.perm[r]);return[c,mathlib.getNPerm(f,b),e]};b.prototype.faceletMove=function(a,b,c){for(var h=this.toFaceCube(),e=[],f=0;12>f;f++){for(var r=0;5>r;r++)e[11*f+r]=h[5*f+r],e[11*f+r+5]=0;
e[11*f+10]=0}mathlib.minx.doMove(e,a,b,c);for(f=0;12>f;f++)for(r=0;5>r;r++)h[5*f+r]=e[11*f+r];this.fromFacelet(h)};z.prototype.get=function(a,c){b.KiloMult3(this.imap,a,this.map,this.tmp);return this.tmp.getComb(c)};z.prototype.set=function(a,c,e){this.tmp.setComb(c,e);b.KiloMult3(this.map,this.tmp,this.imap,a)};b.CombCoord=z;var Ua=[],Ta=[],Za=[],Ra=[],Xa=[0,3,4,5,1,2,8,9,10,6,7,11],Sa=[0,2,3,4,5,1,7,8,9,10,6,11],Oa=[],fb=[],lb=[],gb=[],mb=[],ib=[],Wa,eb,Ya;scrMgr.reg("klmso",function(){e();var a=
new b;a.perm=mathlib.rndPerm(20,!0);for(var c=60,f=0;19>f;f++){var n=mathlib.rn(3);a.twst[f]=n;c-=n}a.twst[19]=c%3;return Qa(a)});return b}();(function(b,Pa,z){function w(a,c,e,f){void 0==f&&(f=[""]);for(var n=0,w,y=[],x=0;x<e;x++){do w=b(a.length);while(n>>w&1);y.push(a[w]+Pa(f));n&=~c[w];n|=1<<w}return y.join(" ")}function c(a){return" "+Pa([a+"=0",a+"+1",a+"+2",a+"+3",a+"+4",a+"+5",a+"+6",a+"-5",a+"-4",a+"-3",a+"-2",a+"-1"])+" "}function e(){return Pa(["U","d"])+Pa(["U","d"])}function a(a,c,e,f){for(var n=[[0,-1],[1,0],[-1,0],[0,1]],w=0,y=3,x,Na=5,Sa=[],z=0;z<c;z++){do x=b(4);while(0>w+n[x][0]||3<w+n[x][0]||0>y+n[x][1]||3<y+n[x][1]||
3==x+Na);w+=n[x][0];y+=n[x][1];0<Sa.length&&Sa[Sa.length-1][0]==x?Sa[Sa.length-1][1]++:Sa.push([x,1]);Na=x}c="";for(z=0;z<Sa.length;z++)if(n=a?Sa[z][0]:3-Sa[z][0],n=(e?"￪￩￫￬":"ULRD").charAt(n),f)c+=n+(1==Sa[z][1]?"":Sa[z][1])+" ";else for(w=0;w<Sa[z][1];w++)c+=n+" ";return c}function Na(a,b){var c="",e,f;for(e=0;e<b;e++){c+="  ";for(f=0;f<a;f++)c+=(0==f%2?"R":"D")+Pa(["++","--"])+" ";c+="U"+(c.endsWith("-- ")?"'\\n":"~\\n")}return c}function f(a,b){Ua=[];var c;$a(1,a,b);var e="";for(c=0;c<Ua[0].length;c++){var f=
Ua[0][c];e=7==f[0]?e+"/":e+(" ("+f[0]+","+f[1]+") ")}return e}function $a(a,c,e){for(var f=0;f<a;f++){Ta=[1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0];Ua[f]=[];for(var w=0;w<e;){var y=b(12)-5,x=2==c?0:b(12)-5,Na=(0==y?0:1)+(0==x?0:1);(w+Na<=e||1!=c)&&(0<Na||0==w)&&n(y,x)&&(1==c&&(w+=Na),0<Na&&(Ua[f][Ua[f].length]=[y,x]),w<e||1!=c)&&(w++,Ua[f][Ua[f].length]=[7,0],n(7,0))}}}function n(a,b){var c;if(7==a){for(c=0;6>c;c++)mathlib.circle(Ta,c+6,c+12);return!0}if(Ta[(17-a)%12]||Ta[(11-a)%12]||Ta[12+
(17-b)%12]||Ta[12+(11-b)%12])return!1;var e=Ta.slice(0,12);var f=Ta.slice(12,24);for(c=0;12>c;c++)Ta[c]=e[(12+c-a)%12],Ta[c+12]=f[(12+c-b)%12];return!0}function y(a,c){for(var e=0,f=[],n=0;4>n;n++)f[n]=b(3),0<f[n]?(f[n]="ulrb".charAt(n)+["! ","' "][f[n]-1],e++):f[n]="";return a.substr(0,a.length-c*e)+" "+f.join("")}var Qa=["","2","'"],x=["","2","'","2'"],Ua=[],Ta=[];scrMgr.reg("444yj",function(a,c){var e=[["U","D"],["R","L","r"],["F","B","f"]],f=[],n=0,w,y="";var x=-1;for(w=0;w<c;w++){var Na=0;do{var z=
b(e.length),Ra=b(e[z].length);if(z!=x||0==f[Ra]){if(z==x)f[Ra]=1,Na=b(Qa.length);else{for(x=0;x<e[z].length;x++)f[x]=0;x=z;f[Ra]=1;Na=b(Qa.length)}0==z&&0==Ra&&(n=(n+4+Na)%4);y=1==z&&2==Ra?0==n||3==n?y+("l"+Qa[Na]+" "):y+("r"+Qa[Na]+" "):2==z&&2==Ra?0==n||1==n?y+("b"+Qa[Na]+" "):y+("f"+Qa[Na]+" "):y+(e[z][Ra]+Qa[Na]+" ");Na=1}}while(0==Na)}return y});scrMgr.reg("bic",function(a,c){function e(a){var b=[],c,e,f,x=0;for(c=0;9>c;c++){for(e=f=0;e<b.length;e++)b[e]==w[n[a][c]]&&(f=1);0==f&&(b[b.length]=
w[n[a][c]],0==w[n[a][c]]&&(x=1))}return 5==b.length&&1==x}function f(a,b){for(var c=0;c<b;c++){var e=w[n[a][0]];w[n[a][0]]=w[n[a][6]];w[n[a][6]]=w[n[a][4]];w[n[a][4]]=w[n[a][2]];w[n[a][2]]=e;e=w[n[a][7]];w[n[a][7]]=w[n[a][5]];w[n[a][5]]=w[n[a][3]];w[n[a][3]]=w[n[a][1]];w[n[a][1]]=e}}for(var n=[[0,1,2,5,8,7,6,3,4],[6,7,8,13,20,19,18,11,12],[0,3,6,11,18,17,16,9,10],[8,5,2,15,22,21,20,13,14]],w=[1,1,2,3,3,2,4,4,0,5,6,7,8,9,10,10,5,6,7,8,9,11,11],y="",x=[],Na,z,Ra,Ua;x.length<c;){Na=[1,1,1,1];for(z=0;4>
z;z++)1!=Na[z]||e(z)||(Na[z]=0);for(z=0;0==z;)Ra=b(4),1==Na[Ra]&&(Ua=b(3)+1,f(Ra,Ua),z=1);x[x.length]=[Ra,Ua];2<=x.length&&x[x.length-1][0]==x[x.length-2][0]&&(x[x.length-2][1]=(x[x.length-2][1]+x[x.length-1][1])%4,x=x.slice(0,x.length-1));1<=x.length&&0==x[x.length-1][1]&&(x=x.slice(0,x.length-1))}for(Na=0;Na<c;Na++)y+="UFLR"[x[Na][0]]+Qa[x[Na][1]-1]+" ";return y});scrMgr.reg("15p 15pm 15pat clkwca clk clkc clke giga mgmo mgmp mgmc klmp heli redi redim pyrm prcp mpyr r3 r3ni sq1h sq1t sq2 ssq1t bsq -1 333noob lol".split(" "),
function(n,Ra){var Qa="";switch(n){case "15p":return a(!1,Ra);case "15pm":return a(!0,Ra);case "15pat":return a(!1,Ra,!0,!0);case "clkwca":var Sa="0+ 1+ 2+ 3+ 4+ 5+ 6+ 1- 2- 3- 4- 5-".split(" ");Qa="UR? DR? DL? UL? U? R? D? L? ALL? y2 U? R? D? L? ALL?????";for(var Oa=0;14>Oa;Oa++)Qa=Qa.replace("?",Pa(Sa));return Qa.replace("?",Pa([""," UR"])).replace("?",Pa([""," DR"])).replace("?",Pa([""," DL"])).replace("?",Pa([""," UL"]));case "clk":return"UU"+c("u")+"dU"+c("u")+"dd"+c("u")+"Ud"+c("u")+"dU"+c("u")+
"Ud"+c("u")+"UU"+c("u")+"UU"+c("u")+"UU"+c("u")+"dd     "+e()+"\\ndd"+c("d")+"dU"+c("d")+"UU"+c("d")+"Ud"+c("d")+"UU     UU     Ud     dU     UU     dd"+c("d")+e();case "clkc":Qa="";for(Oa=0;4>Oa;Oa++)Qa+="("+(b(12)-5)+", "+(b(12)-5)+") / ";for(Oa=0;6>Oa;Oa++)Qa+="("+(b(12)-5)+") / ";for(Oa=0;4>Oa;Oa++)Qa+=Pa(["d","U"]);return Qa;case "clke":return"UU"+c("u")+"dU"+c("u")+"dU"+c("u")+"UU"+c("u")+"UU"+c("u")+"UU"+c("u")+"Ud"+c("u")+"Ud"+c("u")+"dd"+c("u")+"dd     "+e()+"\\nUU     UU     dU"+c("d")+
"dU     dd"+c("d")+"Ud     Ud"+c("d")+"UU     UU"+c("d")+"dd"+c("d")+e();case "giga":Qa="";for(Oa=0;Oa<Math.ceil(Ra/10);Oa++){Qa+="  ";for(Sa=0;10>Sa;Sa++)Qa+=(0==Sa%2?"Rr".charAt(b(2)):"Dd".charAt(b(2)))+Pa(["+ ","++","- ","--"])+" ";Qa+="y"+Pa(x)+"\\n"}return Qa;case "mgmo":return w("F B U D L DBR DL BR DR BL R DBL".split(" "),[1364,2728,1681,2402,2629,1418,2329,1574,1129,2198,421,602],Ra);case "mgmp":return Na(10,Math.ceil(Ra/10));case "mgmc":Qa=Math.ceil(Ra/10);Oa="";var Ta;for(Sa=0;Sa<Qa;Sa++){Oa+=
" ";for(Ta=0;5>Ta;Ta++)Oa+=Pa(["+","-"])+Pa(["+","-"])+" ";Oa+="U"+Pa(["'\\n","~\\n"])}return Oa;case "klmp":return Na(10,Math.ceil(Ra/10));case "heli":return w("UF UR UB UL FR BR BL FL DF DR DB DL".split(" "),[154,53,106,197,771,1542,3084,2313,2704,1328,2656,1472],Ra);case "redi":return w("LRFBlrfb".split(""),[28,44,67,131,193,194,52,56],Ra,["","'"]);case "redim":Qa=[];for(Oa=0;Oa<Ra;Oa++)Qa.push(z([["R"],["L"]],["","'"],3+b(3)));return Qa.join(" x ");case "pyrm":return Qa=z([["U"],["L"],["R"],["B"]],
["!","'"],Ra),y(Qa,3).replace(/!/g,"");case "prcp":return Na(10,Math.ceil(Ra/10));case "mpyr":return Qa=w("U! L! R! B! Uw Lw Rw Bw".split(" "),[224,208,176,112,238,221,187,119],Ra,["!","'"]),y(Qa,4).replace(/!/g,"");case "r3":for(Oa=0;Oa<Ra;Oa++)Qa+=(0==Oa?"":"\\n")+(Oa+1)+") ${333}";return scrMgr.formatScramble(Qa);case "r3ni":for(Oa=0;Oa<Ra;Oa++)Qa+=(0==Oa?"":"\\n")+(Oa+1)+") ${333ni}";return scrMgr.formatScramble(Qa);case "sq1h":return f(1,Ra);case "sq1t":return f(0,Ra);case "sq2":for(Oa=0;Oa<
Ra;)if(Sa=b(12)-5,Ta=b(12)-5,0!=Sa||0!=Ta)Oa++,Qa+="("+Sa+","+Ta+") / ";return Qa;case "ssq1t":Ua=[];$a(2,0,Ra);Oa=Ua[0];Sa=Ua[1];Ta="";7==Oa[0][0]&&(Oa=[[0,0]].concat(Oa));7==Sa[0][0]&&(Sa=[[0,0]].concat(Sa));for(Qa=0;Qa<Ra;Qa++)Ta+="("+Oa[2*Qa][0]+","+Sa[2*Qa][0]+","+Sa[2*Qa][1]+","+Oa[2*Qa][1]+") / ";return Ta;case "bsq":return f(2,Ra);case "-1":for(Oa=0;Oa<Ra;Oa++)Qa+=String.fromCharCode(32+b(224));return Qa+"Error: subscript out of range";case "333noob":return Qa=z(SCRAMBLE_NOOBST,SCRAMBLE_NOOBSS.split("|"),
Ra).replace(/t/,"T"),Qa.substr(0,Qa.length-2)+".";case "lol":return Qa=z([["L"],["O"]],0,Ra),Qa.replace(/ /g,"")}console.log("Error")})})(mathlib.rn,mathlib.rndEl,scrMgr.mega);var storage=execMain(function(){function b(a){a=""+a;return String.fromCharCode(47+a.length)+a}function Pa(a,c){return"session_"+b(a)+(void 0==c?"":"_"+b(c))}function z(a){console.log("IndexedDB Error",a||"undefined")}function w(b,c,e,y){(y=y||a)?(y=y.transaction(["sessions"],b),y.oncomplete=e||$.noop,y.onerror=z,y=y.objectStore("sessions"),c(y)):requestAnimFrame(function(){w(b,c,e)})}function c(a,b){return new Promise(function(c,f){if(e)w("readwrite",function(b){b.clear();for(var c=1;c<=~~kernel.getProp("sessionN");c++)for(var e=
mathlib.str2obj(a["session"+c]||[]),f=0;f<(Math.ceil(e.length/100)||1);f++)b.put(e.slice(100*f,100*(f+1)),Pa(c,f))},c,b);else{for(var n=1;n<=~~kernel.getProp("sessionN");n++)localStorage["session"+n]=mathlib.obj2str(a["session"+n]);c()}})}var e=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,a,Na=/^session_\d(\d+)_\d(\d+)$/;e&&$(function(){var b=e.open("cstimer",1);b.onerror=z;b.onupgradeneeded=function(a){DEBUG&&console.log("Update Data From LocalStorage");
var b=a.target.result;b.createObjectStore("sessions").transaction.oncomplete=function(a){c(localStorage,b)}};b.onsuccess=function(b){DEBUG&&console.log("Success opening DB");a=b.target.result}});return{set:function(a,b,c){return new Promise(function(f,n){e?w("readwrite",function(e){var f=~~(c/100),n=IDBKeyRange.bound(Pa(a,f),Pa(a+1),!1,!0);for(e["delete"](n);f<(Math.ceil(b.length/100)||1);f++)e.put(b.slice(100*f,100*(f+1)),Pa(a,f))},function(){f(b)}):(localStorage["session"+a]=JSON.stringify(b),f(b))})},
get:function(a,b,c){return new Promise(function(f,n){var x=[];if(e)w("readonly",function(b){var c=IDBKeyRange.bound(Pa(a),Pa(a+1),!1,!0);b.openCursor(c).onsuccess=function(a){if(a=a.target.result)Array.prototype.push.apply(x,a.value),a["continue"]()}},function(){b=b||0;c=c||x.length;if(0!=b||c!=x.length)x=x.slice(b,c);f(x)});else{var y=localStorage["session"+a];void 0!=y&&""!=y&&(x=JSON.parse(y));if(0!=b||c!=x.length)x=x.slice(b,c);f(x)}})},del:function(a,b,c){e?w("readwrite",function(c){c["delete"](IDBKeyRange.bound(Pa(a),
Pa(a+1),!1,!0));var e=IDBKeyRange.bound(Pa(b),Pa(b+1),!1,!0);c.openCursor(e).onsuccess=function(b){if(b=b.target.result){var e=Na.exec(b.key);e&&(c.put(b.value,Pa(a,~~e[2])),c["delete"](b.key));b["continue"]()}}},c):(localStorage["session"+a]=localStorage["session"+b],delete localStorage["session"+b],c&&requestAnimFrame(c))},setKey:function(a,b){return new Promise(function(c,f){e?w("readwrite",function(c){c.put(b,a)},function(){c(!0)}):(localStorage[a]=b,c(!0))})},getKey:function(a){return new Promise(function(b,
c){var f;e?w("readonly",function(b){b.get(a).onsuccess=function(a){f=a.target.result}},function(){b(f)}):b(localStorage[a])})},importAll:c,exportAll:function(){return new Promise(function(a,b){var c={};if(e)w("readonly",function(a){a.openCursor().onsuccess=function(a){if(a=a.target.result){var b=Na.exec(a.key);b&&(b=~~b[1],c["session"+b]=c["session"+b]||[],Array.prototype.push.apply(c["session"+b],a.value));a["continue"]()}}},function(){a(c)});else{for(var f=1;f<=~~kernel.getProp("sessionN");f++)void 0!=
localStorage["session"+f]&&(c["session"+f]=mathlib.str2obj(localStorage["session"+f]));a(c)}})}}});var TimeStat=execMain(function(){function b(w,c,e,a){this.avgSizes=w.slice();this.timeAt=e;this.timeSort=a||b.dnfsort;this.reset(c)}function Pa(b,c){return"p"==c[0]?Math.ceil(b/100*c.slice(1)):"m"==c?Math.max(0,b>>1):~~c}function z(b){var c=kernel.getProp("trim","p5"),e=kernel.getProp("trimr","a"),a=Pa(b,c);c=Pa(b,"a"==e?c:e);return a+c==b?[Math.max(a-1,0),Math.max(c-1,0)]:[a,c]}b.dnfsort=function(b,c){return b==c?0:0>b?1:0>c?-1:b-c};b.prototype.reset=function(b){this.timesLen=b;this.shouldRecalc=
!0};b.prototype.getAllStats=function(){this.genStats();var b=this.timesLen-this.tree.rankOf(-1);return[b,b==this.timesLen?-1:this.tree.cumSum(this.timesLen-b)/(this.timesLen-b)]};b.prototype.genStats=function(){if(this.shouldRecalc){this._bestAvg=[];this.lastAvg=[];this.treesAvg=[];this.tree=sbtree.tree(this.timeSort);this.bestTime=this.worstTime=-1;this.bestTimeIndex=this.worstTimeIndex=0;var b=this.timesLen;this.timesLen=0;this.toLength(b);this.shouldRecalc=!1}};b.prototype.pushed=function(b){this.genStats();
this.doPushed(b)};b.prototype.bestAvg=function(b,c){var e=this._bestAvg[b]||[];e=e[e.length-1]||[-1,0,-1,-1,0];return void 0!==c?e[c]:e};b.prototype.doPushed=function(b,c){var e=[];this.timesLen++;var a=this.timesLen-1,w=this.timeAt(a);this.tree.insert(w,a);if(!c){var f=this.bestTime;this.bestTime=0==this.timesLen?-1:this.tree.rank(0);this.bestTimeIndex=this.tree.find(this.bestTime);this.worstTime=0==this.timesLen?-1:this.tree.rank(Math.max(0,this.tree.rankOf(-1)-1));this.worstTimeIndex=this.tree.find(this.worstTime);
0>this.timeSort(w,f)&&-1!=f&&e.push("single")}for(f=0;f<this.avgSizes.length;f++){var Pa=Math.abs(this.avgSizes[f]);if(this.timesLen<Pa)break;var n=0>this.avgSizes[f]?[0,0]:z(Pa),y=Pa-n[0]-n[1],Qa=this.treesAvg[f]||sbtree.tree(this.timeSort);if(this.timesLen==Pa){for(var x=0;x<Pa;x++)Qa.insert(this.timeAt(x),x);this._bestAvg[f]=[]}else Qa.remove(this.timeAt(a-Pa)).insert(w,a);var Ua=Qa.cumSum(Pa-n[1])-Qa.cumSum(n[0]),Ta=Math.sqrt((Qa.cumSk2(Pa-n[1])-Qa.cumSk2(n[0])-Ua*Ua/y)/(y-1))/1E3;y=[Qa.rankOf(-1)<
Pa-n[1]?-1:Ua/y,Ta,Qa.rank(n[0]-1),Qa.rank(Pa-n[1])];if(50==this.avgSizes[f]&&4==a%5){Ua=0;Pa=5;n[0]=1;n[1]=1;for(Ta=0;10>Ta;Ta++){var Za=sbtree.tree(this.timeSort),Ra=!1;for(x=0;x<Pa;x++)if(Za.insert(this.timeAt(x+5*Ta+a-49),x+5*Ta+a-49),-1==this.timeAt(x+5*Ta+a-49)){if(Ra){y[0]=-1;break}Ra=!0}x=Pa-n[0]-n[1];Za=Za.cumSum(Pa-n[1])-Za.cumSum(n[0]);Ua+=parseFloat((Za/x/1E3).toFixed(2))}-1!=y[0]&&(y[0]=100*Ua)}0>this.timeSort(y[0],this.bestAvg(f,0))&&0==this.timesLen%5&&(0<=this.bestAvg(f,0)&&!c&&e.push((0<
this.avgSizes[f]?"ao":"mo")+Pa),this._bestAvg[f].push(y.concat([a-Pa+1])));this.lastAvg[f]=y;this.treesAvg[f]=Qa}0==e.length||b||logohint.push("Session best "+e.join(" ")+"!")};b.prototype.toLength=function(b){for(;this.timesLen>b;)this.toPop(this.timesLen-1!=b);for(;this.timesLen<b;)this.doPushed(!0,this.timesLen+1!=b)};b.prototype.toPop=function(b){var c=this.timesLen-1,e=this.timeAt(c);this.tree.remove(e);b||(this.bestTime=0==this.timesLen?-1:this.tree.rank(0),this.bestTimeIndex=this.tree.find(this.bestTime),
this.worstTime=0==this.timesLen?-1:this.tree.rank(Math.max(0,this.tree.rankOf(-1)-1)),this.worstTimeIndex=this.tree.find(this.worstTime));for(var a=0;a<this.avgSizes.length;a++){var w=Math.abs(this.avgSizes[a]);if(this.timesLen<w)break;else if(this.timesLen==w){this.lastAvg[a]=null;this.treesAvg[a]=null;this._bestAvg[a]=null;continue}var f=this.treesAvg[a];f.remove(e).insert(this.timeAt(c-w),c-w);if(!b){var Pa=0>this.avgSizes[a]?[0,0]:z(w),n=w-Pa[0]-Pa[1],y=f.cumSum(w-Pa[1])-f.cumSum(Pa[0]),Qa=Math.sqrt((f.cumSk2(w-
Pa[1])-f.cumSk2(Pa[0])-y*y/n)/(n-1))/1E3;f=[f.rankOf(-1)<w-Pa[1]?-1:y/n,Qa,f.rank(Pa[0]-1),f.rank(w-Pa[1])];this.lastAvg[a]=f}this.bestAvg(a,4)==c-w+1&&this._bestAvg[a].pop()}this.timesLen--};b.prototype.getThres=function(){for(var b=[],c=0;c<this.avgSizes.length;c++){var e=Math.abs(this.avgSizes[c]);if(this.timesLen<e)break;var a=0>this.avgSizes[c]?[0,0]:z(e),Na=e-a[0]-a[1],f=this.treesAvg[c]||sbtree.tree(this.timeSort),Pa=this.timeAt(this.timesLen-e),n=a[0];a=e-a[1]-1;0>this.timeSort(Pa,f.rank(n))?
(n+=1,Pa=0):0>this.timeSort(f.rank(a),Pa)&&(--a,Pa=0);var y=this.bestAvg(c,0);f.rankOf(-1)<a?b[c]=-1:-1==y?b[c]=-2:(Pa=f.cumSum(a+1)-f.cumSum(n)-Pa,Na=y*Na-Pa,n=0==n?0:f.rank(n-1),e=a==e-1?-1:f.rank(a+1),0>=Na||0>this.timeSort(Na,n)?b[c]=-1:0>this.timeSort(e,Na)?b[c]=-2:b[c]=Na)}return b};b.prototype.getMinMaxInt=function(){return this.getAllStats()[0]==this.timesLen?null:[this.worstTime,this.bestTime,this.getBestDiff(this.worstTime-this.bestTime)]};b.prototype.getBestDiff=function(b){var c=[100,
200,500,1E3,2E3,5E3,1E4,2E4,5E4,1E5];if("a"==kernel.getProp("disPrec")){b/=10;for(var e=0;e<c.length;e++)if(b<c[e]){b=c[e];break}}else b=c[kernel.getProp("disPrec")];return b};b.prototype.runAvgMean=function(b,c,e,a){e=e||c;if(!(0>b||b+c>this.timesLen)){a=0==a?[0,0]:z(e);if(0>=e-a[0]-a[1])return[-1,0,-1,-1];for(var w=sbtree.tree(this.timeSort),f=0;f<e;f++)w.insert(this.timeAt(b+f),f);for(var Pa=e-a[0]-a[1],n=w.cumSum(e-a[1])-w.cumSum(a[0]),y=Math.sqrt((w.cumSk2(e-a[1])-w.cumSk2(a[0])-n*n/Pa)/(Pa-
1))/1E3,Qa=[[w.rankOf(-1)<e-a[1]?-1:n/Pa,y,w.rank(a[0]-1),w.rank(e-a[1])]],x=b-e,Ua=e;Ua<c;Ua++)w.remove(this.timeAt(x+Ua)).insert(this.timeAt(b+Ua),f),n=w.cumSum(e-a[1])-w.cumSum(a[0]),y=Math.sqrt((w.cumSk2(e-a[1])-w.cumSk2(a[0])-n*n/Pa)/(Pa-1))/1E3,Qa.push([w.rankOf(-1)<e-a[1]?-1:n/Pa,y,w.rank(a[0]-1),w.rank(e-a[1])]);if(50==c){c=0;e=5;a[0]=1;a[1]=1;for(Ua=0;10>Ua;Ua++){w=sbtree.tree(this.timeSort);Pa=!1;for(f=0;f<e;f++)if(w.insert(this.timeAt(b+f+5*Ua),f+5*Ua),-1==this.timeAt(b+f+5*Ua)){if(Pa)return Qa[0][0]=
-1,Qa;Pa=!0}f=e-a[0]-a[1];w=w.cumSum(e-a[1])-w.cumSum(a[0]);c+=parseFloat((w/f/1E3).toFixed(2))}Qa[0][0]=100*c}return Qa}};b.prototype.getTrimList=function(b,c,e,a){var w=[],f=[],Pa=z(c);e=-2>e?0:e;for(var n=0;n<c;n++){var y=this.timeAt(b+n),Qa=this.timeSort(y,e);y=this.timeSort(a,y);0>Qa?w.push(n):0>y?f.push(n):0==Qa&&w.length<Pa[0]?w.unshift(n):0==y&&f.length<Pa[1]&&f.unshift(n)}return w.slice(w.length-Pa[0]).concat(f.slice(f.length-Pa[1]))};return b});var stats=execMain(function(b,Pa,z){function w(a){a=document.getElementById(a).innerHTML;a.includes("=")&&(a=a.split("=").pop());a=a.split(":");for(var b=0,c=0;c<a.length;c++)b+=parseFloat(a[c])*Math.pow(60,a.length-1-c);a=b.toString();return parseFloat(a)}function c(){var a=5,b=document.getElementById("event").options[document.getElementById("event").selectedIndex].text;if("6x6x6"==b||"7x7x7"==b||"3x3 bld"==b||"3x3 fm"==b||"4x4 bld"==b||"5x5 bld"==b||"3x3 mbld"==b)a=3;if(0==cb.length%a&&""!=document.getElementById("time0").innerHTML)3==
a?(a=(w("time0")+w("time1")+w("time2"))/3,a=isNaN(a)?"DNF":n([0,1E3*a.toFixed(2)],!1),document.getElementById("message").innerHTML="Mo3: "+a):(a=[],a.push(w("time0")),a.push(w("time1")),a.push(w("time2")),a.push(w("time3")),a.push(w("time4")),a.sort(function(a,b){return isNaN(a)&&isNaN(b)?0:isNaN(a)?1:isNaN(b)?-1:a-b}),b=(a[1]+a[2]+a[3])/3,b=isNaN(b)?"DNF":n([0,1E3*((a[1]+a[2]+a[3])/3).toFixed(2)],!1),document.getElementById("message").innerHTML="Ao5: "+b);else if(0==cb.length%a)document.getElementById("message").innerHTML=
"Good Luck!";else if(1==cb.length%a)document.getElementById("time0").innerHTML.includes("=")?document.getElementById("message").innerHTML="Mo1: "+w("time0"):document.getElementById("message").innerHTML="Mo1: "+document.getElementById("time0").innerHTML;else if(2==cb.length%a)a=(w("time0")+w("time1"))/2,a=isNaN(a)?"DNF":n([0,1E3*a.toFixed(2)],!1),document.getElementById("message").innerHTML="Mo2: "+a;else if(3==cb.length%a)a=(w("time0")+w("time1")+w("time2"))/3,a=isNaN(a)?"DNF":n([0,1E3*a.toFixed(2)],
!1),document.getElementById("message").innerHTML="Mo3: "+a;else if(4==cb.length%a){a=[];a.push(w("time0"));a.push(w("time1"));a.push(w("time2"));a.push(w("time3"));a.sort(function(a,b){return isNaN(a)&&isNaN(b)?0:isNaN(a)?1:isNaN(b)?-1:a-b});b=(a[0]+a[1]+a[2])/3;var c=(a[1]+a[2]+a[3])/3;b=isNaN(b)?"DNF":n([0,1E3*((a[0]+a[1]+a[2])/3).toFixed(2)],!1);c=isNaN(c)?"DNF":n([0,1E3*((a[1]+a[2]+a[3])/3).toFixed(2)],!1);document.getElementById("message").innerHTML="BPA: "+b+" / WPA: "+c}}function e(a){var b=
5,h=document.getElementById("event").options[document.getElementById("event").selectedIndex].text;if("6x6x6"==h||"7x7x7"==h||"3x3 bld"==h||"3x3 fm"==h||"4x4 bld"==h||"5x5 bld"==h||"3x3 mbld"==h)b=3;if(1==a&&0==cb.length%b&&""!=document.getElementById("time4").innerHTML){if(5==b)for(a=5;0<a;a--)document.getElementById("time"+(a-1)).innerHTML=(Math.trunc(cb[cb.length-1-(5-a)][0][1]/10)/100).toFixed(2),-1==cb[cb.length-1-(5-a)][0][0]?document.getElementById("time"+(a-1)).innerHTML="DNF":2E3==cb[cb.length-
1-(5-a)][0][0]?(h=parseFloat(document.getElementById("time"+(a-1)).innerHTML)+2,document.getElementById("time"+(a-1)).innerHTML=n([0,1E3*h-2E3],!1)+"+2="+n([0,1E3*h],!1)):document.getElementById("time"+(a-1)).innerHTML=n([0,cb[cb.length-1-(5-a)][0][1]],!1);else for(a=3;0<a;a--)document.getElementById("time"+(a-1)).innerHTML=(Math.trunc(cb[cb.length-1-(3-a)][0][1]/10)/100).toFixed(2),-1==cb[cb.length-1-(3-a)][0][0]?document.getElementById("time"+(a-1)).innerHTML="DNF":2E3==cb[cb.length-1-(3-a)][0][0]?
(h=parseFloat(document.getElementById("time"+(a-1)).innerHTML)+2,document.getElementById("time"+(a-1)).innerHTML=n([0,1E3*h-2E3],!1)+"+2="+n([0,1E3*h],!1)):document.getElementById("time"+(a-1)).innerHTML=n([0,cb[cb.length-1-(3-a)][0][1]],!1);c()}else{document.getElementById("roundbox").innerHTML=parseInt(cb.length/b)+1;for(a=0;5>a;a++)document.getElementById("time"+a).innerHTML="",document.getElementById("sign1"+a).innerHTML="",document.getElementById("sign2"+a).innerHTML="";for(a=cb.length%b;0<a;a--)document.getElementById("time"+
(a-1)).innerHTML=(Math.trunc(cb[cb.length-1-(cb.length%b-a)][0][1]/10)/100).toFixed(2),-1==cb[cb.length-1-(cb.length%b-a)][0][0]?document.getElementById("time"+(a-1)).innerHTML="DNF":2E3==cb[cb.length-1-(cb.length%b-a)][0][0]?(h=parseFloat(document.getElementById("time"+(a-1)).innerHTML)+2,document.getElementById("time"+(a-1)).innerHTML=n([0,1E3*h-2E3],!1)+"+2="+n([0,1E3*h],!1)):document.getElementById("time"+(a-1)).innerHTML=n([0,cb[cb.length-1-(cb.length%b-a)][0][1]],!1),document.getElementById("sign1"+
(a-1)).innerHTML="CM",document.getElementById("sign2"+(a-1)).innerHTML="SF";c();h=document.getElementById("event").options[document.getElementById("event").selectedIndex].text;if("6x6x6"==h||"7x7x7"==h||"3x3 bld"==h||"3x3 fm"==h||"4x4 bld"==h||"5x5 bld"==h||"3x3 mbld"==h)document.getElementById("time4").innerHTML="-",document.getElementById("sign14").innerHTML="-",document.getElementById("sign24").innerHTML="-",document.getElementById("time3").innerHTML="-",document.getElementById("sign13").innerHTML=
"-",document.getElementById("sign23").innerHTML="-"}}function a(a){if("string"==typeof a[0]){var b=[a[2],a[1]||Vb,a[0],a[3]||Math.round(((new Date).getTime()-a[2][1])/1E3)];a[4]&&b.push(a[4]);cb.push(b);a=a[2]}else cb.push([a,Vb,"",Math.round(((new Date).getTime()-a[1])/1E3)]);Ib.push(null);tb.pushed();Hb.pushed();Rb.save(cb.length-1);a.length-1>Gb?Fb.updateTable(!1):Fb.appendRow(cb.length-1);Xa(["push"]);kernel.pushSignal("timestd",cb[cb.length-1]);for(var h=0;""!=document.getElementById("time"+
h).innerHTML;){h++;b=5;var e=document.getElementById("event").options[document.getElementById("event").selectedIndex].text;if("6x6x6"==e||"7x7x7"==e||"3x3 bld"==e||"3x3 fm"==e||"4x4 bld"==e||"5x5 bld"==e||"3x3 mbld"==e)b=3;if(5==h&&5==b){for(h=0;5>h;h++)document.getElementById("time"+h).innerHTML="",document.getElementById("sign1"+h).innerHTML="",document.getElementById("sign2"+h).innerHTML="";h=0;document.getElementById("roundbox").innerHTML=parseInt(cb.length/b)+1;break}if(3==h&&3==b){for(h=0;3>
h;h++)document.getElementById("time"+h).innerHTML="",document.getElementById("sign1"+h).innerHTML="",document.getElementById("sign2"+h).innerHTML="";h=0;document.getElementById("roundbox").innerHTML=parseInt(cb.length/b)+1;break}}document.getElementById("time"+h).innerHTML=n([0,a[1]],!1);2E3==a[0]&&(document.getElementById("time"+h).innerHTML+="+2="+n([0,2E3+a[1]],!1));-1==a[0]&&(document.getElementById("time"+h).innerHTML="DNF");document.getElementById("sign1"+h).innerHTML="CM";document.getElementById("sign2"+
h).innerHTML="SF";c()}function Na(a,b){a<.7*cb.length?(b(),tb.reset(cb.length),Hb.reset(cb.length)):(tb.toLength(a),Hb.toLength(a),b(),tb.toLength(cb.length),Hb.toLength(cb.length))}function f(a){if(kernel.getProp("delmul")){var b=prompt(STATS_CFM_DELMUL,1);if(null==b||!/^\d+$/.exec(b)||0==~~b)return;b=~~b}else{if(!confirm(STATS_CFM_DELETE))return;b=1}Na(a,function(){cb.splice(a,b);Ib.splice(a,b)});Rb.save(a);Fb.updateTable(!1);Xa(["delete",a,b]);e();return!0}function $a(a){for(var b=0,c=0,h=0;h<
cb.length;h++){var e=cb[h][0];-1==e[0]||e.length<=a?c+=1:b+=mb(a,h)}return c==cb.length?-1:b/(cb.length-c)}function n(a,c){switch(a[0]){case 0:return b(a[1]);case -1:return"DNF"+(c?"("+b(a[1])+")":"");default:return b(a[0]+a[1])+"+"}}function y(a){if(2==a.length)return"";var c=[];c.push(b(a[a.length-1]));for(var h=a.length-2;1<=h;h--)c.push(b(a[h]-a[h+1]));return"="+c.join("+")}function Qa(a){var b=$(a.target);if(/^\D.*\d$/.test(a.target.id)){if(""!=document.getElementById(a.target.id).innerHTML&&
"-"!=document.getElementById(a.target.id).innerHTML){var c=5*(parseInt(document.getElementById("roundbox").innerHTML)-1)+parseInt(a.target.id.slice(-1));"-"==document.getElementById("time4").innerHTML&&(c=3*(parseInt(document.getElementById("roundbox").innerHTML)-1)+parseInt(a.target.id.slice(-1)));ub.proc(c,b)}}else if(b.is("td,td>span")&&"-"!=b.html()){b.is("td>span")&&(b=b.parent());c=b.prevAll();a=c.length;sb=c=5*~~(0==a?b:c.eq(-1)).html().replace("*","")-1;var h=[];h.push(n(cb[sb-4][0],!1));
h.push(n(cb[sb-3][0],!1));h.push(n(cb[sb-2][0],!1));h.push(n(cb[sb-1][0],!1));h.push(n(cb[sb][0],!1));for(var e=h[0],f=0,r=1;r<h.length;r++)h[r]<e&&(e=h[r],f=r);if(!(4<a||0>a))switch(a){case 0:if(kernel.getProp("rsfor1s")){fb(tb,ib,sb-f,1,10,!0);break}case 1:ub.proc(sb-f,b);break;case 2:fb(tb,ib,c-Jb+1,Jb,10*Jb,0>Tb);break;case 3:fb(tb,ib,c-Kb+1,Kb,10*Kb,0>Ob)}}}function x(a){a=~~$(a.target).attr("data");var b=tb;0!=a&&(b=new TimeStat(Bb,cb.length,mb.bind(void 0,a)));Ya(b,ib,0==a?0:STATS_CURSPLIT.replace("%d",
a))}function Ua(a,c,h){var e=5,f=document.getElementById("event").options[document.getElementById("event").selectedIndex].text;if("6x6x6"==f||"7x7x7"==f||"3x3 bld"==f||"3x3 fm"==f||"4x4 bld"==f||"5x5 bld"==f||"3x3 mbld"==f)e=3;if(5==e&&4!=a%e||3==e&&2!=a%e)return"";var r=cb[a],w=r[0],x=[];5==e?(x.push(n(cb[a][0],!1)),x.push(n(cb[a-1][0],!1)),x.push(n(cb[a-2][0],!1)),x.push(n(cb[a-3][0],!1)),x.push(n(cb[a-4][0],!1))):(x.push(n(cb[a][0],!1)),x.push(n(cb[a-1][0],!1)),x.push(n(cb[a-2][0],!1)));x.sort(function(a,
b){return isNaN(a)&&isNaN(b)?0:isNaN(a)?1:isNaN(b)?-1:a-b});var y=[];e=5;f=document.getElementById("event").options[document.getElementById("event").selectedIndex].text;if("6x6x6"==f||"7x7x7"==f||"3x3 bld"==f||"3x3 fm"==f||"4x4 bld"==f||"5x5 bld"==f||"3x3 mbld"==f)e=3;y.push('<td class="times">'+(r[2]&&"*")+(a+1)/e+"</td>");y.push('<td class="times">'+x[0]+"</td>");f=kernel.getProp("statsrc","t");e=tb.prettyFunc||[b,z];"t"!=f[0]&&(y.pop(),y.push('<td class="times"><span style="opacity:0.5">'+n(w,
!1)+"</span> "+e[0](tb.timeAt(a)).split(" ")[0]+"</td>"));f=tb.runAvgMean(a-Jb+1,Jb,0,0<Tb?void 0:0);r=tb.runAvgMean(a-Kb+1,Kb,0,0<Ob?void 0:0);y.push("<td"+(f?' class="times"':"")+">"+(f?e[1](f[0][0]):"-")+"</td><td"+(r?' class="times"':"")+">"+(r?e[1](r[0][0]):"-")+"</td>");if(1<c){y.push("<td>"+b(w[w.length-1])+"</td>");for(e=w.length-2;1<=e;e--)y.push("<td>"+b(w[e]-w[e+1])+"</td>");for(e=w.length-1;e<c;e++)y.push("<td>-</td>")}y=y.join("");h&&h.html(y);return'<tr data="'+a+'">'+y+"</tr>"}function Ta(a){qb.empty().unbind("click").click(x);
tb.getAllStats();var c=tb.prettyFunc||[b,z];tb.getAllStats();qb.append('<th colspan="4" data="0" class="times"> PBs: '+c[0](tb.bestTime)+" / "+c[1](tb.bestAvg(0,0))+" / "+c[1](tb.bestAvg(1,0))+"</th>").css("font-size","1.2em");if(1<a)for(c=1;c<=a;c++)qb.append('<th data="'+c+'" class="times">'+z($a(c))+"</th>").css("font-size","")}function Za(a){a||(a=$('<select style="max-width:4em;">'));a.unbind("change").change(function(a){kernel.setProp("statsrc",$(a.target).val())});var b=kernel.getProp("statsrc",
"t"),c=[["t",STATS_TIME]];if(1!=Gb)for(var h=0;h<Gb;h++)c.push(["p"+(h+1),"P."+(h+1)]);h=kb();for(var e in h)c.push(["m"+e,h[e][0]]);e=!1;for(h=0;h<c.length;h++)a.append($("<option>").val(c[h][0]).html(c[h][1])),c[h][0]==b&&(e=!0);a.val(b);e||kernel.setProp("statsrc","t");return 1==c.length?STATS_TIME:a}function Ra(){if(!Pb){if(kernel.getProp("statsum")){Qb.css("display","inline-block");tb.getAllStats();var a=Za(),c=tb.prettyFunc||[b,z],h=[];0<cb.length?(h.push('<td class="times click" data="cs">'+
c[0](tb.timeAt(cb.length-1))+"</td>"),h.push('<td class="times click" data="bs">'+c[0](tb.bestTime)+"</td>")):(h.push("<td><span>-</span></td>"),h.push("<td><span>-</span></td>"));for(var e=[],f=tb.getThres(),r=kernel.getProp("statthres",!1),n=0;n<Bb.length;n++){var w=Math.abs(Bb[n]);cb.length>=w&&(50==w?e.push("<tr><th>mo10a</th>"):e.push("<tr><th>"+"am"[Bb[n]>>>31]+"o"+w+"</th>"),e.push('<td class="times click" data="c'+"am"[Bb[n]>>>31]+n+'">'+c[1](tb.lastAvg[n][0])+"</td>"),e.push('<td class="times click" data="b'+
"am"[Bb[n]>>>31]+n+'">'+c[1](tb.bestAvg(n,0))+"</td>"),r&&e.push('<td class="times">'+(0>f[n]?["N/A","∞"][-1-f[n]]:c[0](f[n]))+"</td>"))}c=$("<tr>").append("<th></th><th>"+Cb[1]+"</th><th>"+Cb[0]+"</th>");r&&c.append("<th>"+Cb[13]+"</th>");Nb.empty().append(c,$("<tr>").append($('<th style="padding:0">').append(a),h.join("")),e.join(""))}else Nb.empty(),Qb.hide();nb()}}function Xa(a){if(!Pb){Ra();for(var b in Xb)Xb[b](a);a=cb.length-1;b=Hb.runAvgMean(a-Jb+1,Jb,0,0<Tb?void 0:0);var c=50==Kb?Hb.runAvgMean(a-
Jb+1,Kb,0,0<Ob?void 0:0):Hb.runAvgMean(a-Kb+1,Kb,0,0<Ob?void 0:0);kernel.pushSignal("avg",[(0<Tb?"ao":"mo")+Jb+": "+(b?z(b[0][0]):"-"),(0<Ob?"ao":"mo")+Kb+": "+(c?z(c[0][0]):"-"),b?[a-Jb+1,Jb,10*Jb,0>Tb]:void 0,c?[a-Kb+1,Kb,10*Kb,0>Ob]:void 0,fb.bind(void 0,Hb,ib),cb[a],0==a?null:cb[a-1]])}}function Sa(){var a=kernel.getProp("statsrc","t");if("t"!=a){if("p"==a[0])return mb.bind(void 0,~~a.slice(1));if("m"==a[0])return a=a.slice(1),db.bind(null,a)}return Mb}function Oa(a,b,c){if(!b)return"N/A";var h=
n(b[0],!0)+y(b[0])+(b[2]?"["+b[2]+"]":"");-1!=$.inArray(a,c)&&(h="("+h+")");kernel.getProp("printScr")&&(h+="   "+b[1]);kernel.getProp("printDate")&&(h+="   @"+mathlib.time2str(b[3]));return kernel.getProp("printScr")||kernel.getProp("printDate")?a+1+". "+h+" \n":h+", "}function fb(a,c,h,e,f,r){if(0!=a.timesLen){var n=[0,[null],[null]],w=[];0!=h+e&&(r?n=a.runAvgMean(h,e,0,0)[0]:(n=a.runAvgMean(h,e)[0],w=a.getTrimList(h,e,n[2],n[3])));var x="";if(kernel.getProp("printDate")&&2<e){x=c(h);var y=c(h+
e-1);x=Cb[11].replace("%s",mathlib.time2str(x&&x[3])).replace("%e",mathlib.time2str(y&&y[3]));x=" ("+x+")"}x=[mathlib.time2str(+new Date/1E3,Cb[3])+x+"\n"];y=a.prettyFunc||[b,z];1<f&&(500==f?x.push("mo10ao5"):2==f?x.push(Cb[8]):10==f?x.push(Cb[5]):r?x.push(Cb[6].replace("%mk",~~(f/10))):x.push(Cb[7].replace("%mk",~~(f/10))),x.push(": "+y[10==f?0:1](n[0])));x.push("\n\n"+Cb[10]+"\n");if(kernel.getProp("absidx"))for(f=0;f<w.length;f++)w[f]+=h;for(f=0;f<e;f++)x.push(Oa(kernel.getProp("absidx")?h+f:f,
c(h+f),w));x=x.join("").slice(0,-2);vb.val(x);kernel.showDialog([vb,eb,void 0,eb,[STATS_EXPORTCSV,function(){lb(a,c,h,e);return!1}]],"stats",STATS_CURROUND);vb[0].select()}}function lb(a,c,h,e){if(0!=a.timesLen){window.Blob||alert("Do not support your browser!");a=["No.;Time;Comment;Scramble;Date"];for(var f=0;f<Gb;f++)a[0]+=";P."+(f+1);for(f=0;f<e;f++){var r=c(h+f),w=[];w.push(f+1);w.push(n(r[0],!0));w.push(r[2]?r[2]:"");w.push(r[1]);w.push(mathlib.time2str(r[3]));w.push(b(r[0][r[0].length-1]));
for(var x=r[0].length-2;1<=x;x--)w.push(b(r[0][x]-r[0][x+1]));for(x=r[0].length-1;x<Gb;x++)w.push("");for(x=0;x<w.length;x++){r=w;var y=x,Oa=w[x];Oa=Oa.toString();if(-1!=Oa.indexOf(";")||-1!=Oa.indexOf("\n"))Oa='"'+Oa.replace(/"/g,'""')+'"';r[y]=Oa}a.push(w.join(";"))}a=a.join("\r\n");c=new Blob([a],{type:"text/csv"});h=$('<a class="click"/>').appendTo("body");h.attr("href",URL.createObjectURL(c));h.attr("download","csTimerExport_"+mathlib.time2str(new Date/1E3,"%Y%M%D_%h%m%s")+".csv");h[0].click();
h.remove()}}function gb(a,b,c){c=$(c.target).attr("data");if(void 0!=c){var h=~~c.substr(2);switch(c.substr(0,2)){case "bs":fb(a,b,a.bestTimeIndex,1,10,!0);break;case "cs":fb(a,b,a.timesLen-1,1,10,!0);break;case "ws":fb(a,b,a.worstTimeIndex,1,10,!0);break;case "bm":fb(a,b,a.bestAvg(h,4),-Bb[h],10*-Bb[h],!0);break;case "cm":fb(a,b,a.timesLen+Bb[h],-Bb[h],10*-Bb[h],!0);break;case "ba":fb(a,b,a.bestAvg(h,4),Bb[h],10*Bb[h],!1);break;case "ca":fb(a,b,a.timesLen-Bb[h],Bb[h],10*Bb[h],!1);break;case "tt":Ya(a,
b)}}}function mb(a,b){var c=(cb[b]||[[-1,1]])[0];return-1==c[0]||c.length<=a?-1:Sb*~~((0==a?c[0]+c[1]:c[c.length-a]-(c[c.length-a+1]||0))/Sb)}function ib(a){return cb[a]}function Wa(a){for(var b=[],c=0;c<a.length;c++)b.push(c);b.sort(function(b,c){var h=a[b][3]||0,e=a[c][3]||0;return h==e?b-c:h-e});for(c=0;c<a.length;c++)b[c]=a[b[c]];return b}function eb(){vb.val("")}function Ya(a,c,h){var e=a.getAllStats(),f=e[0],n=a.runAvgMean(0,cb.length)[0];e=e[1];var w=a.timesLen,x="";if(kernel.getProp("printDate")&&
2<w){x=c(0);var y=c(w-1);x=Cb[11].replace("%s",mathlib.time2str(x&&x[3])).replace("%e",mathlib.time2str(y&&y[3]));x=" ("+x+")"}y=tb.prettyFunc||[b,z];x=[mathlib.time2str(+new Date/1E3,Cb[3])+x];x.push(Cb[4].replace("%d",w-f+"/"+w)+"\n");x.push(Cb[5]);x.push("    "+Cb[0]+": "+y[0](a.bestTime));x.push("    "+Cb[2]+": "+y[0](a.worstTime)+"\n");for(f=0;f<Bb.length;f++){var Na=Math.abs(Bb[f]);w>=Na&&(x.push(Cb[7-(Bb[f]>>>31)].replace("%mk",Na)),x.push("    "+Cb[1]+": "+y[1](a.lastAvg[f][0])+" (σ = "+r(a.lastAvg[f][1],
2)+")"),x.push("    "+Cb[0]+": "+y[1](a.bestAvg(f,0))+" (σ = "+r(a.bestAvg(f,1),2)+")\n"))}x.push(Cb[8].replace("%v",y[1](n[0])).replace("%sgm",r(n[1],2)).replace(/[{}]/g,""));x.push(Cb[9].replace("%v",y[1](e)+"\n"));if(0!=w){x.push(Cb[10]);n=[];for(e=0;e<w;e++)n.push(Oa(e,c(e),[]));n=n.join("").slice(0,-2);x.push(n)}x=x.join("\n");vb.val(x);kernel.showDialog([vb,eb,void 0,eb,[STATS_EXPORTCSV,function(){lb(a,c,0,w);return!1}]],"stats",h||STATS_CURSESSION);vb[0].select()}function r(a,b){a&&a!=Number.POSITIVE_INFINITY&&
a!=Number.NEGATIVE_INFINITY||(a=0);for(var c=""+Math.round(a*Math.pow(10,b));c.length<b+1;)c="0"+c;var h=c.length;return c.substr(0,h-b)+"."+c.substr(h-b,b)}function h(a){a=a.split(/[\s,;]+/);for(var b=/([am])o(\d+)/,c=[],h=0;h<a.length;h++){var e=b.exec(a[h]);if(!e)return!1;c.push(("a"==e[1]?1:-1)*~~e[2])}c.sort(function(a,b){return Math.abs(a)-Math.abs(b)});return c}function Va(a){var b=kernel.getProp("statalu");if(a||!/^\s*([am]o\d+[\s,;]*)+\s*$/.exec(b))a=prompt("Statistics Details",b||"mo3 ao5 ao12 ao100"),
/^\s*([am]o\d+[\s,;]*)+\s*$/.exec(a)&&h(a)?kernel.setProp("statalu",a):(null!=a&&alert("INVALID VALUES!"),kernel.setProp("statal","mo3 ao5 ao12 ao100"),kernel.reprop())}function bb(a){var b=h(a);b?(Bb=b,tb=new TimeStat(Bb,cb.length,Sa()),tb.prettyFunc=rb(),Hb=new TimeStat([],cb.length,Mb),crossSessionStats.updateStatal(Bb),Xa(["statal",a])):(kernel.setProp("statal","mo3 ao5 ao12 ao100"),kernel.reprop())}function ab(b,c){if("time"==b)a(c);else if("scramble"==b||"scrambleX"==b)Vb=c[1];else if("property"==
b)if(/^(:?useMilli|timeFormat|stat[12][tl]|statinv)$/.exec(c[0])){Sb=kernel.getProp("useMilli")?1:10;var h=document.getElementById("event").options[document.getElementById("event").selectedIndex].text;"6x6x6"==h||"7x7x7"==h||"3x3 bld"==h||"3x3 fm"==h||"4x4 bld"==h||"5x5 bld"==h||"3x3 mbld"==h?(kernel.setProp("stat1t","1"),kernel.setProp("stat1l","3"),kernel.setProp("stat2t","1"),kernel.setProp("stat2l","15"),kernel.setProp("statal","mo3 mo15")):(kernel.setProp("stat1t","0"),kernel.setProp("stat1l",
"5"),kernel.setProp("stat2t","0"),kernel.setProp("stat2l","50"),kernel.setProp("statal","ao5 ao50"));Tb=[1,-1][~~kernel.getProp("stat1t")]*kernel.getProp("stat1l");Ob=[1,-1][~~kernel.getProp("stat2t")]*kernel.getProp("stat2l");Jb=Math.abs(Tb);Kb=Math.abs(Ob);Fb.updateTable(!1);Xa(["property",c[0]])}else"statsum"==c[0]||"statthres"==c[0]?Ra():"statssum"==c[0]?(Ta(Gb),nb()):"statal"==c[0]?(h=c[1],"u"==h&&Va("modify"==c[2]),h=kernel.getProp("statal"),bb("u"==h?kernel.getProp("statalu"):h)):"statalu"==
c[0]?bb(c[1]):"trim"==c[0]||"trimr"==c[0]?(tb.reset(cb.length),Hb.reset(cb.length),crossSessionStats.updateStatal(Bb),Fb.updateTable(!1),Xa(["property",c[0]])):"view"==c[0]?nb():"statHide"==c[0]?c[1]?yb.hide():yb.show():"statsrc"==c[0]?(tb=new TimeStat(Bb,cb.length,Sa()),tb.prettyFunc=rb(),Fb.updateTable(!0)):"wndStat"==c[0]?nb():"sr_statal"==c[0]&&kernel.setProp("sr_statalu",c[1]);else if("ctrl"==b&&"stats"==c[0])"clr"==c[1]?Rb.getButton().click():"undo"==c[1]?ub.delLast():"OK"==c[1]?ub.setCfm(0):
"+2"==c[1]?ub.setCfm(2E3):"DNF"==c[1]&&ub.setCfm(-1);else if("ashow"==b&&!c)Fb.hideAll();else if("button"==b&&"stats"==c[0]&&c[1])setTimeout(nb,50);else if("giirecons"==b){var e=cb.length-1;0>e||cb[e][1]!=c[0]||(Na(e,function(){cb[e][4]=c[1];Ib[e]=null}),Rb.save(e),Xa(["giirecons",e]))}}function nb(){$("html").hasClass("m")?wb.height(Math.max(Qb.height(),qb.height()+2*Db.height(),Lb.outerHeight())):null!=wb[0].offsetParent&&wb.outerHeight(~~(zb.height()-(yb.is(":hidden")?0:yb.outerHeight())-Qb.outerHeight()-
5)-Lb.outerHeight()-5)}function hb(){var a=document.createElement("h3"),b=document.createElement("div");b.appendChild(a);b.style.marginBottom="5px";var c=document.createElement("div");for(a=0;2>a;a++){var h=document.createElement("div");h.style.display="table";1==a&&(h.style.marginBottom="10px");var e=document.createElement("div");e.style.display="table-cell";e.style.padding="8px";e.style.fontWeight="bold";e.style.width="10px";h.appendChild(e);e=document.createElement("div");e.style.display="table-cell";
e.className="box1";e.style.width="155px";e.style.padding="3px";if(1==a){e.style.border="1px solid black";var f=document.getElementById("event");e.textContent=f.options[f.selectedIndex].text;e.id="eventbox"}e.style.fontSize="18px";0==a&&(e.style.border="1px solid white",e.textContent="Event",e.style.fontSize="12px");h.appendChild(e);f=document.createElement("div");f.style.display="table-cell";f.style.width="5px";h.appendChild(f);f=document.createElement("div");f.style.display="table-cell";f.className=
"box2";f.style.width="50px";f.style.padding="3px";1==a&&(f.style.border="1px solid black",f.id="roundbox");f.style.fontSize="18px";0==a&&(e.style.border="1px solid white",f.textContent="Round",f.style.fontSize="12px");h.appendChild(f);c.appendChild(h)}for(a=0;5>a;a++){h=document.createElement("div");h.style.display="table";h.style.marginBottom="5px";var r=document.createElement("div");r.style.display="table-cell";r.style.padding="8px";r.style.fontWeight="bold";r.textContent=a+1;r.id="number"+(a+1);
h.appendChild(r);r=document.createElement("div");r.style.display="table-cell";r.style.padding="6px";r.style.border="1px solid black";r.className="box1";r.id="time"+a;r.style.fontSize="20px";r.style.maxWidth="135px";h.appendChild(r);r=document.createElement("div");r.style.display="table-cell";r.style.width="5px";h.appendChild(r);r=document.createElement("div");r.style.display="table-cell";r.style.padding="4px";r.style.border="1px solid black";r.className="box2";r.id="sign1"+a;r.style.fontSize="14px";
h.appendChild(r);r=document.createElement("div");r.style.display="table-cell";r.style.width="5px";h.appendChild(r);r=document.createElement("div");r.style.display="table-cell";r.style.padding="4px";r.style.border="1px solid black";r.className="box2";r.id="sign2"+a;r.style.fontSize="14px";h.appendChild(r);r=document.getElementById("scorecard");r.appendChild(b);c.appendChild(h)}a=document.createElement("h3");a.textContent="Good Luck!";a.id="message";a.style.fontSize="22px";a.style.marginTop="12px";
a.style.marginBottom="9px";c.appendChild(a);r.appendChild(c);b=document.getElementById("event").options[document.getElementById("event").selectedIndex].text;"6x6x6"==b||"7x7x7"==b||"3x3 bld"==b||"3x3 fm"==b||"4x4 bld"==b||"5x5 bld"==b||"3x3 mbld"==b?(document.getElementById("time4").innerHTML="-",document.getElementById("sign14").innerHTML="-",document.getElementById("sign24").innerHTML="-",document.getElementById("time3").innerHTML="-",document.getElementById("sign13").innerHTML="-",document.getElementById("sign23").innerHTML=
"-"):"-"==document.getElementById("time4").innerHTML&&(document.getElementById("time4").innerHTML="",document.getElementById("sign14").innerHTML="",document.getElementById("sign24").innerHTML="",document.getElementById("time3").innerHTML="",document.getElementById("sign13").innerHTML="",document.getElementById("sign23").innerHTML="")}function ob(a,b,c){mc[a]=b;c&&(Zb[a]=[b,c])}function db(a,b){if(!(b>=cb.length)&&a in mc)return Ib[b]||(Ib[b]={}),a in Ib[b]||(Ib[b][a]=mc[a](cb[b],b)),Ib[b][a]}function kb(){var a=
{},b;for(b in Zb)for(var c=Math.max(cb.length-10,0);c<cb.length;c++)if(-1!=db(b,c)){a[b]=Zb[b][1];break}return a}function rb(a){if(!a){var c=kernel.getProp("statsrc","t");"m"==c[0]&&(a=c.slice(1))}return Zb[a]?(a=Zb[a][1],[a[1],a[2]||a[1]]):[b,z]}function pb(a,b){var c=-1;(b[2]||"").replace(/[0-9]+(\.[0-9]+)?/g,function(b){0==a&&(c=1E3*parseFloat(b));a--});return c}var cb=[],zb=$('<div id="stats" />'),vb=$('<textarea rows="10" readonly />'),wb=$('<div class="myscroll" />'),yb=$("<div>"),xb=$("<table />").click(Qa).addClass("table"),
Db=$("<tr />"),qb=$("<tr />"),Ab=$('<tr class="click" ><th class="click" colspan="15">...</th></tr>'),Nb=$('<table class="sumtable" />').click(function(a){gb(tb,ib,a)}).addClass("table"),Qb=$('<div class="statc" />'),Lb=$('<div class="stattl" id="scorecard" style="display: inline-block;">').click(function(a){Qa(a)});Lb.css("display","inline-block");var Pb=!0,Fb=function(){function a(a){if(Ra&&Ra.idx==a)Ra=null;else{for(var b=[],h=0;h<cb.length;h++)b[h]=h;if(0==a)b.sort(function(a,b){return TimeStat.dnfsort(tb.timeAt(a),
tb.timeAt(b))});else if(1==a||2==a){var e=1==a?Jb:Kb,f=Hb.runAvgMean(0,cb.length,e,0<(1==a?Tb:Ob)?void 0:0);b.sort(function(a,b){return Math.max(a,b)<e-1?0:Math.min(a,b)<e-1?a>b?-1:1:TimeStat.dnfsort(f[a-e+1][0],f[b-e+1][0])})}Ra={};for(h=0;h<cb.length-1;h++)Ra[b[h]]=b[h+1];Ra[-1]=b[0];Ra[b[cb.length-1]]=-1;Ra.len=cb.length;Ra.idx=a}c(!1)}function b(a){return Ra&&a in Ra?Ra[a]:-1==a?cb.length-1:a-1}function c(c){Gb=1;for(var r=0;r<cb.length;r++)Gb=Math.max(Gb,cb[r][0].length-1);r=Ra?Ra.idx:-1;Na.html("single"+
(0==r?"*":""));z.html((0<Tb?"ao":"mo")+Jb+(1==r?"*":""));Sa.html(50==Ob?"mo10a"+(2==r?"*":""):(0<Ob?"ao":"mo")+Kb+(2==r?"*":""));Db.empty().append(Oa,Na,z,Sa);if(1<Gb)for(r=0;r<Gb;r++)Db.append("<th>P."+(r+1)+"</th>");Ra&&Ra.len!=cb.length&&e();Va=[];Qa=b(-1);kernel.getProp("statinv")?xb.empty().append(Db,Ab,qb):xb.empty().append(qb,Db,Ab);f();0>Qa?Ab.unbind("click").hide():Ab.unbind("click").click(Fb.showAll).show();Oa.unbind("click").click(h);Na.unbind("click").click(a.bind(null,0));z.unbind("click").click(a.bind(null,
1));Sa.unbind("click").click(a.bind(null,2));Ta(Gb);c&&Xa(["table"]);wb.scrollTop(kernel.getProp("statinv")?xb[0].scrollHeight:0)}function h(){var a=prompt("Filter Pattern: (23*, 15.1*, comments, scrambles, date)");null!=a&&a!=x&&(x=a?(a+"").replace(/[.\\+*?\[\^\]$(){}=!<>|:\-]/g,"\\$&").replace(/\\\*/g,".*").replace(/\\\?/g,"."):".*",w=new RegExp(x,"g"),c(!1))}function e(){if(".*"==x&&null==Ra)return!1;x=".*";w=/.*/;Ra=null;c(!1);return!0}function f(){for(var a=Va.length+50,c=[];0<=Qa&&Va.length<
a;){var h=cb[Qa];if(w.exec(n(h[0],!0)+y(h[0]))||w.exec(h[1])||w.exec(h[2])||w.exec(mathlib.time2str(h[3])))c.push(Ua(Qa,Gb)),Va.push(Qa);Qa=b(Qa)}kernel.getProp("statinv")?Ab.after(c.reverse().join("")):Ab.before(c.join(""))}function r(a){f();0>Qa&&Ab.unbind("click").hide()}var w=/.*/,x=".*",Oa=$('<th class="click">').html("rd"),Na=$('<th class="click">'),z=$('<th class="click">'),Sa=$('<th class="click">'),Va=[],Qa=0,Ra=null;return{appendRow:function(a){if(!e()){var b=Ua(a,Gb);kernel.getProp("statinv")?
(qb.before(b),wb.scrollTop(xb[0].scrollHeight)):(Db.after(b),wb.scrollTop(0));Va.unshift(a);Ta(Gb);wb.scrollTop(0)}},showAll:r,hideAll:function(){for(;50<Va.length;)(kernel.getProp("statinv")?Ab.next():Ab.prev()).remove(),Qa=Va.pop();0<=b(Qa)&&Ab.unbind("click").click(r).show()},updateTable:c,updateFrom:function(a){for(var b=Math.min(a+Math.max(Jb,Kb),cb.length),c=kernel.getProp("statinv"),h=qb.parent().children(),e=0;e<Va.length;e++)if(!(Va[e]<a||Va[e]>=b)){var f=c?Va.length+1-e:2+e;Va[e]!=~~h.eq(f).attr("data")?
console.log("[stats] update from error",Va[e],f,h[f]):Ua(Va[e],Gb,h.eq(f))}Ta(Gb)}}}(),ub=function(){function a(){0>Wa||Wa>=cb.length||(kernel.getProp("statsrc","t").startsWith("mcomment")?(Na(Wa,function(){cb[Wa][2]=z.val();Ib[Wa]=null}),Rb.save(Wa),Fb.updateFrom(Wa),Xa(["comment",Wa])):(cb[Wa][2]=z.val(),Ib[Wa]=null,Rb.save(Wa),Ua(Wa,Gb,Pa),Ra()))}function b(a){a=$(a.target);var b=a.attr("data");b&&("p"==b?(a={" OK ":0," +2 ":2E3," DNF ":-1}[a.html()],r(a,Wa)):"d"==b?f(Wa)&&(Wa=void 0,c()):"s"==
b?(a=cb[Wa],$.clipboardCopy(a[1])&&logohint.push("scramble copied")):"c"==b?(a=cb[Wa],$.clipboardCopy(n(a[0],!0)+y(a[0])+(a[2]?"["+a[2]+"]":"")+"   "+a[1]+"   @"+mathlib.time2str(a[3]))&&logohint.push("solve copied")):"r"==b&&(a=cb[Wa],a[4]&&(b="string"==typeof a[4][1]&&a[4][1]||tools.getCurPuzzle()||"333",replay.popupReplay(a[1],a[4][0],b))))}function c(){kernel.isDialogShown("cfm")&&kernel.hideDialog();Ta&&(x.css("font-size","0.8em"),Ta.empty().append(x),Wa=cb.length-1,Pa=kernel.getProp("statinv")?
qb.prev():Db.next(),h())}function h(){if(cb[Wa]){var c=cb[Wa],h="";c[4]&&(h=$('<span class="click" data="r">'+STATS_REVIEW+"</span>"),h=$("<tr>").append($("<td>").append(h),$("<td>").append(Ya)));x.empty().append(Oa,"<br>",y(c[0]),"<br>").append('<span class="click" data="c"> &#128203; </span>|<span class="click" data="p"> OK </span>|<span class="click" data="p"> +2 </span>|<span class="click" data="p"> DNF </span>| ',Sa).append("<br>",$('<table style="display:inline-block;">').append($("<tr>").append("<td>"+
STATS_COMMENT+"</td>",$("<td>").append(z)),$("<tr>").append('<td><span class="click" data="s">'+SCRAMBLE_SCRAMBLE+"</span></td>",$("<td>").append(Va)),$("<tr>").append("<td>"+STATS_DATE+"</td>",$("<td>").append(Qa)),h)).unbind("click").click(b);Oa.html(n(c[0],!0));Va.val(c[1]);Qa.val(mathlib.time2str(c[3]));z.val(c[2]).unbind("change").change(a);Ya.val(c[4]?JSON.stringify(c[4]):"")}else x.empty()}function r(a,b){cb[b][0][0]!=a&&(Na(b,function(){cb[b][0][0]=a;Ib[b]=null}),Rb.save(b),Fb.updateFrom(b),
Xa(["penalty",b]),b==Wa&&h(),kernel.pushSignal("timepnt",cb[b]),e(!0))}function w(a,b){Ta=a;void 0!=a&&c()}var x=$('<div style="text-align:center; font-family: initial;">'),Oa=$('<span style="font-size:2.5em;"/>'),z=$('<input type="text">').css("width","8em"),Sa=$('<input type="button" data="d">').val("X"),Va=$('<input type="text" readonly>').css("width","8em"),Qa=$('<input type="text" readonly>').css("width","8em"),Ya=$('<input type="text" readonly>').css("width","8em"),Wa=0,Pa,Ta;$(function(){tools.regTool("cfm",
TOOLS_CFMTIME,w);kernel.regListener("cfm","session",c)});return{proc:function(a,b){Wa=a;Pa=b.parent();h();x.css("font-size","1.2em");var e=[x,c,void 0,c,[STATS_SSSTAT,function(){c();fb(tb,ib,a,1,10,!0)}]],f=cb[a];f&&f[4]&&e.push([TOOLS_RECONS,function(){c();kernel.pushSignal("reqrec",[cb[a],a])}]);kernel.showDialog(e,"cfm","Solves No."+(a+1))},delLast:function(){0!=cb.length&&f(cb.length-1)&&(Wa=void 0,c())},setCfm:function(a){0!=cb.length&&r(a,cb.length-1)}}}(),Gb=0,Cb=STATS_STRING.split("|"),sb=
0;for(;13>sb;sb++)Cb[sb]=Cb[sb]||"";var Mb=mb.bind(void 0,0),Bb=[-3,5,12,50,100,1E3],tb=new TimeStat(Bb,0,Mb),Hb=new TimeStat([],0,Mb),Rb=function(){function a(a){ab=a;kernel.setProp("session",ab);db[ab]=db[ab]||{name:ab,opt:{}};kernel.setSProps(db[ab].opt||{});b();return Na()}function b(){for(var a=1;a<=eb;a++){"object"!=typeof db[a]?db[a]={}:void 0!==db[a]&&void 0!==db[a].stat&&db[a].name==a&&0==db[a].stat[0]&&(scrdata=[["3x3x3","333",0],["2x2x2","222so",0],["4x4x4","444wca",-40],["5x5x5","555wca",
-60],["6x6x6","666wca",-80],["7x7x7","777wca",-100],["3x3 bld","333ni",0],["3x3 oh","333oh",0],["clock","clkwca",0],["megaminx","mgmp",-70],["pyraminx","pyrso",-10],["skewb","skbso",0],["sq1","sqrs",0],["4x4 bld","444bld",-40],["5x5 bld","555bld",-60],["3x3 mbld","r3ni",5],["3x3 fm","333fm",0]],db[a].name=scrdata[a][0],db[a].opt.scrType=scrdata[a][1]);var b={name:a,opt:{}},h;for(h in b)void 0===db[a][h]&&(db[a][h]=b[h]);db[a].scr&&(db[a].opt.scrType=db[a].scr,delete db[a].scr);db[a].phases&&(db[a].opt.phases=
db[a].phases,delete db[a].phases);db[a].rank=db[a].rank||a}c();pb.empty();for(a=0;a<hb.length;a++)pb.append($("<option />").val(hb[a]).html(db[hb[a]].name));pb.append(mb,ib);pb.val(ab)}function c(){hb=[];for(var a=1;a<=eb;a++)hb.push(a);hb.sort(function(a,b){return db[a].rank-db[b].rank});for(a=0;a<hb.length;a++)db[hb[a]].rank=a+1;kernel.setProp("sessionData",JSON.stringify(db))}function h(a){return db[a].rank+"-"+db[a].name}function f(a,c){$.isNumeric(a)||(a=(db[ab]||{}).rank||eb);ab=++eb;var h=
new Date;h=h.getMonth()+1+"."+h.getDate()+" "+Wb;kernel.setProp("sessionN",eb);var e=db[hb[a-1]]||{};db[ab]=void 0===c||c?{name:e.name||h,opt:JSON.parse(JSON.stringify(e.opt||{})),rank:a+.5}:{name:h,opt:kernel.getSProps(),rank:a+.5};b()}function r(b,c){f(b,c);cb=[];Ib=[];Hb.reset(cb.length);tb.reset(cb.length);Sa();a(ab);kernel.blur();kernel.getProp("imrename")&&y(ab,!0)}function n(b){b!=eb&&(db[b]=db[eb]);delete db[eb];storage.del(b,eb);eb--;kernel.setProp("sessionN",eb);kernel.setProp("sessionData",
JSON.stringify(db));0==eb?r():ab==b?kernel.setProp("session",1):ab==eb+1&&a(b)}function w(a){if(0!=("stat"in db[a]?db[a].stat[0]:1)&&!confirm(STATS_CFM_DELSS.replace("%s",h(a))))return!1;n(a);return!0}function x(){confirm(STATS_CFM_RESET)&&(cb=[],Ib=[],tb.reset(),Hb.reset(),Sa(),Fb.updateTable(!0),kernel.blur(),e())}function y(a,b){void 0===a&&(a=ab);var c=prompt(b?STATS_SESSION_NAMEC:STATS_SESSION_NAME,db[a].name);null!=c&&(c=$("<div/>").text(c).html(),db[a].name=c,kernel.setProp("sessionData",JSON.stringify(db)))}
function Oa(a,b){Pb=!1;cb=b;Ib=[];tb.reset(cb.length);Hb.reset(cb.length);Fb.updateTable(!0);db[a]=db[a]||{name:a,opt:{}};db[a].stat=[cb.length].concat(Hb.getAllStats());db[a].date=[(cb[0]||[])[3],(cb[cb.length-1]||[])[3]];kernel.setProp("sessionData",JSON.stringify(db));kernel.isDialogShown("ssmgr")&&Ta();kernel.pushSignal("session","load");e()}function Na(){return storage.get(ab).then(Oa.bind(void 0,ab))}function Sa(a){db[ab].stat=[cb.length].concat(Hb.getAllStats());db[ab].date=[(cb[0]||[])[3],
(cb[cb.length-1]||[])[3]];kernel.setProp("sessionData",JSON.stringify(db));return storage.set(ab,cb,a)}function Va(c){c=$(c.target);if(c.is("td, th, select")&&(c.hasClass("click")||c.is("select"))){for(var h=c.parent();!h.is("tr");)h=h.parent();var e=h.children();5>e.length&&(e=h.prev().children());h=~~e.first().html().replace(/-.*$/,"");e=hb[h-1];switch(c.attr("data")||c.val()){case "r":y(e);break;case "u":1!=h&&(db[e].rank--,db[hb[h-2]].rank++,kernel.setProp("sessionData",JSON.stringify(db)));break;
case "d":h!=hb.length&&(db[e].rank++,db[hb[h]].rank--,kernel.setProp("sessionData",JSON.stringify(db)));break;case "s":a(e);break;case "+":r(h);break;case "x":w(e);break;case "m":Ra(e);break;case "o":Ya();break;case "p":Qa();break;case "e":Pa(c.parent());return;case "g":$a=!1;break;case "gn":$a="name";break;case "gs":$a="scr";break;case "v":storage.get(e).then(function(a){lb(new TimeStat([],a.length,function(a,b){return-1==a[b][0][0]?-1:~~((a[b][0][0]+a[b][0][1])/Sb)*Sb}.bind(void 0,a)),function(a,
b){return a[b]}.bind(void 0,a),0,a.length)});break;default:return}kernel.blur();b();Ta()}}function Qa(){var a=prompt(STATS_PROMPTSPL.replace("%s",h(ab)),~~(cb.length/2));if(null!=a)if(a=~~a,1>a||a>cb.length-1)alert(STATS_ALERTSPL);else{var b=ab,c=cb.slice(-a);f();storage.set(ab,c).then(function(){ab=b;cb=cb.slice(0,-a);Ib=[];tb.reset();Hb.reset();Sa();Oa(ab,cb);e()})}}function Ra(b){if(ab!=b&&confirm(STATS_ALERTMG.replace("%f",h(ab)).replace("%t",h(b)))){var c=ab;storage.get(b).then(function(a){Array.prototype.push.apply(a,
cb);return storage.set(b,a)}).then(function(h){delete db[b].stat;db[ab].date=[(h[0]||[])[3],(h[h.length-1]||[])[3]];kernel.setProp("sessionData",JSON.stringify(db));a(b);n(c)})}}function Ya(){for(var a=Wa(cb),b=0,c=0;c<cb.length;c++)a[c]!=cb[c]&&b++;0==b?logohint.push("Already sorted"):confirm(STATS_SSMGR_SORTCFM.replace("%d",b))&&(cb=a,Ib=[],tb.reset(),Hb.reset(),Sa(),Oa(ab,cb),e())}function Ua(a){var b=hb[a-1],c=db[b],h=["?/?","?"];if("stat"in c){var e=c.stat;h[0]=e[0]-e[1]+"/"+e[0];h[1]=z(e[2])}e=
STATS_SSMGR_OPS.split("|");e='<select><option value="">...</option><option value="r">'+e[0]+'</option><option value="+">'+e[1]+'</option><option value="'+(b==ab?'p">'+e[2]:'m">'+e[3])+'</option><option value="x">'+e[4]+"</option>"+(b==ab?'<option value="o">'+e[5]+"</option>":"")+'<option value="v">'+STATS_EXPORTCSV+"</option></select>";var f=1==a?"<td></td>":'<td class="click" data="u">&#8593;</td>',r=a==hb.length?"<td></td>":'<td class="click" data="d">&#8595;</td>',n="<td>"+scramble.getTypeName(c.opt.scrType||
"333")+"</td>",w="<td>"+h[0]+"</td>";h="<td>"+h[1]+"</td>";var x=mathlib.time2str((db[b].date||[])[1],"%Y-%M-%D");return'<tr class="'+(b==ab?"selected mhide":"mhide")+'"><td class="click" data="s">'+a+"-"+c.name+(b==ab?"*":"")+"</td>"+w+h+"<td>"+x+"</td>"+n+"<td>"+(c.opt.phases||1)+"</td>"+f+r+'<td class="seltd">'+e+'</td></tr><tr class="'+(b==ab?"selected ":"")+'mshow t"><td class="click" data="s" rowspan=2>'+a+"-"+c.name+(b==ab?"*":"")+"</td>"+w+n+f+r+'</tr><tr class="'+(b==ab?"selected ":"")+'mshow b">'+
h+"<td>"+x+"&nbsp;"+(c.opt.phases||1)+'P.</td><td class="seltd" colspan=2>'+e+"</td></tr>"}function Xa(a){for(var b=!1,c=[],h=0;h<a.length;h++){var e=hb[a[h]];b=b||ab==e;c.push(db[e].name+"("+scramble.getTypeName(db[e].opt.scrType||"333")+")")}c=c.join(", ");45<c.length&&(c=c.slice(0,42)+"...");return"<tr"+(b?' class="selected"':"")+'><td class="click" data="e" colspan=9 style="text-align:left;">'+(b?"*":"")+"[+] "+a.length+" session(s): "+c+"</td></tr>"}function Pa(a){for(var b=a.next();b.is(":hidden");b=
b.next())b.css("display","");a.remove()}function Ta(){c();kb.empty().append('<tr class="mhide"><th class="click" data='+("name"==$a?'"g">[+]':'"gn">[-]')+" "+STATS_SSMGR_NAME+"</th><th>"+STATS_SOLVE+"</th><th>"+STATS_AVG+"</th><th>"+STATS_DATE+'</th><th class="click" data='+("scr"==$a?'"g">[+]':'"gs">[-]')+" "+SCRAMBLE_SCRAMBLE+'</th><th>P.</th><th colspan=3>OP</th></tr><tr class="mshow t"><th rowspan=2 class="click" data='+("name"==$a?'"g">[+]':'"gn">[-]')+" "+STATS_SSMGR_NAME+"</th><th>"+STATS_SOLVE+
'</th><th class="click" data='+("scr"==$a?'"g">[+]':'"gs">[-]')+" "+SCRAMBLE_SCRAMBLE+'</th><th colspan=2 rowspan=2>OP</th></tr><tr class="mshow b"><th>'+STATS_AVG+"</th><th>"+STATS_DATE+" & P.</th></tr>");for(var a=[],b=NaN,h=0;h<hb.length;h++){var e=db[hb[h]];$a&&e[$a]==b?a[a.length-1].push(h):(a.push([h]),b=e[$a])}for(h=0;h<a.length;h++)if(1==a[h].length)kb.append(Ua(a[h][0]+1));else for(kb.append(Xa(a[h])),b=0;b<a[h].length;b++)kb.append($(Ua(a[h][b]+1)).hide());kb.unbind("click").click(Va).unbind("change").change(Va)}
function bb(){Ta();kernel.showDialog([Za,0,void 0,0,[STATS_SSMGR_ORDER,function(){if(!confirm(STATS_SSMGR_ODCFM))return!1;for(var a=[],h=1;h<=eb;h++)a.push(h);a.sort(function(a,b){var c=scramble.getTypeIdx(db[a].opt.scrType||"333"),h=scramble.getTypeIdx(db[b].opt.scrType||"333");return c==h?db[a].rank-db[b].rank:c-h});for(h=0;h<a.length;h++)db[a[h]].rank=h+1;c();b();Ta();return!1}]],"ssmgr",STATS_SSMGR_TITLE)}function gb(c,h){if("property"==c)"set"==h[2]||"session"==h[2]||h[0].startsWith("session")||
(db[ab].opt=kernel.getSProps(),kernel.setProp("sessionData",JSON.stringify(db))),"session"==h[0]&&~~h[1]!=ab?a(h[1]):"sessionData"==h[0]?(db=JSON.parse(h[1]),"set"!=h[2]&&b()):"sessionN"==h[0]?eb=h[1]:"scrType"==h[0]?(Wb=h[1],"modify"==h[2]&&kernel.getProp("scr2ss")&&r(void 0,!1)):"statclr"==h[0]&&(h[1]?fb.val("X").unbind("click").click(x):fb.val("+").unbind("click").click(r));else if("ctrl"==c&&"stats"==h[0]){var e=db[ab].rank;"+"==h[1]&&e<eb?kernel.setProp("session",hb[e]):"-"==h[1]&&1<e&&kernel.setProp("session",
hb[e-2])}}var eb=15,ab=-1,Za=$("<div />"),kb=$("<table />").appendTo(Za).addClass("table ssmgr"),fb=$('<input type="button">').val("+"),db,hb,mb=$("<option />").val("new").html("New.."),ib=$("<option />").val("del").html("Delete.."),pb=$("<select />").change(function(){kernel.blur();"new"==pb.val()?r(eb,!1):"del"==pb.val()?w(ab)||pb.val(ab):a(~~pb.val())}),$a=!1;$(function(){kernel.regListener("ssmgr","property",gb);kernel.regListener("ssmgr","ctrl",gb,/^stats$/);kernel.regProp("stats","sessionN",
-6,"Number of Sessions",[15]);kernel.regProp("stats","sessionData",-6,"Session Data",["{}"]);eb=kernel.getProp("sessionN");db=JSON.parse(kernel.getProp("sessionData"));b();kernel.setProp("sessionData",JSON.stringify(db));kernel.regProp("stats","session",-6,"Current Session Index",[1])});return{getSelect:function(){return pb},showMgrTable:bb,importSessions:function(c){if(c&&0!=c.length){for(var h=ab,f=0;f<c.length;f++){var r=c[f],n=kernel.getSProps(),w;for(w in r.opt)n[w]=r.opt[w];ab=++eb;db[ab]={name:r.name||
ab,opt:n,rank:eb};kernel.setProp("sessionN",eb);cb=r.times;Ib=[];tb.reset(cb.length);Hb.reset(cb.length);Sa()}b();a(h);bb();logohint.push("Import %d session(s)".replace("%d",c.length));e();return c.length}},getButton:function(){return fb},rank2idx:function(a){return hb[a-1]},load:Na,save:Sa}}(),Vb="",Tb=5,Ob=12,Jb=5,Kb=12,Wb="333",Sb=1;$(function(){kernel.regListener("stats","time",ab);kernel.regListener("stats","scramble",ab);kernel.regListener("stats","scrambleX",ab);kernel.regListener("stats",
"property",ab,/^(:?useMilli|timeFormat|stat(:?sum|thres|[12][tl]|alu?|inv|Hide|src|ssum)|session(:?Data)?|scrType|phases|trimr?|view|wndStat|sr_.*)$/);kernel.regListener("stats","ctrl",ab,/^stats$/);kernel.regListener("stats","ashow",ab);kernel.regListener("stats","button",ab);kernel.regListener("stats","giirecons",ab);kernel.regProp("stats","trim",1,PROPERTY_TRIM,["p5","0 1 p1 p5 p10 p20 m".split(" "),["0","1","1%","5%","10%","20%","50%/"+PROPERTY_TRIM_MED]],1);kernel.regProp("stats","trimr",1,PROPERTY_TRIMR,
["a","a 0 1 p1 p5 p10 p20 m".split(" "),["auto","0","1","1%","5%","10%","20%","50%/"+PROPERTY_TRIM_MED]],1);kernel.regProp("stats","statsum",0,PROPERTY_SUMMARY,[!0],1);kernel.regProp("stats","statthres",0,PROPERTY_STATTHRES,[!1],1);kernel.regProp("stats","printScr",0,PROPERTY_PRINTSCR,[!0],1);kernel.regProp("stats","printDate",0,PROPERTY_PRINTDATE,[!1],1);kernel.regProp("stats","imrename",0,PROPERTY_IMRENAME,[!1],1);kernel.regProp("stats","scr2ss",0,PROPERTY_SCR2SS,[!1]);kernel.regProp("stats","statssum",
0,PROPERTY_STATSSUM,[!1],1);kernel.regProp("stats","statinv",0,PROPERTY_STATINV,[!1],1);kernel.regProp("stats","statclr",0,STATS_STATCLR,[!0],1);kernel.regProp("stats","absidx",0,STATS_ABSIDX,[!1],1);zb.append(yb.append($('<span class="click" />').html(STATS_SESSION).click(Rb.showMgrTable),Rb.getSelect(),Rb.getButton()),Qb.append(Nb),Lb.append(""),$('<div class="stattl">').append(wb.append(xb)));$(window).bind("resize",nb);xb.append(Db,qb);kernel.addWindow("stats",BUTTON_TIME_LIST,zb,!0,!0,4);wb.bind("scroll",
function(){var a=wb[0];a.scrollHeight-a.scrollTop<a.clientHeight+5&&!kernel.getProp("statinv")&&Ab.click()});var a=STATS_TYPELEN.split("|");kernel.regProp("stats","stat1t",1,a[0].replace("%d",1),[0,[0,1],a.slice(2)],1);kernel.regProp("stats","stat1l",2,a[1].replace("%d",1),[5,3,1E3],1);kernel.regProp("stats","stat2t",1,a[0].replace("%d",2),[0,[0,1],a.slice(2)],1);kernel.regProp("stats","stat2l",2,a[1].replace("%d",2),[12,3,1E3],1);kernel.regProp("stats","rsfor1s",0,STATS_RSFORSS,[!1]);kernel.regProp("stats",
"statalu",5,PROPERTY_STATALU,["mo3 ao5 ao12 ao100"],1);kernel.regProp("stats","statal",1,PROPERTY_STATAL,["mo3 ao5 ao12 ao100",["mo3 ao5 ao12 ao100","mo3 ao5 ao12 ao25 ao50 ao100","mo3 ao5 ao12 ao25 ao50 ao100 ao200 ao500 ao1000 ao2000 ao5000 ao10000","u"],["mo3 ao5 ao12 ao100","mo3 ao5 ao12 ao25 ao50 ao100","mo3 ao5 ao12 ao25 ao50 ao100 ao200 ao500 ao1000 ao2000 ao5000 ao10000","Custom"]],1);kernel.regProp("stats","delmul",0,PROPERTY_DELMUL,[!0]);kernel.regProp("ui","statHide",-1,"Hide Session Title",
[!1]);kernel.setProp("sr_statalu",kernel.getProp("sr_statal"));hb()});var Xb={},Ib=[],mc={},Zb={};for(sb=0;5>sb;sb++)ob("comment"+sb,pb.bind(null,sb),[STATS_COMMENT+(sb+1),function(a){return""+(0<=a?(.001*a).toFixed(kernel.getProp("useMilli")?3:2).replace(/\.?0+$/,""):"N/A")},function(a){return""+(0<=a?(.001*a).toFixed(kernel.getProp("useMilli")?3:2):"DNF")}]);ob("commentmbld",function(a){if(0>a[0][0])return-1;var b=[];(a[2]||"").replace(/[0-9]+/g,function(a){b.push(parseInt(a))});return 2>b.length||
2>b[0]||b[0]>b[1]||2*b[0]<b[1]||255<=b[1]?-1:1024*(255-(2*b[0]-b[1]))+~~(a[0][0]+a[0][1])/Math.pow(2,26)+b[0]/Math.pow(2,34)},["MBLD",function(a){if(0>a)return"DNF";if(261121<a)return"N/A";var b=a*Math.pow(2,34)&255;return""+b+"/"+(2*b-(255-Math.floor(a)/1024))+" "+kernel.pretty(~~(a%1*Math.pow(2,26))).split(".")[0]},function(a){if(0>a)return"DNF";var b=255-Math.floor(a)/1024;return""+(0<=a?b.toFixed(kernel.getProp("useMilli")?3:2):"DNF")}]);return{importSessions:Rb.importSessions,getReviewUrl:function(a){return"https://alg.cubing.net/?alg="+
encodeURIComponent((a[4][0]||"").replace(/@(\d+)/g,"/*$1*/").replace(/-/g,"&#45;"))+"&setup="+encodeURIComponent(a[1]||"")},pretty:n,getStat12:function(){return[Tb,Ob,Jb,Kb]},getTimesStatsList:function(){return Hb},getTimesStatsTable:function(){return tb},getSessionManager:function(){return Rb},getSortedTimesByDate:Wa,trim:r,timesAt:ib,timeAt:Mb,infoClick:gb,regUtil:function(a,b){Xb[a]=b},regExtraInfo:ob,getExtraInfo:db}},[kernel.pretty,kernel.round,kernel.pround]);var stattool=execMain(function(b,Pa,z){function w(){if(Na){var c=stats.getTimesStatsTable(),w=c.avgSizes,n=c.getAllStats(),y=n[0],Qa=n[1],x=0;for(n=0;n<c.timesLen;n++)x+=stats.timesAt(n)[0][1];n=c.prettyFunc||[b,z];var Ua=[];Ua.push('<span class="click" data="tt">'+a[4].replace("%d",c.timesLen-y+"/"+c.timesLen)+", "+a[9].replace("%v",n[1](Qa))+"</span>\n");Ua.push("<span>"+a[12].replace("%d",b(x))+"</span>\n");Ua.push(a[0]+': <span class="click" data="bs">'+n[0](c.bestTime)+"</span>");Ua.push(" | "+
a[2]+': <span class="click" data="ws">'+n[0](c.worstTime)+"</span>\n");y=!1;Qa='<table class="table"><tr><td></td><td>'+a[1]+"</td><td>"+a[0]+"</td></tr>";for(x=0;x<w.length;x++){var Pa=Math.abs(w[x]);c.timesLen>=Pa&&(y||(y=!0,Ua.push(Qa)),50==Pa?Ua.push("<tr><td>mo10ao5</td>"):Ua.push("<tr><td>"+a[7-(w[x]>>>31)].replace("%mk",Pa)),Ua.push('<td><span class="click" data="c'+"am"[w[x]>>>31]+x+'">'+n[1](c.lastAvg[x][0])+" (σ="+stats.trim(c.lastAvg[x][1],2)+")</span></td>"),Ua.push('<td><span class="click" data="b'+
"am"[w[x]>>>31]+x+'">'+n[1](c.bestAvg(x,0))+" (σ="+stats.trim(c.bestAvg(x,1),2)+")</span></td></tr>"))}y&&Ua.push("</table>");Ua=Ua.join("");e.html(Ua.replace(/\n/g,"<br>"))}}function c(a,b){(Na=void 0!=a)&&!/^scr/.exec(b)&&(a.empty().append(e.unbind("click").click(function(a){stats.infoClick(stats.getTimesStatsTable(),stats.timesAt,a)})),w())}var e=$("<div />").css("text-align","center").css("font-size","0.7em"),a=STATS_STRING.split("|");for(Pa=0;13>Pa;Pa++)a[Pa]=a[Pa]||"";var Na=!1;$(function(){"undefined"!=
typeof tools&&tools.regTool("stats",TOOLS_STATS,c);stats.regUtil("stattool",w)});return{update:w}},[kernel.pretty,kernel.round,kernel.pround]);var trend=execMain(function(b){function Pa(){if(f&&e[0].getContext){var c=stats.getStat12(),w=c[0],Na=c[1],Sa=c[2],Oa=c[3];a=e[0].getContext("2d");c=kernel.getProp("imgSize")/10;$a=50;e.width(9.6*c+"em");e.height(6*c+"em");e.attr("width",8*$a+1);e.attr("height",5*$a+5);n=5*$a;$a*=8;var Pa=stats.getTimesStatsTable(),Ta=Pa.getMinMaxInt();if(Ta){var gb=Pa.timesLen;c=Pa.getBestDiff((Ta[0]-Ta[1])*Ua);var mb=Math.ceil(Ta[0]/c)*c;Ta=~~(Ta[1]/c)*c;var ib=mb-Ta,Wa=[0,1,1,0,0],eb=[0,0,1,1,0];a.fillStyle="#fff";
a.beginPath();a.moveTo(Wa[0]*($a-35)+35,(1-eb[0])*(n-25)+25);for(var Ya=1;Ya<Wa.length;Ya++)a.lineTo(Wa[Ya]*($a-35)+35,(1-eb[Ya])*(n-25)+25);a.fill();a.closePath();a.lineWidth=2;if(1<gb){eb=[];Ya=[];for(Wa=0;Wa<gb;Wa++){var r=Pa.timeAt(Wa);-1!=r&&(eb.push(Wa/(gb-1)),Ya.push(Math.max(0,Math.min(1,(r-Ta)/ib))))}z(eb,Ya,"#888")}if(gb>Sa){eb=[];Ya=[];r=Pa.runAvgMean(0,gb,Sa,0<w?void 0:0);for(Wa=0;Wa<r.length;Wa++)-1!=r[Wa][0]&&(eb.push((Wa+Sa-1)/(gb-1)),Ya.push(Math.max(0,Math.min(1,(r[Wa][0]-Ta)/ib))));
z(eb,Ya,"#f00")}if(gb>Oa){eb=[];Ya=[];Pa=Pa.runAvgMean(0,gb,Oa,0<Na?void 0:0);for(Wa=0;Wa<Pa.length;Wa++)-1!=Pa[Wa][0]&&(eb.push((Wa+Oa-1)/(gb-1)),Ya.push(Math.max(0,Math.min(1,(Pa[Wa][0]-Ta)/ib))));z(eb,Ya,"#00f")}a.clearRect(0,0,$a,25);a.clearRect(0,0,35,n);a.clearRect(0,n,$a+1,n+5);a.lineWidth=2;a.font="12pt Arial";a.fillStyle=kernel.getProp("col-font");a.fillText("time",50,13);a.strokeStyle="#888";a.beginPath();a.moveTo(90,7);a.lineTo(130,7);a.stroke();a.fillText((0<w?"ao":"mo")+Sa,160,13);a.strokeStyle=
"#f00";a.beginPath();a.moveTo(200,7);a.lineTo(240,7);a.stroke();a.fillText((0<Na?"ao":"mo")+Oa,270,13);a.strokeStyle="#00f";a.beginPath();a.moveTo(310,7);a.lineTo(350,7);a.stroke();a.fillStyle=kernel.getProp("col-font");a.strokeStyle="#ccc";a.lineWidth=1;a.textAlign="right";w=1E3<=c?/[^\.]+(?=\.)/:/[^\.]+\.[\d]/;for(Wa=Ta;Wa<=mb;Wa+=c)Na=b(Wa).match(w)[0],Sa=(mb-Wa)/ib,Sa=1-(1-Sa-x)/Ua,0>Sa||1<Sa||(a.fillText(Na,30,Sa*(n-25)+30),z([y,y+Qa],[(Wa-Ta)/ib,(Wa-Ta)/ib],"#ccc"));z([y,y+Qa,y+Qa,y,y],[x,x,
x+Ua,x+Ua,x],"#000")}}}function z(b,c,e){a.strokeStyle=e;a.beginPath();for(e=0;e<b.length;e++)b[e]=(b[e]-y)/Qa,c[e]=(c[e]-x)/Ua;a.moveTo(b[0]*($a-35)+35,(1-c[0])*(n-25)+25);for(e=1;e<b.length;e++)a.lineTo(b[e]*($a-35)+35,(1-c[e])*(n-25)+25);a.stroke();a.closePath()}function w(a){var b=$(a.target);b.hasClass("click")&&(a=b.attr("data"),"x"==a?(Ta="y",b.attr("data","y"),b.html("")):"y"==a?(Ta="x",b.attr("data","x"),b.html("")):(b={p:1,m:-1}[a]||0,a={l:Math.sqrt(.5),s:Math.sqrt(2)}[a]||1,"x"==Ta?(y+=
b*Qa*.25+Qa*(1-a),Qa*=a,Qa=Math.min(Math.max(Qa,.1),1),y=Math.min(Math.max(y,0),1-Qa)):(x+=b*Ua*.25+Ua*(1-a)/2,Ua*=a,Ua=Math.min(Math.max(Ua,.1),1),x=Math.min(Math.max(x,0),1-Ua)),Pa()))}function c(a,b){(f=void 0!=a)&&!/^scr/.exec(b)&&(a.empty().append(Na.empty().append(e,"<br>",['<span class="click" data="%" style="font-family: iconfont, Arial;display:inline-block;width:2em;">$</span>'.replace("$","").replace("%","x"),'<span class="click" data="%" style="font-family: iconfont, Arial;display:inline-block;width:2em;">$</span>'.replace("$",
"&lt;").replace("%","p"),'<span class="click" data="%" style="font-family: iconfont, Arial;display:inline-block;width:2em;">$</span>'.replace("$","&gt;").replace("%","m"),'<span class="click" data="%" style="font-family: iconfont, Arial;display:inline-block;width:2em;">$</span>'.replace("$","").replace("%","l"),'<span class="click" data="%" style="font-family: iconfont, Arial;display:inline-block;width:2em;">$</span>'.replace("$","").replace("%","s")].join("")).unbind("click").click(w)),Pa())}var e=
$('<canvas style="margin-bottom:-0.4em"/>'),a,Na=$('<div style="text-align:center">'),f=!1,$a,n,y=0,Qa=1,x=0,Ua=1,Ta="x";$(function(){"undefined"!=typeof tools&&(kernel.regListener("trend","property",function(a,b){"disPrec"==b[0]&&Pa()},/^disPrec|col-font$/),e[0].getContext&&tools.regTool("trend",TOOLS_TREND,c));stats.regUtil("trend",Pa)});return{update:Pa}},[kernel.pretty]);var distribution=execMain(function(b){function Pa(){if(c){w.empty();var e=stats.getTimesStatsTable(),a=e.getMinMaxInt();if(a){var Na=e.timesLen,f=a[0],z=a[1];a=a[2];f=~~(f/a);z=~~(z/a);for(var n={},y={},Qa=0,x=y[f+1]=0;x<Na;x++){var Pa=e.timeAt(x);-1!=Pa?(Pa=~~(Pa/a),n[Pa]=(n[Pa]||0)+1,Qa=Math.max(n[Pa],Qa),y[Pa]=x+1):y[f+1]=x+1}for(x=f;x>z;x--)y[x]=Math.max(y[x+1],y[x]||0);e=[];Pa=0;var Ta=1E3<=a?/[^\.]+(?=\.)/:/[^\.]+\.[\d]/,Za=b(f*a).match(Ta)[0].length;for(x=z;x<=f;x++){z=b(x*a).match(Ta)[0];
var Ra=b((x+1)*a).match(Ta)[0];n[x]=n[x]||0;Pa+=n[x];z=mathlib.valuedArray(Za-z.length,"&nbsp;").join("")+z;Ra=mathlib.valuedArray(Za-Ra.length,"&nbsp;").join("")+Ra;e.push("<tr><td>"+z+'+</td><td><span class="cntbar" style="width: '+n[x]/Qa*5+'em;">'+n[x]+"</span></td><td>&nbsp;&lt;"+Ra+'</td><td><span class="cntbar" style="width: '+Pa/Na*5+'em; white-space: nowrap;">'+(Na-y[x+1])+"/"+Pa+"</span></td></tr>")}w.html('<table style="border:none;">'+e.join("")+"</table>")}}}function z(b,a){(c=void 0!=
b)&&!/^scr/.exec(a)&&(b.empty().append(w),Pa())}var w=$("<div />"),c=!1;$(function(){"undefined"!=typeof tools&&(kernel.regListener("distribution","property",function(b,a){"disPrec"==a[0]&&Pa()},/^disPrec$/),kernel.regProp("tools","disPrec",1,STATS_PREC,["a",["a",0,1,2,3,4,5,6,7,8,9],STATS_PREC_STR.split("|")],1),tools.regTool("distribution",TOOLS_DISTRIBUTION,z));stats.regUtil("distribution",Pa)});return{update:Pa}},[kernel.pretty]);var crossSessionStats=execMain(function(b,Pa,z){function w(a){return-1==Za[a][0][0]?-1:~~((Za[a][0][0]+Za[a][0][1])/Ra)*Ra}function c(a){return Za[a]}function e(){Za=[];Ra=kernel.getProp("useMilli")?1:10;for(var a=Promise.resolve(),c=~~kernel.getProp("sessionN"),e=JSON.parse(kernel.getProp("sessionData")),f=y.val(),w=x.val(),Oa=-1==Qa.val()?-1:~~(+new Date/1E3)-86400*Qa.val(),Na=0;Na<c;Na++){var Sa=stats.getSessionManager().rank2idx(Na+1);if("*"==f||e[Sa].name==f)if("*"==w||(e[Sa].opt.scrType||"333")==
w)a=a.then(function(a){return new Promise(function(b){storage.get(a).then(function(a){for(var c=0;c<a.length;c++)(a[c][3]||0)<Oa||Za.push(a[c]);b()})})}.bind(void 0,Sa))}a.then(function(){Za=stats.getSortedTimesByDate(Za);Ta.reset(Za.length);var a=Ta.getAllStats(),c=a[0],e=a[1],f=0;for(a=0;a<Za.length;a++)f+=Za[a][0][1];a=[];a.push('<span class="click" data="tt">'+Xa[4].replace("%d",Ta.timesLen-c+"/"+Ta.timesLen)+", "+Xa[9].replace("%v",z(e))+"</span>\n");a.push("<span>"+Xa[12].replace("%d",b(f))+
"</span>\n");a.push(Xa[0]+': <span class="click" data="bs">'+b(Ta.bestTime)+"</span>");a.push(" | "+Xa[2]+': <span class="click" data="ws">'+b(Ta.worstTime)+"</span>\n");c=!1;e='<table class="table"><tr><td></td><td>'+Xa[1]+"</td><td>"+Xa[0]+"</td></tr>";f=Ta.avgSizes;for(var w=0;w<f.length;w++){var x=Math.abs(f[w]);Ta.timesLen>=x&&(c||(c=!0,a.push(e)),a.push("<tr><td>"+Xa[7-(f[w]>>>31)].replace("%mk",x)),a.push('<td><span class="click" data="c'+"am"[f[w]>>>31]+w+'">'+z(Ta.lastAvg[w][0])+" (σ="+stats.trim(Ta.lastAvg[w][1],
2)+")</span></td>"),a.push('<td><span class="click" data="b'+"am"[f[w]>>>31]+w+'">'+z(Ta.bestAvg(w,0))+" (σ="+stats.trim(Ta.bestAvg(w,1),2)+")</span></td></tr>"))}c&&a.push("</table>");a=a.join("");n.html(a.replace(/\n/g,"<br>"))})}function a(){var a=!1,b=JSON.parse(kernel.getProp("sessionData"));$.each(b,function(b,c){Oa[b]&&c.name==Oa[b].name&&(c.opt||{}).scrType==(Oa[b].opt||{}).scrType||(a=!0)});Oa=b;if(a){var c=[],e=[];y.empty().append($("<option />").val("*").html(STATS_XSESSION_NAME));x.empty().append($("<option />").val("*").html(STATS_XSESSION_SCR));
$.each(b,function(a,b){var f=b.name;-1==$.inArray(f,c)&&(c.push(f),y.append($("<option />").val(f).html(f)));f=(b.opt||{}).scrType||"333";-1==$.inArray(f,e)&&(e.push(f),x.append($("<option />").val(f).html(scramble.getTypeName(f))))})}}function Na(b,f){(Sa=b)&&!/^scr/.exec(f)&&(a(),b.empty().append($a),Ua.unbind("click").click(e),n.unbind("click").click(function(a){stats.infoClick(Ta,c,a)}))}function f(b,c){"sessionData"==c[0]&&Sa&&a()}Pa=STATS_XSESSION_DATE.split("|");var $a=$("<div />").css("text-align",
"center").css("font-size","0.7em"),n=$("<div />"),y=$("<select>"),Qa=$("<select>").append($("<option>").val(-1).html(Pa[0]),$("<option>").val(1).html(Pa[1]),$("<option>").val(7).html(Pa[2]),$("<option>").val(30).html(Pa[3]),$("<option>").val(365).html(Pa[4])).val(-1),x=$("<select>"),Ua=$('<span class="click">'+STATS_XSESSION_CALC+"</span>"),Ta=new TimeStat([],0,w),Za=[],Ra=1,Xa=STATS_STRING.split("|");for(Pa=0;13>Pa;Pa++)Xa[Pa]=Xa[Pa]||"";var Sa=null,Oa={};$(function(){$a.append(y,Qa,x," ",Ua,"<br>",
n);"undefined"!=typeof tools&&tools.regTool("hugestats",TOOLS_HUGESTATS,Na);kernel.regListener("labelstat","property",f,/^sessionData$/)});return{update:$.noop,updateStatal:function(a){Ta=new TimeStat(a,0,w)}}},[kernel.pretty,kernel.round,kernel.pround]);var periodStats=execMain(function(){function b(a){a-=x;var b=new Date(1E3*a);switch(Ua){case "d":return~~(a/86400);case "w":return~~((a/86400-y.val())/7);case "m":return 12*b.getFullYear()+b.getMonth();case "y":return b.getFullYear()}}function Pa(a){switch(Ua){case "d":return mathlib.time2str(86400*a+x,"%Y-%M-%D");case "w":return mathlib.time2str(86400*(7*a+~~y.val())+x,"Start@ %Y-%M-%D");case "m":return~~(a/12)+"-"+("0"+(a%12+1)).slice(-2);case "y":return""+a}}function z(){for(var a=Promise.resolve(),
c=~~kernel.getProp("sessionN"),e=0;e<c;e++){var f=stats.getSessionManager().rank2idx(e+1);a=a.then(function(a){return new Promise(function(c){storage.get(a).then(function(h){stats[a]={};for(var e=0;e<h.length;e++)if(h[e][3]){var f=b(h[e][3]);stats[a][f]=stats[a][f]||[0,0];stats[a][f][0]+=1;stats[a][f][1]+=-1!=h[e][0][0]}c()})})}.bind(void 0,f))}return a.then(function(){Qa=stats})}function w(a){a=$(a.target).html();"&gt;"==a?Za--:"&lt;"==a?Za=Math.min(Za+1,0):"+"==a?Ra++:"-"==a&&(Ra=Math.max(1,Ra-
1));c()}function c(){if(lb){var b=$('<table class="table">'),c=TOOLS_DLYSTAT1.split("|");gb.empty().append(c[0],f.unbind("change").change(a)," "+c[1],$a.unbind("change").change(a)," "+c[2],y.unbind("change").change(a),"<br>",b);c=JSON.parse(kernel.getProp("sessionData"));for(var e=~~kernel.getProp("sessionN"),n=$("<tr>").append(Sa.unbind("click").click(w),Xa.unbind("click").click(w)),x=$("<tr>").append(Oa.unbind("click").click(w),fb.unbind("click").click(w)),r=0;r<Ra;r++)n.append($("<td rowspan=2>").html(Pa(Ta-
r+Za).replace(" ","<br>")));b.append(n,x);for(r=0;r<e;r++)if(n=stats.getSessionManager().rank2idx(r+1),0!=Object.keys(Qa[n]||{}).length){x=$("<tr>").append($("<td colspan=2>").html(c[n].name));for(var h=0;h<Ra;h++){var Na=Qa[n][Ta-h+Za];x.append($("<td>").html(Na?Na[1]+"/"+Na[0]:"-"))}b.append(x)}}}function e(b,c){lb=!!b;b&&!/^scr/.exec(c)&&(b.empty().append(gb),a())}function a(){lb&&(Ua=f.val(),x=3600*$a.val()+60*(new Date).getTimezoneOffset(),Ta=b(+new Date/1E3),z().then(c))}var Na=TOOLS_DLYSTAT_OPT1.split("|"),
f=$("<select>").append($("<option>").val("d").html(Na[0]),$("<option>").val("w").html(Na[1]),$("<option>").val("m").html(Na[2]),$("<option>").val("y").html(Na[3])).val("d"),$a=$("<select>");for(Na=0;24>Na;Na++){var n=("0"+Na).slice(-2)+":00";$a.append($("<option>").val(Na).html(n))}Na=TOOLS_DLYSTAT_OPT2.split("|");var y=$("<select>").append($("<option>").val(3).html(Na[0]),$("<option>").val(4).html(Na[1]),$("<option>").val(5).html(Na[2]),$("<option>").val(6).html(Na[3]),$("<option>").val(0).html(Na[4]),
$("<option>").val(1).html(Na[5]),$("<option>").val(2).html(Na[6])).val(3),Qa=[],x,Ua,Ta,Za=0,Ra=3,Xa=$('<td class="click">').html("&gt;"),Sa=$('<td class="click">').html("&lt;"),Oa=$('<td class="click">').html("+"),fb=$('<td class="click">').html("-");$("<td colspan=1>");var lb=!1,gb=$("<div />").css("text-align","center").css({"font-size":"0.7em","max-height":"20em","overflow-y":"auto"});$(function(){"undefined"!=typeof tools&&tools.regTool("dlystat",TOOLS_DLYSTAT,e);kernel.regListener("dlystat",
"property",c,/^sessionData$/);stats.regUtil("dlystat",a)});return{update:a}});var recons=execMain(function(){function b(){this.clear()}function Pa(a,c){if(a&&a[4]&&!(0>a[0][0])){var e=a[4],f=new mathlib.CubieCube;new mathlib.CubieCube;f.ori=0;e=e[0].split(/ +/);for(var n=e.length-1;0<=n;n--)f.selfMoveStr(e[n],!0);f.selfConj();n=f.toFaceCube();var w=[],x=new b,y=new mathlib.CubieCube;y.invFrom(f);var Oa=0,Na=0,r=[],h=cubeutil.getProgress(n,c);for(n=0;n<e.length;n++){var z=f.selfMoveStr(e[n],!1);if(void 0!=z){Na=Math.min(Na,f.tstamp);x.push(z);var Sa=~~(z/3);r.push(["URFDLB".charAt(Sa%
6)+" 2'".charAt(z%3),f.tstamp]);6<=Sa&&r.push(["DLBURF".charAt(Sa%6)+"'2 ".charAt(z%3),f.tstamp])}z=cubeutil.getProgress(f.toFaceCube(),c);if(z<h){Sa=new mathlib.CubieCube;mathlib.CubieCube.EdgeMult(y,f,Sa);mathlib.CubieCube.CornMult(y,f,Sa);for(w[--h]=[Oa,Na,f.tstamp,x.moveCnt,Sa,r];h>z;)w[--h]=[f.tstamp,f.tstamp,f.tstamp,0,new mathlib.CubieCube,[]];y.invFrom(f);Oa=f.tstamp;x.clear();r=[];Na=1E9}}e=cubeutil.getStepCount(c);f=[];for(n=0;n<e;n++)f[n]=(w[n]||[])[5]||[];return{data:w,rawMoves:f.reverse()}}}
function z(a,b,c,e,f){for(var n=0,w=0,y=[],Oa=[],z=0;z<a.length;z++){w+=a[z][1]+a[z][2];var r=a[z][0].split("-");0!=y.length&&y[y.length-1][0]==r[0]||y.push([r[0],0,0,0]);Oa[z]=y.length-1;r=y[y.length-1];for(var h=1;4>h;h++)r[h]+=a[z][h];n=Math.max(r[1]+r[2],n)}r=[];var Sa=0,Qa=0,Pa=0,gb=-1;for(z=0;z<a.length;z++){var hb=a[z];Sa+=hb[1];Qa+=hb[2];Pa+=hb[3];if(Oa[z]==Oa[z+1]&&Oa[z]!=Oa[z-1]){gb=Oa[z];h=y[gb];var lb=["",h[0],h[1]/n*100,h[2]/n*100,c?Math.round(h[1]/w*1E3)/10+"%":kernel.pretty(h[1]),c?
Math.round(h[2]/w*1E3)/10+"%":kernel.pretty(h[2]),Math.round(10*h[3])/10,0<h[3]&&0<h[1]+h[2]?Math.round(h[3]/(h[1]+h[2])*1E4)/10:"N/A","click sstep"],db='<tr style="$0" data="$1"><td rowspan=2 class="$8" style="padding-bottom:0;padding-top:0;">$1</td><td colspan=4 style="padding:0;"><span class="cntbar sty2" style="height:0.2em;float:left;border:none;width:$2%;">&nbsp;</span><span class="cntbar" style="height:0.2em;float:left;border:none;width:$3%;">&nbsp;</span></td></tr><tr style="$0" data="$1"><td style="padding-bottom:0;padding-top:0;">$4</td><td style="padding-bottom:0;padding-top:0;">$5</td><td style="padding-bottom:0;padding-top:0;">$6</td><td style="padding-bottom:0;padding-top:0;">$7</td></tr>';
for(h=0;9>h;h++)db=db.replace(new RegExp("\\$"+h,"g"),lb[h]);r.push(db)}hb=[Oa[z]==gb?"display:none;":"",hb[0],hb[1]/n*100,hb[2]/n*100,c?Math.round(hb[1]/w*1E3)/10+"%":kernel.pretty(hb[1]),c?Math.round(hb[2]/w*1E3)/10+"%":kernel.pretty(hb[2]),Math.round(10*hb[3])/10,0<hb[3]&&0<hb[1]+hb[2]?Math.round(hb[3]/(hb[1]+hb[2])*1E4)/10:"N/A",""];db='<tr style="$0" data="$1"><td rowspan=2 class="$8" style="padding-bottom:0;padding-top:0;">$1</td><td colspan=4 style="padding:0;"><span class="cntbar sty2" style="height:0.2em;float:left;border:none;width:$2%;">&nbsp;</span><span class="cntbar" style="height:0.2em;float:left;border:none;width:$3%;">&nbsp;</span></td></tr><tr style="$0" data="$1"><td style="padding-bottom:0;padding-top:0;">$4</td><td style="padding-bottom:0;padding-top:0;">$5</td><td style="padding-bottom:0;padding-top:0;">$6</td><td style="padding-bottom:0;padding-top:0;">$7</td></tr>';
for(h=0;9>h;h++)db=db.replace(new RegExp("\\$"+h,"g"),hb[h]);r.push(db)}a=$("<tr>").append(b?$("<td>").append(Ra):$('<td style="padding:0;">').append(Ta),"<td>"+(c?Math.round(Sa/w*1E3)/10+"%":kernel.pretty(Sa))+"</td><td>"+(c?Math.round(Qa/w*1E3)/10+"%":kernel.pretty(Qa))+"</td>",$("<td>").append(e||f?x:Math.round(10*Pa)/10),"<td>"+(0<Pa&&0<Sa+Qa?Math.round(Pa/(Sa+Qa)*1E4)/10:"N/A")+"</td>");Ua.empty().append(Xa);Xa.after(r.join(""),a);Ta.unbind("change").change(Na);Za.unbind("change").change(Na);
Ua.unbind("click").click(Na);Ra.text("No."+b);(e||f)&&x.children("a").attr("href","https://alg.cubing.net/?alg="+encodeURIComponent(f)+"&setup="+encodeURIComponent(e)).text(Math.round(10*Pa)/10)}function w(a){Ua.empty().append(Xa);Xa.after($("<tr>").append(a?$("<td>").append(Ra):$('<td style="padding:0;">').append(Ta),"<td colspan=4>"+TOOLS_RECONS_NODATA+"</td>"));Ta.unbind("change").change(Na);Za.unbind("change").change(Na);Ua.unbind("click").click(Na);Ra.text("---")}function c(b,c){(n=void 0!=b)&&
!/^scr/.exec(c)&&(b.empty().append(Qa.append(Ua)),a())}function e(a,b){if(n){var c=Za.val()||"cf4op",e=c.endsWith("%");c=c.replace("%","");var f=b[0],x=Pa(f,c);if(x){for(var y=x.data,Oa=cubeutil.getStepNames(c),Na=[],Sa=Oa.length-1;0<=Sa;Sa--){var r=y[Sa]||[0,0,0,0];Na.push([Oa[Sa],r[1]-r[0],r[2]-r[1],r[3]])}c=cubeutil.getPrettyReconstruction(x.rawMoves,c).prettySolve;z(Na,b[1]+1,e,f[1],c)}else w(!0)}}function a(){if(n){var a=stats.getTimesStatsTable().timesLen,b=Ta.val();if(b="single"==b?Math.min(1,
a):"mo5"==b?Math.min(5,a):"mo12"==b?Math.min(12,a):"mo100"==b?Math.min(100,a):a){var c=Za.val()||"cf4op",e=c.endsWith("%");c=c.replace("%","");for(var f=cubeutil.getStepNames(c),x=0,y=[],Na=a-1;Na>=a-b;Na--){var Qa=stats.getExtraInfo("recons_"+c,Na);if(Qa){var Ra=Qa.data;x++;for(var r=f.length-1;0<=r;r--){var h=Ra[r]||[0,0,0,0],Va=f.length-r-1;y[Va]=y[Va]||[f[r],0,0,0];y[Va][1]+=h[1]-h[0];y[Va][2]+=h[2]-h[1];y[Va][3]+=h[3]}}}if(0==x)w(!1);else{for(r=0;r<f.length;r++)y[r][1]/=x,y[r][2]/=x,y[r][3]/=
x;1==b?(b=cubeutil.getPrettyReconstruction(Qa.rawMoves,c).prettySolve,z(y,null,e,stats.timesAt(a-1)[1],b)):z(y,null,e)}}else w(!1)}}function Na(b){if("change"==b.type)kernel.setProp("rcMthd",Za.val()),a();else if(b=$(b.target),b.is(".click")&&!b.is(".exturl"))if(b.is(".sstep")){b=b.parent();var c=b.attr("data")+"-";for(b=b.next().next();b&&b.attr("data").startsWith(c);)b.toggle(),b=b.next()}else a()}function f(a,b,c,e,f){return(a=stats.getExtraInfo("recons_"+a,f))?(a.data[c[0]]||[0,0,0,0])[c[1]]-
(a.data[b[0]]||[0,0,0,0])[b[1]]:-1}function $a(a,b,c,e){a=stats.getExtraInfo("recons_"+a,e);if(!a)return-1;for(e=c=0;e<a.data.length;e++){var f=a.data[e]||[0,0,0,0];c+=b?f[1]-f[0]:f[2]-f[1]}return c}var n,y=TOOLS_RECONS_TITLE.split("|"),Qa=$('<div style="font-size:0.9em;" />'),x=$("<div>").append('<a target="_blank" class="exturl click"></a>'),Ua=$('<table class="table">'),Ta=$("<select>"),Za=$("<select>"),Ra=$('<span class="click" />'),Xa=$("<tr>").append($('<th style="padding:0;">').append(Za),
"<th>"+y[0]+"</th><th>"+y[1]+"</th><th>"+y[2]+"</th><th>"+y[3]+"</th>");b.prototype.push=function(a){a=~~(a/3);var b=1<<a;a%3!=this.lastMove%3&&(this.lastMove=a,this.lastPow=0);this.moveCnt+=(this.lastPow&b)==b?0:1;this.lastPow|=b};b.prototype.clear=function(){this.lastPow=0;this.lastMove=-3;this.moveCnt=0};$(function(){"undefined"!=typeof tools&&tools.regTool("recons",TOOLS_RECONS+">step",c);stats.regUtil("recons",a);stats.regExtraInfo("recons_cf4op",function(a){return Pa(a,"cf4op")});stats.regExtraInfo("recons_roux",
function(a){return Pa(a,"roux")});stats.regExtraInfo("recons_cfop_ct",f.bind(null,"cf4op",[6,0],[6,2]),["cross "+STATS_TIME,kernel.pretty]);stats.regExtraInfo("recons_cfop_ft",f.bind(null,"cf4op",[5,0],[2,2]),["F2L "+STATS_TIME,kernel.pretty]);stats.regExtraInfo("recons_cfop_ot",f.bind(null,"cf4op",[1,0],[1,2]),["OLL "+STATS_TIME,kernel.pretty]);stats.regExtraInfo("recons_cfop_pt",f.bind(null,"cf4op",[0,0],[0,2]),["PLL "+STATS_TIME,kernel.pretty]);stats.regExtraInfo("recons_cfop_it",$a.bind(null,
"cf4op",!0),["CFOP "+y[0],kernel.pretty]);stats.regExtraInfo("recons_cfop_et",$a.bind(null,"cf4op",!1),["CFOP "+y[1],kernel.pretty]);kernel.regListener("recons","reqrec",e);for(var b=["single","mo5","mo12","mo100","all"],n=0;n<b.length;n++)Ta.append('<option value="'+b[n]+'">'+b[n]+"</option>");b=[["cf4op","cfop"],["roux","roux"]];for(n=0;n<b.length;n++)Za.append('<option value="'+b[n][0]+'">'+b[n][1]+"</option>"),Za.append('<option value="'+b[n][0]+'%">'+b[n][1]+"%</option>");Za.val(kernel.getProp("rcMthd",
"cf4op"))});return{calcRecons:Pa,getMoveCnt:function(a){a=a.split(/ +/);var c=new mathlib.CubieCube;c.ori=0;for(var e=new b,f=0;f<a.length;f++){var n=c.selfMoveStr(a[f],!1);void 0!=n&&e.push(n)}return e.moveCnt}}}),caseStat=execMain(function(){function b(){if(c){for(var a=stats.getTimesStatsTable().timesLen,b=f.val()||"PLL",e=cubeutil.getIdentData(b),n=0,w=[],z=a-1;z>=a-a;z--){var Ra=stats.getExtraInfo("recons_cf4op_"+b,z);if(Ra){n++;var Xa=Ra[0];w[Xa]=w[Xa]||[0,0,0,0];var Sa=[1].concat(Ra.slice(1));
for(Ra=0;4>Ra;Ra++)w[Xa][Ra]+=Sa[Ra]}}Na.empty().append($a);a=0;for(Ra=e[2];Ra<e[3];Ra++)w[Ra]&&(a=Math.max(a,(w[Ra][1]+w[Ra][2])/w[Ra][0]));for(Ra=e[2];Ra<e[3];Ra++)if(w[Ra]){b=w[Ra];$("<tr>");z=[e[1](Ra)[2],b[0],b[1]/b[0]/a*100,b[2]/b[0]/a*100,kernel.pretty(b[1]/b[0]),kernel.pretty(b[2]/b[0]),Math.round(b[3]/b[0]*10)/10,Math.round(b[3]/(b[1]+b[2])*1E4)/10];b='<tr><td rowspan=2 style="padding-bottom:0;padding-top:0;">$0</td><td rowspan=2 style="padding:0"><canvas/></td><td rowspan=2 style="padding-bottom:0;padding-top:0;">$1</td><td colspan=4 style="padding:0;"><span class="cntbar sty2" style="height:0.25em;float:left;border:none;width:$2%;">&nbsp;</span><span class="cntbar" style="height:0.25em;float:left;border:none;width:$3%;">&nbsp;</span></td></tr><tr><td style="padding-bottom:0;padding-top:0;">$4</td><td style="padding-bottom:0;padding-top:0;">$5</td><td style="padding-bottom:0;padding-top:0;">$6</td><td style="padding-bottom:0;padding-top:0;">$7</td></tr>';
for(Xa=0;8>Xa;Xa++)b=b.replace(new RegExp("\\$"+Xa,"g"),z[Xa]);b=$(b);z=b.find("canvas");z.css({width:"2em",height:"2em",display:"block"});e[1](Ra,z);Na.append(b)}f.unbind("change").change(Pa);0==n&&$a.after("<tr><td colspan=7>"+TOOLS_RECONS_NODATA+"</td></tr>")}}function Pa(a){"change"==a.type&&b()}function z(e,f){(c=void 0!=e)&&!/^scr/.exec(f)&&(e.empty().append(a.append(Na)),b())}function w(a,b,c){if(b=stats.getExtraInfo("recons_cf4op",c))if(a=cubeutil.getIdentData(a),b=b.data[a[4]])return n=n||
new mathlib.CubieCube,n.invFrom(b[4]),[a[0](n.toFaceCube()),b[1]-b[0],b[2]-b[1],b[3]]}var c,e=TOOLS_RECONS_TITLE.split("|"),a=$('<div style="font-size:0.9em;" />'),Na=$('<table class="table">'),f=$("<select>"),$a=$("<tr>").append($('<th colspan=2 style="padding:0;">').append(f),"<th>N</th><th>"+e[0]+"</th><th>"+e[1]+"</th><th>"+e[2]+"</th><th>"+e[3]+"</th>"),n;$(function(){"undefined"!=typeof tools&&tools.regTool("casestat",TOOLS_RECONS+">cases",z);stats.regUtil("casestat",b);for(var a=["PLL","OLL"],
c=0;c<a.length;c++)f.append('<option value="'+a[c]+'">'+a[c]+"</option>"),stats.regExtraInfo("recons_cf4op_"+a[c],w.bind(null,a[c]))})}),scatter=execMain(function(){function b(){n.html(TOOLS_RECONS_NODATA);$a.unbind("change").change(c);f.hide()}function Pa(c,e){if(!c||!c[4])return b();var w=recons.calcRecons(c,e);if(!w)return b();f.show();Na=a[0].getContext("2d");var y=kernel.getProp("imgSize")/10;Qa=50;a.width(9.6*y+"em");a.height(4.8*y+"em");a.attr("width",8*Qa+1);a.attr("height",4*Qa+5);x=4*Qa;
Qa*=8;y=w.data[0][2];for(var Oa=0,z=0;z<w.data.length;z++)Oa+=w.data[z][5].length;z=[0,1,1,0,0];var Sa=[0,0,1,1,0];Na.fillStyle="#fff";Na.beginPath();Na.moveTo(z[0]*(Qa-0),(1-Sa[0])*(x-0));for(var Pa=1;Pa<z.length;Pa++)Na.lineTo(z[Pa]*(Qa-0),(1-Sa[Pa])*(x-0));Na.fill();Na.closePath();Sa=0;Pa=[];var Xa=[],Ya=[],r=0,h=0;for(z=w.data.length-1;0<=z;z--){for(var Va=w.data[z],bb=0;bb<Va[5].length;bb++)if(Xa.push(Sa/(Oa-1)),Pa.push(Va[5][bb][1]/y),Sa++,1<Pa.length){Na.lineWidth=3;var ab="#888";Pa[1]-Pa[0]>
3/(Oa-1)?(ab="#f00",r+=Pa[1]-Pa[0]):Pa[1]-Pa[0]>2/(Oa-1)&&(ab="#00f",h+=Pa[1]-Pa[0]);var $a=Pa,hb=Xa;Na.strokeStyle=ab;Na.beginPath();for(ab=0;ab<$a.length;ab++)$a[ab]=($a[ab]-Ua)/Ta,hb[ab]=(hb[ab]-Za)/Ra;Na.moveTo($a[0]*(Qa-0),(1-hb[0])*(x-0));for(ab=1;ab<$a.length;ab++)Na.lineTo($a[ab]*(Qa-0),(1-hb[ab])*(x-0));Na.stroke();Na.closePath();Pa=Pa.slice(Pa.length-1);Xa=Xa.slice(Xa.length-1)}0!=z&&Ya.push([Pa[0]*(Qa-0),(1-Xa[0])*(x-0)])}for(z=0;z<Ya.length;z++)Na.strokeStyle="#000",Na.lineWidth=1,Na.beginPath(),
Na.arc(Ya[z][0],Ya[z][1],4,0,2*Math.PI),Na.stroke(),Na.closePath();n.html(" "+'<span style="color:$">$</span>'.replace("$","#f00").replace("$",kernel.pretty(r*y))+" "+'<span style="color:$">$</span>'.replace("$","#00f").replace("$",kernel.pretty(h*y))+" "+'<span style="color:$">$</span>'.replace("$","#888").replace("$",kernel.pretty((1-r-h)*y)))}function z(){if(y&&a[0].getContext){var b=stats.getTimesStatsTable().timesLen;Pa(stats.timesAt(b-1),$a.val()||"cf4op")}}function w(b,c){y&&a[0].getContext&&
Pa(c[0],$a.val()||"cf4op")}function c(a){if("change"==a.type)return z();var b=$(a.target);b.hasClass("click")&&(a=b.attr("data"),"x"==a?(Xa="y",b.attr("data","y"),b.html("")):"y"==a?(Xa="x",b.attr("data","x"),b.html("")):(b={p:1,m:-1}[a]||0,a={l:Math.sqrt(.5),s:Math.sqrt(2)}[a]||1,"x"==Xa?(Ua+=b*Ta*.25+Ta*(1-a)/2,Ta*=a,Ta=Math.min(Math.max(Ta,.1),1),Ua=Math.min(Math.max(Ua,0),1-Ta)):(Za+=b*Ra*.25+Ra*(1-a)/2,Ra*=a,Ra=Math.min(Math.max(Ra,.1),1),Za=Math.min(Math.max(Za,0),1-Ra)),z()))}function e(b,
e){(y=void 0!=b)&&!/^scr/.exec(e)&&(b.empty().append($a,n,f.empty().append(a).unbind("click").click(c)),$a.unbind("change").change(c),z())}var a=$("<canvas />"),Na,f=$('<div style="text-align:center">'),$a=$("<select>"),n=$('<span style="font-size:0.8em;">'),y=!1,Qa,x,Ua=0,Ta=1,Za=0,Ra=1,Xa="x";$(function(){"undefined"!=typeof tools&&a[0].getContext&&tools.regTool("scatter",TOOLS_RECONS+">scatter",e);stats.regUtil("scatter",z);kernel.regListener("scatter","reqrec",w);for(var b=[["cf4op","cfop"],["roux",
"roux"]],c=0;c<b.length;c++)$a.append('<option value="'+b[c][0]+'">'+b[c][1]+"</option>")});return{update:z}});var trainStat=execMain(function(){function b(a,b){return stats.timeAt(a[b])}function Pa(){if(e){for(var a=stats.getTimesStatsTable().timesLen,c=f.val()||"PLL",w=cubeutil.getIdentData(c),x=0,Pa=[],Ta=a-1;Ta>=a-a;Ta--){var Za=stats.getExtraInfo("scramcase_"+c,Ta);Za&&(Za=Za[0],Pa[Za]=Pa[Za]||[],Pa[Za].push(Ta))}Na.empty().append($a);a=0;for(c=w[2];c<w[3];c++)if(Pa[c]){Ta=new TimeStat([],Pa[c].length,b.bind(null,Pa[c]));var Ra=Ta.getAllStats();Za=Pa[c].length-Ra[0];0==Za?Pa[c]=null:(Ra=Ra[1],Pa[c]=[Ta.bestTime,
Ra,Za,Pa[c].length],a=Math.max(a,Ra))}for(c=w[2];c<w[3];c++)if(Pa[c]){Ta=Pa[c];$("<tr>");Za=[w[1](c)[2],Ta[2]+"/"+Ta[3],Ta[0]/a*100,(Ta[1]-Ta[0])/a*100,kernel.pretty(Ta[0]),kernel.pround(Ta[1])];Ta='<tr><td rowspan=2 style="padding-bottom:0;padding-top:0;">$0</td><td rowspan=2 style="padding:0"><canvas/></td><td rowspan=2 style="padding-bottom:0;padding-top:0;">$1</td><td colspan=4 style="padding:0;"><span class="cntbar" style="height:0.25em;float:left;border:none;width:$2%;">&nbsp;</span><span class="cntbar sty2" style="height:0.25em;float:left;border:none;width:$3%;">&nbsp;</span></td></tr><tr><td style="padding-bottom:0;padding-top:0;">$4</td><td style="padding-bottom:0;padding-top:0;">$5</td></tr>';
for(Ra=0;6>Ra;Ra++)Ta=Ta.replace(new RegExp("\\$"+Ra,"g"),Za[Ra]);Ta=$(Ta);Za=Ta.find("canvas");Za.css({width:"2em",height:"2em",display:"block"});w[1](c,Za);Na.append(Ta);x++}f.unbind("change").change(z);0==x&&$a.after("<tr><td colspan=5>"+TOOLS_RECONS_NODATA+"</td></tr>")}}function z(a){"change"==a.type&&Pa()}function w(b,c){(e=void 0!=b)&&!/^scr/.exec(c)&&(b.empty().append(a.append(Na)),Pa())}function c(a,b,c){if(b=cubeutil.getScrambledState([null,b[1]]))return[cubeutil.getIdentData(a)[0](b.toFaceCube())]}
var e,a=$('<div style="font-size:0.9em;" />'),Na=$('<table class="table">'),f=$("<select>"),$a=$("<tr>").append($('<th colspan=2 style="padding:0;">').append(f),"<th>N</th><th>best</th><th>mean</th>");$(function(){"undefined"!=typeof tools&&tools.regTool("trainstat",TOOLS_TRAINSTAT,w);stats.regUtil("trainstat",Pa);for(var a=["PLL","OLL","CLL"],b=0;b<a.length;b++)f.append('<option value="'+a[b]+'">'+a[b]+"</option>"),stats.regExtraInfo("scramcase_"+a[b],c.bind(null,a[b]))})});var tools=execMain(function(){function b(a,c){if(-1==a)for(var e=0;e<kernel.getProp("NTools");e++)b(e,c);else if(!f){for(e in Za)Za[e]();n[a].empty()}else for(e in Za)if(e==y[a])Za[e](n[a],c)}function Pa(a,b){for(var c in Za)if(c==y[a])Za[c](void 0,b)}function z(a){if(/^222(so|[236o]|eg[012]?|tc[np]|lsall|nb)$/.exec(a))return"222";if(/^(333(oh?|ni|f[mt]|custom)?|(z[zb]|[coep]|c[om]|2g|ls|tt)?ll|lse(mu)?|2genl?|3gen_[LF]|edges|corners|f2l|lsll2|(zb|w?v|eo)ls|roux|RrU|half|easyx?c|eoline|sbrx|mt(3qb|eole|tdr|6cp|l5ep|cdrll)|nocache_333bldspec)$/.exec(a))return"333";
if(/^(444([mo]|wca|yj|bld)?|4edge|RrUu)$/.exec(a))return"444";if(/^(555(wca|bld)?|5edge)$/.exec(a))return"555";if(/^(666(si|[sp]|wca)?|6edge)$/.exec(a))return"666";if(/^(777(si|[sp]|wca)?|7edge)$/.exec(a))return"777";if(/^888$/.exec(a))return"888";if(/^999$/.exec(a))return"999";if(/^101010$/.exec(a))return"101010";if(/^111111$/.exec(a))return"111111";if(/^cubennn$/.exec(a))return"cubennn";if(/^pyr(s?[om]|l4e|nb|4c)$/.exec(a))return"pyr";if(/^skb(s?o|nb)?$/.exec(a))return"skb";if(/^sq(rs|1[ht]|rcsp)$/.exec(a))return"sq1";
if(/^clk(wca|o)$/.exec(a))return"clk";if(/^(mgmp|mgmo|minx2g|mlsll|mgmpll|mgmll)$/.exec(a))return"mgm";if(/^(klmso|klmp)$/.exec(a))return"klm";if(/^15p(at|ra?p?)?$/.exec(a))return"15p";if(/^15p(rmp|m)$/.exec(a))return"15b";if(/^8p(at|ra?p?)?$/.exec(a))return"8p";if(/^8p(rmp|m)$/.exec(a))return"8b";if(/^sq2$/.exec(a))return"sq2";if(/^fto$/.exec(a))return"fto"}function w(a,c){DEBUG&&console.log("[func select]",a,c);kernel.blur();for(var e=void 0===a?4:a+1,f=void 0===a?0:a;f<e;f++){var n=x[f].getSelected();
y[f]!=n&&(Pa(f,"property"),y[f]=n,kernel.setProp("toolsfunc",JSON.stringify(y)),b(f,"property"))}}function c(a,c){if("property"==a)if("imgSize"==c[0]||/^col/.exec(c[0]))for(var e=0;e<kernel.getProp("NTools");e++)"image"==y[e]&&b(e,a);else if("NTools"==c[0])for(e=0;4>e;e++)e<c[1]?($a[e].show(),""==n[e].html()&&b(e,a)):($a[e].hide(),Pa(e,a));else if("toolHide"==c[0]){e=!c[1];for(var z=0;4>z;z++)e?Qa[z].show():Qa[z].hide()}else if("toolsfunc"==c[0]&&"session"==c[2]){z=JSON.parse(c[1]);for(e=0;4>e;e++)x[e].loadVal(z[e]);
w()}else"toolPos"==c[0]&&($("html").removeClass("toolf toolt"),-1!="ft".indexOf(c[1])&&$("html").addClass("tool"+c[1]));else if("scramble"==a||"scrambleX"==a)Na=c,kernel.setProp("isTrainScr",!!Ra.exec((Na||[])[0])),b(-1,a);else if("button"==a&&"tools"==c[0])if(f=c[1])for(e=0;e<kernel.getProp("NTools");e++)f&&""==n[e].html()&&b(e,a);else b(-1,a)}function e(a){$(a.target).hasClass("click")||$(a.target).is("input, textarea, select")||kernel.setProp("toolHide",!1)}function a(a){a=$(this);if("a"==a.attr("data"))a.prevAll().show(),
a.prev().hide(),a.hide();else if("n"==a.attr("data")){var b=a.prevAll(":hidden");b.last().show();1==b.length&&(a.next().hide(),a.hide())}}for(var Na=["-","",0],f=!1,$a=[],n=[],y=["image","stats","cross"],Qa=[],x=[],Ua=[],Ta=0;4>Ta;Ta++)n[Ta]=$("<div />"),Qa[Ta]=$("<span />"),x[Ta]=new kernel.TwoLvMenu(Ua,w.bind(null,Ta),$("<select />"),$("<select />")),$a[Ta]=$("<div />").css("display","inline-block");$(function(){kernel.regListener("tools","property",c,/^(?:imgSize|image|toolsfunc|NTools|col(?:cube|pyr|skb|sq1|mgm)|toolHide|toolPos)$/);
kernel.regListener("tools","scramble",c);kernel.regListener("tools","scrambleX",c);kernel.regListener("tools","button",c,/^tools$/);for(var a=$('<div id="toolsDiv"/>'),b=0;4>b;b++)n[b].click(e),Qa[b].append("<br>",TOOLS_SELECTFUNC,x[b].select1,x[b].select2),$a[b].append(n[b],Qa[b]).appendTo(a),1==b&&a.append("<br>");kernel.regProp("tools","toolPos",1,PROPERTY_TOOLPOS,["b",["b","f","t"],PROPERTY_TOOLPOS_STR.split("|")]);kernel.regProp("tools","solSpl",0,PROPERTY_HIDEFULLSOL,[!1]);kernel.regProp("tools",
"imgSize",2,PROPERTY_IMGSIZE,[15,5,50]);kernel.regProp("tools","NTools",2,PROPERTY_NTOOLS,[1,1,4]);b=JSON.stringify(["image","stats","cross","distribution"]);kernel.regProp("tools","toolsfunc",5,PROPERTY_TOOLSFUNC,[b],1);kernel.regProp("tools","isTrainScr",-6,"Is Train Scramble",[!1],0);var f=kernel.getProp("toolsfunc",b);-1==f.indexOf("[")&&(f=b.replace("image",f),kernel.setProp("toolsfunc",f));y=JSON.parse(f);kernel.addWindow("tools",BUTTON_TOOLS,a,!1,!0,6);kernel.regProp("ui","toolHide",-1,"Hide Tools Selector",
[!1])});var Za={},Ra=/^((z[zb]|[coep]|c[om]|2g|ls|tt)?ll|lse(mu)?|2genl?|3gen_[LF]|f2l|lsll2|(zb|w?v|eo)ls|roux|eoline|sbrx|mt(3qb|eole|tdr|6cp|l5ep|cdrll)|222(eg[012]?|tc[np]|lsall))$/;return{regTool:function(a,b,c){DEBUG&&console.log("[regtool]",a,b);Za[a]=c;b=b.split(">");if(2==b.length){c=-1;for(var e=0;e<Ua.length;e++)if(Ua[e][0]==b[0]&&$.isArray(Ua[e][1])){c=e;break}-1!=c?Ua[c][1].push([b[1],a]):Ua.push([b[0],[[b[1],a]]])}else Ua.push([b[0],a]);for(e=0;4>e;e++)x[e].reset(y[e])},getCurScramble:function(){return Na},
getCurPuzzle:function(){return z(Na[0])},getSolutionSpan:function(b){for(var c=$("<span />"),e=0;e<b.length;e++)c.append('<span style="display:none;">&nbsp;'+b[e]+"</span>");kernel.getProp("solSpl")?(c.append($('<span class="click" data="n">[+1]</span>').click(a)),c.append($('<span class="click" data="a">['+b.length+"f]</span>").click(a))):c.children().show();return c},scrambleType:function(a){return null==a.match(/^([\d]?[xyzFRUBLDfrubldSME]([w]|&sup[\d];)?[2']?\s*)+$/)?"-":a.match(/^([xyzFRU][2']?\s*)+$/)?
"222o":a.match(/^([xyzFRUBLDSME][2']?\s*)+$/)?"333":a.match(/^(([xyzFRUBLDfru]|[FRU]w)[2']?\s*)+$/)?"444":a.match(/^(([xyzFRUBLDfrubld])[w]?[2']?\s*)+$/)?"555":"-"},puzzleType:z,isCurTrainScramble:function(a){return!!Ra.exec((a||Na||[])[0])},isPuzzle:function(a,b){b=b||Na;var c=z(b[0]);b=b[1];return c?c==a:"222"==a?b.match(/^([xyzFRU][2']?\s*)+$/):"333"==a?b.match(/^([xyzFRUBLDSME][2']?\s*)+$/):"444"==a?b.match(/^(([xyzFRUBLDfru]|[FRU]w)[2']?\s*)+$/):"555"==a?b.match(/^(([xyzFRUBLDfrubld])[w]?[2']?\s*)+$/):
"skb"==a?b.match(/^([RLUB]'?\s*)+$/):"pyr"==a?b.match(/^([RLUBrlub]'?\s*)+$/):"sq1"==a?b.match(/^$/):"fto"==a?b.match(/^(([FRUBLD]|(?:BL)|(?:BR))[']?\s*)+$/):!1}}});var image=execMain(function(){function b(a){var b=a[0];"input"==b&&(b=tools.scrambleType(a[1]));b=tools.puzzleType(b);var c;for(c=0;12>c;c++)if(b==Oa[c])return Ua.draw(c,a[1]),!0;return"cubennn"==b?(Ua.draw(a[2],a[1]),!0):"pyr"==b?(x(a[1]),!0):"skb"==b?(Qa(a[1]),!0):"sq1"==b||"sq2"==b?(y(a[1],"sq2"==b),!0):"clk"==b?(n(a[1]),!0):"mgm"==b||"klm"==b?($a(a[1],"klm"==b),!0):"fto"==b?(Xa(a[1]),!0):"15b"==b||"15p"==b?(Sa(b[2],4,a[1]),!0):"8b"==b||"8p"==b?(Sa(b[1],3,a[1]),!0):!1}function Pa(a){a&&(z=$("<canvas>"),
w=z[0].getContext("2d"),a.empty().append(z),b(tools.getCurScramble())||a.html(IMAGE_UNAVAILABLE))}var z,w,c=Math.sqrt(3)/2,e=Math.PI,a=$.ctxRotate,Na=$.ctxTransform,f=$.ctxDrawPolygon,$a=function(){function b(b,c,n,x,y){if(y)for(y=0;5>y;y++)f(w,Sa[b[c+y]],a([r,h],2*e/5*y+x),n);else{for(y=0;5>y;y++)f(w,Sa[b[c+y]],a([Na,Oa],2*e/5*y+x),n),f(w,Sa[b[c+y+5]],a([Va,Ra],2*e/5*y+x),n);f(w,Sa[b[c+10]],a([Qa,Pa],x),n)}}var c=(Math.sqrt(5)+1)/2,n=.25/Math.tan(e/5),x=2.6+3*Math.cos(.1*e)*c,y=2.2+1*Math.sin(.1*
e)*c,Na=[0,n,0,-n],Oa=[-1,-.75,-.5,-.75],r=[0,Math.sin(.4*e)/2,0,-Math.sin(.4*e)/2],h=[-1,-(1+Math.cos(.4*e))/2,-Math.cos(.4*e),-(1+Math.cos(.4*e))/2],Va=[Math.cos(.1*e)-n,n,0,.5*Math.sin(.4*e)],Ra=[-Math.sin(.1*e)+-.25,-.75,-.5,.5*-Math.cos(.4*e)],Qa=[.5*Math.sin(0*e),.5*Math.sin(.4*e),.5*Math.sin(.8*e),.5*Math.sin(1.2*e),.5*Math.sin(1.6*e)],Pa=[.5*-Math.cos(0*e),.5*-Math.cos(.4*e),.5*-Math.cos(.8*e),.5*-Math.cos(1.2*e),.5*-Math.cos(1.6*e)],Sa="#fff #d00 #060 #81f #fc0 #00b #ffb #8df #f83 #7e0 #f9f #999".split(" ");
return function(a,h){Sa=kernel.getProp("colmgm").match(fb);for(var f=[],r=0;12>r;r++)for(var n=0;11>n;n++)f[11*r+n]=r;a.replace(/(?:^|\s*)(?:([DLR])(\+\+?|--?)|(U|F|D?B?R|D?B?L|D|B)(\d?)('?)|\[([ufrl])('?)\])(?:$|\s*)/g,function(a,b,c,h,e,r,n,w){b?mathlib.minx.doMove(f,"DL?R".indexOf(b),("+"==c[0]?-1:1)*c.length,2):h?mathlib.minx.doMove(f,"U R F L BL BR DR DL DBL B DBR D".split(" ").indexOf(h),(r?-1:1)*(~~e||1),0):mathlib.minx.doMove(f,"urfl".indexOf(n),w?-1:1,1)});r=kernel.getProp("imgSize")/7.5;
z.width(7*r+"em");z.height(3.5*r+"em");z.attr("width",392);z.attr("height",196);b(f,0,[40,2.6+0*c,2.2+0*c],0*e,h);b(f,11,[40,2.6+Math.cos(.1*e)*c,2.2+Math.sin(.1*e)*c],.2*e,h);b(f,22,[40,2.6+Math.cos(.5*e)*c,2.2+Math.sin(.5*e)*c],.6*e,h);b(f,33,[40,2.6+Math.cos(.9*e)*c,2.2+Math.sin(.9*e)*c],1*e,h);b(f,44,[40,2.6+Math.cos(1.3*e)*c,2.2+Math.sin(1.3*e)*c],1.4*e,h);b(f,55,[40,2.6+Math.cos(1.7*e)*c,2.2+Math.sin(1.7*e)*c],1.8*e,h);b(f,66,[40,x+Math.cos(.7*e)*c,y+Math.sin(.7*e)*c],0*e,h);b(f,77,[40,x+Math.cos(.3*
e)*c,y+Math.sin(.3*e)*c],1.6*e,h);b(f,88,[40,x+Math.cos(1.9*e)*c,y+Math.sin(1.9*e)*c],1.2*e,h);b(f,99,[40,x+Math.cos(1.5*e)*c,y+Math.sin(1.5*e)*c],.8*e,h);b(f,110,[40,x+Math.cos(1.1*e)*c,y+Math.sin(1.1*e)*c],.4*e,h);b(f,121,[40,x+0*c,y+0*c],1*e,h);w&&(w.fillStyle="#000",w.font="20px serif",w.textAlign="center",w.textBaseline="middle",w.fillText("U",104,88),w.fillText("F",104,40*(2.2+Math.sin(.5*e)*c)))}}(),n=function(){var b=/([UD][RL]|ALL|[UDRLy])(\d[+-]?)?/,c="UR DR DL UL U R D L ALL".split(" "),
f=["#f00","#37b","#5cf","#ff0","#850"];return function(n){f=kernel.getProp("colclk").match(fb);var x=n.split(/\s+/),y=clock.moveArr,Oa=9;n=[0,0,0,0];for(var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=0;h<x.length;h++){var Va=b.exec(x[h]);if(Va)if("y2"==Va[0])Oa=0;else{var Ra=c.indexOf(Va[1])+Oa;if(void 0==Va[2])n[Ra%9]=1;else{var Qa=~~Va[2][0];Qa="+"==Va[2][1]?Qa:12-Qa;for(Va=0;14>Va;Va++)r[Va]=(r[Va]+y[Ra][Va]*Qa)%12}}}r=[r[0],r[3],r[6],r[1],r[4],r[7],r[2],r[5],r[8],12-r[2],r[10],12-r[8],r[9],r[11],r[13],
12-r[0],r[12],12-r[6]];n=[n[3],n[2],n[0],n[1],1-n[0],1-n[1],1-n[3],1-n[2]];h=kernel.getProp("imgSize")/7.5;z.width(6.25*h+"em");z.height(3*h+"em");z.attr("width",375);z.attr("height",180);x=[10,30,50];y=[10,30,50,75,95,115];for(h=0;18>h;h++)Oa=[f[1],f[2]][~~(h/9)],Ra=[3,y[~~(h/3)],x[h%3]],w&&(Va=Na(a([[1,1,0,-1,-1,-1,1,0],[0,-1,-8,-1,0,1,1,0]],r[h]/6*e),Ra),Qa=Va[0],Va=Va[1],w.beginPath(),w.fillStyle=Oa,w.arc(Qa[7],Va[7],9*Ra[0],0,2*e),w.fill(),w.beginPath(),w.fillStyle=f[3],w.strokeStyle=f[0],w.moveTo(Qa[0],
Va[0]),w.bezierCurveTo(Qa[1],Va[1],Qa[1],Va[1],Qa[2],Va[2]),w.bezierCurveTo(Qa[3],Va[3],Qa[3],Va[3],Qa[4],Va[4]),w.bezierCurveTo(Qa[5],Va[5],Qa[6],Va[6],Qa[0],Va[0]),w.closePath(),w.fill(),w.stroke());x=[20,40];y=[20,40,85,105];for(h=0;8>h;h++)r=[f[4],f[3]][n[h]],Oa=[3,y[~~(h/2)],x[h%2]],w&&(Ra=Na([[0],[0]],Oa),w.beginPath(),w.fillStyle=r,w.strokeStyle="#000",w.arc(Ra[0][0],Ra[1][0],3*Oa[0],0,2*e),w.fill(),w.stroke())}}(),y=function(){function b(a){for(var b=[],c=0;12>c;c++)b[(c+a[0])%12]=n[c];for(c=
0;12>c;c++)b[c+12]=n[(c+a[1])%12+12];if(a[2])for(x=1-x,c=0;6>c;c++)mathlib.circle(b,c+6,23-c);n=b}var n=[],x=0,y=[[0,-.5,.5],[0,-c-1,-c-1]],Oa=[[0,-.5,-c-1,-c-1],[0,-c-1,-c-1,-.5]],Ra=[[0,-.5,-c-1],[0,-c-1,-c-1]],Qa=[[0,-c-1,-c-1],[0,-c-1,-.5]],r=Na(y,[.66,0,0]),h=Na(Oa,[.66,0,0]),Va=Na(Ra,[.66,0,0]),Pa=Na(Qa,[.66,0,0]),Sa={U:"#ff0",R:"#f80",F:"#0f0",D:"#fff",L:"#f00",B:"#00f"},Ta=/^\s*\(\s*(-?\d+),\s*(-?\d+)\s*\)\s*$/;return function(Na,Oa){var Ya=kernel.getProp("colsq1").match(fb);Sa={U:Ya[0],R:Ya[1],
F:Ya[2],D:Ya[3],L:Ya[4],B:Ya[5]};n=[0,1,2,4,5,6,8,9,10,12,13,14,17,16,18,21,20,22,25,24,26,29,28,30];x=0;var Ua=Na.split("/");for(Ya=0;Ya<Ua.length;Ya++)if(/^\s*$/.exec(Ua[Ya]))b([0,0,1]);else{var Wa=Ta.exec(Ua[Ya]);b([~~Wa[1]+12,~~Wa[2]+12,1])}b([0,0,1]);Ya=kernel.getProp("imgSize")/10;z.width(11*Ya/1.3+"em");z.height(6.3*Ya/1.3+"em");z.attr("width",495);z.attr("height",283.5);for(Ya=0;24>Ya;Ya++){Ua=n[Ya]&1;Wa=(12>Ya?Ya-3:-Ya)*e/6;var bb=(12>Ya?Ya-5:-1-Ya)*e/6,ab=12>Ya?[45,2.7,2.7]:[45,2.7+5.4,
2.7],eb=(Ya+1)%12+(12>Ya?0:12),Xa=n[Ya]>>1,hb=Sa["UD"[8<=Xa?1:0]];0==Xa%2?Oa?(!Ua&&12<=Ya?Wa+=e/6:Ua&&12>Ya&&(Wa-=e/6),f(w,Sa["LBBRRFFLBLRBFRLF"[Xa+Ua]],a(Ua?Ra:Qa,Wa),ab),f(w,hb,a(Ua?Va:Pa,Wa),ab)):Xa==n[eb]>>1&&(f(w,Sa["LBBRRFFLBLRBFRLF"[Xa]],a(Qa,Wa),ab),f(w,Sa["LBBRRFFLBLRBFRLF"[Xa+1]],a(Ra,Wa),ab),f(w,hb,a(h,Wa),ab)):(f(w,Sa["-B-R-F-L-B-R-F-L"[Xa]],a(y,bb),ab),f(w,hb,a(r,bb),ab))}ab=[45,5.4,5.7];f(w,Sa.L,[[-c-1,-c-1,-.5,-.5],[.5,-.5,-.5,.5]],ab);0==x?f(w,Sa.L,[[c+1,c+1,-.5,-.5],[.5,-.5,-.5,.5]],
ab):f(w,Sa.R,[[c,c,-.5,-.5],[.5,-.5,-.5,.5]],ab)}}(),Qa=function(){var a=[],b="#fff #00f #f00 #ff0 #0f0 #f80".split(" "),e=[[45*c,45*c,186.75*c,-22.5,22.5,45],[45*c,0,328.5*c,-22.5,45,67.5],[45*c,0,234*c,-22.5,45,114.75],[0,-45*c,139.5*c,45,-22.5,209.25],[45*c,0,139.5*c,22.5,45,114.75],[45*c,0,45*c,22.5,45,67.5]];return function(n){b=kernel.getProp("colskb").match(fb);for(var x=0,y=0;6>y;y++)for(var Na=0;5>Na;Na++)a[x++]=y;n=kernel.parseScramble(n,"RULB");for(y=0;y<n.length;y++){x=n[y][0];Na=1==n[y][2]?
1:2;for(var r=0;r<Na;r++)switch(x){case 0:mathlib.circle(a,10,5,15);mathlib.circle(a,14,8,17);mathlib.circle(a,12,9,16);mathlib.circle(a,13,6,19);mathlib.circle(a,24,4,28);break;case 1:mathlib.circle(a,0,25,5);mathlib.circle(a,2,26,7);mathlib.circle(a,4,27,9);mathlib.circle(a,1,28,6);mathlib.circle(a,21,19,12);break;case 2:mathlib.circle(a,20,15,25);mathlib.circle(a,23,18,29);mathlib.circle(a,21,16,28);mathlib.circle(a,24,19,27);mathlib.circle(a,13,9,1);break;case 3:mathlib.circle(a,5,25,15),mathlib.circle(a,
9,28,19),mathlib.circle(a,8,26,18),mathlib.circle(a,7,29,17),mathlib.circle(a,2,23,14)}}y=kernel.getProp("imgSize")/10;z.width((8*c+.3)*y+"em");z.height(6.2*y+"em");z.attr("width",45*(8*c+.3)+1);z.attr("height",280);for(y=0;6>y;y++)n=y,x=e[n],f(w,b[a[5*n]],[[-1,0,1,0],[0,1,0,-1]],x),f(w,b[a[5*n+1]],[[-1,-1,0],[0,-1,-1]],x),f(w,b[a[5*n+2]],[[0,1,1],[-1,-1,0]],x),f(w,b[a[5*n+3]],[[-1,-1,0],[0,1,1]],x),f(w,b[a[5*n+4]],[[0,1,1],[1,1,0]],x)}}(),x=function(){var a=[],b=["#0f0","#f00","#00f","#ff0"],e=[3.5,
1.5,5.5,3.5],n=[0,3*c,3*c,6.5*c],x=[0,6,5,4],y=[1,7,3,5],Na=[2,8,4,3],r=[[0,1,2],[2,3,0],[1,0,3],[3,2,1]],h=[-.5,.5,0],Oa=[c,c,0],Ra=[-c,-c,0];return function(Va){b=kernel.getProp("colpyr").match(fb);for(var Qa=0,Sa=0;4>Sa;Sa++)for(var Pa=0;9>Pa;Pa++)a[Qa++]=Sa;Va=kernel.parseScramble(Va,"URLB");for(Sa=0;Sa<Va.length;Sa++){var Ya=Va[Sa][0]+(2==Va[Sa][1]?4:0);Qa=1==Va[Sa][2]?1:2;Pa=4<=Ya?1:4;Ya=r[Ya%4];for(var Ta=0;Ta<Pa;Ta++)for(var Ua=0;Ua<Qa;Ua++)mathlib.circle(a,9*Ya[0]+x[Ta],9*Ya[1]+y[Ta],9*Ya[2]+
Na[Ta])}Sa=kernel.getProp("imgSize")/10;z.width(7*Sa+"em");z.height(6.5*c*Sa+"em");z.attr("width",315);z.attr("height",292.5*c);for(Sa=0;4>Sa;Sa++){Va=Sa;Qa=0!=Va;Pa=[0,-1,1,0,.5,-.5,0,-.5,.5];Ya=[0,2,2,2,1,1,2,3,3];for(Ta=0;Ta<Ya.length;Ta++)Ya[Ta]*=Qa?-c:c,Pa[Ta]*=Qa?-1:1;for(Ta=0;9>Ta;Ta++)f(w,b[a[9*Va+Ta]],[h,6<=Ta!=Qa?Ra:Oa],[45,e[Va]+Pa[Ta],n[Va]+Ya[Ta]])}}}(),Ua=function(){function a(a,b,e,f){var h=f*f,r,n,w;5<a&&(a-=6);for(w=0;w<e;w++){for(r=0;r<f;r++){if(0==a){var x=6*h-f*b-f+r;var y=2*h-
f*b-1-r;var z=3*h-f*b-1-r;var Na=5*h-f*b-f+r}else 1==a?(x=3*h+b+f*r,y=3*h+b-f*(r+1),z=h+b-f*(r+1),Na=5*h+b+f*r):2==a?(x=3*h+b*f+r,y=4*h+f-1-b+f*r,z=b*f+f-1-r,Na=2*h-1-b-f*r):3==a?(x=4*h+b*f+f-1-r,y=2*h+b*f+r,z=h+b*f+r,Na=5*h+b*f+f-1-r):4==a?(x=6*h-1-b-f*r,y=f-1-b+f*r,z=2*h+f-1-b+f*r,Na=4*h-1-b-f*r):5==a&&(x=4*h-f-b*f+r,y=2*h-f+b-f*r,z=h-1-b*f-r,Na=4*h+b+f*r);var Oa=c[x];c[x]=c[y];c[y]=c[z];c[z]=c[Na];c[Na]=Oa}if(0==b)for(r=0;r+r<f;r++)for(n=0;n+n<f-1;n++)x=a*h+r+n*f,z=a*h+(f-1-r)+(f-1-n)*f,3>a?(y=
a*h+(f-1-n)+r*f,Na=a*h+n+(f-1-r)*f):(Na=a*h+(f-1-n)+r*f,y=a*h+n+(f-1-r)*f),Oa=c[x],c[x]=c[y],c[y]=c[z],c[z]=c[Na],c[Na]=Oa}}function b(b,e){var f=0;c=[];for(var r=0;6>r;r++)for(var h=0;h<b*b;h++)c[f++]=r;f=kernel.parseScramble(e,"DLBURF",!0);for(r=0;r<f.length;r++){for(h=0;h<f[r][1];h++)a(f[r][0],h,f[r][2],b);if(-1==f[r][1]){for(h=0;h<b-1;h++)a(f[r][0],h,-f[r][2],b);a((f[r][0]+3)%6,0,f[r][2]+4,b)}}return c}var c=[],e="#ff0 #fa0 #00f #fff #f00 #0d0".split(" ");return{draw:function(a,n){b(a,n);var x=
kernel.getProp("imgSize")/50;z.width(39*x+"em");z.height(29*x+"em");z.attr("width",30*(39*a/9+.2));z.attr("height",30*(29*a/9+.2));e=kernel.getProp("colcube").match(fb);for(x=0;6>x;x++){var r=x,h=a,y=10/9,Na=10/9;0==r?(y*=h,Na*=2*h):1==r?(y*=0,Na*=h):2==r?(y*=3*h,Na*=h):3==r?(y*=h,Na*=0):4==r?(y*=2*h,Na*=h):5==r&&(y*=h,Na*=h);for(var Oa=0;Oa<h;Oa++)for(var Ra=1==r||2==r?h-1-Oa:Oa,Qa=0;Qa<h;Qa++)f(w,e[c[(r*h+(0==r?h-1-Qa:Qa))*h+Ra]],[[Oa,Oa,Oa+1,Oa+1],[Qa,Qa+1,Qa+1,Qa]],[30,y+.1,Na+.1])}},genPosit:b}}(),
Ta=function(){function b(b,c,n){var w=$(n),x=kernel.getProp("colcube").match(fb);n=w[0].getContext("2d");var y=3;12==b.length&&(y=2);w.attr("width",50*(y+1.2));w.attr("height",50*(y+1.2));for(w=0;w<y*y;w++){var r=w%y+.5,h=~~(w/y)+.5;f(n,x["DLBURF".indexOf(b[w])]||"#888",[[r,r+1,r+1,r],[h,h,h+1,h+1]],[50,.1,.1])}for(w=0;w<4*y;w++)r=w%y,h=~~(w/y),f(n,x["DLBURF".indexOf(b[w+y*y])]||"#888",a([[r-y/2,r-y/2+1,.9*(r-y/2+1),.9*(r-y/2)],[y/2+.05,y/2+.05,y/2+.5,y/2+.5]],-h*e/2),[50,.6+y/2,.6+y/2]);c=c||[];
for(w=0;w<c.length;w++){h=c[w];b=h[0]%y+1.1;x=~~(h[0]/y)+1.1;r=h[1]%y+1.1;h=~~(h[1]/y)+1.1;var Na=Math.sqrt((b-r)*(b-r)+(x-h)*(x-h));f(n,"#000",a([[.2,Na-.4,Na-.4,Na-.1,Na-.4,Na-.4,.2],[.05,.05,.15,0,-.15,-.05,-.05]],Math.atan2(h-x,r-b)),[50,b,x])}}return{drawImage:b,draw:function(a,c,e){c=Ua.genPosit(a,c);for(var f=[],n=0;n<a*a;n++)f.push("DLBURF"[c[3*a*a+n]]);for(var w=0;4>w;w++){var r=[5,4,2,1][w]*a*a;for(n=0;n<a;n++)f.push("DLBURF"[c[r+[n,n,a-1-n,a-1-n][w]]])}b(f.join(""),[],e)}}}(),Za=function(){var a=
[[20*c,-20*c,61*c,10,10,0],[20*c,0,62*c,-10,20,61.5],[20*c,0,0,10,20,31.5]];return function(b,e){var n=$(e),w=kernel.getProp("colcube").match(fb),x=n[0].getContext("2d");n.attr("width",122*c+1);n.attr("height",122.5);for(n=0;27>n;n++){var y=n%3,r=~~(n/3)%3;f(x,w["DLBURF".indexOf(b[n])]||"#888",[[y,y+1,y+1,y],[r,r,r+1,r+1]],a[~~(n/9)])}}}(),Ra=function(){return function(b,n){var w=$(n);w.attr("width",120*c+1);w.attr("height",120*c+1);var x=kernel.getProp("colpyr").match(fb);w=w[0].getContext("2d");
for(var y=0,Na=0;3>Na;Na++)for(var z=0;3>z;z++)for(var r=0;r<2*Na+1;r++){var h=-c*Na+c*r;var Oa=Na/2;h=0==r%2?[[h,h-c,h+c],[Oa,Oa+.5,Oa+.5]]:[[h-c,h,h+c],[Oa,Oa+.5,Oa]];f(w,x["FLRD".indexOf(b[y])]||"#888",a(h,e/3*4*z),[20,3*c,3+(6*c-4.5)/2]);y++}}}(),Xa=function(){function a(a){if("U"==a){for(var b=[9,10,14,15,17],e=[36,37,38,39,40],f=[27,29,28,32,31],h=0;5>h;h++)mathlib.circle(c,b[h],e[h],f[h]);mathlib.circle(c,18,67,45);mathlib.circle(c,0,4,8);mathlib.circle(c,1,3,6);mathlib.circle(c,2,7,5)}if("L"==
a){b=[0,1,5,6,8];e=[18,20,19,23,22];f=[71,70,69,68,67];for(h=0;5>h;h++)mathlib.circle(c,b[h],e[h],f[h]);mathlib.circle(c,27,62,40);mathlib.circle(c,9,17,13);mathlib.circle(c,10,15,12);mathlib.circle(c,14,16,11)}if("R"==a){b=[8,6,7,3,4];var n=[45,46,47,48,49];e=[26,25,21,20,18];for(h=0;5>h;h++)mathlib.circle(c,b[h],n[h],e[h]);mathlib.circle(c,17,36,58);mathlib.circle(c,27,31,35);mathlib.circle(c,29,32,34);mathlib.circle(c,28,33,30)}if("F"==a){f=[27,29,30,34,35];n=[58,59,60,61,62];b=[13,12,16,15,17];
for(h=0;5>h;h++)mathlib.circle(c,f[h],n[h],b[h]);mathlib.circle(c,8,49,71);mathlib.circle(c,18,26,22);mathlib.circle(c,20,25,23);mathlib.circle(c,19,21,24)}if("B"==a){b=[4,3,2,1,0];f=[67,68,64,65,63];n=[53,51,50,46,45];for(h=0;5>h;h++)mathlib.circle(c,b[h],f[h],n[h]);mathlib.circle(c,54,31,9);mathlib.circle(c,36,40,44);mathlib.circle(c,37,39,42);mathlib.circle(c,38,43,41)}if("BR"==a){e=[36,37,41,42,44];n=[54,56,55,59,58];f=[35,34,33,32,31];for(h=0;5>h;h++)mathlib.circle(c,e[h],n[h],f[h]);mathlib.circle(c,
63,26,4);mathlib.circle(c,45,53,49);mathlib.circle(c,46,51,48);mathlib.circle(c,50,52,47)}if("BL"==a){e=[44,42,43,39,40];b=[9,10,11,12,13];n=[62,61,57,56,54];for(h=0;5>h;h++)mathlib.circle(c,e[h],b[h],n[h]);mathlib.circle(c,53,0,22);mathlib.circle(c,63,67,71);mathlib.circle(c,65,68,70);mathlib.circle(c,64,69,66)}if("D"==a){n=[49,48,52,51,53];f=[63,65,66,70,71];e=[22,23,24,25,26];for(h=0;5>h;h++)mathlib.circle(c,n[h],f[h],e[h]);mathlib.circle(c,44,13,35);mathlib.circle(c,54,62,58);mathlib.circle(c,
56,61,59);mathlib.circle(c,55,57,60)}}function b(a,b,c,e,h){w.beginPath();w.moveTo(a*h,b*h);w.lineTo(c*h,e*h);w.lineWidth=3;w.stroke();w.lineWidth=1}var c=[],e="#fff #808 #f00 #0d0 #00f #bbb #ff0 #fa0".split(" ");return function(n){e=kernel.getProp("colfto").match(fb);for(var x=0,y=0;8>y;y++)for(var r=0;9>r;r++)c[x++]=y;n=n.split(" ");for(y=0;y<n.length;y++)x=n[y],x.endsWith("'")&&(x=x.replace("'",""),a(x)),a(x);y=kernel.getProp("imgSize")/50;z.width(39*y+"em");z.height(18*y+"em");z.attr("width",
651);z.attr("height",301);y={0:[[0,2,1],[0,0,1]],1:[[2,3,1],[0,1,1]],2:[[2,4,3],[0,0,1]],3:[[4,5,3],[0,1,1]],4:[[4,6,5],[0,0,1]],5:[[1,3,2],[1,1,2]],6:[[3,4,2],[1,2,2]],7:[[3,5,4],[1,1,2]],8:[[2,4,3],[2,2,3]],9:[[0,1,0],[0,1,2]],10:[[0,1,1],[2,1,3]],11:[[0,1,0],[2,3,4]],12:[[0,1,1],[4,3,5]],13:[[0,1,0],[4,5,6]],14:[[1,2,1],[1,2,3]],15:[[1,2,2],[3,2,4]],16:[[1,2,1],[3,4,5]],17:[[2,3,2],[2,3,4]],18:[[2,3,4],[4,3,4]],19:[[1,2,3],[5,4,5]],20:[[2,4,3],[4,4,5]],21:[[3,4,5],[5,4,5]],22:[[0,1,2],[6,5,6]],
23:[[1,3,2],[5,5,6]],24:[[2,3,4],[6,5,6]],25:[[3,5,4],[5,5,6]],26:[[4,5,6],[6,5,6]],27:[[3,4,4],[3,2,4]],28:[[4,5,5],[2,1,3]],29:[[4,5,4],[2,3,4]],30:[[4,5,5],[4,3,5]],31:[[5,6,6],[1,0,2]],32:[[5,6,5],[1,2,3]],33:[[5,6,6],[3,2,4]],34:[[5,6,5],[3,4,5]],35:[[5,6,6],[5,4,6]]};for(n=0;72>n;n++){x=y[n%36];r=x[0];var h=36<=n?7:0;f(w,e[c[n]],[[r[0]+h,r[1]+h,r[2]+h],x[1]],[50,0,0])}b(0,0,6,6,50);b(6,0,0,6,50);b(7,0,13,6,50);b(13,0,7,6,50);w.fillStyle=kernel.getProp("col-font");w.strokeStyle=kernel.getProp("col-font");
w.font="25px monospace";w.textAlign="center";w.textBaseline="middle";w.fillText("U",150,80);w.fillText("R",50*4.4,150);w.fillText("F",150,50*4.4);w.fillText("L",80,150);w.fillText("B",500,80);w.fillText("BL",570,150);w.fillText("D",500,50*4.4);w.fillText("BR",430,150)}}(),Sa=function(){return function(a,b,c){for(var e=[],n=[[1,0],[0,1],[0,-1],[-1,0]],x=0;x<b*b;x++)e[x]=x;x=b-1;var y=b-1,r=/([ULRD\uFFEA\uFFE9\uFFEB\uFFEC])([\d]?)/;c=c.split(" ");for(var h=0;h<c.length;h++){var Na=r.exec(c[h]);if(Na){var Oa=
"ULRD￪￩￫￬".indexOf(Na[1])%4;Na=~~Na[2]||1;Oa=n["b"==a?3-Oa:Oa];for(var Qa=0;Qa<Na;Qa++)mathlib.circle(e,x*b+y,(x+Oa[0])*b+y+Oa[1]),x+=Oa[0],y+=Oa[1]}}a=kernel.getProp("imgSize")/50;z.width(30*a+"em");z.height(30*a+"em");z.attr("width",50*(b+.2));z.attr("height",50*(b+.2));a=kernel.getProp("col15p").match(fb);a[b-1]=a[a.length-1];for(x=0;x<b;x++)for(c=0;c<b;c++)n=e[c*b+x],y=Math.min(~~(n/b),n%b),n++,f(w,a[y],[[x+.05,x+.05,x+1-.05,x+1-.05],[c+.05,c+1-.05,c+1-.05,c+.05]],[50,.1,.1]),n!=b*b&&(w.fillStyle=
"#000",w.font="30px monospace",w.textAlign="center",w.textBaseline="middle",w.fillText(n,50*(x+.5+.1),50*(c+.5+.1)))}}(),Oa="  222 333 444 555 666 777 888 999 101010 111111".split(" "),fb=/#[0-9a-fA-F]{3}/g;$(function(){z=$("<canvas>");z[0].getContext&&tools.regTool("image",TOOLS_IMAGE,Pa)});return{draw:b,llImage:Ta,pyrllImage:Ra,face3Image:Za}});var cross=function(b,Pa,z,w,c,e,a){function Na(a,b){var c=Wa[b][~~(a/24)];return 24*~~(c/384)+eb[a%24][(c>>4)%24]}function f(a,b){var c=Wa[b][a>>4];return~~(c/384)<<4|Ya[a&15][(c>>4)%24]^c&15}function $a(a,b){for(var c=3;0<=c;c--)b[c]=a&1,a>>=1}function n(a){for(var b=0,c=0;4>c;c++)b<<=1,b|=a[c];return b}function y(a,b){var c=Wa[b][~~(a/384)];return 384*~~(c/384)+16*eb[(a>>4)%24][(c>>4)%24]+(Ya[a&15][(c>>4)%24]^c&15)}function Qa(){Qa=$.noop;for(var a=0;24>a;a++)eb[a]=[];for(a=0;16>a;a++)Ya[a]=[];
var h=[],r=[],x=[];for(a=0;24>a;a++)for(var y=0;24>y;y++){w(h,a,4);w(r,y,4);for(var Oa=0;4>Oa;Oa++)x[Oa]=h[r[Oa]];eb[a][y]=c(x,4);if(16>a){$a(a,h);for(Oa=0;4>Oa;Oa++)x[Oa]=h[r[Oa]];Ya[a][y]=n(x)}}b(Wa,495,function(a,b){for(var h=[0,0,0,0,0,0,0,0,0,0,0,0],f=4,r=0;12>r;r++)a>=e[11-r][f]?(a-=e[11-r][f--],h[r]=f<<1):h[r]=-1;Pa(h,b);a=0;f=4;var n=0,w=[];for(r=0;12>r;r++)0<=h[r]&&(a+=e[11-r][f--],w[f]=h[r]>>1,n|=(h[r]&1)<<3-f);return 24*a+c(w,4)<<4|n});lb=[];gb=[];z(lb,0,11880,5,Na);z(gb,0,7920,6,f)}function x(){x=
$.noop;Ua();var a=5;z(Va,296+576*(72*a+2*a),331776,7,function(a,b){var c=a%576,e=~~(a/576);return 24*h[~~(c/24)][b]+r[c%24][b]+576*(24*h[~~(e/24)][b]+r[e%24][b])});a=6;z(bb,296+576*(72*a+2*a),331776,7,function(a,b){var c=a%576,e=~~(a/576);return 24*h[~~(c/24)][b]+r[c%24][b]+576*(24*h[~~(e/24)][b]+r[e%24][b])})}function Ua(){function a(a,b){var c=~~(a/3);return 3*[[3,1,2,7,0,5,6,4],[0,1,6,2,4,5,7,3],[1,2,3,0,4,5,6,7],[0,5,1,3,4,6,2,7],[4,0,2,3,5,1,6,7],[0,1,2,3,7,4,5,6]][b][c]+(a%3+[[2,0,0,1,1,0,0,
2],[0,0,1,2,0,0,2,1],[0,0,0,0,0,0,0,0],[0,1,2,0,0,2,1,0],[1,2,0,0,2,1,0,0],[0,0,0,0,0,0,0,0]][b][c])%3}Ua=$.noop;Qa();for(var b=0;24>b;b++){h[b]=[];r[b]=[];for(var c=0;6>c;c++){h[b][c]=a(b,c);var e=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];e[b>>1]=b&1;Pa(e,c);for(var f=0;12>f;f++)if(0<=e[f]){r[b][c]=f<<1|e[f];break}}}mb=[];for(b=0;4>b;b++)c=[],z(c,72*(b+4)+2*(b+4),576,5,function(a,b){return 24*h[~~(a/24)][b]+r[a%24][b]}),mb[b]=c}function Ta(b,c,e,n,w,x,y,z){if(0==x)return 0==b&&0==c&&8==e[0]&&12==n[0]&&
(10==e[1]&&15==n[1]||12==e[1]&&18==n[1]);if(a(lb,b)>x||a(gb,c)>x||a(w,24*n[0]+e[0]+576*(24*n[1]+e[1]))>x)return!1;var Oa,Qa;for(Qa=0;6>Qa;Qa++)if(Qa!=y&&Qa!=y-3){var Ra=b;var Sa=c;var Pa=e;var Va=n;for(Oa=0;3>Oa;Oa++)if(Ra=Na(Ra,Qa),Sa=f(Sa,Qa),Pa=[r[Pa[0]][Qa],r[Pa[1]][Qa]],Va=[h[Va[0]][Qa],h[Va[1]][Qa]],Ta(Ra,Sa,Pa,Va,w,x-1,Qa,z))return z.push("FRUBLD".charAt(Qa)+" 2'".charAt(Oa)),!0}return!1}function Za(b,c,e,n,w,x,y,z){if(0==x)return 0==b&&0==c&&e==2*(w+4)&&n==3*(w+4);if(a(lb,b)>x||a(gb,c)>x||
a(mb[w],24*n+e)>x)return!1;var Oa,Qa;for(Qa=0;6>Qa;Qa++)if(Qa!=y&&Qa!=y-3){var Ra=b;var Sa=c;var Pa=e;var Va=n;for(Oa=0;3>Oa;Oa++)if(Ra=Na(Ra,Qa),Sa=f(Sa,Qa),Pa=r[Pa][Qa],Va=h[Va][Qa],Za(Ra,Sa,Pa,Va,w,x-1,Qa,z))return z.push("FRUBLD".charAt(Qa)+" 2'".charAt(Oa)),!0}return!1}function Ra(b,c,h,e,r){if(0==h)return 0==b&&0==c;if(a(lb,b)>h||a(gb,c)>h)return!1;var n,w;for(w=0;6>w;w++)if(w!=e&&w!=e-3){var x=b;var y=c;for(n=0;3>n;n++)if(x=Na(x,w),y=f(y,w),Ra(x,y,h-1,w,r))return r.push("FRUBLD".charAt(w)+
" 2'".charAt(n)),!0}return!1}function Xa(a){Qa();for(var b=[],c=0;6>c;c++){for(var h=0,e=0,r=0;r<a.length;r++)for(var n=nb[c].indexOf("FRUBLD".charAt(a[r][0])),w=a[r][2],x=0;x<w;x++)h=f(h,n),e=Na(e,n);r=[];for(n=0;100>n&&!Ra(e,h,n,-1,r);n++);r.reverse();b.push(r)}return b}function Sa(a,b){Ua();for(var c=0,e=0,n=[8,10,12,14],w=[12,15,18,21],x=0;x<a.length;x++)for(var y=nb[b].indexOf("FRUBLD".charAt(a[x][0])),Oa=a[x][2],z=0;z<Oa;z++){c=f(c,y);e=Na(e,y);for(var Qa=0;4>Qa;Qa++)n[Qa]=r[n[Qa]][y],w[Qa]=
h[w[Qa]][y]}x=[];y=!1;for(Oa=0;!y;){for(Qa=0;4>Qa;Qa++)if(Za(e,c,n[Qa],w[Qa],Qa,Oa,-1,x)){y=!0;break}Oa++}x.reverse();return x}function Oa(){Oa=$.noop;Qa();ib=[];z(ib,0,190080,7,y,6,3,6)}function fb(a){var b=~~(a/384),c=(a>>4)%24,h=[],f=[],r=[],n=[];$a(a&15,n);w(r,c,4);a=4;c=[7,6,5,4,10,9,8,11,3,2,1,0];for(var x=0;12>x;x++)b>=e[11-x][a]?(b-=e[11-x][a--],h[c[x]]=r[a],f[c[x]]=n[a]):h[c[x]]=f[c[x]]=-1;return[h,f]}var lb,gb,mb,ib,Wa=[],eb=[],Ya=[],r=[],h=[],Va=[],bb=[],ab="DULRFB".split(""),nb="FRUBLD FLDBRU FDRBUL FULBDR URBDLF DRFULB".split(" "),
hb="&nbsp;&nbsp; z2 z' z&nbsp; x' x&nbsp;".split(" "),ob=["FRUBLD","RBULFD","BLUFRD","LFURBD"],db;execMain(function(){function a(){var b=$(this).parent(),c="DULRFB".indexOf(b.html()[0]);Sa(db,c);var e=$(this).html();if("ec"==e){var n=Sa(db,c);e="xx"}else if("xx"==e){var w=db;x();n=[];for(e=0;4>e;e++){for(var y=0,Oa=0,z=[8,10,12],Qa=[12,15,18],Ra=0;Ra<w.length;Ra++)for(var Pa=ob[e].indexOf("FRUBLD".charAt(nb[c].indexOf("FRUBLD".charAt(w[Ra][0])))),Ua=w[Ra][2],Ya=0;Ya<Ua;Ya++)y=f(y,Pa),Oa=Na(Oa,Pa),
z=[r[z[0]][Pa],r[z[1]][Pa],r[z[2]][Pa]],Qa=[h[Qa[0]][Pa],h[Qa[1]][Pa],h[Qa[2]][Pa]];n.push([Oa,y,z,Qa])}w=[];Ra=!1;for(y=0;!Ra;){for(e=0;4>e;e++){Oa=n[e];if(Ta(Oa[0],Oa[1],[Oa[2][0],Oa[2][1]],[Oa[3][0],Oa[3][1]],Va,y,-1,w)){Ra=!0;break}if(Ta(Oa[0],Oa[1],[Oa[2][0],Oa[2][2]],[Oa[3][0],Oa[3][2]],bb,y,-1,w)){Ra=!0;break}}y++}w.reverse();for(Ra=0;Ra<w.length;Ra++)w[Ra]=ob[e]["FRUBLD".indexOf(w[Ra][0])]+w[Ra][1];n=w;e="<<"}else n=Xa(db)[c],e="ec";e=$("<span />").html(e).addClass("click").click(a);b.empty().append(ab[c]+
"(",e,"): "+hb[c],tools.getSolutionSpan(n),"<br>")}function b(b){if(b)if(tools.isPuzzle("333")){var c=tools.getCurScramble()[1];b.empty();db=kernel.parseScramble(c,"FRUBLD");c=Xa(db);for(var h=0;6>h;h++){var e=$('<span class="sol"/>'),f=$("<span />").html("ec").addClass("click").click(a);e.append(ab[h]+"(",f,"): "+hb[h],tools.getSolutionSpan(c[h]),"<br>");b.append(e)}}else b.html(IMAGE_UNAVAILABLE)}$(function(){tools.regTool("cross",TOOLS_SOLVERS+">"+TOOLS_CROSS,b)})});return{solve:Xa,getEasyCross:function(b){Oa();
var c=Math.min(b%10,8),h=Math.min(~~(b/10),8);b=Math.min(c,h);c=Math.max(c,h);h=[0,1,16,174,1568,11377,57758,155012,189978,190080];h=mathlib.rn(h[c+1]-h[b])+1;var e;for(e=0;190080>e;e++){var f=a(ib,e);if(f<=c&&f>=b&&0==--h)break}return fb(e)},getEasyXCross:function(b){Oa();Ua();b=Math.max(0,Math.min(b,8));for(var c=[1,16,174,1568,11377,57758,155012,189978,190080][b],h=!1;!h;){for(var f=[],r=0;500>r;r++)f.push(mathlib.rn(c));f.sort(function(a,b){return b-a});var n=[],w=0;for(r=0;190080>r;r++)if(!(a(ib,
r)>b)){for(;f[f.length-1]==w;)n.push(r),f.pop();if(0==f.length)break;w++}f=mathlib.rndPerm(500);for(r=0;500>r;r++){var x=n[f[r]],y=~~(x/384),Na=24*y+(x>>4)%24,z=y<<4|x&15,Qa=[];Ra(Na,z,b,-1,Qa);w=mathlib.rndPerm(8).slice(4);var Sa=mathlib.rndPerm(8),Pa=[0,0,0,0,0,0,0,0,0,0,0,0];Qa=4;for(var Va=0;12>Va;Va++)y>=e[11-Va][Qa]?(y-=e[11-Va][Qa--],Pa[Va]=-1):Pa[Va]=Sa.pop();for(Va=0;4>Va;Va++)if(w[Va]=3*w[Va]+mathlib.rn(3),Sa[Va]=2*Pa.indexOf(Va)+mathlib.rn(2),!(h||a(mb[Va],24*w[Va]+Sa[Va])>b))for(Qa=[],
y=0;y<=b;y++)if(Za(Na,z,Sa[Va],w[Va],Va,y,-1,Qa)){h=!0;break}if(h){b=fb(x);b[2]=mathlib.valuedArray(8,-1);b[3]=mathlib.valuedArray(8,-1);c=[7,6,5,4,10,9,8,11,3,2,1,0];h=[6,5,4,7,2,1,0,3];for(r=0;4>r;r++)b[0][c[Sa[r]>>1]]=c[r+4],b[1][c[Sa[r]>>1]]=Sa[r]%2,b[2][h[~~(w[r]/3)]]=h[r+4],b[3][h[~~(w[r]/3)]]=(30-w[r])%3;return b}}}}}}(mathlib.createMove,mathlib.edgeMove,mathlib.createPrun,mathlib.setNPerm,mathlib.getNPerm,mathlib.Cnk,mathlib.getPruning);execMain(function(b,Pa,z,w){function c(a,b){var c=[0,0,0,0,0,0,0,0,0,0,0,0],e=a%12,f=~~(a/12);f>=e&&f++;c[e]=2;c[f]=4;Pa(c,b);for(var n=0;12>n;n++)1==c[n]>>1?e=n:2==c[n]>>1&&(f=n);f>e&&f--;return 12*f+e}function e(){e=$.noop;b(f,2048,[Pa,"o",12,-2]);b($a,132,c)}function a(a,b){e();var c=kernel.parseScramble(a,"FRUBLD");b.empty();for(var w=0;12>w;w++){for(var y=0,Na=116,z=0;z<c.length;z++)for(var Pa=x[w].indexOf("FRUBLD".charAt(c[z][0])),Ta=c[z][2],Za=0;Za<Ta;Za++)y=f[Pa][y],Na=$a[Pa][Na];y=n.search([y,
Na],0);for(z=0;z<y.length;z++)y[z]="FRUBLD".charAt(y[z][0])+" 2'".charAt(y[z][1]);b.append($('<span class="sol">').append(Qa[w]+": "+Ua[w],tools.getSolutionSpan(y)),"<br>")}}function Na(b,c){if(c)if(tools.isPuzzle("333")){var n=tools.getCurScramble();if("eocross"==b){n=n[1];e();n=kernel.parseScramble(n,"FRUBLD");c.empty();for(var w=0;12>w;w++){for(var z=0,Na=116,Pa=129,Ta=0;Ta<n.length;Ta++)for(var Za=x[w].indexOf("FRUBLD".charAt(n[Ta][0])),mb=n[Ta][2],ib=0;ib<mb;ib++)z=f[Za][z],Na=$a[Za][Na],Pa=
$a[Za][Pa];z=y.search([z,Na,Pa],0);for(Ta=0;Ta<z.length;Ta++)z[Ta]="FRUBLD".charAt(z[Ta][0])+" 2'".charAt(z[Ta][1]);c.append($('<span class="sol">').append(Qa[w]+": "+Ua[w],tools.getSolutionSpan(z)),"<br>")}}else a(n[1],c)}else c.html(IMAGE_UNAVAILABLE)}var f=[],$a=[],n=new mathlib.Solver(6,3,[[0,[Pa,"o",12,-2],2048],[116,c,132]]),y=new mathlib.Solver(6,3,[[0,[Pa,"o",12,-2],2048],[116,c,132],[129,c,132]]),Qa="D(LR) D(FB) U(LR) U(FB) L(UD) L(FB) R(UD) R(FB) F(LR) F(UD) B(LR) B(UD)".split(" "),x="FRUBLD RBULFD FLDBRU LBDRFU FDRBUL DBRUFL FULBDR UBLDFR URBDLF RDBLUF DRFULB RUFLDB".split(" "),
Ua="&nbsp;&nbsp;&nbsp; &nbsp;y&nbsp; z2&nbsp; z2y z'&nbsp; z'y &nbsp;z&nbsp; z&nbsp;y x'&nbsp; x'y &nbsp;x&nbsp; x&nbsp;y".split(" ");$(function(){tools.regTool("eoline",TOOLS_SOLVERS+">"+TOOLS_EOLINE,Na.bind(null,"eoline"));tools.regTool("eocross",TOOLS_SOLVERS+">EOCross",Na.bind(null,"eocross"))});return{solve:a}},[mathlib.createMove,mathlib.edgeMove,mathlib.createPrun,mathlib.getPruning]);execMain(function(b){function Pa(c,f){e.ca=[0,0,0,0,0,0,0,0];for(var n=1;3>n;n++){var w=c%24;c=~~(c/24);e.ca[w&7]=n|w&24}b.CornMult(e,b.moveCube[3*f],a);w=[];for(n=0;8>n;n++)w[a.ca[n]&7]=n|a.ca[n]&24;c=0;for(n=2;0<n;n--)c=24*c+w[n];return c}function z(c,f){e.ea=[0,0,0,0,0,0,0,0,0,0,0,0];for(var n=1;4>n;n++){var w=c%24;c=~~(c/24);e.ea[w>>1]=n<<1|w&1}b.EdgeMult(e,b.moveCube[3*f],a);w=[];for(n=0;12>n;n++)w[a.ea[n]>>1]=n<<1|a.ea[n]&1;c=0;for(n=3;0<n;n--)c=24*c+w[n];return c}function w(a,b){b.empty();
for(var c=0;4>c;c++){a:{var e=a,w=$a[c];var y=[126];for(var Qa=[11964],Xa=1;4>Xa;Xa++)y[Xa]=Pa(y[Xa-1],4),Qa[Xa]=z(Qa[Xa-1],4);var Sa=[];w=w.split("");for(var Oa=0;4>Oa;Oa++){Sa[Oa]=w.join("");var fb=kernel.parseScramble(e,Sa[Oa]);for(Xa=0;Xa<fb.length;Xa++)for(var lb=fb[Xa][0],gb=0;gb<fb[Xa][2];gb++)y[Oa]=Pa(y[Oa],lb),Qa[Oa]=z(Qa[Oa],lb);mathlib.circle(w,0,2,3,5)}for(w=1;12>w;w++)for(Oa=0;4>Oa;Oa++)if(e=Na.search([y[Oa],Qa[Oa]],1==w?0:w,w)){e.push(Oa);y=e;break a}y=void 0}Qa=y.pop();0==c%2&&(Qa=
(Qa+2)%4);for(Oa=0;Oa<y.length;Oa++)y[Oa]="URFDLB".charAt(y[Oa][0])+" 2'".charAt(y[Oa][1]);b.append($('<span class="sol">').append(f[c]+": "+n[c]+["&nbsp;&nbsp;&nbsp;","x'&nbsp;","x2&nbsp;","x&nbsp;&nbsp;"][Qa],tools.getSolutionSpan(y)),"<br>")}}function c(a){if(a)if(tools.isPuzzle("333")){var b=tools.getCurScramble();w(b[1],a)}else a.html(IMAGE_UNAVAILABLE)}var e=new b,a=new b,Na=new mathlib.Solver(6,3,[[126,Pa,576],[11964,z,13824]]),f=["LU","LD","FU","FD"],$a=["DRBULF","URFDLB","DBLUFR","UBRDFL"],
n=["&nbsp;&nbsp;","&nbsp;&nbsp;","y&nbsp;","y&nbsp;"];$(function(){tools.regTool("roux1",TOOLS_SOLVERS+">"+TOOLS_ROUX1,c)});return{solve:w}},[mathlib.CubieCube]);var gsolver=function(){function b(a,b){for(var e=0;e<z.length;e++)b=a(b,z[e]);for(e=0;e<c.length;e++)b=a(b,c[e]);return b}function Pa(a,b){var c={};b=b||" 2'";for(var e in a)for(var f=0;f<b.length;f++)c[e+b[f]]=a[e];return c}var z,w,c,e=function(){function a(a,b){for(var e=a.split(""),f=c["URF".indexOf(b[0])],n="? 2'".indexOf(b[1]),w=0;w<f.length;w++)mathlib.acycle(e,f[w],n);return e.join("")}var b="URFDLB".split(""),c=[[[0,1,3,2],[4,8,16,20],[5,9,17,21]],[[4,5,7,6],[1,22,13,9],[3,20,15,11]],[[8,
9,11,10],[2,4,13,19],[3,6,12,17]]],e=new mathlib.gSolver("XXXX???????????????????? ????XXXX???????????????? ????????XXXX???????????? ????????????XXXX???????? ????????????????XXXX???? ????????????????????XXXX".split(" "),a,Pa({U:1,R:2,F:3}));return function(c,f){z=kernel.parseScramble(c,"URF");for(var n="UUUURRRRFFFFDDDDLLLLBBBB",w=0;w<z.length;w++){var x=z[w];n=a(n,"URF".charAt(x[0])+" 2'".charAt(x[2]-1))}for(x=0;6>x;x++){var y=[];for(w=0;24>w;w++)y.push(n[w]=="URFDLB".charAt(x)?"X":"?");w=e.search(y.join(""),
0);f.append(b[x]+": ",tools.getSolutionSpan(w),"<br>")}}}(),a=function(){function e(a,b){for(var c=a.split(""),h=Ta["URFDLBurfdlbMESxyz".indexOf(b[0])],e="? 2'".indexOf(b[1]),f=0;f<h.length;f++)mathlib.acycle(c,h[f],e);return c.join("")}function f(a,b,c){c+=" // orientation \n";for(var h=0;h<b.length&&void 0!=b[h];h++)c+=b[h].join(" ").replace(/\s+/g," ")+" // "+a[h].head+(0==b[h].length?" skip":"")+"\n";return"https://alg.cubing.net/?alg="+encodeURIComponent(c)}function n(a,n){var h=+new Date,x=
[null,0],y=[];c=[];for(var z=0;z<a.length;z++){if(!a[z].solv){a[z].solv={};for(var Na in a[z].step)a[z].solv[Na]=new mathlib.gSolver([Na],e,a[z].move)}var Oa=void 0,Qa=e,Pa=a[z].solv,Ra=a[z].step,Sa=a[z].fmov||[];x=x[1];var Va=a[z].maxl||10,Ta=0;a:for(;Ta<Va+1;Ta++)for(var Ua in Pa)if((Ra[Ua]|x)==Ra[Ua]){var Ya=b(Qa,Ua);Oa=Pa[Ua].search(Ya,0,Ta);if(void 0!=Oa){x|=Ra[Ua];break a}for(var Wa=0;Wa<Sa.length;Wa++)if(Oa=Qa(Ya,Sa[Wa]),Oa=Pa[Ua].search(Oa,0,Ta),void 0!=Oa){Oa.unshift(Sa[Wa]);x|=Ra[Ua];break a}}x=
[Oa,x];y[z]=x[0];if(void 0==x[0]){n.append(a[z].head+": &nbsp;(no solution found in %d moves)".replace("%d",a[z].maxl||10),"<br>");break}n.append(a[z].head+": ",0==y[z].length?"&nbsp;(skip)":tools.getSolutionSpan(y[z]),"<br>");c=c.concat(y[z]);DEBUG&&console.log("[step solver]",a[z].head+": ",y[z],"->",x[1],b(e,mathlib.SOLVED_FACELET),+new Date-h)}n.append($('<a class="click" target="_blank">alg.cubing.net</a>').attr("href",f(a,y,r)+"&setup="+encodeURIComponent(w)))}function Na(){r=Wa.val();a.exec(eb,
w,Ya.empty())}var Ta=[[[0,2,8,6],[1,5,7,3],[18,36,45,9],[19,37,46,10],[20,38,47,11]],[[9,11,17,15],[10,14,16,12],[2,51,29,20],[5,48,32,23],[8,45,35,26]],[[18,20,26,24],[19,23,25,21],[6,9,29,44],[7,12,28,41],[8,15,27,38]],[[27,29,35,33],[28,32,34,30],[24,15,51,42],[25,16,52,43],[26,17,53,44]],[[36,38,44,42],[37,41,43,39],[0,18,27,53],[3,21,30,50],[6,24,33,47]],[[45,47,53,51],[46,50,52,48],[2,36,33,17],[1,39,34,14],[0,42,35,11]],[[0,2,8,6],[1,5,7,3],[18,36,45,9],[19,37,46,10],[20,38,47,11],[21,39,48,
12],[22,40,49,13],[23,41,50,14]],[[9,11,17,15],[10,14,16,12],[2,51,29,20],[5,48,32,23],[8,45,35,26],[1,52,28,19],[4,49,31,22],[7,46,34,25]],[[18,20,26,24],[19,23,25,21],[6,9,29,44],[7,12,28,41],[8,15,27,38],[3,10,32,43],[4,13,31,40],[5,16,30,37]],[[27,29,35,33],[28,32,34,30],[24,15,51,42],[25,16,52,43],[26,17,53,44],[21,12,48,39],[22,13,49,40],[23,14,50,41]],[[36,38,44,42],[37,41,43,39],[0,18,27,53],[3,21,30,50],[6,24,33,47],[1,19,28,52],[4,22,31,49],[7,25,34,46]],[[45,47,53,51],[46,50,52,48],[2,
36,33,17],[1,39,34,14],[0,42,35,11],[5,37,30,16],[4,40,31,13],[3,43,32,10]],[[1,19,28,52],[4,22,31,49],[7,25,34,46]],[[21,12,48,39],[22,13,49,40],[23,14,50,41]],[[3,10,32,43],[4,13,31,40],[5,16,30,37]],[[9,11,17,15],[10,14,16,12],[2,51,29,20],[5,48,32,23],[8,45,35,26],[36,42,44,38],[37,39,43,41],[0,53,27,18],[3,50,30,21],[6,47,33,24],[1,52,28,19],[4,49,31,22],[7,46,34,25]],[[0,2,8,6],[1,5,7,3],[18,36,45,9],[19,37,46,10],[20,38,47,11],[27,33,35,29],[28,30,34,32],[24,42,51,15],[25,43,52,16],[26,44,
53,17],[21,39,48,12],[22,40,49,13],[23,41,50,14]],[[18,20,26,24],[19,23,25,21],[6,9,29,44],[7,12,28,41],[8,15,27,38],[45,51,53,47],[46,48,52,50],[2,17,33,36],[1,14,34,39],[0,11,35,42],[3,10,32,43],[4,13,31,40],[5,16,30,37]]],Za=Pa({U:0,R:17,F:34,D:48,L:65,B:82}),Ra=Pa({U:0,R:17,F:34,L:65,B:82}),Xa=Pa({U:0,R:17,M:97,r:113}),Sa=Pa({U:0,R:17,L:65}),Oa=[{move:Za,maxl:8,head:"Cross",step:{"----U--------R--R-----F--F--D-DDD-D-----L--L-----B--B-":0}},{move:Ra,head:"F2L-1",step:{"----U-------RR-RR-----FF-FF-DDDDD-D-----L--L-----B--B-":1,
"----U--------R--R----FF-FF-DD-DDD-D-----LL-LL----B--B-":2,"----U--------RR-RR----F--F--D-DDD-DD----L--L----BB-BB-":4,"----U--------R--R-----F--F--D-DDDDD----LL-LL-----BB-BB":8}},{move:Ra,head:"F2L-2",step:{"----U-------RR-RR----FFFFFFDDDDDD-D-----LL-LL----B--B-":3,"----U-------RRRRRR----FF-FF-DDDDD-DD----L--L----BB-BB-":5,"----U--------RR-RR---FF-FF-DD-DDD-DD----LL-LL---BB-BB-":6,"----U-------RR-RR-----FF-FF-DDDDDDD----LL-LL-----BB-BB":9,"----U--------R--R----FF-FF-DD-DDDDD----LLLLLL----BB-BB":10,
"----U--------RR-RR----F--F--D-DDDDDD---LL-LL----BBBBBB":12}},{move:Ra,head:"F2L-3",step:{"----U-------RRRRRR---FFFFFFDDDDDD-DD----LL-LL---BB-BB-":7,"----U-------RR-RR----FFFFFFDDDDDDDD----LLLLLL----BB-BB":11,"----U-------RRRRRR----FF-FF-DDDDDDDD---LL-LL----BBBBBB":13,"----U--------RR-RR---FF-FF-DD-DDDDDD---LLLLLL---BBBBBB":14}},{move:Ra,head:"F2L-4",step:{"----U-------RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB":15}}],fb=[{move:Za,maxl:10,fmov:["x ","x2","x'"],head:"Step 1",step:{"---------------------F--F--D--D--D-----LLLLLL-----B--B":0}},
{move:Xa,maxl:16,head:"Step 2",step:{"------------RRRRRR---F-FF-FD-DD-DD-D---LLLLLL---B-BB-B":1}}],$a=[{move:Za,maxl:8,head:"2x2x2",step:{"---------------------FF-FF-DD-DD--------LL-LL---------":1,"------------------------------DD-DD----LL-LL-----BB-BB":2}},{move:Za,maxl:10,head:"2x2x3",step:{"---------------------FF-FF-DD-DD-DD----LLLLLL----BB-BB":3}}],gb=[{move:Za,maxl:10,head:"EOLine",step:{"-H-HUH-H-----R-------HFH-F--D-HDH-D-----L-------HBH-B-":0}},{move:Sa,maxl:16,head:"ZZF2L1",step:{"-H-HUH-H----RRRRRR---HFF-FF-DDHDD-DD----L-------BBHBB-":1,
"-H-HUH-H-----R-------FFHFF-DD-DDHDD----LLLLLL---HBB-BB":2}},{move:Sa,maxl:16,head:"ZZF2L2",step:{"-H-HUH-H----RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB":3}}],mb=[{move:Za,maxl:7,head:"EO",step:{"-H-HUH-H-----R-------HFH----H-HDH-H-----L-------HBH---":0}},{move:Za,maxl:10,head:"DR",step:{"UUUUUUUUU---RRR------FFF---UUUUUUUUU---RRR------FFF---":1}}],ib,Wa,eb,Ya,r="z2";execMain(function(){for(var a="z2;;z ;z';x ;x'".split(";"),b=0;6>b;b++)for(var c=0;3>c;c++)a.push(a[b]+" y"+" 2'".charAt(c));Wa=$("<select>");
for(b=0;b<a.length;b++)Wa.append($("<option>").val(a[b]).html(a[b]))});return{exec:function(a,f,w){if("222"==a){z=kernel.parseScramble(f,"URFDLB");for(a=0;a<z.length;a++)z[a]="URFDLB".charAt(z[a][0])+" 2'".charAt(z[a][2]-1);f="URF UFL ULB UBR DFR DLF DBL DRB".split(" ");var h="----UU-UURR-RR-----FF-FF------------------------------ ---UU-UU----------FF-FF--------------LL-LL------------ UU-UU-------------------------------LL-LL-----BB-BB--- -UU-UU----RR-RR------------------------------BB-BB---- ------------RR-RR-----FF-FF-DD-DD--------------------- ---------------------FF-FF-DD-DD--------LL-LL--------- ------------------------------DD-DD----LL-LL-----BB-BB -------------RR-RR-------------DD-DD------------BB-BB-".split(" ");
ib=ib||new mathlib.gSolver(h,e,Za);for(a=0;8>a;a++){w.append(f[a]+": ");c=[];var x=ib.search(b(e,h[a]),0);x?w.append(tools.getSolutionSpan(x),"<br>"):w.append("no solution found<br>")}}else{Ya=w;eb=a;h=r.split(" ");x=[0,1,2,3,4,5];for(var y=[[5,1,0,2,4,3],[0,2,4,3,5,1],[1,3,2,4,0,5]],Qa=0;Qa<h.length;Qa++)if(h[Qa][0])for(var Pa="xyz".indexOf(h[Qa][0]),Ra="? 2'".indexOf(h[Qa][1]||" "),Sa=0;Sa<Ra;Sa++)for(var Va=0;6>Va;Va++)x[Va]=y[Pa][x[Va]];for(Va=0;6>Va;Va++)x[Va]="URFDLB".charAt(x[Va]);h=x.join("");
z=kernel.parseScramble(f,"URFDLB");for(f=0;f<z.length;f++)z[f]=h.charAt(z[f][0])+" 2'".charAt(z[f][2]-1);w.append("Orientation:",Wa.unbind("change").change(Na),"<br>");"cf"==a&&n(Oa,w);"roux"==a&&n(fb,w);"petrus"==a&&n($a,w);"zz"==a&&n(gb,w);"eodr"==a&&n(mb,w)}},move:e}}(),Na=function(){function a(a,b){if(!a)return null;b=~~b;a=a.split("|");if(0==b){var c=a[0].slice(6);a[0]=a[0].slice(0,6)+a[1].slice(6);a[1]=a[1].slice(0,6)+c}else if(c=0<b?0:1,b=Math.abs(b),a[c]=a[c].slice(b)+a[c].slice(0,b),/[a-h]/.exec(a[c][0]+
a[c][6]))return null;return a.join("|")}function e(a){for(var b=0,c=0,e=[],f=0;f<a.length;f++)0==a[f]?(0==b&&0==c?e.push("/"):e.push((b+5)%12-5+","+((c+5)%12-5)+"/"),b=c=0):0<a[f]?b+=~~a[f]:c-=~~a[f];return e}for(var f={0:33},n=1;12>n;n++)f[""+n]=0,f[""+-n]=16;var w,Na;return function(n,x){w=w||new mathlib.gSolver(["0Aa0Aa0Aa0Aa|Aa0Aa0Aa0Aa0","0Aa0Aa0Aa0Aa|0Aa0Aa0Aa0Aa","Aa0Aa0Aa0Aa0|Aa0Aa0Aa0Aa0","Aa0Aa0Aa0Aa0|0Aa0Aa0Aa0Aa"],a,f);Na=Na||new mathlib.gSolver(["0Aa0Aa0Aa0Aa|Bb1Bb1Bb1Bb1","0Aa0Aa0Aa0Aa|1Bb1Bb1Bb1Bb",
"Aa0Aa0Aa0Aa0|Bb1Bb1Bb1Bb1","Aa0Aa0Aa0Aa0|1Bb1Bb1Bb1Bb"],a,f);z=[];for(var y=/^\s*\(\s*(-?\d+),\s*(-?\d+)\s*\)\s*$/,Oa=n.split("/"),Qa=0;Qa<Oa.length;Qa++){if(!/^\s*$/.exec(Oa[Qa])){var Pa=y.exec(Oa[Qa]);~~Pa[1]&&z.push((~~Pa[1]+12)%12);~~Pa[2]&&z.push(-(~~Pa[2]+12)%12)}z.push(0)}0<z.length&&z.pop();c=[];y=w.search(b(a,"0Aa0Aa0Aa0Aa|Aa0Aa0Aa0Aa0"),0);x.append("Shape: ",tools.getSolutionSpan(e(y)),"<br>");c=c.concat(y);y=Na.search(b(a,"0Aa0Aa0Aa0Aa|Bb1Bb1Bb1Bb1"),0);x.append("Color: ",tools.getSolutionSpan(e(y)),
"<br>")}}(),f=function(){function a(a,b){for(var c=a.split(""),f=e["RULBrbxy".indexOf(b[0])],n="? '*".indexOf(b[1]),w=0;w<f.length;w++)mathlib.acycle(c,f[w],n);return c.join("")}var e=[[[5,25,15],[9,28,17],[7,29,16],[8,26,19],[23,14,4]],[[0,20,25],[2,21,27],[4,22,29],[1,23,26],[19,7,11]],[[10,15,20],[13,18,24],[11,16,23],[14,19,22],[29,1,8]],[[25,20,15],[29,23,19],[28,21,18],[27,24,17],[13,9,2]],[[0,25,5],[4,26,7],[3,27,9],[2,28,6],[17,12,21]],[[0,20,25],[2,21,27],[4,22,29],[1,23,26],[19,7,11]],[[0,
25,15,10],[1,27,19,13],[2,29,18,11],[3,26,17,14],[4,28,16,12],[6,7,9,8],[21,23,24,22]],[[5,10,20,25],[6,11,21,26],[7,12,22,27],[8,13,23,28],[9,14,24,29],[1,2,4,3],[16,18,19,17]],[]],f;return function(e,n){f=f||new mathlib.gSolver(["?L?L??B?B?UUUUU?R?R???F?F?????","?F?F??L?L?UUUUU?B?B???R?R?????","?R?R??F?F?UUUUU?L?L???B?B?????","?B?B??R?R?UUUUU?F?F???L?L?????"],a,Pa({R:0,r:1,B:2,b:3}," '"));z=kernel.parseScramble(e,"RULB");for(var w=0;w<z.length;w++)z[w]="RULB".charAt(z[w][0])+" 2'".charAt(z[w][2]-
1);var x="URFDLB".split(""),y="UUUUU?RR???FF????????LL???BB?? ???BBUUUUU??L?L?FF????????R?R? ?B?B??R?R?UUUUU?F?F???L?L????? ????????RR???BBUUUUU???LL???FF ?BB????????R?R????FFUUUUU??L?L ??F?F??R?R???????B?B?L?L?UUUUU".split(" ");for(w=0;6>w;w++){c=[];var Na=["x*","y ",null,"x ","y*","y'"],Oa=~~(b(a,"U????R????F????D????L????B????").indexOf(x[w])/5);Na[Oa]&&c.push(Na[Oa]);(Na=f.search(b(a,y[w]),0))?(n.append(x[w]+": "),c[0]&&n.append("&nbsp;"+c[0].replace("'","2").replace("*","'")),n.append(tools.getSolutionSpan(Na),
"<br>")):n.append(x[w]+": no solution found<br>")}}}(),$a=function(){function a(a,b){for(var c=a.split(""),f=e["RULB".indexOf(b[0])],n="? '".indexOf(b[1]),w=0;w<f.length;w++)mathlib.acycle(c,f[w],n);return c.join("")}var e=[[[5,9,22],[0,7,20],[1,8,18]],[[3,16,11],[1,14,6],[2,12,7]],[[4,23,15],[2,18,13],[0,19,14]],[[10,17,21],[8,12,19],[6,13,20]]],f;return function(e,n){f=f||new mathlib.gSolver(["????FF??RRR??L?L?L?DDDDD"],a,Pa({R:0,U:1,L:2,B:3}," '"));z=kernel.parseScramble(e,"RULBrulb");e=[];for(var w=
0;w<z.length;w++)1==z[w][1]&&e.push("RULB".charAt(z[w][0])+" 2'".charAt(z[w][2]-1));var x=["D","L","R","F"],y=[["RULB","LUBR","BURL"],["URBL","LRUB","BRLU"],["RLBU","ULRB","BLUR"],["RBUL","UBLR","LBRU"]];for(w=0;4>w;w++){c=[];var Na,Oa=0;a:for(;99>Oa;Oa++)for(var Qa=0;3>Qa;Qa++){var Ta=y[w][Qa];z=[];for(var Ua=0;Ua<e.length;Ua++)z.push("RULB"[Ta.indexOf(e[Ua][0])]+e[Ua][1]);if(Na=f.search(b(a,"????FF??RRR??L?L?L?DDDDD"),Oa,Oa)){for(Ua=0;Ua<Na.length;Ua++)Na[Ua]=Ta["RULB".indexOf(Na[Ua][0])]+Na[Ua][1];
break a}}Na?n.append(x[w]+": ",tools.getSolutionSpan(Na),"<br>"):n.append(x[w]+": no solution found<br>")}}}();(function(){function a(a,b){var c=a.indexOf("-"),e=c>>2;c&=3;var f=a.split(""),n=~~b[1],w=[e<<2|c];if("V"==b[0]){if("$"==f[e<<2|n])return null;for(var x=c>n?-1:1;c!=n;)c+=x,w.push(e<<2|c)}else{if("$"==f[n<<2|c])return null;for(x=e>n?-1:1;e!=n;)e+=x,w.push(e<<2|c)}w.reverse();mathlib.acycle(f,w);return f.join("")}function b(a){var b=[];a=a.split("");for(var c=0;c<a.length;c++)"?"==a[c]&&(a[c]=
"-",b.push(a.join("")),a[c]="?");return b}function e(b,e){for(var f=[],n=0;n<e.length;n++)f[n]=b[e[n]];b=f.join("");for(n=0;n<c.length;n++)b=a(b,c[n]);return b}function f(a){do{var b=mathlib.rndPerm(a*a);var c=(a-1-~~(b.indexOf(b.length-1)/a))*(a-1);for(var e=0;e<b.length;e++)for(var f=e+1;f<b.length;f++)b[e]>b[f]&&b[e]!=b.length-1&&c++}while(0!=c%2);return b}function n(a,b){var n=+new Date,w=[],x=0;if(4==a){w[0]=f(4);for(var y=w[0],Oa=[],Qa=[0,4,8,12,1,5,9,13,2,6,10,14,3,7,11,15],Pa=0;16>Pa;Pa++)Oa[Pa]=
Qa[y[Qa[Pa]]];w[1]=Oa;y=0;a:for(;99>y;y++)for(x=0;2>x;x++)if(Oa=w[x].indexOf(w[x].length-1),c=["V"+(Oa&3),"H"+(Oa>>2)],Oa=z.search(e("0123???????????-",w[x]),y,y)){c=c.concat(Oa);break a}y=Na.search(e("01234???8???c??-",w[x]).replace(/[0123]/g,"$"),0);c=c.concat(y)}else if(3==a){y=f(3);Oa=[5,6,7,9,10,11,13,14,15];for(Qa=0;16>Qa;Qa++)w[Qa]=Oa[y[Oa.indexOf(Qa)]]||Qa;Oa=w.indexOf(w.length-1);c=["V"+(Oa&3),"H"+(Oa>>2)];w=[w]}y=Sa.search(e("0123456789abcde-",w[x]).replace(/[012348c]/g,"$"),0);c=c.concat(y);
DEBUG&&console.log("[15p solver]",x,e("0123456789abcde-",w[x]),c.join(""),c.length,+new Date-n);y=b.slice(3==a?3:4);n=[];Qa=1==x?"VH":"HV";x=-1==y.indexOf("a")?["DR","UL"]:["￬￫","￪￩"];w=-1!=y.indexOf("m");y=-1!=y.indexOf("p");var r=[-1,-1];for(Oa=0;Oa<c.length;Oa++){var h=~~c[Oa][1],Ra=Qa.indexOf(c[Oa][0]);-1!=r[Ra]&&r[Ra]!=h&&(0<n.length&&n[n.length-1][0]==Ra?(Pa=n[n.length-1],Pa[1]+=h-r[Ra],0==Pa[1]&&n.pop()):n.push([Ra,h-r[Ra]]));r[Ra]=h}for(Oa=0;Oa<n.length;Oa++){Pa=n[Oa];Qa=x[w!=0<Pa[1]?0:1][Pa[0]];
Pa=Math.abs(Pa[1]);n[Oa]=[];if(y)n[Oa].push(Qa+Pa);else for(;0<Pa--;)n[Oa].push(Qa);n[Oa]=n[Oa].join(" ")}n.reverse();return n.join(" ").replace(/1/g,"")}var w=Pa({V:0,H:1},"0123"),z=new mathlib.gSolver(b("0123????????????"),a,w),Na=new mathlib.gSolver(b("$$$$4???8???c???"),a,w),Sa=new mathlib.gSolver(["$$$$$567$9ab$de-"],a,w);scrMgr.reg(["15prp","15prap","15prmp"],n.bind(null,4))(["8prp","8prap","8prmp"],n.bind(null,3))})();var n=execMain(function(){function e(a){var b=Wa[0].getBoundingClientRect(),
c=a.offsetX/30*Wa[0].width/b.width;a=a.offsetY/30*Wa[0].height/b.height;for(b=0;6>b;b++)if(c>=3.3*Va[b]&&c<=3.3*Va[b]+3&&a>=3.3*bb[b]&&a<=3.3*bb[b]+3){var e=~~(c-3.3*Va[b]),n=~~(a-3.3*bb[b]);Ya=Ya.split("");Ya[9*b+3*n+e]=h;Ya=Ya.join("");f(eb,b,e,n,Ya)}c>=Va[6]&&c<=Va[6]+5&&a>=bb[6]&&a<=bb[6]+2&&(e=~~(c-Va[6]),n=~~(a-bb[6]),h="URFDLB-XYZ".charAt(2*e+n),$.ctxDrawPolygon(eb,r[h],ab,[30,1.5,1.5]));1==Sa?Xa():2==Sa&&Ra()}function f(a,b,c,e,h){$.ctxDrawPolygon(a,r[h[9*b+3*e+c]],[[c,c,c+1,c+1],[e,e+1,e+
1,e]],[30,3.3*Va[b],3.3*bb[b]])}function n(a){a=Oa.val();Oa.val("");kernel.blur();"input"==a?(a=prompt("U1U2...U9R1..R9F1..D1..L1..B1..B9",Ya),null!=a&&(nb.exec(a)?w(a):logohint.push("Invalid Input"))):""!=a&&w(a)}function w(a){Ya=a;a=eb;var b=Ya,c=kernel.getProp("imgSize")/48;Wa.width(39*c+"em");Wa.height(29*c+"em");Wa.attr("width",391);Wa.attr("height",87/9*30+1);for(c=0;6>c;c++)for(var e=0;3>e;e++)for(var n=0;3>n;n++)f(a,c,e,n,b);for(e=0;5>e;e++)for(n=0;2>n;n++)$.ctxDrawPolygon(a,r["URFDLB-XYZ".charAt(2*
e+n)],[[e,e,e+1,e+1],[n,n+1,n+1,n]],[30,7.25,.5]);$.ctxDrawPolygon(a,r[h],ab,[30,1.5,1.5]);1==Sa?Xa():2==Sa&&Ra()}function Na(){if(Sa){var a=hb[1].searchNext(1E3,1E3);var b=mb.length+" sol(s), @"+~~((+new Date-ob)/1E3)+"s|"+hb[1].maxl+"f";a&&mb.push(a.join(" ")+" ("+a.length+"f)");a&&1==Sa?(gb.html(mb.join("\n")),gb[0].scrollTop=gb[0].scrollHeight,db=0):(gb.html(mb.join("\n")+"\n"+b),gb[0].scrollTop=gb[0].scrollHeight,db=setTimeout(Na,1))}}function Za(){hb[0]!=Ya&&(hb[0]=Ya,hb[1]=new mathlib.gSolver([Ya],
a.move,Pa({U:0,R:17,F:34,D:48,L:65,B:82})));var c=b(a.move,Ya);hb[1].search(c,0,0);ob=+new Date;mb=[];Na()}function Ra(){0==Sa?($a.val("Stop Solve!"),lb.prop("disabled",!0),Sa=2):($a.val("Batch Solve!"),lb.prop("disabled",!1),Sa=0);kernel.blur();Sa&&Za()}function Xa(){0==Sa?(lb.val("Stop Solve!"),$a.prop("disabled",!0),Sa=1):(lb.val("Single Solve!"),$a.prop("disabled",!1),Sa=0);kernel.blur();Sa&&Za()}var Sa=0,Oa=$('<select style="font-size:0.75em;">'),$a=$('<input type="button" value="Batch Solve!" style="font-size:0.75em;">'),
lb=$('<input type="button" value="Single Solve!" style="font-size:0.75em;">'),gb=$('<textarea wrap=off rows="2" cols="30" style="font-size:0.75em;">'),mb=[],ib={"3x3x3":mathlib.SOLVED_FACELET,Empty:"----U--------R--------F--------D--------L--------B----","2x2x2":"----UU-UURR-RR-----FF-FF------------------------------","2x2x3":"---UUUUUURR-RR----FFFFFF-------------LL-LL------------",Cross:"----U--------R--R-----F--F--D-DDD-D-----L--L-----B--B-",XCross:"----U-------RR-RR-----FF-FF-DDDDD-D-----L--L-----B--B-",
EOLine:"-X-XUX-X-----R-------XFX-F--D-XDX-D-----L-------XBX-B-",Roux1:"---------------------F--F--D--D--D-----LLLLLL-----B--B",Domino:"UUUUUUUUU---RRR------FFF---UUUUUUUUU---RRR------FFF---","EO&CO":"XYXYUYXYX----R-------YFY---XYXYDYXYX----L-------YBY---",Corner:"U-U---U-UR-R---R-RF-F---F-FD-D---D-DL-L---L-LB-B---B-B"},Wa,eb,Ya=mathlib.SOLVED_FACELET,r={U:"#fff",R:"#f00",F:"#0d0",D:"#ff0",L:"#fa0",B:"#00f","-":"#777",X:"#0ff",Y:"#f0f",Z:"#000"},h="-",Va=[1,2,1,1,0,3,7.25],bb=[0,1,1,2,1,1,.5],ab=[[-.7,
-.7,.7,.7],[-.7,.7,.7,-.7]],nb=/^[URFDLBXYZ-]{54}$/,hb=["",null],ob=0,db=0;$(function(){Wa=$("<canvas>");if(Wa[0].getContext){eb=Wa[0].getContext("2d");Oa.append($("<option>").val("").html("Edit subset"));for(var a in ib)Oa.append($("<option>").val(ib[a]).html(a));Oa.append($("<option>").val("input").html("..."));w(ib.Cross)}});return function(a,b){z=kernel.parseScramble(a,"URFDLB");for(var h=0;h<z.length;h++)z[h]="URFDLB".charAt(z[h][0])+" 2'".charAt(z[h][2]-1);c=[];b.empty().append(Oa.unbind("change").change(n),
" ").append($a.unbind("click").click(Ra),"").append(lb.unbind("click").click(Xa),"<br>").append(gb.empty(),"<br>").append(Wa.unbind("mousedown").bind("mousedown",e));Sa&&(db&&(clearTimeout(db),db=0),Za())}});execMain(function(){function b(b,c){if(c){c.empty();var x=$('<span class="sol"/>'),y=tools.getCurScramble();w=y[1];if("222face"==b&&tools.isPuzzle("222"))e(y[1],x);else if("333udf"==b&&tools.isPuzzle("333")&&/^[URFDLB 2']+$/.exec(y[1]))n(y[1],x);else if(b.startsWith("333")&&tools.isPuzzle("333")&&
/^[URFDLB 2']+$/.exec(y[1]))a.exec(b.slice(3),y[1],x);else if("sq1cs"==b&&tools.isPuzzle("sq1"))Na(y[1],x);else if("skbl1"==b&&tools.isPuzzle("skb"))f(y[1],x);else if("pyrv"==b&&tools.isPuzzle("pyr"))$a(y[1],x);else{c.html(IMAGE_UNAVAILABLE);return}c.append(x)}}$(function(){tools.regTool("222face",TOOLS_SOLVERS+">"+TOOLS_222FACE,b.bind(null,"222face"));tools.regTool("333cf",TOOLS_SOLVERS+">Cross + F2L",b.bind(null,"333cf"));tools.regTool("333roux",TOOLS_SOLVERS+">Roux S1 + S2",b.bind(null,"333roux"));
tools.regTool("333petrus",TOOLS_SOLVERS+">2x2x2 + 2x2x3",b.bind(null,"333petrus"));tools.regTool("333zz",TOOLS_SOLVERS+">EOLine + ZZF2L",b.bind(null,"333zz"));tools.regTool("333222",TOOLS_SOLVERS+">2x2x2",b.bind(null,"333222"));tools.regTool("333eodr",TOOLS_SOLVERS+">EO + DR",b.bind(null,"333eodr"));tools.regTool("sq1cs",TOOLS_SOLVERS+">SQ1 S1 + S2",b.bind(null,"sq1cs"));tools.regTool("pyrv",TOOLS_SOLVERS+">Pyraminx V",b.bind(null,"pyrv"));tools.regTool("skbl1",TOOLS_SOLVERS+">Skewb Face",b.bind(null,
"skbl1"));tools.regTool("333udf",TOOLS_SOLVERS+">3x3x3 General",b.bind(null,"333udf"))})});return{rubiksCube:a}}();var scrHinter=execMain(function(b){function Pa(a,c,e){var f=new b,w=new b;c&&f.init(c.ca,c.ea);c=99;f.isEqual(a)&&(c=0);for(var z,x=0;x<e.length;x++){var Na=3*e[x][0];for(z=0;3>z;z++)if(b.EdgeMult(f,b.moveCube[Na+z],w),b.CornMult(f,b.moveCube[Na+z],w),w.isEqual(a)){c=z==e[x][2]-1?x+1:x;break}if(c==x)break;Na=3*e[x][0]+e[x][2]-1;b.EdgeMult(f,b.moveCube[Na],w);b.CornMult(f,b.moveCube[Na],w);f.init(w.ca,w.ea)}if(99==c)return null;a=[];for(x=0;x<e.length;x++)Na=e[x],0==c&&0==x&&(Na=[Na[0],Na[1],(Na[2]-
z+7)%4]),a.push((x==c?"`":"")+"URFDLB".charAt(Na[0])+[null,"","2","'"][Na[2]]);a=a.join(" ");c!=e.length&&(a+="`");return a=kernel.getConjMoves(a,!0)}var z=[],w=null,c=null,e=null,a=new b;return{setScramble:function(b){w=b;b=kernel.getConjMoves(b);b=kernel.parseScramble(b,"URFDLB");z=b.slice();e=c=null;a=new mathlib.CubieCube;for(var f=0;f<b.length;f++){var Na=3*b[f][0]+b[f][2]-1;0>Na||18<=Na||a.selfMoveStr("URFDLB".charAt(b[f][0])+" 2'".charAt(b[f][2]-1))}},getScrCubie:function(){return a},checkScramble:function(b){return""==
w?!1:a.isEqual(b)},checkState:function(Na){if(w&&(DEBUG||GiikerCube.isConnected())&&"333"==tools.getCurPuzzle()&&0==timer.getCurTime()){var f=null,$a=null;c&&(f=Pa(Na,c,e));if(null==f||-1==f.indexOf("`"))$a=Pa(Na,null,z),f=c=null;if(null==$a&&null==f){c=new b;c.init(Na.ca,Na.ea);f=new b;f.invFrom(Na);var n=new b;b.EdgeMult(f,a,n);b.CornMult(f,a,n);e=scramble_333.genFacelet(n.toFaceCube());e=kernel.parseScramble(e,"URFDLB");f=Pa(Na,c,e)}Na=f?w+"\n=> "+f:$a;kernel.pushSignal("scrfix",Na+(-1==Na.indexOf("`")?
' <span style="color:green">✔</span>':""))}}}},[mathlib.CubieCube]),giikerutil=execMain(function(b){function Pa(){"n"!=kernel.getProp("giiVRC")&&"g"==kernel.getProp("input")?Ya.css("font-size",""):Ya.css("font-size","75%");Ya.empty();Ya.append($("<tr>").append($("<td colspan=2>").append(Sa)));GiikerCube.isConnected()||DEBUG&&ib?(Ya.append($("<tr>").append(Wa,eb)).append($("<tr>").append($("<td colspan=2>").append(Oa.unbind("click").click(Na)))).append($("<tr>").append($("<td>").append(fb),$("<td>").append(lb))).append(mb),
Sa.html(ib).addClass("click").unbind("click").click(Za),r()):Sa.html(TOOLS_GIIKER+"<br>"+GIIKER_CONNECT).addClass("click").unbind("click").click(Ua)}function z(a){a&&(a.empty().append(Ya),Pa())}function w(a){Va=a[0];Wa.html('<span style="font-family:iconfont;"></span> '+(Va||"??")+"%");ib=a[1];Sa.html(ib)}function c(){GiikerCube.isConnected()?(GiikerCube.getCube().getBatteryLevel().then(function(a){w(a)}),h=setTimeout(c,6E4)):h=0}function e(){kb&&(clearTimeout(kb),kb=0);kernel.getProp("giiAED")&&
(kb=setTimeout(function(){a:{var c=pb.slice(cb);if(1!=c.length%2){var e=[];e[c.length]=new b;for(var h=c.length-1;0<=h;h--)e[h]=new b,b.CubeMult(b.moveCube[c[h][0]],e[h+1],e[h]);for(h=1;3>h;h++){rb=0;if(a(c,0,h,new b,e)){c=h;break a}if(9999<rb)break}}c=99}99!=c&&(c=hb.toFaceCube(),2>=cubeutil.getProgress(c,"cfop")||(c=scramble_333.genFacelet(hb.toFaceCube()),10>c.length/3?DEBUG&&console.log("[giiker]","Possible error, gen="+c.replace(/ /g,"")+", ignore"):(DEBUG&&console.log("[giiker]","Almost error, gen="+
c.replace(/ /g,"")+", mark solved"),Na())))},1E3))}function a(c,e,h,f,r){if(0==h)return f.isEqual((new b).invFrom(r[e]));for(var n=new b;e<c.length-1;e++){if(~~(c[e][0]/3)%3!=~~(c[e+1][0]/3)%3){var w=(new b).init(f.ca,f.ea);b.CubeMult(w,b.moveCube[c[e+1][0]],n);b.CubeMult(n,b.moveCube[c[e][0]],w);b.CubeMult(w,r[e+2],n);if(9999<++rb)break;if(n.edgeCycles()<h)var x=a(c,e+2,h-1,w,r);if(x)return!0}b.CubeMult(f,b.moveCube[c[e][0]],n);f.init(n.ca,n.ea)}return!1}function Na(){db.invFrom(nb);ob=mathlib.SOLVED_FACELET;
kernel.setProp("giiSolved",ab);cb=pb.length;wb=0;r();bb(ob,["U "],[null,$.now()])}function f(a,f,n,w){var x=$.now();n=n||[x,x];ib!=w&&(ib=w,Pa());ab=a;nb.fromFacelet(ab);b.EdgeMult(db,nb,hb);b.CornMult(db,nb,hb);ob=hb.toFaceCube();0<f.length&&(a=3*"URFDLB".indexOf(f[0][0])+" 2'".indexOf(f[0][1]),pb.push([a,n[0],n[1]]));0<wb&&y();10<pb.length&&(50<pb.length-cb&&0<cb&&pb[cb-1][2]<timer.getStartTime()&&(pb=pb.slice(cb),cb=0),a=$a(pb,!0),eb.html('<span style="font-family:iconfont;"></span> '+Math.round(1E5*
(a[0]-1))/1E3+"%"));ob==mathlib.SOLVED_FACELET&&(Xa(),cb=pb.length,wb=0);r();0==h&&c();e();a=ob;yb&&(b.EdgeMult(yb,hb,xb),b.CornMult(yb,hb,xb),a=xb.toFaceCube());bb(a,f,n);scrHinter.checkState(hb)}function $a(a,b){for(var c=0,e=0,h=0,f=0,r=0,n=0,w=0;w<a.length;w++){var x=a[w][b?2:1],y=a[w][b?1:2];null!=x&&null!=y&&(n++,c+=x,e+=y,h+=x*y,f+=x*x,r+=y*y)}r=n*r-e*e;f=n*f-c*c;w=n*h-c*e;h=.001>f?1:w/f;w=.001>f||.001>r?1:Math.pow(w,2)/f/r;return[h,1>n?0:e/n-h*c/n,w,3>n||.001>f?0:Math.sqrt(r/f*(1-w)/(n-2))]}
function n(a,b,c){if(0==a.length)return a;var e=$a(a),h=e[0];e=e[1];var f=Math.round(h*a[0][1]+e),n=Math.round(h*a[a.length-1][1]+e);null==b||b>f?b=f:null!=c&&c<n&&(b-=Math.min(f-b,n-c));for(c=0;c<a.length;c++)a[c][1]=Math.round(h*a[c][1]+e)-b;return a}function y(){for(var a=pb.length-cb,b="",c=0;c<wb;c++){var e=pb[c+cb][0];b+="URFDLB".charAt(~~(e/3))+" 2'".charAt(e%3)}var h="",f=[];for(c=wb;c<a;c++)f.push(pb[c+cb].slice());f=n(f);for(c=0;c<f.length;c++)e=f[c],h+="URFDLB".charAt(~~(e[0]/3))+" 2'".charAt(e[0]%
3)+"/*"+e[1]+"*/";Qa(fb,"Raw ("+a+")",b,h)}function Qa(a,b,c,e){c||e?a.attr("href","https://alg.cubing.net/?alg="+encodeURIComponent(e)+"&setup="+encodeURIComponent(c)):a.removeAttr("href");a.html(b)}function x(a,b){"disconnect"==a&&(logohint.push("Bluetooth disconnected!"),Pa())}function Ua(){Va=h=0;ib=null;ab=mathlib.SOLVED_FACELET;nb=new b;hb=new b;ob=ab;db=new b;pb=[];cb=0;eb.html('<span style="font-family:iconfont;"></span> 0%');Qa(fb,"Raw(N/A)");Qa(lb,"Pretty(N/A)");ab=kernel.getProp("giiSolved",
mathlib.SOLVED_FACELET);nb.fromFacelet(ab);db.invFrom(nb);GiikerCube.setCallback(f);GiikerCube.setEventCallback(x);return GiikerCube.isConnected()?Promise.resolve():GiikerCube.init().then(function(){logohint.push("Bluetooth successfully connected!")})}function Ta(){return GiikerCube.isConnected()?GiikerCube.stop().then(function(){x("disconnect")}):Promise.resolve()}function Za(){GiikerCube.isConnected()&&confirm("Disconnect?")&&Ta()}function Ra(a,b){if("scrambling"==a)zb="";else if("scramble"==a||
"scrambleX"==a){var c=b[0];zb=b[1];"333"!=tools.puzzleType(c)&&(zb="");scrHinter.setScramble(zb);scrHinter.checkState(hb)}else"property"==a?0<=["giiVRC","imgSize"].indexOf(b[0])?Pa():/^(preScrT?|isTrainScr)$/.exec(b[0])&&(scrHinter.setScramble(zb),scrHinter.checkState(hb)):"timestd"!=a||b[4]||(vb=[timer.getStartTime(),b[0][1],b[1]],setTimeout(Xa,0))}function Xa(){if(vb){var a=vb[0],b=pb.length,c=vb[2];0<b&&pb[b-1][2]>vb[0]+vb[1]+1E3&&(vb=null);for(var e=pb.length-1;0<=e&&!(pb[e][2]<a-500);e--)b=e;
if(b!=pb.length){a=new mathlib.CubieCube;var h=[],f=mathlib.CubieCube.rotMulI[0][kernel.getPreConj()];for(e=b;e<pb.length;e++){b=pb[e].slice();var r=mathlib.CubieCube.rotMulM[f][b[0]];b[0]="URFDLB".charAt(~~(r/3))+" 2'".charAt(r%3);h.push(b);a.selfMoveStr(b[0])}h=n(h);e=cubeutil.moveSeq2str(h);kernel.pushSignal("giirecons",[c,[e,"333"]]);h=(c||"").split(" ");c=new mathlib.CubieCube;for(e=0;e<h.length;e++)c.selfMoveStr(h[e]);e=new mathlib.CubieCube;e.invFrom(a);c.toFaceCube()==e.toFaceCube()&&(DEBUG&&
console.log("[bluetooth] recons clear, cube solved"),vb=null)}}}var Sa=$("<span></span>"),Oa=$("<span>"+GIIKER_RESET+"</span>").addClass("click"),fb=$('<a target="_blank">Raw(N/A)</a>').addClass("click"),lb=$('<a target="_blank">Pretty(N/A)</a>').addClass("click"),gb=$("<canvas>").css({display:"block","box-sizing":"content-box",margin:"auto",padding:"5px"}),mb=$("<tr>").append($('<td colspan=2 style="padding:0;">').append(gb)),ib=null,Wa=$("<td>").html('<span style="font-family:iconfont;"></span> ??%'),
eb=$("<td>").html('<span style="font-family:iconfont;"></span> 0%'),Ya=$('<table class="table">'),r=function(){var a=[],b,c=[[1,-.5,1.5,0,.5,0],[.5,0,3,-.5,1,1.5],[1,0,0,0,1,1.5],[1,.5,5.5,0,.5,0],[-.5,0,7,-.5,-1,4.5],[-1,0,10,0,-1,4.5]];return function(){if(gb)if("n"!=kernel.getProp("giiVRC")&&"g"==kernel.getProp("input"))mb.hide();else{a=kernel.getProp("colcube").match(/#[0-9a-fA-F]{3}/g);mb.show();b=gb[0].getContext("2d");var e=kernel.getProp("imgSize")/60;gb.width(10/4.5*21*e+"em");gb.height(21*
e+"em");gb.attr("width",300);gb.attr("height",135);for(e=0;6>e;e++){for(var h=e,f=ob,n=c[h].slice(),r=0;r<n.length;r++)n[r]*=30;for(r=0;3>r;r++)for(var w=0;3>w;w++)$.ctxDrawPolygon(b,a["DLBURF".indexOf(f[3*(3*h+w)+r])],[[r,r,r+1,r+1],[w,w+1,w+1,w]],n)}}}}(),h=0,Va=0,bb=$.noop,ab=mathlib.SOLVED_FACELET,nb=new b,hb=new b,ob=ab,db=new b,kb=0,rb=0,pb=[],cb=0,zb,vb=null,wb=0,yb=null,xb=new b;$(function(){kernel.regListener("giiker","scramble",Ra);kernel.regListener("giiker","scrambling",Ra);kernel.regListener("giiker",
"scrambleX",Ra);kernel.regListener("giiker","timestd",Ra);kernel.regListener("giiker","property",Ra,/^(?:giiVRC|imgSize|preScrT?|isTrainScr)$/);tools.regTool("giikerutil",TOOLS_GIIKER,z)});return{setCallback:function(a){bb=a},markSolved:Na,checkScramble:function(){return scrHinter.checkScramble(hb)},markScrambled:function(a){var c=hb;a&&(c=scrHinter.getScrCubie());c.isEqual(hb)||(DEBUG&&console.log("[bluetooth] scramble equal, start hack!"),yb=new mathlib.CubieCube,xb.invFrom(hb),b.EdgeMult(c,xb,
yb),b.CornMult(c,xb,yb),cb=pb.length,bb(c.toFaceCube(),["U "],[null,$.now()]));wb=pb.length-cb;y();Qa(lb,"Pretty(N/A)")},init:Ua,stop:Ta,isSync:function(){return null==yb},reSync:function(){yb&&(yb=null,bb(ob,["U "],[null,$.now()]))},tsLinearFix:n,updateBattery:w,setLastSolve:function(a){Qa(lb,"Pretty",kernel.getConjMoves(zb),a)}}},[mathlib.CubieCube]);var metronome=execMain(function(){function b(a){return 99<a?a:" "+a}function Pa(a){a?(a.empty().append("BPM: ",n,Qa,"<br />").append("Vol: ",y,x,"<br />",$a,"<br />").append("<br />",$("<label>").append(Za,'<span class="click"> Beep at</span>'),"<br />",Ta),n.unbind().on("input",function(){$.waitUser.call();f&&(Qa.html(b(n.val())),w())}),y.unbind().on("input",function(){$.waitUser.call();f&&(x.html(b(y.val())),Ua.gain.value=y.val()/100)}),$a.html(Ra?"Stop!":"Start!"),$a.unbind().click(function(){$.waitUser.call();
Ra=!Ra;$a.html(Ra?"Stop!":"Start!");w()}),z()):(null!=Xa&&(clearInterval(Xa),Xa=null),Ra=!1)}function z(){Za.unbind("change").change(e).prop("checked",kernel.getProp("beepEn"));Ta.unbind("change").change(e).val(kernel.getProp("beepAt"));e()}function w(){null!=Xa&&(clearInterval(Xa),Xa=null);if(Ra){var a=6E4/~~n.val();Xa=setInterval(c,a)}}function c(a){if(f){var b=f.createOscillator();b.type="sine";b.frequency.value=a||440;b.connect(Ua);b.start(f.currentTime);b.stop(f.currentTime+.1)}}function e(b){b&&
$.waitUser.call();Za.prop("checked")?a(Ta.val()):null!=Sa&&(clearInterval(Sa),Sa=null);kernel.setProp("beepEn",Za.prop("checked"));kernel.blur()}function a(a){null!=Sa&&(clearInterval(Sa),Sa=null);a=a.split(",");for(var b=0;b<a.length;b++)a[b]=~~(1E3*a[b].trim())/1E3;a=a.filter(Number);a.sort(function(a,b){return a-b});Oa=a;Ta.val(a.join(","));kernel.setProp("beepAt",a.join(","));Sa=setInterval(Na,100)}function Na(){var a=~~timer.getCurTime()/1E3;if(0==a)fb=0;else{for(var b=!1;fb<Oa.length&&a>Oa[fb]-
.05;)++fb,b=!0;b&&c(550)}}var f,$a=$('<span style="display:inline-block; text-align:center; width:100%;"/>').addClass("click"),n=$('<input type="range" value="60" min="10" max="360" style="width:7em;" />'),y=$('<input type="range" value="30" min="0" max="100" style="width:7em;" />'),Qa=$("<span />").html(" 60"),x=$("<span />").html(" 30"),Ua,Ta=$('<input type="text" style="width:7em;" />'),Za=$('<input type="checkbox" />'),Ra=!1,Xa=null,Sa=null,Oa=[],fb=0;$(function(){kernel.regProp("tools","beepEn",
-6,"Beep Enable",[!1]);kernel.regProp("tools","beepAt",-6,"Beep At",["5,10,15,20"]);var a=window.AudioContext||window.webkitAudioContext;void 0!==a&&($.waitUser.reg(function(){f=new a;Ua=f.createGain();Ua.gain.value=.3;Ua.connect(f.destination)}),tools.regTool("mtrnm",TOOLS_METRONOME,Pa));z()});return{playTick:c}});var onlinecomp=execMain(function(){function b(a,c){for(;mb.length>c;)mb.pop().remove();var e=a;if(-1!=ib.indexOf(e))e=null;else{var h=[];e+="|";for(var f=e.length,r=$('<select style="max-width: unset;">'),n=0;n<ib.length;n++)if(ib[n].startsWith(e)){var w=ib[n].slice(f).split("|",1)[0];-1==h.indexOf(w)&&(h.push(w),r.append($("<option>").val(w).html(w)))}e=0==h.length?null:r.change(Pa)}e&&(mb[c]=e,Xa.append(mb[c]),b(a+"|"+mb[c].val(),c+1))}function Pa(a){a=$(a.target).prevAll("select").length;for(var c=
"",e=0;e<=a;e++)c=c+"|"+mb[e].val();b(c,a+1);f();c=="|"+OLCOMP_UPDATELIST+"..."&&z()}function z(){Ra.val("...");$.post("https://cstimer.net/comp.php",{action:"list"},function(a){ib=[];a=JSON.parse(a).data;for(var c=0;c<a.length;c++){var e=a[c].fullname;Wa[e]=a[c].name;for(var h=JSON.parse(a[c].value),r=0;r<h.length;r++)ib.push("|"+e+"|"+h[r])}ib.push("|"+OLCOMP_UPDATELIST+"...");Wa[OLCOMP_UPDATELIST+"..."]="update";b("",0);f();Ra.hide()}).error(function(){logohint.push("Network Error");Ra.val(OLCOMP_UPDATELIST)})}
function w(){for(var a="",b=0;b<mb.length;b++)a+="|"+mb[b].val();if(-1==ib.indexOf(a))alert("Invalid Input");else return b=a.slice(1).split("|",1)[0],a=a.slice(b.length+2),b=Wa[b],[b,a]}function c(){var a=w();$.post("https://cstimer.net/comp.php",{action:"scramble",comp:a[0],path:a[1]},function(a){a=JSON.parse(a);0==a.retcode&&a.data?(h=a=a.data,Va=$.map(a,function(a){return(a=/^\$T([a-zA-Z0-9]+)\$\s*(.*)$/.exec(a))?scramble.getTypeName(a[1]):"???"}),f(!0),kernel.setProp("scrType","remoteComp")):
logohint.push(a.reason||"Server Error")}).error(function(){logohint.push("Network Error")})}function e(){var b=prompt(OLCOMP_SUBMITAS,exportFunc.getDataId("locData","compid"));if(null==b)return!1;if(!exportFunc.isValidId(b))return alert(EXPORT_INVID),!1;localStorage.locData=JSON.stringify({id:exportFunc.getDataId("locData","id"),compid:b});a();return b}function a(){Ua.empty().append("ID: ");Ta.empty();Za.empty();if(exportFunc.getDataId("wcaData","cstimer_token")){var b=exportFunc.getDataId("wcaData",
"wca_me").wca_id;Ta.append(b||"WCA Account"," (WCA)").click(function(){exportFunc.logoutFromWCA(!0);a()});Ua.append(Ta)}else Ta.append(EXPORT_LOGINWCA),Ta.click(function(){location.href=exportFunc.wcaLoginUrl}),(b=exportFunc.getDataId("locData","compid"))?Za.append(b+" ("+OLCOMP_ANONYM+")"):Za.append("N/A ("+OLCOMP_ANONYM+")"),Ua.append(Za.unbind("click").click(e)," | ",Ta)}function Na(c,e){!c||eb?eb=!!c:(c.empty().append($('<div style="font-size: 0.75em; text-align: center;">').append(Ua,Ra,Xa).append(Sa).append(Oa,
" ",fb," ").append($("<label>").append(gb,OLCOMP_WITHANONYM)," ",lb)),b("",0),a(),f(),eb=!0)}function f(a,b){Ya=[];a||(h=[],Va=[]);b||(r=!1);$a()}function $a(){Oa.unbind("click");fb.unbind("click");lb.unbind("click").click(Qa);if(2>mb.length)Oa.attr("disabled",!0).val(OLCOMP_START),fb.attr("disabled",!0);else{Sa.empty();if(0==Va.length)mb[0].val().startsWith("*")||mb[0].val().startsWith("+")||r?r?Oa.attr("disabled",!0).val(OLCOMP_SUBMIT):Oa.attr("disabled",!0).val(OLCOMP_START):Oa.removeAttr("disabled").val(OLCOMP_START).click(c);
else{for(var a=0;a<Va.length;a++)/^\$T([a-zA-Z0-9]+)\$\s*(.*)$/.exec(Va[a]),Sa.append(a+1+". "+(Ya[a]?stats.pretty(Ya[a][0]):Va[a]),"<br>");Ya.length!=Va.length||r?Oa.attr("disabled",!0):(Oa.removeAttr("disabled"),Oa.val(OLCOMP_SUBMIT).click(n))}fb.removeAttr("disabled").click(y)}kernel.blur()}function n(){if(!r){var a=exportFunc.getDataId("wcaData","cstimer_token")||exportFunc.getDataId("locData","compid")||e();if(a){var b=w();$.post("https://cstimer.net/comp.php",{action:"submit",comp:b[0],path:b[1],
uid:a,value:JSON.stringify(Ya)},function(a){'{"retcode":0}'==a?(r=!0,logohint.push("Submitted")):logohint.push("Network Error");$a()}).error(function(){logohint.push("Network Error")})}}}function y(){if(0==Ya.length||r||confirm(OLCOMP_ABORT)){f(!1,!0);var a=w(),b=gb.prop("checked")?1:0;$.post("https://cstimer.net/comp.php",{action:"result",comp:a[0],path:a[1],anonym:b},function(a){try{a=JSON.parse(a)}catch(yb){a={}}if(0!==a.retcode)logohint.push("Server Error");else{var b=$.sha256("cstimer_public_salt_"+
exportFunc.getDataId("locData","compid")),c=(exportFunc.getDataId("wcaData","wca_me")||{}).wca_id,e=a.scramble;a=$.map(a.data,function(a){var b=JSON.parse(a.value);if(5==b.length){var c=new TimeStat([5],b.length,function(a){return-1==b[a][0][0]?-1:b[a][0][0]+b[a][0][1]});c.getAllStats();return{uid:a.uid,wca_id:a.wca_id,value:b,ao5:c.lastAvg[0][0],bo5:c.bestTime}}});a.sort(function(a,b){var c=TimeStat.dnfsort(a.ao5,b.ao5);return 0==c?TimeStat.dnfsort(a.bo5,b.bo5):c});for(var h=['<table class="table"><tr><th></th><th>User</th><th>ao5</th><th>bo5</th><th>Results</th></tr>'],
f=0;f<a.length;f++){var r=a[f].uid,n=a[f].value,w=a[f].ao5,x=a[f].bo5,y=a[f].wca_id;h.push("<tr><td>"+(f+1)+"</td>");void 0!==y?(r=y?'<a target="_blank" href="https://www.worldcubeassociation.org/persons/'+y+'">'+y+"</a>":OLCOMP_WCAACCOUNT,h.push(y==c?"<th>"+OLCOMP_ME+":"+r+"</th><td>":"<td>"+r+"</td><td>")):h.push(r==b?"<th>"+OLCOMP_ME+"</th><td>":"<td>"+OLCOMP_ANONYM+"</td><td>");h.push(kernel.pretty(w)+"</td><td>"+kernel.pretty(x)+"</td><td>");for(r=0;r<n.length;r++)4<n[r].length?(n[r][1]=scramble.scrStd("",
e[r]||"")[1],h.push('<a target="_blank" class="click" href="'+stats.getReviewUrl(n[r])+'">'+stats.pretty(n[r][0])+"</a> ")):h.push(stats.pretty(n[r][0])+" ");h.push("</td>");h.push("</tr>")}h.push("</table>");Sa.empty().html(h.join(""))}}).error(function(){logohint.push("Network Error")})}}function Qa(){if(0==Ya.length||r||confirm(OLCOMP_ABORT)){f(!1,!0);var a=exportFunc.getDataId("wcaData","cstimer_token")||exportFunc.getDataId("locData","compid")||e();a&&$.post("https://cstimer.net/comp.php",{action:"myresult",
uid:a},function(a){try{a=JSON.parse(a)}catch(kb){a={}}if(0!==a.retcode)logohint.push("Server Error");else{a=a.data;for(var b=['<table class="table"><tr><th></th><th>Comp.</th><th>ao5</th><th>bo5</th><th>Results</th></tr>'],c=0;c<a.length;c++){var e=JSON.parse(a[c].value);if(5!=e.length)return;var h=new TimeStat([5],e.length,function(a){return-1==e[a][0][0]?-1:e[a][0][0]+e[a][0][1]});h.getAllStats();b.push("<tr><td>"+(c+1)+"</td>");b.push("<td>"+a[c].fullname+"|"+a[c].path+"</td>");b.push("<td>"+kernel.pretty(h.lastAvg[0][0])+
"</td>");b.push("<td>"+kernel.pretty(h.bestTime)+"</td><td>");for(h=0;h<e.length;h++)4<e[h].length?(e[h][1]=scramble.scrStd("",JSON.parse(a[c].scramble)[h]||"")[1],b.push('<a target="_blank" class="click" href="'+stats.getReviewUrl(e[h])+'">'+stats.pretty(e[h][0])+"</a> ")):b.push(stats.pretty(e[h][0])+" ");b.push("</td>");b.push("</tr>")}b.push("</table>");Sa.empty().html(b.join(""))}}).error(function(){logohint.push("Network Error")})}}function x(b,c){if(eb)if("export"==b)a();else{c=JSON.parse(JSON.stringify(c));
var e=c[1];c[1]="";c[2]="";if("timestd"==b)for(var f=Ya.length;f<h.length;f++){var r=scramble.scrStd("",h[f])[1];if(r!=e)c[0]=[-1,1],Ya.push(c);else{Ya.push(c);break}}else if("timepnt"==b)for(f=0;f<Ya.length;f++)if(r=scramble.scrStd("",h[f])[1],r==e){Ya[f]=c;break}$a()}}var Ua=$("<div>"),Ta=$('<span class="click">'),Za=$('<span class="click">'),Ra=$('<input type="button">').val(OLCOMP_UPDATELIST).click(z),Xa=$("<div>"),Sa=$('<div class="noScrollBar" style="max-height: 8em; overflow-y: auto;">'),Oa=
$('<input type="button">'),fb=$('<input type="button">').val(OLCOMP_VIEWRESULT),lb=$('<input type="button">').val(OLCOMP_VIEWMYRESULT),gb=$('<input type="checkbox">'),mb=[],ib=[],Wa={},eb=!1,Ya=[],r=!1,h=[],Va=[];$(function(){tools.regTool("onlinecomp",OLCOMP_OLCOMP,Na);kernel.regListener("onlinecomp","timestd",x);kernel.regListener("onlinecomp","timepnt",x);kernel.regListener("onlinecomp","export",x,/^account$/)});return{getScrambles:function(){return 0==Ya.length?Promise.resolve(h.slice()):Promise.reject()}}});var battle=execMain(function(){function b(a){Sa&&Oa&&Ra.isConnected()&&(!a&&Xa&&(clearTimeout(Xa),Xa=0),a&&Ra.pushMsg({action:"heartBeat",roomId:Sa,accountId:Oa}),Xa=setTimeout(b.bind(null,!0),15E3))}function Pa(a){if(a||!Sa){a=prompt(TOOLS_BATTLE_JOINALERT+" [a-zA-Z0-9]",Sa||100+~~(900*Math.random()));if(!/^[0-9a-zA-Z]{3,20}$/.exec(a)){alert("invalid room ID");return}Sa=a}Ra.isConnected()?w()&&Sa&&Ra.remoteCall({action:"joinRoom",roomId:Sa,accountId:Oa,scramble:scramble_333.getRandomScramble().trim()}).then(function(a){DEBUG&&
console.log("[battle] joinRoom ret=",JSON.stringify(a));b()}):Ra.connect().then(Pa.bind(null,!1))}function z(c){w(!0)&&Sa&&(c||confirm(TOOLS_BATTLE_LEAVEALERT+"?"))&&(Ra.remoteCall({action:"leaveRoom",roomId:Sa,accountId:Oa}).then(Ra.close,Ra.close),fb=null,a(),b())}function w(a){return!fb&&a||!Ra.isConnected()?Oa=null:Oa=exportFunc.getDataId("wcaData","cstimer_token")||exportFunc.getDataId("locData","compid")||f()}function c(a){w(!0)&&Sa&&Ra.remoteCall({action:"updateStatus",roomId:Sa,accountId:Oa,
status:a}).then(function(a){DEBUG&&console.log("[battle] update status ret=",a);b()})}function e(a,c){if(w(!0)&&Sa){var e=a[1];if(e==fb.cur[1]||e==fb.last[1])if(!lb||lb[1]!=a[1]||c&&a[0][1]==lb[0][1])lb=a,Ra.remoteCall({action:"uploadSolve",roomId:Sa,accountId:Oa,solveId:e==fb.cur[1]?fb.cur[0]:fb.last[0],time:a,scramble:scramble_333.getRandomScramble().trim()}).then(function(a){DEBUG&&console.log("[battle] upload solve ret=",a);b()})}}function a(){DEBUG&&console.log("[battle] render room",fb);fb?
y.hide():y.show();gb.empty();var a=TOOLS_BATTLE_TITLE.split("|").slice(0,3);a.splice(1,0,"ELO");gb.append($("<tr>").append($("<td colspan=5>").append(Ua[0]+": ",Ta,"&nbsp;",Za)));gb.append("<tr><td colspan=2>"+a.join("</td><td>")+"</td></tr>");Ta.unbind("click");Za.unbind("click");if(fb){Ta.removeClass("click").html(fb.roomId);Za.click(z.bind(null,!1)).show();a=fb.players;for(var b=fb.solves,c={},e=!1,f=("???|"+TOOLS_BATTLE_STATUS).split("|"),n=0;n<b.length;n++){var w=b[n],x=w.accountId;c[x]=c[x]||
{};c[x][w.solveId]=[w.time,w.soltime];w.solveId==fb.cur[0]&&(e=!0)}a.sort(function(a,b){return b.elo-a.elo});b=fb.cur[0];for(n=0;n<a.length;n++){w=a[n];x=w.accountId;-1!=x.indexOf("|")?x="<b>"+x.split("|")[1]+"</b>":10<x.length&&(x=x.slice(0,4)+"..."+x.slice(x.length-3));var Na=(c[w.accountId]||{})[b],Oa="SOLVED"==w.status,Qa=(c[w.accountId]||{})[b-1];Qa=(Qa=Oa?Na:Qa)?stats.pretty(Qa[0],!0):"N/A";e&&!Oa&&(Qa='<span style="color:#888">'+Qa+"</span>");gb.append("<tr><td>"+(n+1)+"</td><td>"+x+"</td><td>"+
w.elo+"</td><td>"+f[["READY","INSPECT","SOLVING","SOLVED","LOSS"].indexOf(w.status)+1]+"</td><td>"+Qa+"</td></tr>")}}else gb.append('<tr><td colspan=5 style="width:0;">'+TOOLS_BATTLE_INFO+"</td></tr>"),Ta.addClass("click").html(Ua[1]).click(Pa.bind(null,!0)),Za.hide()}function Na(){y.empty().append("ID: ");Qa.empty();x.empty();if(exportFunc.getDataId("wcaData","cstimer_token")){var a=exportFunc.getDataId("wcaData","wca_me").wca_id;Qa.append(a||"WCA Account"," (WCA)").click(function(){exportFunc.logoutFromWCA(!0);
Na()});y.append(Qa)}else Qa.append(EXPORT_LOGINWCA),Qa.click(function(){location.href=exportFunc.wcaLoginUrl}),a=exportFunc.getDataId("locData","compid"),x.append((a||"N/A")+" ("+OLCOMP_ANONYM+")"),y.append(x.unbind("click").click(f)," | ",Qa)}function f(){var a=prompt(OLCOMP_SUBMITAS,exportFunc.getDataId("locData","compid"));if(null==a)return!1;if(!exportFunc.isValidId(a))return alert(EXPORT_INVID),!1;localStorage.locData=JSON.stringify({id:exportFunc.getDataId("locData","id"),compid:a});Na();return a}
function $a(b,c){!b||mb?(mb=!!b,b||Ra.close()):(b.empty().append($('<div style="font-size: 0.75em; text-align: center;">').append(y,gb)),Na(),a(),mb=!0)}function n(a,b){if(mb)if("export"==a)Na();else if("timerStatus"==a){var f="READY";0<b?f="SOLVING":-2>b&&(f="INSPECT");f!=ib&&(ib=f,c(f))}else b=JSON.parse(JSON.stringify(b)),"timestd"==a?e(b,!1):"timepnt"==a&&e(b,!0)}var y=$("<div>"),Qa=$('<span class="click">'),x=$('<span class="click">'),Ua=TOOLS_BATTLE_HEAD.split("|"),Ta=$('<span class="click">').html(Ua[1]),
Za=$('<span class="click">').html("[X]"),Ra=function(){function a(a){for(n=!0;0<z.length;)z.pop()()}function b(a){n=!1;y&&y("close")}function c(a){n=!1;y&&y("error")}function e(a){a=JSON.parse(a.data);var b=a.msgid;if(b in x){var c=x[b];delete x[b];c(a)}else y&&y("msg",a)}var f,n=!1,w=1,x=[],y=null,z=[];return{connect:function(){return n?Promise.resolve():new Promise(function(h,n){z.push(h);f=new WebSocket("wss://cstimer.net/ws20230409");f.onopen=a;f.onclose=b;f.onerror=c;f.onmessage=e})},close:function(){if(!n)return-1;
f.close();n=!1;return 0},isConnected:function(){return n},setCallback:function(a){y=a},pushMsg:function(a){if(!n)return-1;f.send(JSON.stringify(a));return 0},remoteCall:function(a){return new Promise(function(b,c){n?(a.msgid=w,x[w]=b,w++,f.send(JSON.stringify(a)),setTimeout(function(a){a(-2)}.bind(null,c),5E3)):c(-1)})}}}(),Xa=0,Sa,Oa,fb,lb=[[-1,1],null];Ra.setCallback(function(b,c){"msg"==b?"roomInfo"in c&&(fb=c.roomInfo,fb&&fb.cur[1]&&fb.cur[1]!=lb[1]&&(Wa&&Wa(["$T333$"+fb.cur[1]]),Wa=null,"remoteBattle"!=
kernel.getProp("scrType")&&kernel.setProp("scrType","remoteBattle"))):(fb=null,"remoteBattle"==kernel.getProp("scrType")&&kernel.pushSignal("ctrl",["scramble","next"]));a()});var gb,mb=!1,ib="READY",Wa;$(function(){gb=$('<table class="table">');tools.regTool("battle",TOOLS_BATTLE,$a);kernel.regListener("battle","timestd",n);kernel.regListener("battle","timepnt",n);kernel.regListener("battle","timerStatus",n);kernel.regListener("battle","export",n,/^account$/)});return{getScrambles:function(){return fb?
fb.cur[1]&&fb.cur[1]!=lb[1]?Promise.resolve(["$T333$"+fb.cur[1]]):new Promise(function(a,b){Wa=a}):Promise.reject()}}});execMain(function(){function b(){var a=prompt(TOOLS_SYNCSEED_INPUTA);kernel.blur();null!=a&&(/^[a-zA-Z0-9]+$/.exec(a)?Pa(a):logohint.push("Invalid Value"))}function Pa(b){n=!0;y=y||mathlib.getSeed();mathlib.setSeed(0,"syncseed"+b);scramble.setCacheEnable(!1);a.html(b).addClass("click");kernel.pushSignal("ctrl",["scramble","next"])}function z(){n&&confirm(TOOLS_SYNCSEED_DISABLE)&&(n&&(n=!1,mathlib.setSeed(0,y[1]+""+y[0]),y=void 0,scramble.setCacheEnable(!0),kernel.pushSignal("ctrl",["scramble","next"])),
a.html("N/A").unbind("click").removeClass("click"))}function w(){Pa(""+~~((new Date).getTime()/1E3/30));kernel.blur()}function c(){alert(TOOLS_SYNCSEED_HELP)}function e(e){e&&e.empty().append(TOOLS_SYNCSEED_SEED,Na.unbind("click").click(c),": ",a.unbind("click").click(z)).append("<br><br>",f.unbind("click").click(b)).append("<br>",$a.unbind("click").click(w))}var a=$("<span>").html("N/A"),Na=$('<span class="click">').html("[?]"),f=$('<input type="button">').val(TOOLS_SYNCSEED_INPUT),$a=$('<input type="button">').val(TOOLS_SYNCSEED_30S),
n=!1,y;$(function(){tools.regTool("syncseed",TOOLS_SYNCSEED,e)})});var bldhelper=execMain(function(){function b(a,c){if(void 0==c){for(var e=[],h=0;h<a;h++){var f=b(a,h+1);e.push.apply(e,f)}return e}if(a<c||1>a||1>c)return[];if(a==c)return[mathlib.valuedArray(a,1)];e=b(a-1,c-1);for(h=0;h<e.length;h++)e[h].push(1);var n=b(a-c,c);for(h=0;h<n.length;h++){f=n[h];for(var r=0;r<f.length;r++)f[r]++}return e.concat(n)}function Pa(a,b,c,e,f,n,r,w,x){for(var h=0,y=0,z=0,Na=0;Na<w.length;Na++)1==w[Na]?y++:(z+=w[Na],h++);x&&3==(a&3)&&(a&=-3);var Oa=0,Qa=null;for(Na=0;3>Na;Na++)if(0!=
(a>>Na&1)){var Pa=h-(Na>>1),Ra=z+h-2*(Na>>1);if(!(Pa<f[0]||Pa>f[1]||Ra<n[0]||Ra>n[1])){Ra=1==Na?1:0;var Sa=c+Ra;Pa=b+c+(2>Na?1:0);if(!(y<Math.max(Pa,e[0]+Ra)||c>e[1])){var Va=y-Pa,Ta=0,Ua=null,Ya=0;for(Ra=Math.max(e[0]-c,0);Ra<=Math.min(e[1]-c,Va);Ra++){var Wa=h+y;var Xa=r,db=y-Sa-Ra,Za=Sa+Ra;if(db+Za>Wa)Wa=[0,null];else{for(var bb=0,hb=[],$a=db;$a<Wa-1;$a++){var ab=$a<db+Za?1:0;ab=mathlib.rn(Xa-ab)+ab;hb.push(ab);bb+=ab}if(db+Za<Wa)hb.push((Xa*Wa-bb)%Xa),Wa=[Math.pow(Xa-1,Za)*Math.pow(Xa,Wa-db-Za-
1),mathlib.valuedArray(db,0).concat(hb)];else{var fb=mathlib.valuedArray(Xa,0);fb[0]=1;for($a=0;$a<Za;$a++){ab=mathlib.valuedArray(Xa,0);for(var eb=1;eb<Xa;eb++)for(var gb=0;gb<Xa;gb++)ab[(eb+gb)%Xa]+=fb[gb];fb=ab}if(0==fb[0])Wa=[0,null];else{for(bb=(Xa*Wa-bb)%Xa;0==bb&&0<Za;){bb=0;hb=[];for($a=db;$a<Wa-1;$a++)ab=$a<db+Za?1:0,ab=mathlib.rn(Xa-ab)+ab,hb.push(ab),bb+=ab;bb=(Xa*Wa-bb)%Xa}hb.push(bb);Wa=[fb[0],mathlib.valuedArray(db,0).concat(hb)]}}}db=Wa[0]*mathlib.Cnk[Va][Ra];Ta+=db;mathlib.rndHit(db/
Ta)&&(Ua=Wa[1],Ya=Ra)}if(0!=Ta||x){Ta*=Math.pow(r,z-h);Sa=w.slice(0,w.length-Pa);Ra=y+z-Pa;for(Wa=1;0<Sa.length;){Xa=Sa.pop();db=1;Wa*=mathlib.Cnk[Ra][Xa]*mathlib.fact[Xa-1];for(Ra-=Xa;Sa[Sa.length-1]==Xa;)Sa.pop(),db++,Wa*=mathlib.Cnk[Ra][Xa]*mathlib.fact[Xa-1],Wa/=db,Ra-=Xa;1==Xa&&2==Na&&(Wa*=z,Wa/=y+z-Pa)}Ra=(x?1:Ta)*Wa;Oa+=Ra;if(mathlib.rndHit(Ra/Oa)){Ta=[];for(Ra=0;Ra<h;Ra++){Qa=Ua.pop();Xa=w[Ra];for(db=0;db<Xa-1;db++)Wa=mathlib.rn(r),Ta.push(Wa),Qa+=r-Wa;Ta.push(Qa%r)}Qa=mathlib.rndPerm(Va);
for(Ra=0;Ra<Qa.length;Ra++)Qa[Ra]<Ya?Ta.push(Ua.pop()):Ta.push(Ua.shift());2>Na?(Ta.unshift(0==Na?Ua.shift():Ua.pop()),Ta.splice.apply(Ta,[1,0].concat(Ua))):Ta.splice.apply(Ta,[0,0].concat(Ua));Sa=w.slice(0,w.length-Pa);Qa=[];Ua=[0];db=2==Na?1:0;0==db&&(Qa[0]=[0,Ta.shift()]);for(Ra=1;Ra<z+y;Ra++)Ra>=1+b+c?(Ua[db]=Ra,db++):Qa[Ra]=[Ra,Ta.shift()];Ra=y+z-Pa;Pa=mathlib.rndPerm(Ra);2==Na&&Pa.indexOf(0)>=z&&(Ra=(Pa.indexOf(0)-mathlib.rn(z)+Ra)%Ra,Pa=Pa.slice(Ra).concat(Pa.slice(0,Ra)));Ya=[];for(Ra=0;Ra<
Sa.length;Ra++)for(Wa=Pa.slice(0,Sa[Ra]),Ya.push(Wa),Pa=Pa.slice(Sa[Ra]),Va=0;Va<Wa.length;Va++)Qa[Ua[Wa[Va]]]=[Ua[Wa[(Va+1)%Wa.length]],Ta.shift()]}}}}}return[Oa,Qa]}function z(a){for(var b=0,c=0;c<a.length;c++)b^=a[c]+1;return b&1}function w(a,c){for(var e=a.cfix.split(" "),h=[],f=[],r=/^(UFR|UFL|UBL|UBR|DFR|DFL|DBL|DBR)(\+?)$/i,w=n.split(" "),x=0;x<e.length;x++){var y=r.exec(e[x]);y&&y[1]!=w[a.cbuff[0]%8]&&(y[2]?f.push(w.indexOf(y[1])):h.push(w.indexOf(y[1])))}var Na=a.efix.split(" ");e=[];var Oa=
[];r=/^(UR|UF|UL|UB|DR|DF|DL|DB|FR|FL|BL|BR)(\+?)$/i;for(x=0;x<Na.length;x++)(y=r.exec(Na[x]))&&y[1]!=w[a.ebuff[0]%12+8]&&(y[2]?Oa.push(w.indexOf(y[1])-8):e.push(w.indexOf(y[1])-8));Na=a.ceparity;w=[0,0];y=[null,null];var Qa=b(8);for(x=0;x<Qa.length;x++){var Ra=z(Qa[x]);0!=(Na>>Ra&1)&&(r=Pa(a.cbuff[1],h.length,f.length,a.cnerrLR,a.cscycLR,a.cncodeLR,3,Qa[x]),w[Ra]+=r[0],mathlib.rndHit(r[0]/w[Ra])&&(y[Ra]=r[1]))}Qa=[0,0];var Sa=[null,null],Va=b(12);for(x=0;x<Va.length;x++)Ra=z(Va[x]),0!=(Na>>Ra&1)&&
(r=Pa(a.ebuff[1],e.length,Oa.length,a.enerrLR,a.escycLR,a.encodeLR,2,Va[x]),Qa[Ra]+=r[0],mathlib.rndHit(r[0]/Qa[Ra])&&(Sa[Ra]=r[1]));x=w[0]*Qa[0]+w[1]*Qa[1];r=[x,y[1],Sa[1]];mathlib.rndHit(w[0]*Qa[0]/x)&&(r=[x,y[0],Sa[0]]);if(!c)return r;if(0==r[0])return"N/A";w=[a.cbuff[0]%8].concat(h,f);e=[a.ebuff[0]%12].concat(e,Oa);for(x=0;8>x;x++)-1==w.indexOf(x)&&w.push(x);for(x=0;12>x;x++)-1==e.indexOf(x)&&e.push(x);h=[];f=[];for(x=0;8>x;x++)h[w[x]]=w[r[1][x][0]]|r[1][x][1]<<3;for(x=0;12>x;x++)f[e[x]]=e[r[2][x][0]]<<
1|r[2][x][1];Oa=new mathlib.CubieCube;x=mathlib.rndEl(" Rw Rw2 Rw' Fw Fw'".split(" "));e=mathlib.rndEl(["","Uw","Uw2","Uw'"]);r=Oa.selfMoveStr(x);w=Oa.selfMoveStr(e);Oa.init(h,f);Oa.ori=0;if(Oa.isEqual())return"U U'";null!=w&&Oa.selfMoveStr("URFDLB".charAt(~~(w/3))+" 2'".charAt(w%3),!0);null!=r&&Oa.selfMoveStr("URFDLB".charAt(~~(r/3))+" 2'".charAt(r%3),!0);h=Oa.toFaceCube();return(scramble_333.genFacelet(h)+" "+x+" "+e).replace(/ +/g," ")||"U U'"}function c(b){var c=$(b.target);if(b=c.attr("id")){if(/^[ce]buff[01]$/.exec(b))y[b.slice(0,
5)][~~b[5]]=~~c.val(),f();else if(b.endsWith("LR")){var e=/^(\d{1,2})-(\d{1,2})$/.exec(c.val())||/^((\d{1,2}))$/.exec(c.val());if(!e)return;var h=~~e[1];e=~~e[2];y[b]=[Math.min(h,e),Math.max(h,e)]}else if("ceparity"==b)y[b]=~~c.val();else if(b.endsWith("fix")){var w=c.val().toUpperCase().split(" ");c={};for(var x="cfix"==b?/^(UFR|UFL|UBL|UBR|DFR|DFL|DBL|DBR)(\+?)$/:/^(UR|UF|UL|UB|DR|DF|DL|DB|FR|FL|BL|BR)(\+?)$/,z=0;z<w.length;z++)(e=x.exec(w[z]))&&(c[e[1]]=e[2]);e=[];for(h in c)e.push(h+c[h]);y[b]=
e.join(" ")}else if("bldsClr"==b||"bldsEg"==b)for(e in h={cnerrLR:[0,7],cscycLR:[0,3],cncodeLR:[0,10],enerrLR:[0,11],escycLR:[0,5],encodeLR:[0,16]},"bldsClr"==b?(h.cfix="",h.efix="",h.ceparity=3):(h.cfix="UBL DFR+",h.efix="DR DF+",h.ceparity=1),h)y[e]=h[e];else if("bldsEdge"==b||"bldsCorn"==b)e=~~c.val(),b="bldsEdge"==b?"e":"c",y[b+"fix"]="",y[b+"scycLR"]="e"==b?[0,5]:[0,3],1==e?(y[b+"buff"]=[y[b+"buff"][0],1],y[b+"nerrLR"]=[0,0],y[b+"ncodeLR"]=[0,0]):2==e&&(y[b+"buff"]=[y[b+"buff"][0],7],y[b+"nerrLR"]=
"e"==b?[0,11]:[0,7],y[b+"ncodeLR"]="e"==b?[0,16]:[0,10]);else if("scheme"==b){e=c.val();if("speffz"==e)y.scheme="CJM DIF ARE BQN VKP ULG XSH WTO BM CI DE AQ VO UK XG WS JP LF RH TN";else if("chichu"==e)y.scheme="JLK ABC DFE GHI XYZ WNM OPQ RTS GH AB CD EF OP IJ KL MN QR ST WX YZ";else if("custom"==e||"customed"==e){b=prompt("Code for "+n,y.scheme);if(!b){Na();return}if(!/^([^\s]{3} ){8}([^\s]{2} ){11}[^\s]{2}$/i.exec(b)){alert("Invalid Scheme!");Na();return}y.scheme=b}f()}kernel.setProp("bldSets",
JSON.stringify(y));a(y,r)}}function e(a,b){return a[b][0]+"-"+a[b][1]}function a(a,b){b.empty();Ua.empty();fb.empty();for(var h=y.scheme,f=0;24>f;f++){var r=~~(f/8),z=f%8,Pa=n.slice(4*z,4*z+3);Pa=Pa.slice(r)+Pa.slice(0,r)+" ["+h.charAt(4*z+r)+"]";Ua.append('<option value="'+f+'">'+Pa+"</option>")}for(f=0;24>f;f++)r=~~(f/12),z=f%12,Pa=n.slice(32+3*z,3*z+34),Pa=Pa.slice(r)+Pa.slice(0,r)+" ["+h.charAt(32+3*z+r)+"]",fb.append('<option value="'+f+'">'+Pa+"</option>");Za.val(a.cfix);Ra.val(e(a,"cnerrLR"));
Xa.val(e(a,"cscycLR"));Sa.val(e(a,"cncodeLR"));gb.val(a.efix);mb.val(e(a,"enerrLR"));ib.val(e(a,"escycLR"));Wa.val(e(a,"encodeLR"));x.val(0);Oa.val(0);Ua.val(a.cbuff[0]);fb.val(a.ebuff[0]);Ta.val(a.cbuff[1]);lb.val(a.ebuff[1]);eb.val(a.ceparity);h=w(a);b.append($("<tr>").append($("<th>Coder</th>"),$("<td colspan=2>").append(Qa)));b.append($("<tr>").append($('<td colspan=3 style="width:0;">').append(Ya)));b.append($("<tr>").append($('<td colspan=3 style="height:0.2em;border:none;">')));b.append($("<tr>").append('<th colspan=3>Scrambler|<span class="click" id="bldsClr">clr</span>|<span class="click" id="bldsEg">eg.</span></th>'));
b.append($("<tr>").append($("<td>").append(eb),$("<td>").append(x),$("<td>").append(Oa)));b.append($("<tr>").append("<td>buffer</td>",$("<td>").append(Ua,Ta),$("<td>").append(fb,lb)));b.append($("<tr>").append("<td>fixed</td>",$("<td>").append(Za),$("<td>").append(gb)));b.append($("<tr>").append("<td>flip</td>",$("<td>").append(Ra),$("<td>").append(mb)));b.append($("<tr>").append("<td>ex-cyc</td>",$("<td>").append(Xa),$("<td>").append(ib)));b.append($("<tr>").append("<td>#codes</td>",$("<td>").append(Sa),
$("<td>").append(Wa)));f=h[0]/4.325200327448986E19;b.append($("<tr>").append("<td>probs</td>",$("<td colspan=2>").append((0==h[0]?0:.001>f?f.toExponential(3):Math.round(1E6*f)/1E4+"%")+(1E-8>f?"<br>N="+(1E8<h[0]?h[0].toExponential(3):h[0]):""))));b.find("input,select").css({padding:0}).unbind("change").change(c);b.find("span.click").unbind("click").click(c);b.find("td,th").css({padding:0});Na();return b}function Na(){var a=y.scheme;"CJM DIF ARE BQN VKP ULG XSH WTO BM CI DE AQ VO UK XG WS JP LF RH TN"==
a?Qa.val("speffz"):"JLK ABC DFE GHI XYZ WNM OPQ RTS GH AB CD EF OP IJ KL MN QR ST WX YZ"==a?Qa.val("chichu"):Qa.val("customed")}function f(){var a=tools.getCurScramble(),b=cubeutil.getScrambledState(a),c=y.scheme,e=y.cbuff[0],f=y.ebuff[0];a=~~(e/8);e%=8;165>>e&1&&(a=(3-a)%3);var r=~~(f/12);f%=12;for(var n=[],w=0;8>w;w++)n[w]=c.slice(4*w,4*w+3);var x=[];for(w=0;12>w;w++)x[w]=c.slice(32+3*w,3*w+34);c=[];var z=[],Na=new mathlib.CubieCube;Na.init(b.ca,b.ea);b=1<<e;for(w=0;8>w;w++)Na.ca[w]==w&&(b|=1<<
w);for(;255!=b;)if(w=Na.ca[e]&7,w==e){for(w=-1;b>>++w&1;);mathlib.circle(Na.ca,w,e);c.push(w)}else c.push(Na.ca[e]),Na.ca[e]=(Na.ca[w]+(Na.ca[e]&248))%24,Na.ca[w]=w,b|=1<<w;b=1<<f;for(w=0;12>w;w++)Na.ea[w]==2*w&&(b|=1<<w);for(;4095!=b;)if(w=Na.ea[f]>>1,w==f){for(w=-1;b>>++w&1;);mathlib.circle(Na.ea,w,f);z.push(2*w)}else z.push(Na.ea[f]),Na.ea[f]=Na.ea[w]^Na.ea[f]&1,Na.ea[w]=w<<1,b|=1<<w;e=[[],[]];for(w=0;w<c.length;w++)f=c[w]&7,Na=((c[w]>>3)+3-a)%3,165>>f&1&&(Na=(3-Na)%3),e[0].push(n[f].charAt((3-
Na)%3)),1==w%2&&e[0].push(" ");for(w=0;w<z.length;w++)f=z[w]^r,e[1].push(x[f>>1].charAt(f&1)),1==w%2&&e[1].push(" ");Ya.html("C: "+e[0].join("")+"<br>E: "+e[1].join(""))}function $a(b){b&&(tools.isPuzzle("333")?(b.empty().append(r),a(y,r),f()):b.html(IMAGE_UNAVAILABLE))}scrMgr.reg("nocache_333bldspec",function(){return w(y,!0)});var n="UFR UFL UBL UBR DFR DFL DBL DBR UR UF UL UB DR DF DL DB FR FL BL BR",y={cbuff:[0,7],cfix:"",cnerrLR:[0,7],cscycLR:[0,3],cncodeLR:[0,10],ebuff:[1,7],efix:"",enerrLR:[0,
11],escycLR:[0,5],encodeLR:[0,16],ceparity:3,scheme:"CJM DIF ARE BQN VKP ULG XSH WTO BM CI DE AQ VO UK XG WS JP LF RH TN"},Qa,x,Ua,Ta,Za,Ra,Xa,Sa,Oa,fb,lb,gb,mb,ib,Wa,eb,Ya=$('<div style="text-align:left;">'),r=$('<table style="border-spacing:0; border:none;" class="table">');$(function(){var a=JSON.parse(kernel.getProp("bldSets","{}"));for(b in y)b in a&&(y[b]=a[b]);Qa=$('<select id="scheme">');var b=[["customed","Customed"],["speffz","Speffz"],["chichu","ChiChu"],["custom","Custom"]];for(a=0;a<
b.length;a++)Qa.append('<option value="'+b[a][0]+'">'+b[a][1]+"</option>");x=$('<select id="bldsCorn">');Ua=$('<select data="bufcorn" id="cbuff0" style="width:2em">');Ta=$('<select id="cbuff1" style="width:2em">');Za=$('<input id="cfix" type="text" style="width:4em" value="" pattern="[URFDLBurfdlb +]*">');Ra=$('<input id="cnerrLR" type="text" style="width:4em" value="" pattern="d{1,2}-d{1,2}">');Xa=$('<input id="cscycLR" type="text" style="width:4em" value="" pattern="d{1,2}-d{1,2}">');Sa=$('<input id="cncodeLR" type="text" style="width:4em" value="" pattern="d{1,2}-d{1,2}">');
Oa=$('<select id="bldsEdge">');fb=$('<select data="bufedge" id="ebuff0" style="width:2em">');lb=$('<select id="ebuff1" style="width:2em">');gb=$('<input id="efix" type="text" style="width:4em" value="" pattern="[URFDLBurfdlb +]*">');mb=$('<input id="enerrLR" type="text" style="width:4em" value="" pattern="d{1,2}-d{1,2}">');ib=$('<input id="escycLR" type="text" style="width:4em" value=""> pattern="d{1,2}-d{1,2}"');Wa=$('<input id="encodeLR" type="text" style="width:4em" value="" pattern="d{1,2}-d{1,2}">');
eb=$('<select id="ceparity">');b=[["any",7],["ok",1],["flip",2],["move",4],["not ok",6],["ok/flip",3],["ok/move",5]];for(a=0;a<b.length;a++)Ta.append('<option value="'+b[a][1]+'">'+b[a][0]+"</option>"),lb.append('<option value="'+b[a][1]+'">'+b[a][0]+"</option>");b=[["parity",3],["even",1],["odd",2]];for(a=0;a<b.length;a++)eb.append('<option value="'+b[a][1]+'">'+b[a][0]+"</option>");b=[["$",0],["solved",1],["any",2]];for(a=0;a<b.length;a++)x.append('<option value="'+b[a][1]+'">'+b[a][0].replace("$",
"Corner")+"</option>"),Oa.append('<option value="'+b[a][1]+'">'+b[a][0].replace("$","Edge")+"</option>");tools.regTool("bldhelper",TOOLS_BLDHELPER,$a)})});var replay=execMain(function(){function b(a){a!=bb&&(bb=a,gb.html(bb?"":""))}function Pa(){eb&&(clearTimeout(eb),eb=0);Wa=+new Date-Va;b(1);a()}function z(a,b){return b?0>a?-1:a*Xa[Sa]:0>a?-2E3:a/Xa[Sa]}function w(b){if(b>h)for(var c=h;c<b;c++)3<Math.abs(b-1-c)?Qa.applyMoves([r[c][0]]):Qa.addMoves([r[c][0]]);else if(b<h)for(c=h-1;c>=b;c--){var e=Qa.moveInv(r[c][0]);3<Math.abs(b-1-c)?Qa.applyMoves([e]):Qa.addMoves([e])}h=b;b=r[Math.max(0,b-1)];Va=z(b?b[1]:0);a()}function c(a){a=$(a.target);if(a.hasClass("click")||
a.is("input")){var c=a.attr("data"),e=bb,n=z(Va,!0);b(0);if("l"==c)0<h&&w(h-1);else if("n"==c)h<r.length&&w(h+1);else if("p"==c)0==e&&0<r.length&&Va>=z(r[r.length-1][1])&&w(0),b(1-e),1==bb&&Pa();else if("s"==c)w(0);else if("e"==c)w(r.length);else if("r"==c)a:{a=Za.val();for(c=0;c<r.length;c++)if(r[c][1]>=a){w(c);break a}w(r.length)}else"s+"==c?(Sa=Math.min(Sa+1,Xa.length-1),Oa.html(Xa[Sa]+"x"),Va=z(n)):"s-"==c?(Sa=Math.max(Sa-1,0),Oa.html(Xa[Sa]+"x"),Va=z(n)):"a"==c?$.clipboardCopy(fb)&&logohint.push("share link copied"):
"o"==c&&((Ta=!Ta)?a.html(nb[1]):a.html(nb[0]),w(0),f(Ua))}}function e(){var a=+new Date-Wa;eb&&(clearTimeout(eb),eb=0);if(0==bb)return Va;for(;h<r.length&&z(r[h][1])<=a;)Qa.addMoves([r[h][0]]),h++;if(h>=r.length)return a;eb=setTimeout(e,z(r[h][1])-a);return a}function a(){Va=e();var c=0<r.length?r[r.length-1][1]:0;Va=Math.min(Va,z(c));Za.val(z(Va,!0));Ra.html((0<=Va?kernel.pretty(z(Va,!0)):"--")+"/"+kernel.pretty(c));for(var f=[],n=-4;5>n;n++){var w=n+h;if(0>w||w>=r.length)f[n+4]='<span style="color:#888;">~</span>',
pad=mathlib.valuedArray(ab-1," ").join("");else{var x=Qa.move2str(r[w][0]);pad=mathlib.valuedArray(ab-x.length," ").join("");Qa.isRotation(r[w][0])&&(x='<span style="color:#888;">'+x+"</span>");f[n+4]=x}0==n&&(f[n+4]="<b><u>"+f[n+4]+"</u></b>");f[n+4]=pad+f[n+4]}ib.empty();ib.html(f.join("<br>"));Va>=z(c)&&b(0);1==bb&&requestAnimFrame(a)}function Na(a,b){if(!Ta||!/^\d+$/.exec(x))return b?[]:a;var c=kernel.getProp("giiOri");if("auto"==c)return b?[]:a;if(b)return Qa.parseScramble(mathlib.CubieCube.rot2str[c]);
c=mathlib.CubieCube.rotMulI[0][~~c];var e="URFDLB".indexOf(a[2]);e=mathlib.CubieCube.rotMulM[c][3*e]/3;a=a.slice();a[2]="URFDLB".charAt(e);return a}function f(a){Ua=a;lb.attr("href","https://alg.cubing.net/?alg="+encodeURIComponent((a||"").replace(/@(\d+)/g,"/*$1*/").replace(/-/g,"&#45;"))+"&setup="+encodeURIComponent(mb||""));var b=a.split(" "),c=[];a=[];for(var e=0;e<b.length;e++){var f=/^(.*)@(\d+)$/.exec(b[e]);f&&(c.push(f[1]),a.push(~~f[2]))}b=Qa.parseScramble(c.join(" "));if(b.length!=a.length)console.log("parse error");
else{Za.attr("min",-1);Za.attr("max",a[a.length-1]);r=Na(null,!0);for(e=0;e<r.length;e++)r[e]=[r[e],-1];for(e=0;e<b.length;e++)0==a[e]&&Qa.isRotation(b[e])&&--a[e],r.push([Na(b[e]),a[e]]);for(e=ab=0;e<r.length;e++)ab=Math.max(ab,(""+Qa.move2str(r[e][0])).length);h=0;Va=z(-1);Pa()}}function $a(a,e,h){x=h||tools.puzzleType(tools.getCurScramble()[0]);h="222 333 444 555 666 777 888 999 101010 111111".split(" ").indexOf(x);mb=a;fb=(new URL("?vrcreplay="+LZString.compressToEncodedURIComponent(JSON.stringify([a,
e,x])),location)).toString();var r={puzzle:"cube3"};-1!=h?r.puzzle="cube"+(h+2):-1!=["skb","mgm","pyr","sq1","clk"].indexOf(x)&&(r.puzzle=x);kernel.showDialog([n,function(){b(0)},void 0,function(){b(0)}],"share",VRCREPLAY_TITLE,function(){puzzleFactory.init(r,$.noop,y,function(b,h){n.unbind("click").click(c);Za.unbind("input click").bind("input",c);(Qa=b)&&Qa.resize();Ya=Qa.parseScramble(a);Qa.applyMoves(Ya);f(e)})})}var n,y,Qa,x,Ua,Ta=!0,Za,Ra,Xa=[.2,.3,.5,.7,1,1.5,2,3,5],Sa=4,Oa,fb,lb,gb,mb,ib,
Wa=0,eb=0,Ya=[],r=[],h=0,Va=0,bb=0,ab=0,nb=VRCREPLAY_ORI.split("|");$(function(){n=$('<table style="height:98%">');y=$('<td style="height:80%">');Za=$('<input type="range" style="width:50%;" data="r">');Ra=$('<span style="user-select:none;"></span>');Oa=$('<span style="user-select:none;">1x</span>');lb=$('<a target="_blank">⏯Alg</a>');gb=$('<span class="click playbutton" data="%">$</span>'.replace("$","").replace("%","p"));ib=$('<td style="width:0%;font-family:monospace;white-space:pre;">');n.append($("<tr>").append($("<td>").append('<span class="click playbutton" data="%">$</span>'.replace("$",
nb[1]).replace("%","o"),"| ",lb," |",'<span class="click playbutton" data="%">$</span>'.replace("$",VRCREPLAY_SHARE).replace("%","a"))),$("<tr>").append(y,ib),$("<tr>").append($('<td style="display:flex;justify-content:center;">').append(Oa," ",Za," ",Ra)),$("<tr>").append($("<td>").append('<span class="click playbutton" data="%">$</span>'.replace("$","").replace("%","s-"),'<span class="click playbutton" data="%">$</span>'.replace("$","").replace("%","s+"),'<span class="click playbutton" data="%">$</span>'.replace("$",
"").replace("%","s"),'<span class="click playbutton" data="%">$</span>'.replace("$","").replace("%","l"),gb,'<span class="click playbutton" data="%">$</span>'.replace("$","").replace("%","n"),'<span class="click playbutton" data="%">$</span>'.replace("$","").replace("%","e"))));var a=$.urlParam("vrcreplay");if(a){$.clearUrl("vrcreplay");try{a=JSON.parse(LZString.decompressFromEncodedURIComponent(decodeURIComponent(a))),setTimeout(function(){$a(a[0],a[1],a[2])},500)}catch(ob){console.log(ob)}}});
return{popupReplay:$a,bindDomElem:function(a,b,c,e){a.hasClass("click")||a.addClass("click");a.unbind("click").click($a.bind(null,b,c,e))}}});var shortcuts=execMain(function(){function b(b,e){if(kernel.getProp("useKSC")){var a;e.altKey&&e.ctrlKey?a=w[e.which]:e.altKey?a=Pa[e.which]:e.ctrlKey&&(a=z[e.which]);void 0!=a&&(void 0==a[1]?kernel.setProp(a[0][0],a[0][1]):kernel.pushSignal(a[1],a[0]),kernel.clrKey(),kernel.blur())}}var Pa={49:[["scrType","sqrs"]],50:[["scrType","222so"]],51:[["scrType","333"]],52:[["scrType","444wca"]],53:[["scrType","555wca"]],54:[["scrType","666wca"]],55:[["scrType","777wca"]],67:[["scrType","clkwca"]],77:[["scrType",
"mgmp"]],80:[["scrType","pyrso"]],83:[["scrType","skbso"]],73:[["scrType","input"]],37:[["scramble","last"],"ctrl"],39:[["scramble","next"],"ctrl"],38:[["stats","-"],"ctrl"],40:[["stats","+"],"ctrl"],68:[["stats","clr"],"ctrl"],90:[["stats","undo"],"ctrl"]},z={49:[["stats","OK"],"ctrl"],50:[["stats","+2"],"ctrl"],51:[["stats","DNF"],"ctrl"]},w={84:[["input","t"]],73:[["input","i"]],83:[["input","s"]],77:[["input","m"]],86:[["input","v"]],71:[["input","g"]]};$(function(){kernel.regListener("shortcut",
"keydown",b);kernel.regProp("tools","useKSC",0,PROPERTY_USEKSC,[!0])})});var help=execMain(function(b,Pa,z){function w(){$(this).hasClass("enable")||c($(this).html())}function c(b){if(void 0===b)for(b in n)break;a(b)&&e(b)}function e(a,b){Qa.children().appendTo(kernel.temp);for(var c in n)$("<div />").html(c).addClass(c==a?"tab enable":"tab disable").click(w).appendTo(Qa)}function a(a,b){setTimeout(function(){n[a]&&Ua.scrollTop(Ua.scrollTop()+n[a].position().top-3)},0);return!0}function Na(){var a=ABOUT_LANG,b;for(b in n)50<n[b].position().top||(a=n[b].is("h1, h2, h3")?
n[b].html():ABOUT_LANG);e(a)}function f(a){var b=$(a.target).val();kernel.blur();$(a.target).val("...");if(b in Ta)Pa("vrcKBL",b),$a(b);else if("other"==b&&(a=z("vrcKBL"),a=Ta[a]||a,a=prompt("input keyboard layout",a))){47!=a.length&&alert("Invalid Keyboard Layout");for(b=0;b<a.length;b++)if(-1==a.indexOf(Ta.qwerty.charAt(b))){alert("Invalid Keyboard Layout");return}Pa("vrcKBL",a);$a(a)}}function $a(a){a in Ta&&(a=Ta[a]);var b=[];a=a.toUpperCase();for(var c=0;c<Za.length;c++){b.push("<tr>");for(var e=
0;e<Za[c].length;e++)b.push("<td>"+a[Za[c][e]]+"<br><span>"+Ra[c][e]+"</span></td>");b.push("</tr>")}c=$("#vrckey");c.find("tr:not(:first)").remove();e=$("<tr>");var n=$('<select id="vrckeylayout">');n.append($("<option />").val("...").html("select layout"));for(var w in Ta)n.append($("<option />").val(w).html(w));n.append($("<option />").val("other").html("..."));n.unbind("change").change(f);c.append(e.append($('<th colspan="10">').append("Layout: ",n)));c.append(b.join(""));b=Ta.qwerty.toUpperCase();
a=a.toUpperCase();w={96:192,45:189,61:187,91:219,93:221,92:220,59:186,39:222,44:188,46:190,47:191};Xa={};for(c=0;c<b.length;c++)e=b.charCodeAt(c),n=a.charCodeAt(c),e=w[e]||e,n=w[n]||n,e!=n&&(Xa[n]=e),186==n&&(Xa[59]=e)}var n={},y=$('<table class="options" />'),Qa=$("<td />"),x=$("<td />").addClass("tabValue"),Ua=$('<div class="noScrollBar helptable">');y.append($("<tr />").append(Qa,x.append(Ua)));var Ta={qwerty:"`1234567890-=qwertyuiop[]\\asdfghjkl;'zxcvbnm,./",dvorak:"`1234567890[]',.pyfgcrl/=\\aoeuidhtns-;qjkxbmwvz",
colemak:"`1234567890-=qwfpgjluy;[]\\arstdhneio'zxcvbkm,./"},Za=[[1,2,3,4,5,6,7,8,9,10],[13,14,15,16,17,18,19,20,21,22],[26,27,28,29,30,31,32,33,34,35],[37,38,39,40,41,42,43,44,45,46]],Ra=["<br>,<br>,&lt;,&gt;,  M,  M,&lt;,&gt;,<br>,<br>".split(",")," z';  B; L';Lw';  x;  x; Rw;  R; B';  z".split(";")," y';  D;  L; U'; F';  F;  U; R'; D';  y".split(";")," Dw; M';Uw'; Lw; x'; x';Rw'; Uw; M';Dw'".split(";")],Xa={};$(function(){for(var a=$("#about").children(),e=0;e<a.length;e++){var f=a.eq(e),w=f.appendTo(Ua).html();
f.is("h1, h2, h3")&&!a.eq(e+1).is("h1, h2, h3")?n[w]=f:n[ABOUT_LANG]=n[ABOUT_LANG]||f}c();$("#about").html(y);Ua.scrollTop();Ua.unbind("scroll").scroll(Na);b("vrc","vrcKBL",-6,"VRC Keyboard Layout",["qwerty"]);a=z("vrcKBL");$a(a)});return{getMappedCode:function(a){return Xa[a]||a}}},[kernel.regProp,kernel.setProp,kernel.getProp]);var stackmat=execMain(function(){function b(b){e=b;a=c.createMediaStreamSource(b);Na=c.createScriptProcessor(1024,1,1);Na.onaudioprocess=function(a){a=a.inputBuffer.getChannelData(0);for(var b=0;b<a.length;b++){y=Math.max(1E-4,y+(a[b]*a[b]-y)*Qa);var c=1/Math.sqrt(y)*a[b];x.unshift(c);if((x.pop()-c)*(Ua?1:-1)>Za&&Math.abs(c-(Ua?1:-1))-1>Ta&&Ra>.6*f){for(var e=0;e<Math.round(Ra/f);e++)$a(Ua);Ua^=1;Ra=0}else Ra>2*f&&($a(Ua),Ra-=f);Ra++;10>gb?Xa=Math.max(1E-4,Xa+(Math.pow(c-(Ua?1:-1),2)-Xa)*Qa):100<
gb&&(Xa=1)}};a.connect(Na);Na.connect(c.destination)}function Pa(a){Sa.push(a);a!=lb?(lb=a,gb=1):gb++;mb++;if(10<gb)fb=a,Sa=[],0!=Oa.length&&(Oa=[]),100<gb&&Wa.on?(Wa.on=!1,Wa.noise=Math.min(1,Xa)||0,Wa.power=y,eb(Wa)):700<mb&&(mb=100,Wa.noise=Math.min(1,Xa)||0,Wa.power=y,eb(Wa));else if(10==Sa.length)if(Sa[0]==fb||Sa[9]!=fb)Sa=Sa.slice(1);else{a=0;for(var b=8;0<b;b--)a=a<<1|(Sa[b]==fb?1:0);Oa.push(String.fromCharCode(a));a:if(a=Oa,9==a.length||10==a.length){DEBUG&&console.log("[stackmat]",a);b=/[0-9]/;
var c=a[0];if(/[ SILRCA]/.exec(c)){for(var e=64,f=1;f<a.length-3;f++){if(!b.exec(a[f]))break a;e+=~~a[f]}e==a[a.length-3].charCodeAt(0)&&z(c,6E4*~~a[1]+1E3*~~(a[2]+a[3])+~~(a[4]+a[5]+(10==a.length?a[6]:"0")),9==a.length?10:1)}}Sa=[]}}function z(a,b,c){var e=$.now();200<e-ib&&DEBUG&&console.log("[stackmat] signal miss ",e-ib);ib=e;e={};e.time_milli=b;e.unit=c;e.on=!0;kernel.getProp("stkHead")||(a="S");b=c==Wa.unit?e.time_milli>Wa.time_milli:Math.floor(e.time_milli/10)>Math.floor(Wa.time_milli/10);
e.greenLight="A"==a;e.leftHand="L"==a||"A"==a||"C"==a;e.rightHand="R"==a||"A"==a||"C"==a;e.running=("S"!=a||"S"==Wa.signalHeader)&&(" "==a||b);e.signalHeader=a;e.unknownRunning=!Wa.on;e.noise=Math.min(1,Xa)||0;e.power=y;Wa=e;mb=0;eb(Wa)}function w(a){if(lb!=fb&&1==gb&&(Sa.push(a),24==Sa.length)){for(var b=0,c=5;0<=c;c--){b*=10;for(var e=0;4>e;e++)b+=Sa[4*c+e]<<e}Sa=[];z("S",b,1)}a!=lb?(lb=a,gb=1):gb++;10<gb&&(fb=a,Sa=[],Oa=[],1E3<gb&&Wa.on?(Wa.on=!1,Wa.noise=Math.min(1,Xa)||0,Wa.power=y,eb(Wa)):4E3<
gb&&(gb=1E3,Wa.noise=Math.min(1,Xa)||0,Wa.power=y,eb(Wa)))}var c,e,a,Na,f,$a,n,y=1,Qa=1E-4,x=[],Ua=0,Ta=.2,Za=.7,Ra=0,Xa=0,Sa=[],Oa=[],fb=0,lb=0,gb=0,mb=0,ib=0,Wa={time_milli:0,unit:10,on:!1,greenLight:!1,leftHand:!1,rightHand:!1,running:!1,unknownRunning:!0,signalHeader:"I",noise:1,power:1},eb=$.noop;return{init:function(a,r,h){n=a;void 0===navigator.mediaDevices&&(navigator.mediaDevices={});void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(a){var b=navigator.webkitGetUserMedia||
navigator.mozGetUserMedia||navigator.msGetUserMedia;return b?new Promise(function(c,e){b.call(navigator,a,c,e)}):Promise.reject(Error("getUserMedia is not implemented in this browser"))});c=new (window.AudioContext||window.webkitAudioContext);"m"==n?(f=c.sampleRate/8E3,$a=w):(f=c.sampleRate/1200,$a=Pa);Qa=.001/f;x.length=Math.ceil(f/6);Sa=[];Oa=[];a={echoCancellation:!1,noiseSuppression:!1};r&&(a.deviceId={exact:r});return void 0==e?navigator.mediaDevices.getUserMedia({audio:a}).then(function(a){if("suspended"==
c.state&&!h)return Promise.reject();b(a)},console.log):Promise.resolve()},stop:function(){if(void 0!=e){try{a.disconnect(Na),Na.disconnect(c.destination),e.stop&&e.stop()}catch(Ya){}e=void 0}},updateInputDevices:function(){var a=[],b=Promise.resolve(a);return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(c){for(var e=0;e<c.length;e++){var f=c[e];"audioinput"===f.kind&&a.push([f.deviceId,f.label||"microphone "+(a.length+1)])}return b}):
b},setCallBack:function(a){eb=a}}});
execMain(function(){window.nativeStackmat&&(stackmat=function(){DEBUG&&console.log("Use Native Stackmat");var b="stackmat_callback_"+~~(1E7*Math.random()),Pa;nativeStackmat.setCallback(b);window[b]=function(b){DEBUG&&console.log(JSON.stringify(b));Pa&&Pa(b)};return{init:function(){nativeStackmat.init();return Promise.resolve()},stop:function(){nativeStackmat.stop();return Promise.resolve()},updateInputDevices:function(){return Promise.resolve([[void 0,"native"]])},setCallBack:function(b){Pa=b}}}())});var stackmatutil=execMain(function(b){function Pa(a){a?(e=!0,a.empty().append(w,"<br>","Device:&nbsp;&nbsp;",c)):e=!1}function z(){stackmat.updateInputDevices().then(function(a){c.empty();for(var b=0;b<a.length;b++)c.append($("<option>").val(a[b][0]).text(a[b][1]));c.unbind("change").change(function(){stackmat.stop();console.log("select device ",c.val());stackmat.init(void 0,c.val(),!0);kernel.blur()})})}var w=$("<span>").html("status:  unknown"),c=$('<select style="font-size: 1rem;">'),e=!1;$(function(){tools.regTool("stackmatutil",
"stackmat",Pa);kernel.regProp("timer","stkHead",0,PROPERTY_STKHEAD,[!0]);z()});return{init:function(a,b){return stackmat.init(a,void 0,b).then(z)},stop:stackmat.stop,setCallBack:function(a){stackmat.setCallBack(function(b){if(e){var c="status:  "+(b.on?"on":"off")+"<br>";c+="noise:   "+~~(100*b.noise)+"%<br>";c+="power:   "+~~(100*Math.log10(b.power))/10+"dB<br>";c+="header:  "+b.signalHeader+"<br>";c+="pad:     "+(b.leftHand?"L":" ")+(b.rightHand?"R":" ")+"<br>";c+="running: "+(b.running?"yes":"no");
w.html(c.replace(/ /g,"&nbsp;"))}a&&a(b)})}}});var GiikerCube=execMain(function(){function b(a,b){return a.toUpperCase()==b.toUpperCase()}function Pa(){return w?Promise.resolve(z&&z.clear()).then(function(){w.removeEventListener("gattserverdisconnected",f);w.gatt.disconnect();w=null}):Promise.resolve()}var z=void 0,w=null,c=function(){function a(a){b(a.target.value)}function b(a){for(var b=$.now(),c=[],e=0;20>e;e++)c.push(a.getUint8(e));if(167==c[18]){a=[176,81,104,224,86,137,237,119,38,26,193,161,210,126,150,81,93,13,236,249,89,235,88,24,113,
81,214,131,130,199,2,169,39,165,171,41];var x=c[19]>>4&15,y=c[19]&15;for(e=0;18>e;e++)c[e]+=a[e+x]+a[e+y];c=c.slice(0,18)}a=[];for(e=0;e<c.length;e++)a.push(c[e]>>4&15),a.push(c[e]&15);e=[];for(c=0;3>c;c++)for(x=8;0!=x;x>>=1)e.push(a[c+28]&x?1:0);x=new mathlib.CubieCube;y=[-1,1,-1,1,1,-1,1,-1];for(c=0;8>c;c++)x.ca[c]=a[c]-1|(3+a[c+8]*y[c])%3<<3;for(c=0;12>c;c++)x.ea[c]=a[c+16]-1<<1|e[c];e=x.toFaceCube(n,w);y=a.slice(32,40);x=[];for(c=0;c<y.length;c+=2)x.push("BDLURF".charAt(y[c]-1)+" 2'".charAt((y[c+
1]-1)%7));if(DEBUG){y=[];for(c=0;40>c;c++)y.push("0123456789abcdef".charAt(a[c]));console.log("[giiker]","Raw Data: ",a.join(""));console.log("[giiker]","Current State: ",e);console.log("[giiker]","A Valid Generator: ",scramble_333.genFacelet(e));console.log("[giiker]","Previous Moves: ",x.reverse().join(" "));x.reverse()}$a(e,x,[b,b],f);return[e,x]}var c=null,e=null,f,n=[[26,15,29],[20,8,9],[18,38,6],[24,27,44],[51,35,17],[45,11,2],[47,0,36],[53,42,33]],w=[[25,28],[23,12],[19,7],[21,41],[32,16],
[5,10],[3,37],[30,43],[52,34],[48,14],[46,1],[50,39]];return{init:function(n){f=n.name.startsWith("Gi")?"Giiker":"Mi Smart";return n.gatt.connect().then(function(a){c=a;return a.getPrimaryService("0000aadb-0000-1000-8000-00805f9b34fb")}).then(function(a){return a.getCharacteristic("0000aadc-0000-1000-8000-00805f9b34fb")}).then(function(a){e=a;return e.startNotifications()}).then(function(){return e.readValue()}).then(function(c){b(c)[0]!=kernel.getProp("giiSolved",mathlib.SOLVED_FACELET)&&(c=kernel.getProp("giiRST"),
("a"==c||"p"==c&&confirm(CONFIRM_GIIRST))&&giikerutil.markSolved());return e.addEventListener("characteristicvaluechanged",a)})},opservs:["0000aadb-0000-1000-8000-00805f9b34fb","0000aaaa-0000-1000-8000-00805f9b34fb"],getBatteryLevel:function(){var a,b,e,n=function(a){e([a.target.value.getUint8(1),f]);b.removeEventListener("characteristicvaluechanged",n);b.stopNotifications()};return c.getPrimaryService("0000aaaa-0000-1000-8000-00805f9b34fb").then(function(b){a=b;return b.getCharacteristic("0000aaab-0000-1000-8000-00805f9b34fb")}).then(function(a){b=
a;return b.startNotifications()}).then(function(){return b.addEventListener("characteristicvaluechanged",n)}).then(function(){return a.getCharacteristic("0000aaac-0000-1000-8000-00805f9b34fb")}).then(function(a){a.writeValue((new Uint8Array([181])).buffer);return new Promise(function(a){e=a})})},clear:$.noop}}(),e=function(){function a(a){for(var b=[],c=0;c<a.byteLength;c++)b[c]=a.getUint8(c);if(null==hb)return b;a=hb.iv||[];if(16<b.length){var e=b.length-16,f=hb.decrypt(b.slice(e));for(c=0;16>c;c++)b[c+
e]=f[c]^~~a[c]}hb.decrypt(b);for(c=0;16>c;c++)b[c]^=~~a[c];return b}function c(){DEBUG&&console.log("[gancube] v1init start");return Wa.getCharacteristic("00002a28-0000-1000-8000-00805f9b34fb").then(function(a){return a.readValue()}).then(function(a){var b=a.getUint8(0)<<16|a.getUint8(1)<<8|a.getUint8(2);DEBUG&&console.log("[gancube] version",b.toString(16));hb=null;if(65543<b&&65536==(b&16776704))return Wa.getCharacteristic("00002a23-0000-1000-8000-00805f9b34fb").then(function(a){return a.readValue()}).then(function(a){var c=
kb[b>>8&255];if(c){c=JSON.parse(LZString.decompressFromEncodedURIComponent(c));for(var e=0;6>e;e++)c[e]=c[e]+a.getUint8(5-e)&255;a=c}else a=void 0;a?(DEBUG&&console.log("[gancube] key",JSON.stringify(a)),hb=$.aes128(a)):logohint.push("Not support your Gan cube")});logohint.push("Not support your Gan cube")}).then(function(){return ib.getCharacteristics()}).then(function(a){for(var c=0;c<a.length;c++){var e=a[c];DEBUG&&console.log("[gancube] v1init find chrct",e.uuid);b(e.uuid,"0000fff2-0000-1000-8000-00805f9b34fb")?
eb=e:b(e.uuid,"0000fff5-0000-1000-8000-00805f9b34fb")?Ya=e:b(e.uuid,"0000fff6-0000-1000-8000-00805f9b34fb")?r=e:b(e.uuid,"0000fff7-0000-1000-8000-00805f9b34fb")&&(h=e)}}).then(fb)}function e(){if(!w||!w.watchAdvertisements)return Promise.reject(-1);var a=new AbortController;return new Promise(function(b,c){var e=function(c){DEBUG&&console.log("[gancube] receive adv event",c);a:if(c=c.manufacturerData,!(c instanceof DataView)){for(var f=$jscomp.makeIterator(nb),h=f.next();!h.done;h=f.next())if(h=h.value,
c.has(h)){DEBUG&&console.log("[gancube] found Manufacturer Data under CIC = 0x"+h.toString(16).padStart(4,"0"));c=c.get(h);break a}DEBUG&&console.log("[gancube] Looks like this cube has new unknown CIC");c=void 0}if(c&&6<=c.byteLength){f=[];for(h=0;6>h;h++)f.push((c.getUint8(c.byteLength-h-1)+256).toString(16).slice(1));w&&w.removeEventListener("advertisementreceived",e);a.abort();b(f.join(":"))}};w.addEventListener("advertisementreceived",e);w.watchAdvertisements({signal:a.signal});setTimeout(function(){w&&
w.removeEventListener("advertisementreceived",e);a.abort();c(-2)},5E3)})}function f(a,b,c){var e=JSON.parse(kernel.getProp("giiMacMap","{}")),f=e[ob];if(!f||a)f=prompt((b?"The key provided might be wrong. ":"")+"MAC address (xx:xx:xx:xx:xx:xx) of your cube, can be found in CubeStation or about://bluetooth-internals/#devices",f||"xx:xx:xx:xx:xx:xx");/^([0-9a-f]{2}[:-]){5}[0-9a-f]{2}$/i.exec(f)?(f!=e[ob]&&(e[ob]=f,kernel.setProp("giiMacMap",JSON.stringify(e))),n(f,c)):(logohint.push("Not a valid mac address, cannot connect to your Gan cube"),
hb=null)}function n(a,b){for(var c=[],e=0;6>e;e++)c.push(parseInt(a.slice(3*e,3*e+2),16));var f=b||0;e=JSON.parse(LZString.decompressFromEncodedURIComponent(kb[2+2*f]));f=JSON.parse(LZString.decompressFromEncodedURIComponent(kb[3+2*f]));for(var h=0;6>h;h++)e[h]=(e[h]+c[5-h])%255,f[h]=(f[h]+c[5-h])%255;c=[e,f];DEBUG&&console.log("[gancube] ver=",b," key=",JSON.stringify(c));hb=$.aes128(c[0]);hb.iv=c[1]}function z(a){var b=mathlib.valuedArray(20,0);b[0]=a;if(ab){a=b.slice();if(null!=hb){for(var c=hb.iv||
[],e=0;16>e;e++)a[e]^=~~c[e];hb.encrypt(a);if(16<a.length){var f=a.length-16,h=a.slice(f);for(e=0;16>e;e++)h[e]^=~~c[e];hb.encrypt(h);for(e=0;16>e;e++)a[e+f]=h[e]}}DEBUG&&console.log("[gancube] v2sendRequest",b,a);b=ab.writeValue((new Uint8Array(a)).buffer)}else DEBUG&&console.log("[gancube] v2sendRequest cannot find v2write chrct"),b=void 0;return b}function Na(a){DEBUG&&console.log("[gancube] v2init start");Nb=0;if(db){var c=JSON.parse(kernel.getProp("giiMacMap","{}")),e=c[ob];e&&e.toUpperCase()==
db.toUpperCase()?DEBUG&&console.log("[gancube] v2init mac matched"):(DEBUG&&console.log("[gancube] v2init mac updated"),c[ob]=db,kernel.setProp("giiMacMap",JSON.stringify(c)));n(db,a)}else f(!0,!1,a);return Va.getCharacteristics().then(function(a){DEBUG&&console.log("[gancube] v2init find chrcts",a);for(var c=0;c<a.length;c++){var e=a[c];DEBUG&&console.log("[gancube] v2init find chrct",e.uuid);b(e.uuid,"28be4cb6-cd67-11e9-a32f-2a2ae2dbcce4")?bb=e:b(e.uuid,"28be4a4a-cd67-11e9-a32f-2a2ae2dbcce4")&&
(ab=e)}bb||DEBUG&&console.log("[gancube] v2init cannot find v2read chrct")}).then(function(){DEBUG&&console.log("[gancube] v2init v2read start notifications");return bb.startNotifications()}).then(function(){DEBUG&&console.log("[gancube] v2init v2read notification started");return bb.addEventListener("characteristicvaluechanged",lb)}).then(function(){return z(5)}).then(function(){return z(4)}).then(function(){return z(9)})}function Pa(){var a=$.now();DEBUG&&console.log("[gancube]","init cube state");
$a(vb,rb,[null,a],ob);cb.fromFacelet(vb);Db=xb;vb!=kernel.getProp("giiSolved",mathlib.SOLVED_FACELET)&&(a=kernel.getProp("giiRST"),("a"==a||"p"==a&&confirm(CONFIRM_GIIRST))&&giikerutil.markSolved())}function Sa(){return 50>qb?Promise.resolve(!1):eb.readValue().then(function(b){b=a(b);for(var c=[],e=0;e<b.length-2;e+=3)for(var f=b[e^1]<<16|b[e+1^1]<<8|b[e+2^1],h=21;0<=h;h-=3)c.push("URFDLB".charAt(f>>h&7)),12==h&&c.push("URFDLB".charAt(e/3));vb=c.join("");qb=0;if(-1==Db)Pa();else return Promise.resolve(!0)})}
function Oa(a,b){var c=xb-Db&255;DEBUG&&1<c&&console.log("[gancube]","bluetooth event was lost, moveDiff = "+c);Db=xb;qb+=c;c>rb.length&&(qb=50,c=rb.length);for(var e=wb+yb,f=c-1;0<=f;f--)e+=pb[f];2E3<Math.abs(a-e)&&(DEBUG&&console.log("[gancube]","time adjust",a-e,"@",a),wb+=a-e);for(f=c-1;0<=f;f--)c=3*"URFDLB".indexOf(rb[f][0])+" 2'".indexOf(rb[f][1]),mathlib.CubieCube.EdgeMult(cb,mathlib.CubieCube.moveCube[c],zb),mathlib.CubieCube.CornMult(cb,mathlib.CubieCube.moveCube[c],zb),wb+=pb[f],$a(zb.toFaceCube(),
rb.slice(f),[wb,0==f?a:null],ob+(b?"*":"")),c=zb,zb=cb,cb=c,DEBUG&&console.log("[gancube] move",rb[f],pb[f]);yb=a-wb}function fb(){if(w)return Ya.readValue().then(function(b){b=a(b);var c=$.now();xb=b[12];if(xb!=Db){rb=[];for(var e=0;6>e;e++){var f=b[13+e];rb.unshift("URFDLB".charAt(~~(f/3))+" 2'".charAt(f%3))}var h;return r.readValue().then(function(b){h=b=a(b);return Sa()}).then(function(a){if(!a){pb=[];for(var b=0;9>b;b++)pb.unshift(h[2*b+1]|h[2*b+2]<<8);Oa(c,0);a&&cb.toFaceCube()!=vb&&(DEBUG&&
console.log("[gancube]","Cube state check error"),DEBUG&&console.log("[gancube]","calc",cb.toFaceCube()),DEBUG&&console.log("[gancube]","read",vb),cb.fromFacelet(vb))}})}}).then(fb)}function lb(a){null!=hb&&gb(a.target.value)}function gb(b){var c=$.now();b=a(b);for(var e=0;e<b.length;e++)b[e]=(b[e]+256).toString(2).slice(1);b=b.join("");e=parseInt(b.slice(0,4),2);if(1!=e)if(2==e){if(DEBUG&&console.log("[gancube]","v2 received move event",b),xb=parseInt(b.slice(4,12),2),xb!=Db)if(-1==Db)Db=xb;else{pb=
[];rb=[];var f=0;for(e=0;7>e;e++){var h=parseInt(b.slice(12+5*e,17+5*e),2);pb[e]=parseInt(b.slice(47+16*e,63+16*e),2);rb[e]="URFDLB".charAt(h>>1)+" '".charAt(h&1);12<=h&&(rb[e]="U ",f=1)}Nb+=f;0==f&&Oa(c,1)}}else if(4==e){if(DEBUG&&console.log("[gancube]","v2 received facelets event",b),xb=parseInt(b.slice(4,12),2),xb==Db||-1==Db){f=new mathlib.CubieCube;h=0;var n=3840;for(e=0;7>e;e++){var r=parseInt(b.slice(12+3*e,15+3*e),2),w=parseInt(b.slice(33+2*e,35+2*e),2);n-=w<<3;n^=r;f.ca[e]=w<<3|r}f.ca[7]=
(n&4088)%24|n&7;for(e=0;11>e;e++)r=parseInt(b.slice(47+4*e,51+4*e),2),w=parseInt(b.slice(91+e,92+e),2),h^=r<<1|w,f.ea[e]=r<<1|w;f.ea[11]=h;0!=f.verify()?Nb++:(vb=f.toFaceCube(),-1==Db?Pa():cb.toFaceCube()!=vb&&(DEBUG&&console.log("[gancube]","Cube state check error"),DEBUG&&console.log("[gancube]","calc",cb.toFaceCube()),DEBUG&&console.log("[gancube]","read",vb),cb.fromFacelet(vb),$a(vb,rb,[null,c],ob+"*")),Db=xb)}}else if(5==e){DEBUG&&console.log("[gancube]","v2 received hardware info event",b);
c=parseInt(b.slice(8,16),2)+"."+parseInt(b.slice(16,24),2);f=parseInt(b.slice(24,32),2)+"."+parseInt(b.slice(32,40),2);h="";for(e=0;8>e;e++)h+=String.fromCharCode(parseInt(b.slice(40+8*e,48+8*e),2));b=1===parseInt(b.slice(104,105),2);DEBUG&&console.log("[gancube]","Hardware Version",c);DEBUG&&console.log("[gancube]","Software Version",f);DEBUG&&console.log("[gancube]","Device Name",h);DEBUG&&console.log("[gancube]","Gyro Enabled",b)}else 9==e?(DEBUG&&console.log("[gancube]","v2 received battery event",
b),Ab=parseInt(b.slice(8,16),2),giikerutil.updateBattery([Ab,ob+"*"])):DEBUG&&console.log("[gancube]","v2 received unknown event",b)}function mb(){Va=Wa=ib=null;var a=Promise.resolve();bb&&(bb.removeEventListener("characteristicvaluechanged",lb),a=bb.stopNotifications()["catch"]($.noop),bb=null);db=null;rb=[];pb=[];cb=new mathlib.CubieCube;zb=new mathlib.CubieCube;vb=mathlib.SOLVED_FACELET;wb=0;Db=-1;Ab=100;return a}var ib,Wa,eb,Ya,r,h,Va,bb,ab,nb=[1,1281],hb=null,ob=null,db=null,kb="NoRgnAHANATADDWJYwMxQOxiiEcfYgSK6Hpr4TYCs0IG1OEAbDszALpA NoNg7ANATFIQnARmogLBRUCs0oAYN8U5J45EQBmFADg0oJAOSlUQF0g NoRgNATGBs1gLABgQTjCeBWSUDsYBmKbCeMADjNnXxHIoIF0g NoRg7ANAzBCsAMEAsioxBEIAc0Cc0ATJkgSIYhXIjhMQGxgC6QA NoVgNAjAHGBMYDYCcdJgCwTFBkYVgAY9JpJYUsYBmAXSA NoRgNAbAHGAsAMkwgMyzClH0LFcArHnAJzIqIBMGWEAukA".split(" "),
rb=[],pb=[],cb=new mathlib.CubieCube,zb=new mathlib.CubieCube,vb=mathlib.SOLVED_FACELET,wb=0,yb=0,xb=-1,Db=-1,qb=1E3,Ab=100,Nb=0;$.parseV2Data=gb;return{init:function(a){mb();ob=a.name;DEBUG&&console.log("[gancube] init gan cube start");return e().then(function(a){DEBUG&&console.log("[gancube] init, found cube bluetooth hardware MAC = "+a);db=a},function(a){DEBUG&&console.log("[gancube] init, unable to automatically determine cube MAC, error code = "+a)}).then(function(){return a.gatt.connect()}).then(function(a){return a.getPrimaryServices()}).then(function(a){for(var e=
0;e<a.length;e++){var f=a[e];DEBUG&&console.log("[gancube] checkHardware find service",f.uuid);b(f.uuid,"0000180a-0000-1000-8000-00805f9b34fb")?Wa=f:b(f.uuid,"0000fff0-0000-1000-8000-00805f9b34fb")?ib=f:b(f.uuid,"6e400001-b5a3-f393-e0a9-e50e24dc4179")&&(Va=f)}if(Va)return Na((ob||"").startsWith("AiCube")?1:0);if(ib&&Wa)return c();logohint.push("Not support your Gan cube")})},opservs:["0000fff0-0000-1000-8000-00805f9b34fb","0000180a-0000-1000-8000-00805f9b34fb","6e400001-b5a3-f393-e0a9-e50e24dc4179"],
cics:nb,getBatteryLevel:function(){return Va?Promise.resolve([Ab,ob+"*"]):h?h.readValue().then(function(b){b=a(b);return Promise.resolve([b[7],ob])}):Promise.resolve([Ab,ob])},clear:mb}}(),a=function(){function a(a){a=a.target.value;var c=$.now();if(!(4>a.byteLength)&&42==a.getUint8(0)&&13==a.getUint8(a.byteLength-2)&&10==a.getUint8(a.byteLength-1)){var e=a.getUint8(2),x=a.byteLength-6;if(1==e)for(e=0;e<x;e+=2){var r=z[a.getUint8(3+e)>>1],h=[0,2][a.getUint8(3+e)&1],y=3*r+h;DEBUG&&console.log("move",
"URFDLB".charAt(r)+" 2'".charAt(h));mathlib.CubieCube.EdgeMult(mb,mathlib.CubieCube.moveCube[y],gb);mathlib.CubieCube.CornMult(mb,mathlib.CubieCube.moveCube[y],gb);lb=gb.toFaceCube();$a(lb,["URFDLB".charAt(r)+" 2'".charAt(h)],[c,c],n);r=gb;gb=mb;mb=r;20<++Pa&&(Pa=0,f.writeValue((new Uint8Array([51])).buffer))}else if(2==e){c=[];for(x=0;6>x;x++)for(r=9*z[x],h=Oa[x],c[r+4]="BFUDRL".charAt(a.getUint8(3+9*x)),e=0;8>e;e++)c[r+Na[(e+h)%8]]="BFUDRL".charAt(a.getUint8(3+9*x+e+1));a=c.join("");a!=lb&&(DEBUG&&
console.log("facelet",a),gb.fromFacelet(a))}else 3!=e&&(5==e?(w=a.getUint8(3),DEBUG&&console.log("battery level",w)):7==e?DEBUG&&console.log("offline stats",b(a)):8==e&&DEBUG&&console.log("cube type",b(a)))}}function b(a){for(var b=[],c=0;c<a.byteLength;c++)b.push(a.getUint8(c)>>4&15),b.push(a.getUint8(c)&15);return b}var c,e,f,n,w,z=[5,2,0,3,1,4],Na=[0,1,2,5,8,7,6,3],Oa=[0,0,6,2,0,0],Pa=100,lb=mathlib.SOLVED_FACELET,gb=new mathlib.CubieCube,mb=new mathlib.CubieCube;return{init:function(b){n=b.name.startsWith("GoCube")?
"GoCube":"Rubiks Connected";return b.gatt.connect().then(function(a){return a.getPrimaryService("6e400001-b5a3-f393-e0a9-e50e24dcca9e")}).then(function(a){c=a;return c.getCharacteristic("6e400002-b5a3-f393-e0a9-e50e24dcca9e")}).then(function(a){f=a;return c.getCharacteristic("6e400003-b5a3-f393-e0a9-e50e24dcca9e")}).then(function(a){e=a;return e.startNotifications()}).then(function(){return e.addEventListener("characteristicvaluechanged",a)}).then(function(){return f.writeValue((new Uint8Array([51])).buffer)})},
opservs:["6e400001-b5a3-f393-e0a9-e50e24dcca9e"],getBatteryLevel:function(){f.writeValue((new Uint8Array([50])).buffer);return Promise.resolve([w,n])},clear:$.noop}}(),Na=function(){function a(a,b){if("turn"==a){var c=b.target.value,f=$.now();if(!(1>c.byteLength)){var n=c.getUint8(0);if(!(c.byteLength<1+6*n))for(var w=0;w<n;w++){var x=1+6*w,r=c.getUint8(x+1)<<24|c.getUint8(x+0)<<16|c.getUint8(x+3)<<8|c.getUint8(x+2);r=Math.round(r/65536*1E3);var h=c.getUint8(x+4),y=Math.round(c.getUint8(x+5)/36);
x=z[h];y=z[h]+y;z[h]=(y+9)%9;h=[3,4,5,1,2,0][h];if(5<=x&&4>=y)x=2;else if(4>=x&&5<=y)x=0;else continue;r+=fb;y=3*h+x;DEBUG&&console.log("move","URFDLB".charAt(h)+" 2'".charAt(x));mathlib.CubieCube.EdgeMult(Oa,mathlib.CubieCube.moveCube[y],Pa);mathlib.CubieCube.CornMult(Oa,mathlib.CubieCube.moveCube[y],Pa);Na=Pa.toFaceCube();$a(Na,["URFDLB".charAt(h)+" 2'".charAt(x)],[r,f],e);r=Pa;Pa=Oa;Oa=r}}}}var c,e,f,n,w,z=[0,0,0,0,0,0],Na=mathlib.SOLVED_FACELET,Pa=new mathlib.CubieCube,Oa=new mathlib.CubieCube,
fb=0;return{init:function(x){e=x.name;return x.gatt.connect().then(function(a){return a.getPrimaryService("00001000-0000-1000-8000-00805f9b34fb")}).then(function(a){c=a;return c.getCharacteristics()}).then(function(a){for(var c=0;c<a.length;c++){var e=a[c];DEBUG&&console.log("[moyucube] init find chrct",e.uuid);b(e.uuid,"00001001-0000-1000-8000-00805f9b34fb")||(b(e.uuid,"00001002-0000-1000-8000-00805f9b34fb")?f=e:b(e.uuid,"00001003-0000-1000-8000-00805f9b34fb")?n=e:b(e.uuid,"00001004-0000-1000-8000-00805f9b34fb")&&
(w=e))}}).then(function(){f.addEventListener("characteristicvaluechanged",a.bind(null,"read"));n.addEventListener("characteristicvaluechanged",a.bind(null,"turn"));w.addEventListener("characteristicvaluechanged",a.bind(null,"gyro"));f.startNotifications();n.startNotifications();w.startNotifications()})},opservs:["00001000-0000-1000-8000-00805f9b34fb"],getBatteryLevel:$.noop,clear:$.noop}}(),f=function(a,b){var c=Promise.resolve();"disconnect"==a&&(c=Promise.resolve(Pa()));return c.then(function(){return"function"==
typeof n&&n(a,b)})}.bind(null,"disconnect"),$a=$.noop,n=$.noop;return{init:function(b){if(!window.navigator||!window.navigator.bluetooth)return alert("Bluetooth API is not available. Ensure https access, and try chrome with chrome://flags/#enable-experimental-web-platform-features enabled"),Promise.reject();b=Promise.resolve(!0);window.navigator.bluetooth.getAvailability&&(b=window.navigator.bluetooth.getAvailability());return b.then(function(b){DEBUG&&console.log("[bluetooth]","is available",b);
return b?window.navigator.bluetooth.requestDevice({filters:[{namePrefix:"Gi"},{namePrefix:"Mi Smart"},{namePrefix:"GAN"},{namePrefix:"MG"},{namePrefix:"AiCube"},{namePrefix:"GoCube"},{namePrefix:"Rubiks"},{namePrefix:"MHC"}],optionalServices:[].concat(c.opservs,e.opservs,a.opservs,Na.opservs),optionalManufacturerData:[].concat(e.cics)}):Promise.reject("Bluetooth is not available. Ensure HTTPS access, and check bluetooth is enabled on your device")}).then(function(b){DEBUG&&console.log("[bluetooth]",
b);w=b;b.addEventListener("gattserverdisconnected",f);return b.name.startsWith("Gi")||b.name.startsWith("Mi Smart Magic Cube")?(z=c,c.init(b)):b.name.startsWith("GAN")||b.name.startsWith("MG")||b.name.startsWith("AiCube")?(z=e,e.init(b)):b.name.startsWith("GoCube")||b.name.startsWith("Rubiks")?(z=a,a.init(b)):b.name.startsWith("MHC")?(z=Na,Na.init(b)):Promise.reject("Cannot detect device type")})},stop:Pa,isConnected:function(){return null!=w},setCallback:function(a){$a=a},setEventCallback:function(a){n=
a},getCube:function(){return z}}});var GanTimerState={};GanTimerState[GanTimerState.DISCONNECT=0]="DISCONNECT";GanTimerState[GanTimerState.GET_SET=1]="GET_SET";GanTimerState[GanTimerState.HANDS_OFF=2]="HANDS_OFF";GanTimerState[GanTimerState.RUNNING=3]="RUNNING";GanTimerState[GanTimerState.STOPPED=4]="STOPPED";GanTimerState[GanTimerState.IDLE=5]="IDLE";GanTimerState[GanTimerState.HANDS_ON=6]="HANDS_ON";GanTimerState[GanTimerState.FINISHED=7]="FINISHED";
var GanTimerDriver=execMain(function(){function b(a){var b=[];if(a)for(var c=0;c<a.byteLength;c++)b.push(a.getUint8(c).toString(16).padStart(2,"0"));return b.join(" ")}function Pa(c){c=c.target.value;try{if(c&&0!=c.byteLength&&254==c.getUint8(0)){var e=c.getUint16(c.byteLength-2,!0),f=c.buffer.slice(2,c.byteLength-2),w=new DataView(f);f=65535;for(var z=0;z<w.byteLength;++z){f^=w.getUint8(z)<<8;for(var x=0;8>x;++x)f=0<(f&32768)?f<<1^4129:f<<1}var Na=e==(f&65535)}else Na=!1}catch(Ta){Na=!1}Na?"function"==
typeof a&&(Na=a,e={state:c.getUint8(3)},e.state==GanTimerState.STOPPED&&(w=c.getUint8(4),f=c.getUint8(5),c=c.getUint16(6,!0),e.recordedTime={minutes:w,seconds:f,milliseconds:c,asTimestamp:6E4*w+1E3*f+c}),Na(e)):console.log("[GanTimerDriver] Invalid event data received from Timer: "+b(c))}function z(){c().then(function(){"function"==typeof a&&a({state:GanTimerState.DISCONNECT})})}function w(a){var b=new AbortController;return new Promise(function(c,e){if(a.watchAdvertisements){var f=function(e){DEBUG&&
console.log("[GanTimerDriver] received advertisement packet from device",e);delete a.stopWaiting;a.removeEventListener("advertisementreceived",f);b.abort();c(a)};a.stopWaiting=function(){DEBUG&&console.log("[GanTimerDriver] cancel waiting for device advertisements");delete a.stopWaiting;a.removeEventListener("advertisementreceived",f);b.abort()};a.addEventListener("advertisementreceived",f);a.watchAdvertisements({signal:b.signal});DEBUG&&console.log("[GanTimerDriver] start waiting for device advertisement packet")}else e("Bluetooth Advertisements API is not supported by this browser")})}
function c(){e&&e.stopWaiting&&e.stopWaiting();return Na?(DEBUG&&console.log("[GanTimerDriver] disconnecting from timer device"),Na.service.device.removeEventListener("gattserverdisconnected",z),Na.removeEventListener("characteristicvaluechanged",Pa),Na.stopNotifications()["catch"]($.noop)["finally"](function(){Na.service.device.gatt.disconnect();Na=void 0})):Promise.resolve()}var e,a,Na;return{connect:function(a){if(!window.navigator.bluetooth)return Promise.reject("Bluetooth API is not supported by this browser. Try fresh Chrome version!");
var b=Promise.resolve(!0);window.navigator.bluetooth.getAvailability&&(b=window.navigator.bluetooth.getAvailability());return b.then(function(a){if(!a)return Promise.reject("Bluetooth is not available. Ensure HTTPS access, and check bluetooth is enabled on your device")}).then(function(){DEBUG&&console.log("[GanTimerDriver] requesting for bluetooth device, reconnect = "+!!a);return e&&a?w(e):navigator.bluetooth.requestDevice({filters:[{namePrefix:"GAN"},{namePrefix:"gan"},{namePrefix:"Gan"}],optionalServices:["0000fff0-0000-1000-8000-00805f9b34fb"]})}).then(function(a){DEBUG&&
console.log("[GanTimerDriver] connecting to GATT server");e=a;a.addEventListener("gattserverdisconnected",z);return a.gatt.connect()}).then(function(a){DEBUG&&console.log("[GanTimerDriver] getting timer primary service");return a.getPrimaryService("0000fff0-0000-1000-8000-00805f9b34fb")}).then(function(a){DEBUG&&console.log("[GanTimerDriver] getting timer state characteristic");return a.getCharacteristic("0000fff5-0000-1000-8000-00805f9b34fb")}).then(function(a){DEBUG&&console.log("[GanTimerDriver] start listening to state characteristic value updates");
Na=a;Na.addEventListener("characteristicvaluechanged",Pa);Na.startNotifications()})},isConnected:function(){return!!Na},disconnect:c,setStateUpdateCallback:function(b){a=b}}});var csTimerWorker=execBoth(function(){if(!window.Worker)return{};var b=new Worker("js/cstimer.js"),Pa={},z=0;b.onmessage=function(b){b=b.data;var c=Pa[b[0]];delete Pa[b[0]];c&&c(b[2])};b.postMessage([0,"set",["SCRAMBLE_NOOBST",SCRAMBLE_NOOBST]]);b.postMessage([0,"set",["SCRAMBLE_NOOBSS",SCRAMBLE_NOOBSS]]);return{getScramble:function(w,c){++z;Pa[z]=c;b.postMessage([z,"scramble",w]);return z}}},function(){self.onmessage=function(b){var Pa=b.data;b=Pa[0];var z=Pa[1];Pa=Pa[2];var w=void 0;switch(z){case "scramble":w=
scrMgr.scramblers[Pa[0]];w=w.apply(w,Pa);break;case "set":self[Pa[0]]=Pa[1]}postMessage([b,z,w])};"undefined"!==typeof module&&"undefined"!==typeof module.exports&&(module.exports={getScrambleTypes:function(){var b=[],Pa;for(Pa in scrMgr.scramblers)b.push(Pa);return b},getScramble:function(){var b=scrMgr.scramblers[arguments[0]];return b.apply(b,arguments)},setGlobal:function(b,Pa){self[b]=Pa}})});
